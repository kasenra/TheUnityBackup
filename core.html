<!DOCTYPE html>
<html data-init="no-js">
<head>
<meta charset="UTF-8" />
<title>The Unity</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="application-name" content="SugarCube" />
<meta name="version" content="2.37.3" />
<!--

SugarCube (v2.37.3): A free (gratis and libre) story format.

Copyright © 2013–2021 Thomas Michael Edwards <thomasmedwards@gmail.com>.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

-->
<script id="script-libraries" type="text/javascript">
if(document.head&&document.addEventListener&&document.querySelector&&Object.create&&Object.freeze&&JSON){document.documentElement.setAttribute("data-init", "loading");
/*! @source http://purl.eligrey.com/github/classList.js/blob/1.2.20171210/classList.js */
"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||!function(t){"use strict";if("Element"in t){var e="classList",n="prototype",i=t.Element[n],s=Object,r=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},c=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},a=function(t,e){if(""===e)throw new c("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(e))throw new c("INVALID_CHARACTER_ERR","The token must not contain space characters.");return o.call(t,e)},l=function(t){for(var e=r.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],i=0,s=n.length;s>i;i++)this.push(n[i]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},u=l[n]=[],h=function(){return new l(this)};if(c[n]=Error[n],u.item=function(t){return this[t]||null},u.contains=function(t){return~a(this,t+"")},u.add=function(){var t,e=arguments,n=0,i=e.length,s=!1;do t=e[n]+"",~a(this,t)||(this.push(t),s=!0);while(++n<i);s&&this._updateClassName()},u.remove=function(){var t,e,n=arguments,i=0,s=n.length,r=!1;do for(t=n[i]+"",e=a(this,t);~e;)this.splice(e,1),r=!0,e=a(this,t);while(++i<s);r&&this._updateClassName()},u.toggle=function(t,e){var n=this.contains(t),i=n?e!==!0&&"remove":e!==!1&&"add";return i&&this[i](t),e===!0||e===!1?e:!n},u.replace=function(t,e){var n=a(t+"");~n&&(this.splice(n,1,e),this._updateClassName())},u.toString=function(){return this.join(" ")},s.defineProperty){var f={get:h,enumerable:!0,configurable:!0};try{s.defineProperty(i,e,f)}catch(p){void 0!==p.number&&-2146823252!==p.number||(f.enumerable=!1,s.defineProperty(i,e,f))}}else s[n].__defineGetter__&&i.__defineGetter__(e,h)}}(self),function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,i=arguments.length;for(n=0;i>n;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(t,e){var n=this.toString().split(" "),i=n.indexOf(t+"");~i&&(n=n.slice(i),this.remove.apply(this,n),this.add(e),this.add.apply(this,n.slice(1)))}),t=null}());
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2020 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/v4.5.14/LICENSE
 */
(function(t,r){"use strict";if(typeof define==="function"&&define.amd){define(r)}else if(typeof exports==="object"){module.exports=r()}else{t.returnExports=r()}})(this,function(){var t=Array;var r=t.prototype;var e=Object;var n=e.prototype;var i=Function;var a=i.prototype;var o=String;var f=o.prototype;var u=Number;var l=u.prototype;var s=r.slice;var c=r.splice;var v=r.push;var h=r.unshift;var p=r.concat;var y=r.join;var d=a.call;var g=a.apply;var w=Math.max;var b=Math.min;var T=n.toString;var m=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var D;var S=Function.prototype.toString,x=/^\s*class /,O=function isES6ClassFn(t){try{var r=S.call(t);var e=r.replace(/\/\/.*\n/g,"");var n=e.replace(/\/\*[.\s\S]*\*\//g,"");var i=n.replace(/\n/gm," ").replace(/ {2}/g," ");return x.test(i)}catch(a){return false}},E=function tryFunctionObject(t){try{if(O(t)){return false}S.call(t);return true}catch(r){return false}},j="[object Function]",I="[object GeneratorFunction]",D=function isCallable(t){if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(m){return E(t)}if(O(t)){return false}var r=T.call(t);return r===j||r===I};var M;var U=RegExp.prototype.exec,$=function tryRegexExec(t){try{U.call(t);return true}catch(r){return false}},F="[object RegExp]";M=function isRegex(t){if(typeof t!=="object"){return false}return m?$(t):T.call(t)===F};var N;var C=String.prototype.valueOf,k=function tryStringObject(t){try{C.call(t);return true}catch(r){return false}},A="[object String]";N=function isString(t){if(typeof t==="string"){return true}if(typeof t!=="object"){return false}return m?k(t):T.call(t)===A};var R=e.defineProperty&&function(){try{var t={};e.defineProperty(t,"x",{enumerable:false,value:t});for(var r in t){return false}return t.x===t}catch(n){return false}}();var P=function(t){var r;if(R){r=function(t,r,n,i){if(!i&&r in t){return}e.defineProperty(t,r,{configurable:true,enumerable:false,writable:true,value:n})}}else{r=function(t,r,e,n){if(!n&&r in t){return}t[r]=e}}return function defineProperties(e,n,i){for(var a in n){if(t.call(n,a)){r(e,a,n[a],i)}}}}(n.hasOwnProperty);var J=function isPrimitive(t){var r=typeof t;return t===null||r!=="object"&&r!=="function"};var Y=u.isNaN||function isActualNaN(t){return t!==t};var z={ToInteger:function ToInteger(t){var r=+t;if(Y(r)){r=0}else if(r!==0&&r!==1/0&&r!==-(1/0)){r=(r>0||-1)*Math.floor(Math.abs(r))}return r},ToPrimitive:function ToPrimitive(t){var r,e,n;if(J(t)){return t}e=t.valueOf;if(D(e)){r=e.call(t);if(J(r)){return r}}n=t.toString;if(D(n)){r=n.call(t);if(J(r)){return r}}throw new TypeError},ToObject:function(t){if(t==null){throw new TypeError("can't convert "+t+" to object")}return e(t)},ToUint32:function ToUint32(t){return t>>>0}};var Z=function Empty(){};P(a,{bind:function bind(t){var r=this;if(!D(r)){throw new TypeError("Function.prototype.bind called on incompatible "+r)}var n=s.call(arguments,1);var a;var o=function(){if(this instanceof a){var i=g.call(r,this,p.call(n,s.call(arguments)));if(e(i)===i){return i}return this}else{return g.call(r,t,p.call(n,s.call(arguments)))}};var f=w(0,r.length-n.length);var u=[];for(var l=0;l<f;l++){v.call(u,"$"+l)}a=i("binder","return function ("+y.call(u,",")+"){ return binder.apply(this, arguments); }")(o);if(r.prototype){Z.prototype=r.prototype;a.prototype=new Z;Z.prototype=null}return a}});var G=d.bind(n.hasOwnProperty);var H=d.bind(n.toString);var W=d.bind(s);var B=g.bind(s);if(typeof document==="object"&&document&&document.documentElement){try{W(document.documentElement.childNodes)}catch(X){var L=W;var q=B;W=function arraySliceIE(t){var r=[];var e=t.length;while(e-- >0){r[e]=t[e]}return q(r,L(arguments,1))};B=function arraySliceApplyIE(t,r){return q(W(t),r)}}}var K=d.bind(f.slice);var Q=d.bind(f.split);var V=d.bind(f.indexOf);var _=d.bind(v);var tt=d.bind(n.propertyIsEnumerable);var rt=d.bind(r.sort);var et=t.isArray||function isArray(t){return H(t)==="[object Array]"};var nt=[].unshift(0)!==1;P(r,{unshift:function(){h.apply(this,arguments);return this.length}},nt);P(t,{isArray:et});var it=e("a");var at=it[0]!=="a"||!(0 in it);var ot=function properlyBoxed(t){var r=true;var e=true;var n=false;if(t){try{t.call("foo",function(t,e,n){if(typeof n!=="object"){r=false}});t.call([1],function(){"use strict";e=typeof this==="string"},"x")}catch(i){n=true}}return!!t&&!n&&r&&e};P(r,{forEach:function forEach(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=-1;var i=z.ToUint32(e.length);var a;if(arguments.length>1){a=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.forEach callback must be a function")}while(++n<i){if(n in e){if(typeof a==="undefined"){t(e[n],n,r)}else{t.call(a,e[n],n,r)}}}}},!ot(r.forEach));P(r,{map:function map(r){var e=z.ToObject(this);var n=at&&N(this)?Q(this,""):e;var i=z.ToUint32(n.length);var a=t(i);var o;if(arguments.length>1){o=arguments[1]}if(!D(r)){throw new TypeError("Array.prototype.map callback must be a function")}for(var f=0;f<i;f++){if(f in n){if(typeof o==="undefined"){a[f]=r(n[f],f,e)}else{a[f]=r.call(o,n[f],f,e)}}}return a}},!ot(r.map));P(r,{filter:function filter(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i=[];var a;var o;if(arguments.length>1){o=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.filter callback must be a function")}for(var f=0;f<n;f++){if(f in e){a=e[f];if(typeof o==="undefined"?t(a,f,r):t.call(o,a,f,r)){_(i,a)}}}return i}},!ot(r.filter));P(r,{every:function every(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.every callback must be a function")}for(var a=0;a<n;a++){if(a in e&&!(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return false}}return true}},!ot(r.every));P(r,{some:function some(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.some callback must be a function")}for(var a=0;a<n;a++){if(a in e&&(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return true}}return false}},!ot(r.some));var ft=false;if(r.reduce){ft=typeof r.reduce.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduce:function reduce(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduce callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduce of empty array with no initial value")}var i=0;var a;if(arguments.length>=2){a=arguments[1]}else{do{if(i in e){a=e[i++];break}if(++i>=n){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;i<n;i++){if(i in e){a=t(a,e[i],i,r)}}return a}},!ft);var ut=false;if(r.reduceRight){ut=typeof r.reduceRight.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduceRight:function reduceRight(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduceRight callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduceRight of empty array with no initial value")}var i;var a=n-1;if(arguments.length>=2){i=arguments[1]}else{do{if(a in e){i=e[a--];break}if(--a<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}if(a<0){return i}do{if(a in e){i=t(i,e[a],a,r)}}while(a--);return i}},!ut);var lt=r.indexOf&&[0,1].indexOf(1,2)!==-1;P(r,{indexOf:function indexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=0;if(arguments.length>1){n=z.ToInteger(arguments[1])}n=n>=0?n:w(0,e+n);for(;n<e;n++){if(n in r&&r[n]===t){return n}}return-1}},lt);var st=r.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;P(r,{lastIndexOf:function lastIndexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=e-1;if(arguments.length>1){n=b(n,z.ToInteger(arguments[1]))}n=n>=0?n:e-Math.abs(n);for(;n>=0;n--){if(n in r&&t===r[n]){return n}}return-1}},st);var ct=function(){var t=[1,2];var r=t.splice();return t.length===2&&et(r)&&r.length===0}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}else{return c.apply(this,arguments)}}},!ct);var vt=function(){var t={};r.splice.call(t,0,0,1);return t.length===1}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}var e=arguments;this.length=w(z.ToInteger(this.length),0);if(arguments.length>0&&typeof r!=="number"){e=W(arguments);if(e.length<2){_(e,this.length-t)}else{e[1]=z.ToInteger(r)}}return c.apply(this,e)}},!vt);var ht=function(){var r=new t(1e5);r[8]="x";r.splice(1,1);return r.indexOf("x")===7}();var pt=function(){var t=256;var r=[];r[t]="a";r.splice(t+1,0,"b");return r[t]==="a"}();P(r,{splice:function splice(t,r){var e=z.ToObject(this);var n=[];var i=z.ToUint32(e.length);var a=z.ToInteger(t);var f=a<0?w(i+a,0):b(a,i);var u=arguments.length===0?0:arguments.length===1?i-f:b(w(z.ToInteger(r),0),i-f);var l=0;var s;while(l<u){s=o(f+l);if(G(e,s)){n[l]=e[s]}l+=1}var c=W(arguments,2);var v=c.length;var h;if(v<u){l=f;var p=i-u;while(l<p){s=o(l+u);h=o(l+v);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l+=1}l=i;var y=i-u+v;while(l>y){delete e[l-1];l-=1}}else if(v>u){l=i-u;while(l>f){s=o(l+u-1);h=o(l+v-1);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l-=1}}l=f;for(var d=0;d<c.length;++d){e[l]=c[d];l+=1}e.length=i-u+v;return n}},!ht||!pt);var yt=r.join;var dt;try{dt=Array.prototype.join.call("123",",")!=="1,2,3"}catch(X){dt=true}if(dt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(N(this)?Q(this,""):this,r)}},dt)}var gt=[1,2].join(undefined)!=="1,2";if(gt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(this,r)}},gt)}var wt=function push(t){var r=z.ToObject(this);var e=z.ToUint32(r.length);var n=0;while(n<arguments.length){r[e+n]=arguments[n];n+=1}r.length=e+n;return e+n};var bt=function(){var t={};var r=Array.prototype.push.call(t,undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:function push(t){if(et(this)){return v.apply(this,arguments)}return wt.apply(this,arguments)}},bt);var Tt=function(){var t=[];var r=t.push(undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:wt},Tt);P(r,{slice:function(t,r){var e=N(this)?Q(this,""):this;return B(e,arguments)}},at);var mt=function(){try{[1,2].sort(null)}catch(t){try{[1,2].sort({})}catch(r){return false}}return true}();var Dt=function(){try{[1,2].sort(/a/);return false}catch(t){}return true}();var St=function(){try{[1,2].sort(undefined);return true}catch(t){}return false}();P(r,{sort:function sort(t){if(typeof t==="undefined"){return rt(this)}if(!D(t)){throw new TypeError("Array.prototype.sort callback must be a function")}return rt(this,t)}},mt||!St||!Dt);var xt=!tt({toString:null},"toString");var Ot=tt(function(){},"prototype");var Et=!G("x","0");var jt=function(t){var r=t.constructor;return r&&r.prototype===t};var It={$applicationCache:true,$console:true,$external:true,$frame:true,$frameElement:true,$frames:true,$innerHeight:true,$innerWidth:true,$onmozfullscreenchange:true,$onmozfullscreenerror:true,$outerHeight:true,$outerWidth:true,$pageXOffset:true,$pageYOffset:true,$parent:true,$scrollLeft:true,$scrollTop:true,$scrollX:true,$scrollY:true,$self:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$window:true,$width:true,$height:true,$top:true,$localStorage:true};var Mt=function(){if(typeof window==="undefined"){return false}for(var t in window){try{if(!It["$"+t]&&G(window,t)&&window[t]!==null&&typeof window[t]==="object"){jt(window[t])}}catch(r){return true}}return false}();var Ut=function(t){if(typeof window==="undefined"||!Mt){return jt(t)}try{return jt(t)}catch(r){return false}};var $t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var Ft=$t.length;var Nt=function isArguments(t){return H(t)==="[object Arguments]"};var Ct=function isArguments(t){return t!==null&&typeof t==="object"&&typeof t.length==="number"&&t.length>=0&&!et(t)&&D(t.callee)};var kt=Nt(arguments)?Nt:Ct;P(e,{keys:function keys(t){var r=D(t);var e=kt(t);var n=t!==null&&typeof t==="object";var i=n&&N(t);if(!n&&!r&&!e){throw new TypeError("Object.keys called on a non-object")}var a=[];var f=Ot&&r;if(i&&Et||e){for(var u=0;u<t.length;++u){_(a,o(u))}}if(!e){for(var l in t){if(!(f&&l==="prototype")&&G(t,l)){_(a,o(l))}}}if(xt){var s=Ut(t);for(var c=0;c<Ft;c++){var v=$t[c];if(!(s&&v==="constructor")&&G(t,v)){_(a,v)}}}return a}});var At=e.keys&&function(){return e.keys(arguments).length===2}(1,2);var Rt=e.keys&&function(){var t=e.keys(arguments);return arguments.length!==1||t.length!==1||t[0]!==1}(1);var Pt=e.keys;P(e,{keys:function keys(t){if(kt(t)){return Pt(W(t))}else{return Pt(t)}}},!At||Rt);var Jt=new Date(-0xc782b5b342b24).getUTCMonth()!==0;var Yt=new Date(-0x55d318d56a724);var zt=new Date(14496624e5);var Zt=Yt.toUTCString()!=="Mon, 01 Jan -45875 11:59:59 GMT";var Gt;var Ht;var Wt=Yt.getTimezoneOffset();if(Wt<-720){Gt=Yt.toDateString()!=="Tue Jan 02 -45875";Ht=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}else{Gt=Yt.toDateString()!=="Mon Jan 01 -45875";Ht=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}var Bt=d.bind(Date.prototype.getFullYear);var Xt=d.bind(Date.prototype.getMonth);var Lt=d.bind(Date.prototype.getDate);var qt=d.bind(Date.prototype.getUTCFullYear);var Kt=d.bind(Date.prototype.getUTCMonth);var Qt=d.bind(Date.prototype.getUTCDate);var Vt=d.bind(Date.prototype.getUTCDay);var _t=d.bind(Date.prototype.getUTCHours);var tr=d.bind(Date.prototype.getUTCMinutes);var rr=d.bind(Date.prototype.getUTCSeconds);var er=d.bind(Date.prototype.getUTCMilliseconds);var nr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var ir=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var ar=function daysInMonth(t,r){return Lt(new Date(r,t,0))};P(Date.prototype,{getFullYear:function getFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);if(t<0&&Xt(this)>11){return t+1}return t},getMonth:function getMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);if(t<0&&r>11){return 0}return r},getDate:function getDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);var e=Lt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e},getUTCFullYear:function getUTCFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);if(t<0&&Kt(this)>11){return t+1}return t},getUTCMonth:function getUTCMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);if(t<0&&r>11){return 0}return r},getUTCDate:function getUTCDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);var e=Qt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e}},Jt);P(Date.prototype,{toUTCString:function toUTCString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Vt(this);var r=Qt(this);var e=Kt(this);var n=qt(this);var i=_t(this);var a=tr(this);var o=rr(this);return nr[t]+", "+(r<10?"0"+r:r)+" "+ir[e]+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"}},Jt||Zt);P(Date.prototype,{toDateString:function toDateString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n}},Jt||Gt);if(Jt||Ht){Date.prototype.toString=function toString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();var i=this.getHours();var a=this.getMinutes();var o=this.getSeconds();var f=this.getTimezoneOffset();var u=Math.floor(Math.abs(f)/60);var l=Math.floor(Math.abs(f)%60);return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"+(f>0?"-":"+")+(u<10?"0"+u:u)+(l<10?"0"+l:l)};if(R){e.defineProperty(Date.prototype,"toString",{configurable:true,enumerable:false,writable:true})}}var or=-621987552e5;var fr="-000001";var ur=Date.prototype.toISOString&&new Date(or).toISOString().indexOf(fr)===-1;var lr=Date.prototype.toISOString&&new Date(-1).toISOString()!=="1969-12-31T23:59:59.999Z";var sr=d.bind(Date.prototype.getTime);P(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(sr(this))){throw new RangeError("Date.prototype.toISOString called on non-finite value.")}var t=qt(this);var r=Kt(this);t+=Math.floor(r/12);r=(r%12+12)%12;var e=[r+1,Qt(this),_t(this),tr(this),rr(this)];t=(t<0?"-":t>9999?"+":"")+K("00000"+Math.abs(t),0<=t&&t<=9999?-4:-6);for(var n=0;n<e.length;++n){e[n]=K("00"+e[n],-2)}return t+"-"+W(e,0,2).join("-")+"T"+W(e,2).join(":")+"."+K("000"+er(this),-3)+"Z"}},ur||lr);var cr=function(){try{return Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(or).toJSON().indexOf(fr)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}})}catch(t){return false}}();if(!cr){Date.prototype.toJSON=function toJSON(t){var r=e(this);var n=z.ToPrimitive(r);if(typeof n==="number"&&!isFinite(n)){return null}var i=r.toISOString;if(!D(i)){throw new TypeError("toISOString property is not callable")}return i.call(r)}}var vr=Date.parse("+033658-09-27T01:46:40.000Z")===1e15;var hr=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));var pr=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(pr||hr||!vr){var yr=Math.pow(2,31)-1;var dr=Y(new Date(1970,0,1,0,0,0,yr+1).getTime());Date=function(t){var r=function Date(e,n,i,a,f,u,l){var s=arguments.length;var c;if(this instanceof t){var v=u;var h=l;if(dr&&s>=7&&l>yr){var p=Math.floor(l/yr)*yr;var y=Math.floor(p/1e3);v+=y;h-=y*1e3}c=s===1&&o(e)===e?new t(r.parse(e)):s>=7?new t(e,n,i,a,f,v,h):s>=6?new t(e,n,i,a,f,v):s>=5?new t(e,n,i,a,f):s>=4?new t(e,n,i,a):s>=3?new t(e,n,i):s>=2?new t(e,n):s>=1?new t(e instanceof t?+e:e):new t}else{c=t.apply(this,arguments)}if(!J(c)){P(c,{constructor:r},true)}return c};var e=new RegExp("^"+"(\\d{4}|[+-]\\d{6})"+"(?:-(\\d{2})"+"(?:-(\\d{2})"+"(?:"+"T(\\d{2})"+":(\\d{2})"+"(?:"+":(\\d{2})"+"(?:(\\.\\d{1,}))?"+")?"+"("+"Z|"+"(?:"+"([-+])"+"(\\d{2})"+":(\\d{2})"+")"+")?)?)?)?"+"$");var n=[0,31,59,90,120,151,181,212,243,273,304,334,365];var i=function dayFromMonth(t,r){var e=r>1?1:0;return n[r]+Math.floor((t-1969+e)/4)-Math.floor((t-1901+e)/100)+Math.floor((t-1601+e)/400)+365*(t-1970)};var a=function toUTC(r){var e=0;var n=r;if(dr&&n>yr){var i=Math.floor(n/yr)*yr;var a=Math.floor(i/1e3);e+=a;n-=a*1e3}return u(new t(1970,0,1,0,0,e,n))};for(var f in t){if(G(t,f)){r[f]=t[f]}}P(r,{now:t.now,UTC:t.UTC},true);r.prototype=t.prototype;P(r.prototype,{constructor:r},true);var l=function parse(r){var n=e.exec(r);if(n){var o=u(n[1]),f=u(n[2]||1)-1,l=u(n[3]||1)-1,s=u(n[4]||0),c=u(n[5]||0),v=u(n[6]||0),h=Math.floor(u(n[7]||0)*1e3),p=Boolean(n[4]&&!n[8]),y=n[9]==="-"?1:-1,d=u(n[10]||0),g=u(n[11]||0),w;var b=c>0||v>0||h>0;if(s<(b?24:25)&&c<60&&v<60&&h<1e3&&f>-1&&f<12&&d<24&&g<60&&l>-1&&l<i(o,f+1)-i(o,f)){w=((i(o,f)+l)*24+s+d*y)*60;w=((w+c+g*y)*60+v)*1e3+h;if(p){w=a(w)}if(-864e13<=w&&w<=864e13){return w}}return NaN}return t.parse.apply(this,arguments)};P(r,{parse:l});return r}(Date)}if(!Date.now){Date.now=function now(){return(new Date).getTime()}}var gr=l.toFixed&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||(1000000000000000128).toFixed(0)!=="1000000000000000128");var wr={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(t,r){var e=-1;var n=r;while(++e<wr.size){n+=t*wr.data[e];wr.data[e]=n%wr.base;n=Math.floor(n/wr.base)}},divide:function divide(t){var r=wr.size;var e=0;while(--r>=0){e+=wr.data[r];wr.data[r]=Math.floor(e/t);e=e%t*wr.base}},numToString:function numToString(){var t=wr.size;var r="";while(--t>=0){if(r!==""||t===0||wr.data[t]!==0){var e=o(wr.data[t]);if(r===""){r=e}else{r+=K("0000000",0,7-e.length)+e}}}return r},pow:function pow(t,r,e){return r===0?e:r%2===1?pow(t,r-1,e*t):pow(t*t,r/2,e)},log:function log(t){var r=0;var e=t;while(e>=4096){r+=12;e/=4096}while(e>=2){r+=1;e/=2}return r}};var br=function toFixed(t){var r,e,n,i,a,f,l,s;r=u(t);r=Y(r)?0:Math.floor(r);if(r<0||r>20){throw new RangeError("Number.toFixed called with invalid number of decimals")}e=u(this);if(Y(e)){return"NaN"}if(e<=-1e21||e>=1e21){return o(e)}n="";if(e<0){n="-";e=-e}i="0";if(e>1e-21){a=wr.log(e*wr.pow(2,69,1))-69;f=a<0?e*wr.pow(2,-a,1):e/wr.pow(2,a,1);f*=4503599627370496;a=52-a;if(a>0){wr.multiply(0,f);l=r;while(l>=7){wr.multiply(1e7,0);l-=7}wr.multiply(wr.pow(10,l,1),0);l=a-1;while(l>=23){wr.divide(1<<23);l-=23}wr.divide(1<<l);wr.multiply(1,1);wr.divide(2);i=wr.numToString()}else{wr.multiply(0,f);wr.multiply(1<<-a,0);i=wr.numToString()+K("0.00000000000000000000",2,2+r)}}if(r>0){s=i.length;if(s<=r){i=n+K("0.0000000000000000000",0,r-s+2)+i}else{i=n+K(i,0,s-r)+"."+K(i,s-r)}}else{i=n+i}return i};P(l,{toFixed:br},gr);var Tr=function(){try{return 1..toPrecision(undefined)==="1"}catch(t){return true}}();var mr=l.toPrecision;P(l,{toPrecision:function toPrecision(t){return typeof t==="undefined"?mr.call(this):mr.call(this,t)}},Tr);if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var t=typeof/()??/.exec("")[1]==="undefined";var r=Math.pow(2,32)-1;f.split=function(e,n){var i=String(this);if(typeof e==="undefined"&&n===0){return[]}if(!M(e)){return Q(this,e,n)}var a=[];var o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,u,l,s,c;var h=new RegExp(e.source,o+"g");if(!t){u=new RegExp("^"+h.source+"$(?!\\s)",o)}var p=typeof n==="undefined"?r:z.ToUint32(n);l=h.exec(i);while(l){s=l.index+l[0].length;if(s>f){_(a,K(i,f,l.index));if(!t&&l.length>1){l[0].replace(u,function(){for(var t=1;t<arguments.length-2;t++){if(typeof arguments[t]==="undefined"){l[t]=void 0}}})}if(l.length>1&&l.index<i.length){v.apply(a,W(l,1))}c=l[0].length;f=s;if(a.length>=p){break}}if(h.lastIndex===l.index){h.lastIndex++}l=h.exec(i)}if(f===i.length){if(c||!h.test("")){_(a,"")}}else{_(a,K(i,f))}return a.length>p?W(a,0,p):a}})()}else if("0".split(void 0,0).length){f.split=function split(t,r){if(typeof t==="undefined"&&r===0){return[]}return Q(this,t,r)}}var Dr=f.replace;var Sr=function(){var t=[];"x".replace(/x(.)?/g,function(r,e){_(t,e)});return t.length===1&&typeof t[0]==="undefined"}();if(!Sr){f.replace=function replace(t,r){var e=D(r);var n=M(t)&&/\)[*?]/.test(t.source);if(!e||!n){return Dr.call(this,t,r)}else{var i=function(e){var n=arguments.length;var i=t.lastIndex;t.lastIndex=0;var a=t.exec(e)||[];t.lastIndex=i;_(a,arguments[n-2],arguments[n-1]);return r.apply(this,a)};return Dr.call(this,t,i)}}}var xr=f.substr;var Or="".substr&&"0b".substr(-1)!=="b";P(f,{substr:function substr(t,r){var e=t;if(t<0){e=w(this.length+t,0)}return xr.call(this,e,r)}},Or);var Er="\t\n\x0B\f\r \xa0\u1680\u2000\u2001\u2002\u2003"+"\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028"+"\u2029\ufeff";var jr="\u200b";var Ir="["+Er+"]";var Mr=new RegExp("^"+Ir+Ir+"*");var Ur=new RegExp(Ir+Ir+"*$");var $r=f.trim&&(Er.trim()||!jr.trim());P(f,{trim:function trim(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}return o(this).replace(Mr,"").replace(Ur,"")}},$r);var Fr=d.bind(String.prototype.trim);var Nr=f.lastIndexOf&&"abc\u3042\u3044".lastIndexOf("\u3042\u3044",2)!==-1;P(f,{lastIndexOf:function lastIndexOf(t){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var r=o(this);var e=o(t);var n=arguments.length>1?u(arguments[1]):NaN;var i=Y(n)?Infinity:z.ToInteger(n);var a=b(w(i,0),r.length);var f=e.length;var l=a+f;while(l>0){l=w(0,l-f);var s=V(K(r,l,a+f),e);if(s!==-1){return l+s}}return-1}},Nr);var Cr=f.lastIndexOf;P(f,{lastIndexOf:function lastIndexOf(t){return Cr.apply(this,arguments)}},f.lastIndexOf.length!==1);if(parseInt(Er+"08")!==8||parseInt(Er+"0x16")!==22){parseInt=function(t){var r=/^[-+]?0[xX]/;return function parseInt(e,n){if(typeof e==="symbol"){""+e}var i=Fr(String(e));var a=u(n)||(r.test(i)?16:10);return t(i,a)}}(parseInt)}if(1/parseFloat("-0")!==-Infinity){parseFloat=function(t){return function parseFloat(r){var e=Fr(String(r));var n=t(e);return n===0&&K(e,0,1)==="-"?-0:n}}(parseFloat)}if(String(new RangeError("test"))!=="RangeError: test"){var kr=function toString(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var t=this.name;if(typeof t==="undefined"){t="Error"}else if(typeof t!=="string"){t=o(t)}var r=this.message;if(typeof r==="undefined"){r=""}else if(typeof r!=="string"){r=o(r)}if(!t){return r}if(!r){return t}return t+": "+r};Error.prototype.toString=kr}if(R){var Ar=function(t,r){if(tt(t,r)){var e=Object.getOwnPropertyDescriptor(t,r);if(e.configurable){e.enumerable=false;Object.defineProperty(t,r,e)}}};Ar(Error.prototype,"message");if(Error.prototype.message!==""){Error.prototype.message=""}Ar(Error.prototype,"name")}if(String(/a/gim)!=="/a/gim"){var Rr=function toString(){var t="/"+this.source+"/";if(this.global){t+="g"}if(this.ignoreCase){t+="i"}if(this.multiline){t+="m"}return t};RegExp.prototype.toString=Rr}});
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.4/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.returnExports=t()}})(this,function(){"use strict";var e=Function.call.bind(Function.apply);var t=Function.call.bind(Function.call);var r=Array.isArray;var n=Object.keys;var o=function notThunker(t){return function notThunk(){return!e(t,this,arguments)}};var i=function(e){try{e();return false}catch(t){return true}};var a=function valueOrFalseIfThrows(e){try{return e()}catch(t){return false}};var u=o(i);var f=function(){return!i(function(){return Object.defineProperty({},"x",{get:function(){}})})};var s=!!Object.defineProperty&&f();var c=function foo(){}.name==="foo";var l=Function.call.bind(Array.prototype.forEach);var p=Function.call.bind(Array.prototype.reduce);var v=Function.call.bind(Array.prototype.filter);var y=Function.call.bind(Array.prototype.some);var h=function(e,t,r,n){if(!n&&t in e){return}if(s){Object.defineProperty(e,t,{configurable:true,enumerable:false,writable:true,value:r})}else{e[t]=r}};var b=function(e,t,r){l(n(t),function(n){var o=t[n];h(e,n,o,!!r)})};var g=Function.call.bind(Object.prototype.toString);var d=typeof/abc/==="function"?function IsCallableSlow(e){return typeof e==="function"&&g(e)==="[object Function]"}:function IsCallableFast(e){return typeof e==="function"};var m={getter:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}Object.defineProperty(e,t,{configurable:true,enumerable:false,get:r})},proxy:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,{configurable:n.configurable,enumerable:n.enumerable,get:function getKey(){return e[t]},set:function setKey(r){e[t]=r}})},redefine:function(e,t,r){if(s){var n=Object.getOwnPropertyDescriptor(e,t);n.value=r;Object.defineProperty(e,t,n)}else{e[t]=r}},defineByDescriptor:function(e,t,r){if(s){Object.defineProperty(e,t,r)}else if("value"in r){e[t]=r.value}},preserveToString:function(e,t){if(t&&d(t.toString)){h(e,"toString",t.toString.bind(t),true)}}};var O=Object.create||function(e,t){var r=function Prototype(){};r.prototype=e;var o=new r;if(typeof t!=="undefined"){n(t).forEach(function(e){m.defineByDescriptor(o,e,t[e])})}return o};var w=function(e,t){if(!Object.setPrototypeOf){return false}return a(function(){var r=function Subclass(t){var r=new e(t);Object.setPrototypeOf(r,Subclass.prototype);return r};Object.setPrototypeOf(r,e);r.prototype=O(e.prototype,{constructor:{value:r}});return t(r)})};var j=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")};var S=j();var T=S.isFinite;var I=Function.call.bind(String.prototype.indexOf);var E=Function.apply.bind(Array.prototype.indexOf);var P=Function.call.bind(Array.prototype.concat);var C=Function.call.bind(String.prototype.slice);var M=Function.call.bind(Array.prototype.push);var x=Function.apply.bind(Array.prototype.push);var N=Function.call.bind(Array.prototype.shift);var A=Math.max;var R=Math.min;var _=Math.floor;var k=Math.abs;var L=Math.exp;var F=Math.log;var D=Math.sqrt;var z=Function.call.bind(Object.prototype.hasOwnProperty);var q;var W=function(){};var G=S.Map;var H=G&&G.prototype["delete"];var V=G&&G.prototype.get;var B=G&&G.prototype.has;var U=G&&G.prototype.set;var $=S.Symbol||{};var J=$.species||"@@species";var X=Number.isNaN||function isNaN(e){return e!==e};var K=Number.isFinite||function isFinite(e){return typeof e==="number"&&T(e)};var Z=d(Math.sign)?Math.sign:function sign(e){var t=Number(e);if(t===0){return t}if(X(t)){return t}return t<0?-1:1};var Y=function log1p(e){var t=Number(e);if(t<-1||X(t)){return NaN}if(t===0||t===Infinity){return t}if(t===-1){return-Infinity}return 1+t-1===0?t:t*(F(1+t)/(1+t-1))};var Q=function isArguments(e){return g(e)==="[object Arguments]"};var ee=function isArguments(e){return e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&g(e)!=="[object Array]"&&g(e.callee)==="[object Function]"};var te=Q(arguments)?Q:ee;var re={primitive:function(e){return e===null||typeof e!=="function"&&typeof e!=="object"},string:function(e){return g(e)==="[object String]"},regex:function(e){return g(e)==="[object RegExp]"},symbol:function(e){return typeof S.Symbol==="function"&&typeof e==="symbol"}};var ne=function overrideNative(e,t,r){var n=e[t];h(e,t,r,true);m.preserveToString(e[t],n)};var oe=typeof $==="function"&&typeof $["for"]==="function"&&re.symbol($());var ie=re.symbol($.iterator)?$.iterator:"_es6-shim iterator_";if(S.Set&&typeof(new S.Set)["@@iterator"]==="function"){ie="@@iterator"}if(!S.Reflect){h(S,"Reflect",{},true)}var ae=S.Reflect;var ue=String;var fe=typeof document==="undefined"||!document?null:document.all;var se=fe==null?function isNullOrUndefined(e){return e==null}:function isNullOrUndefinedAndNotDocumentAll(e){return e==null&&e!==fe};var ce={Call:function Call(t,r){var n=arguments.length>2?arguments[2]:[];if(!ce.IsCallable(t)){throw new TypeError(t+" is not a function")}return e(t,r,n)},RequireObjectCoercible:function(e,t){if(se(e)){throw new TypeError(t||"Cannot call method on "+e)}return e},TypeIsObject:function(e){if(e===void 0||e===null||e===true||e===false){return false}return typeof e==="function"||typeof e==="object"||e===fe},ToObject:function(e,t){return Object(ce.RequireObjectCoercible(e,t))},IsCallable:d,IsConstructor:function(e){return ce.IsCallable(e)},ToInt32:function(e){return ce.ToNumber(e)>>0},ToUint32:function(e){return ce.ToNumber(e)>>>0},ToNumber:function(e){if(g(e)==="[object Symbol]"){throw new TypeError("Cannot convert a Symbol value to a number")}return+e},ToInteger:function(e){var t=ce.ToNumber(e);if(X(t)){return 0}if(t===0||!K(t)){return t}return(t>0?1:-1)*_(k(t))},ToLength:function(e){var t=ce.ToInteger(e);if(t<=0){return 0}if(t>Number.MAX_SAFE_INTEGER){return Number.MAX_SAFE_INTEGER}return t},SameValue:function(e,t){if(e===t){if(e===0){return 1/e===1/t}return true}return X(e)&&X(t)},SameValueZero:function(e,t){return e===t||X(e)&&X(t)},IsIterable:function(e){return ce.TypeIsObject(e)&&(typeof e[ie]!=="undefined"||te(e))},GetIterator:function(e){if(te(e)){return new q(e,"value")}var t=ce.GetMethod(e,ie);if(!ce.IsCallable(t)){throw new TypeError("value is not an iterable")}var r=ce.Call(t,e);if(!ce.TypeIsObject(r)){throw new TypeError("bad iterator")}return r},GetMethod:function(e,t){var r=ce.ToObject(e)[t];if(se(r)){return void 0}if(!ce.IsCallable(r)){throw new TypeError("Method not callable: "+t)}return r},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var r=ce.GetMethod(e,"return");if(r===void 0){return}var n,o;try{n=ce.Call(r,e)}catch(i){o=i}if(t){return}if(o){throw o}if(!ce.TypeIsObject(n)){throw new TypeError("Iterator's return method returned a non-object.")}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!ce.TypeIsObject(t)){throw new TypeError("bad iterator")}return t},IteratorStep:function(e){var t=ce.IteratorNext(e);var r=ce.IteratorComplete(t);return r?false:t},Construct:function(e,t,r,n){var o=typeof r==="undefined"?e:r;if(!n&&ae.construct){return ae.construct(e,t,o)}var i=o.prototype;if(!ce.TypeIsObject(i)){i=Object.prototype}var a=O(i);var u=ce.Call(e,a,t);return ce.TypeIsObject(u)?u:a},SpeciesConstructor:function(e,t){var r=e.constructor;if(r===void 0){return t}if(!ce.TypeIsObject(r)){throw new TypeError("Bad constructor")}var n=r[J];if(se(n)){return t}if(!ce.IsConstructor(n)){throw new TypeError("Bad @@species")}return n},CreateHTML:function(e,t,r,n){var o=ce.ToString(e);var i="<"+t;if(r!==""){var a=ce.ToString(n);var u=a.replace(/"/g,"&quot;");i+=" "+r+'="'+u+'"'}var f=i+">";var s=f+o;return s+"</"+t+">"},IsRegExp:function IsRegExp(e){if(!ce.TypeIsObject(e)){return false}var t=e[$.match];if(typeof t!=="undefined"){return!!t}return re.regex(e)},ToString:function ToString(e){return ue(e)}};if(s&&oe){var le=function defineWellKnownSymbol(e){if(re.symbol($[e])){return $[e]}var t=$["for"]("Symbol."+e);Object.defineProperty($,e,{configurable:false,enumerable:false,writable:false,value:t});return t};if(!re.symbol($.search)){var pe=le("search");var ve=String.prototype.search;h(RegExp.prototype,pe,function search(e){return ce.Call(ve,e,[this])});var ye=function search(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,pe);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(ve,t,[ce.ToString(e)])};ne(String.prototype,"search",ye)}if(!re.symbol($.replace)){var he=le("replace");var be=String.prototype.replace;h(RegExp.prototype,he,function replace(e,t){return ce.Call(be,e,[this,t])});var ge=function replace(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,he);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(be,r,[ce.ToString(e),t])};ne(String.prototype,"replace",ge)}if(!re.symbol($.split)){var de=le("split");var me=String.prototype.split;h(RegExp.prototype,de,function split(e,t){return ce.Call(me,e,[this,t])});var Oe=function split(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,de);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(me,r,[ce.ToString(e),t])};ne(String.prototype,"split",Oe)}var we=re.symbol($.match);var je=we&&function(){var e={};e[$.match]=function(){return 42};return"a".match(e)!==42}();if(!we||je){var Se=le("match");var Te=String.prototype.match;h(RegExp.prototype,Se,function match(e){return ce.Call(Te,e,[this])});var Ie=function match(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,Se);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(Te,t,[ce.ToString(e)])};ne(String.prototype,"match",Ie)}}var Ee=function wrapConstructor(e,t,r){m.preserveToString(t,e);if(Object.setPrototypeOf){Object.setPrototypeOf(e,t)}if(s){l(Object.getOwnPropertyNames(e),function(n){if(n in W||r[n]){return}m.proxy(e,n,t)})}else{l(Object.keys(e),function(n){if(n in W||r[n]){return}t[n]=e[n]})}t.prototype=e.prototype;m.redefine(e.prototype,"constructor",t)};var Pe=function(){return this};var Ce=function(e){if(s&&!z(e,J)){m.getter(e,J,Pe)}};var Me=function(e,t){var r=t||function iterator(){return this};h(e,ie,r);if(!e[ie]&&re.symbol(ie)){e[ie]=r}};var xe=function createDataProperty(e,t,r){if(s){Object.defineProperty(e,t,{configurable:true,enumerable:true,writable:true,value:r})}else{e[t]=r}};var Ne=function createDataPropertyOrThrow(e,t,r){xe(e,t,r);if(!ce.SameValue(e[t],r)){throw new TypeError("property is nonconfigurable")}};var Ae=function(e,t,r,n){if(!ce.TypeIsObject(e)){throw new TypeError("Constructor requires `new`: "+t.name)}var o=t.prototype;if(!ce.TypeIsObject(o)){o=r}var i=O(o);for(var a in n){if(z(n,a)){var u=n[a];h(i,a,u,true)}}return i};if(String.fromCodePoint&&String.fromCodePoint.length!==1){var Re=String.fromCodePoint;ne(String,"fromCodePoint",function fromCodePoint(e){return ce.Call(Re,this,arguments)})}var _e={fromCodePoint:function fromCodePoint(e){var t=[];var r;for(var n=0,o=arguments.length;n<o;n++){r=Number(arguments[n]);if(!ce.SameValue(r,ce.ToInteger(r))||r<0||r>1114111){throw new RangeError("Invalid code point "+r)}if(r<65536){M(t,String.fromCharCode(r))}else{r-=65536;M(t,String.fromCharCode((r>>10)+55296));M(t,String.fromCharCode(r%1024+56320))}}return t.join("")},raw:function raw(e){var t=ce.ToObject(e,"bad callSite");var r=ce.ToObject(t.raw,"bad raw value");var n=r.length;var o=ce.ToLength(n);if(o<=0){return""}var i=[];var a=0;var u,f,s,c;while(a<o){u=ce.ToString(a);s=ce.ToString(r[u]);M(i,s);if(a+1>=o){break}f=a+1<arguments.length?arguments[a+1]:"";c=ce.ToString(f);M(i,c);a+=1}return i.join("")}};if(String.raw&&String.raw({raw:{0:"x",1:"y",length:2}})!=="xy"){ne(String,"raw",_e.raw)}b(String,_e);var ke=function repeat(e,t){if(t<1){return""}if(t%2){return repeat(e,t-1)+e}var r=repeat(e,t/2);return r+r};var Le=Infinity;var Fe={repeat:function repeat(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);if(r<0||r>=Le){throw new RangeError("repeat count must be less than infinity and not overflow maximum string size")}return ke(t,r)},startsWith:function startsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "startsWith" with a regex')}var r=ce.ToString(e);var n;if(arguments.length>1){n=arguments[1]}var o=A(ce.ToInteger(n),0);return C(t,o,o+r.length)===r},endsWith:function endsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "endsWith" with a regex')}var r=ce.ToString(e);var n=t.length;var o;if(arguments.length>1){o=arguments[1]}var i=typeof o==="undefined"?n:ce.ToInteger(o);var a=R(A(i,0),n);return C(t,a-r.length,a)===r},includes:function includes(e){if(ce.IsRegExp(e)){throw new TypeError('"includes" does not accept a RegExp')}var t=ce.ToString(e);var r;if(arguments.length>1){r=arguments[1]}return I(this,t,r)!==-1},codePointAt:function codePointAt(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);var n=t.length;if(r>=0&&r<n){var o=t.charCodeAt(r);var i=r+1===n;if(o<55296||o>56319||i){return o}var a=t.charCodeAt(r+1);if(a<56320||a>57343){return o}return(o-55296)*1024+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",Infinity)!==false){ne(String.prototype,"includes",Fe.includes)}if(String.prototype.startsWith&&String.prototype.endsWith){var De=i(function(){return"/a/".startsWith(/a/)});var ze=a(function(){return"abc".startsWith("a",Infinity)===false});if(!De||!ze){ne(String.prototype,"startsWith",Fe.startsWith);ne(String.prototype,"endsWith",Fe.endsWith)}}if(oe){var qe=a(function(){var e=/a/;e[$.match]=false;return"/a/".startsWith(e)});if(!qe){ne(String.prototype,"startsWith",Fe.startsWith)}var We=a(function(){var e=/a/;e[$.match]=false;return"/a/".endsWith(e)});if(!We){ne(String.prototype,"endsWith",Fe.endsWith)}var Ge=a(function(){var e=/a/;e[$.match]=false;return"/a/".includes(e)});if(!Ge){ne(String.prototype,"includes",Fe.includes)}}b(String.prototype,Fe);var He=["\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join("");var Ve=new RegExp("(^["+He+"]+)|(["+He+"]+$)","g");var Be=function trim(){return ce.ToString(ce.RequireObjectCoercible(this)).replace(Ve,"")};var Ue=["\x85","\u200b","\ufffe"].join("");var $e=new RegExp("["+Ue+"]","g");var Je=/^[-+]0x[0-9a-f]+$/i;var Xe=Ue.trim().length!==Ue.length;h(String.prototype,"trim",Be,Xe);var Ke=function(e){return{value:e,done:arguments.length===0}};var Ze=function(e){ce.RequireObjectCoercible(e);this._s=ce.ToString(e);this._i=0};Ze.prototype.next=function(){var e=this._s;var t=this._i;if(typeof e==="undefined"||t>=e.length){this._s=void 0;return Ke()}var r=e.charCodeAt(t);var n,o;if(r<55296||r>56319||t+1===e.length){o=1}else{n=e.charCodeAt(t+1);o=n<56320||n>57343?1:2}this._i=t+o;return Ke(e.substr(t,o))};Me(Ze.prototype);Me(String.prototype,function(){return new Ze(this)});var Ye={from:function from(e){var r=this;var n;if(arguments.length>1){n=arguments[1]}var o,i;if(typeof n==="undefined"){o=false}else{if(!ce.IsCallable(n)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){i=arguments[2]}o=true}var a=typeof(te(e)||ce.GetMethod(e,ie))!=="undefined";var u,f,s;if(a){f=ce.IsConstructor(r)?Object(new r):[];var c=ce.GetIterator(e);var l,p;s=0;while(true){l=ce.IteratorStep(c);if(l===false){break}p=l.value;try{if(o){p=typeof i==="undefined"?n(p,s):t(n,i,p,s)}f[s]=p}catch(v){ce.IteratorClose(c,true);throw v}s+=1}u=s}else{var y=ce.ToObject(e);u=ce.ToLength(y.length);f=ce.IsConstructor(r)?Object(new r(u)):new Array(u);var h;for(s=0;s<u;++s){h=y[s];if(o){h=typeof i==="undefined"?n(h,s):t(n,i,h,s)}Ne(f,s,h)}}f.length=u;return f},of:function of(){var e=arguments.length;var t=this;var n=r(t)||!ce.IsCallable(t)?new Array(e):ce.Construct(t,[e]);for(var o=0;o<e;++o){Ne(n,o,arguments[o])}n.length=e;return n}};b(Array,Ye);Ce(Array);q=function(e,t){this.i=0;this.array=e;this.kind=t};b(q.prototype,{next:function(){var e=this.i;var t=this.array;if(!(this instanceof q)){throw new TypeError("Not an ArrayIterator")}if(typeof t!=="undefined"){var r=ce.ToLength(t.length);for(;e<r;e++){var n=this.kind;var o;if(n==="key"){o=e}else if(n==="value"){o=t[e]}else if(n==="entry"){o=[e,t[e]]}this.i=e+1;return Ke(o)}}this.array=void 0;return Ke()}});Me(q.prototype);var Qe=Array.of===Ye.of||function(){var e=function Foo(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&t.length===2}();if(!Qe){ne(Array,"of",Ye.of)}var et={copyWithin:function copyWithin(e,t){var r=ce.ToObject(this);var n=ce.ToLength(r.length);var o=ce.ToInteger(e);var i=ce.ToInteger(t);var a=o<0?A(n+o,0):R(o,n);var u=i<0?A(n+i,0):R(i,n);var f;if(arguments.length>2){f=arguments[2]}var s=typeof f==="undefined"?n:ce.ToInteger(f);var c=s<0?A(n+s,0):R(s,n);var l=R(c-u,n-a);var p=1;if(u<a&&a<u+l){p=-1;u+=l-1;a+=l-1}while(l>0){if(u in r){r[a]=r[u]}else{delete r[a]}u+=p;a+=p;l-=1}return r},fill:function fill(e){var t;if(arguments.length>1){t=arguments[1]}var r;if(arguments.length>2){r=arguments[2]}var n=ce.ToObject(this);var o=ce.ToLength(n.length);t=ce.ToInteger(typeof t==="undefined"?0:t);r=ce.ToInteger(typeof r==="undefined"?o:r);var i=t<0?A(o+t,0):R(t,o);var a=r<0?o+r:r;for(var u=i;u<o&&u<a;++u){n[u]=e}return n},find:function find(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#find: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0,a;i<n;i++){a=r[i];if(o){if(t(e,o,a,i,r)){return a}}else if(e(a,i,r)){return a}}},findIndex:function findIndex(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#findIndex: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0;i<n;i++){if(o){if(t(e,o,r[i],i,r)){return i}}else if(e(r[i],i,r)){return i}}return-1},keys:function keys(){return new q(this,"key")},values:function values(){return new q(this,"value")},entries:function entries(){return new q(this,"entry")}};if(Array.prototype.keys&&!ce.IsCallable([1].keys().next)){delete Array.prototype.keys}if(Array.prototype.entries&&!ce.IsCallable([1].entries().next)){delete Array.prototype.entries}if(Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ie]){b(Array.prototype,{values:Array.prototype[ie]});if(re.symbol($.unscopables)){Array.prototype[$.unscopables].values=true}}if(c&&Array.prototype.values&&Array.prototype.values.name!=="values"){var tt=Array.prototype.values;ne(Array.prototype,"values",function values(){return ce.Call(tt,this,arguments)});h(Array.prototype,ie,Array.prototype.values,true)}b(Array.prototype,et);if(1/[true].indexOf(true,-0)<0){h(Array.prototype,"indexOf",function indexOf(e){var t=E(this,arguments);if(t===0&&1/t<0){return 0}return t},true)}Me(Array.prototype,function(){return this.values()});if(Object.getPrototypeOf){Me(Object.getPrototypeOf([].values()))}var rt=function(){return a(function(){return Array.from({length:-1}).length===0})}();var nt=function(){var e=Array.from([0].entries());return e.length===1&&r(e[0])&&e[0][0]===0&&e[0][1]===0}();if(!rt||!nt){ne(Array,"from",Ye.from)}var ot=function(){return a(function(){return Array.from([0],void 0)})}();if(!ot){var it=Array.from;ne(Array,"from",function from(e){if(arguments.length>1&&typeof arguments[1]!=="undefined"){return ce.Call(it,this,arguments)}else{return t(it,this,e)}})}var at=-(Math.pow(2,32)-1);var ut=function(e,r){var n={length:at};n[r?(n.length>>>0)-1:0]=true;return a(function(){t(e,n,function(){throw new RangeError("should not reach here")},[]);return true})};if(!ut(Array.prototype.forEach)){var ft=Array.prototype.forEach;ne(Array.prototype,"forEach",function forEach(e){return ce.Call(ft,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.map)){var st=Array.prototype.map;ne(Array.prototype,"map",function map(e){return ce.Call(st,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.filter)){var ct=Array.prototype.filter;ne(Array.prototype,"filter",function filter(e){return ce.Call(ct,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.some)){var lt=Array.prototype.some;ne(Array.prototype,"some",function some(e){return ce.Call(lt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.every)){var pt=Array.prototype.every;ne(Array.prototype,"every",function every(e){return ce.Call(pt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduce)){var vt=Array.prototype.reduce;ne(Array.prototype,"reduce",function reduce(e){return ce.Call(vt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduceRight,true)){var yt=Array.prototype.reduceRight;ne(Array.prototype,"reduceRight",function reduceRight(e){return ce.Call(yt,this.length>=0?this:[],arguments)},true)}var ht=Number("0o10")!==8;var bt=Number("0b10")!==2;var gt=y(Ue,function(e){return Number(e+0+e)===0});if(ht||bt||gt){var dt=Number;var mt=/^0b[01]+$/i;var Ot=/^0o[0-7]+$/i;var wt=mt.test.bind(mt);var jt=Ot.test.bind(Ot);var St=function(e){var t;if(typeof e.valueOf==="function"){t=e.valueOf();if(re.primitive(t)){return t}}if(typeof e.toString==="function"){t=e.toString();if(re.primitive(t)){return t}}throw new TypeError("No default value")};var Tt=$e.test.bind($e);var It=Je.test.bind(Je);var Et=function(){var e=function Number(t){var r;if(arguments.length>0){r=re.primitive(t)?t:St(t,"number")}else{r=0}if(typeof r==="string"){r=ce.Call(Be,r);if(wt(r)){r=parseInt(C(r,2),2)}else if(jt(r)){r=parseInt(C(r,2),8)}else if(Tt(r)||It(r)){r=NaN}}var n=this;var o=a(function(){dt.prototype.valueOf.call(n);return true});if(n instanceof e&&!o){return new dt(r)}return dt(r)};return e}();Ee(dt,Et,{});b(Et,{NaN:dt.NaN,MAX_VALUE:dt.MAX_VALUE,MIN_VALUE:dt.MIN_VALUE,NEGATIVE_INFINITY:dt.NEGATIVE_INFINITY,POSITIVE_INFINITY:dt.POSITIVE_INFINITY});Number=Et;m.redefine(S,"Number",Et)}var Pt=Math.pow(2,53)-1;b(Number,{MAX_SAFE_INTEGER:Pt,MIN_SAFE_INTEGER:-Pt,EPSILON:2.220446049250313e-16,parseInt:S.parseInt,parseFloat:S.parseFloat,isFinite:K,isInteger:function isInteger(e){return K(e)&&ce.ToInteger(e)===e},isSafeInteger:function isSafeInteger(e){return Number.isInteger(e)&&k(e)<=Number.MAX_SAFE_INTEGER},isNaN:X});h(Number,"parseInt",S.parseInt,Number.parseInt!==S.parseInt);if([,1].find(function(){return true})===1){ne(Array.prototype,"find",et.find)}if([,1].findIndex(function(){return true})!==0){ne(Array.prototype,"findIndex",et.findIndex)}var Ct=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable);var Mt=function ensureEnumerable(e,t){if(s&&Ct(e,t)){Object.defineProperty(e,t,{enumerable:false})}};var xt=function sliceArgs(){var e=Number(this);var t=arguments.length;var r=t-e;var n=new Array(r<0?0:r);for(var o=e;o<t;++o){n[o-e]=arguments[o]}return n};var Nt=function assignTo(e){return function assignToSource(t,r){t[r]=e[r];return t}};var At=function(e,t){var r=n(Object(t));var o;if(ce.IsCallable(Object.getOwnPropertySymbols)){o=v(Object.getOwnPropertySymbols(Object(t)),Ct(t))}return p(P(r,o||[]),Nt(t),e)};var Rt={assign:function(e,t){var r=ce.ToObject(e,"Cannot convert undefined or null to object");return p(ce.Call(xt,1,arguments),At,r)},is:function is(e,t){return ce.SameValue(e,t)}};var _t=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}}();if(_t){ne(Object,"assign",Rt.assign)}b(Object,Rt);if(s){var kt={setPrototypeOf:function(e,r){var n;var o=function(e,t){if(!ce.TypeIsObject(e)){throw new TypeError("cannot set prototype on a non-object")}if(!(t===null||ce.TypeIsObject(t))){throw new TypeError("can only set prototype to an object or null"+t)}};var i=function(e,r){o(e,r);t(n,e,r);return e};try{n=e.getOwnPropertyDescriptor(e.prototype,r).set;t(n,{},null)}catch(a){if(e.prototype!=={}[r]){return}n=function(e){this[r]=e};i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object,"__proto__")};b(Object,kt)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&Object.getPrototypeOf(Object.setPrototypeOf({},null))!==null&&Object.getPrototypeOf(Object.create(null))===null){(function(){var e=Object.create(null);var t=Object.getPrototypeOf;var r=Object.setPrototypeOf;Object.getPrototypeOf=function(r){var n=t(r);return n===e?null:n};Object.setPrototypeOf=function(t,n){var o=n===null?e:n;return r(t,o)};Object.setPrototypeOf.polyfill=false})()}var Lt=!i(function(){return Object.keys("foo")});if(!Lt){var Ft=Object.keys;ne(Object,"keys",function keys(e){return Ft(ce.ToObject(e))});n=Object.keys}var Dt=i(function(){return Object.keys(/a/g)});if(Dt){var zt=Object.keys;ne(Object,"keys",function keys(e){if(re.regex(e)){var t=[];for(var r in e){if(z(e,r)){M(t,r)}}return t}return zt(e)});n=Object.keys}if(Object.getOwnPropertyNames){var qt=!i(function(){return Object.getOwnPropertyNames("foo")});if(!qt){var Wt=typeof window==="object"?Object.getOwnPropertyNames(window):[];var Gt=Object.getOwnPropertyNames;ne(Object,"getOwnPropertyNames",function getOwnPropertyNames(e){var t=ce.ToObject(e);if(g(t)==="[object Window]"){try{return Gt(t)}catch(r){return P([],Wt)}}return Gt(t)})}}if(Object.getOwnPropertyDescriptor){var Ht=!i(function(){return Object.getOwnPropertyDescriptor("foo","bar")});if(!Ht){var Vt=Object.getOwnPropertyDescriptor;ne(Object,"getOwnPropertyDescriptor",function getOwnPropertyDescriptor(e,t){return Vt(ce.ToObject(e),t)})}}if(Object.seal){var Bt=!i(function(){return Object.seal("foo")});if(!Bt){var Ut=Object.seal;ne(Object,"seal",function seal(e){if(!ce.TypeIsObject(e)){return e}return Ut(e)})}}if(Object.isSealed){var $t=!i(function(){return Object.isSealed("foo")});if(!$t){var Jt=Object.isSealed;ne(Object,"isSealed",function isSealed(e){if(!ce.TypeIsObject(e)){return true}return Jt(e)})}}if(Object.freeze){var Xt=!i(function(){return Object.freeze("foo")});if(!Xt){var Kt=Object.freeze;ne(Object,"freeze",function freeze(e){if(!ce.TypeIsObject(e)){return e}return Kt(e)})}}if(Object.isFrozen){var Zt=!i(function(){return Object.isFrozen("foo")});if(!Zt){var Yt=Object.isFrozen;ne(Object,"isFrozen",function isFrozen(e){if(!ce.TypeIsObject(e)){return true}return Yt(e)})}}if(Object.preventExtensions){var Qt=!i(function(){return Object.preventExtensions("foo")});if(!Qt){var er=Object.preventExtensions;ne(Object,"preventExtensions",function preventExtensions(e){if(!ce.TypeIsObject(e)){return e}return er(e)})}}if(Object.isExtensible){var tr=!i(function(){return Object.isExtensible("foo")});if(!tr){var rr=Object.isExtensible;ne(Object,"isExtensible",function isExtensible(e){if(!ce.TypeIsObject(e)){return false}return rr(e)})}}if(Object.getPrototypeOf){var nr=!i(function(){return Object.getPrototypeOf("foo")});if(!nr){var or=Object.getPrototypeOf;ne(Object,"getPrototypeOf",function getPrototypeOf(e){return or(ce.ToObject(e))})}}var ir=s&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&ce.IsCallable(e.get)}();if(s&&!ir){var ar=function flags(){if(!ce.TypeIsObject(this)){throw new TypeError("Method called on incompatible type: must be an object.")}var e="";if(this.global){e+="g"}if(this.ignoreCase){e+="i"}if(this.multiline){e+="m"}if(this.unicode){e+="u"}if(this.sticky){e+="y"}return e};m.getter(RegExp.prototype,"flags",ar)}var ur=s&&a(function(){return String(new RegExp(/a/g,"i"))==="/a/i"});var fr=oe&&s&&function(){var e=/./;e[$.match]=false;return RegExp(e)===e}();var sr=a(function(){return RegExp.prototype.toString.call({source:"abc"})==="/abc/"});var cr=sr&&a(function(){return RegExp.prototype.toString.call({source:"a",flags:"b"})==="/a/b"});if(!sr||!cr){var lr=RegExp.prototype.toString;h(RegExp.prototype,"toString",function toString(){var e=ce.RequireObjectCoercible(this);if(re.regex(e)){return t(lr,e)}var r=ue(e.source);var n=ue(e.flags);return"/"+r+"/"+n},true);m.preserveToString(RegExp.prototype.toString,lr)}if(s&&(!ur||fr)){var pr=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get;var vr=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{};var yr=function(){return this.source};var hr=ce.IsCallable(vr.get)?vr.get:yr;var br=RegExp;var gr=function(){return function RegExp(e,t){var r=ce.IsRegExp(e);var n=this instanceof RegExp;if(!n&&r&&typeof t==="undefined"&&e.constructor===RegExp){return e}var o=e;var i=t;if(re.regex(e)){o=ce.Call(hr,e);i=typeof t==="undefined"?ce.Call(pr,e):t;return new RegExp(o,i)}else if(r){o=e.source;i=typeof t==="undefined"?e.flags:t}return new br(e,t)}}();Ee(br,gr,{$input:true});RegExp=gr;m.redefine(S,"RegExp",gr)}if(s){var dr={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(n(dr),function(e){if(e in RegExp&&!(dr[e]in RegExp)){m.getter(RegExp,dr[e],function get(){return RegExp[e]})}})}Ce(RegExp);var mr=1/Number.EPSILON;var Or=function roundTiesToEven(e){return e+mr-mr};var wr=Math.pow(2,-23);var jr=Math.pow(2,127)*(2-wr);var Sr=Math.pow(2,-126);var Tr=Math.E;var Ir=Math.LOG2E;var Er=Math.LOG10E;var Pr=Number.prototype.clz;delete Number.prototype.clz;var Cr={acosh:function acosh(e){var t=Number(e);if(X(t)||e<1){return NaN}if(t===1){return 0}if(t===Infinity){return t}var r=1/(t*t);if(t<2){return Y(t-1+D(1-r)*t)}var n=t/2;return Y(n+D(1-r)*n-1)+1/Ir},asinh:function asinh(e){var t=Number(e);if(t===0||!T(t)){return t}var r=k(t);var n=r*r;var o=Z(t);if(r<1){return o*Y(r+n/(D(n+1)+1))}return o*(Y(r/2+D(1+1/n)*r/2-1)+1/Ir)},atanh:function atanh(e){var t=Number(e);if(t===0){return t}if(t===-1){return-Infinity}if(t===1){return Infinity}if(X(t)||t<-1||t>1){return NaN}var r=k(t);return Z(t)*Y(2*r/(1-r))/2},cbrt:function cbrt(e){var t=Number(e);if(t===0){return t}var r=t<0;var n;if(r){t=-t}if(t===Infinity){n=Infinity}else{n=L(F(t)/3);n=(t/(n*n)+2*n)/3}return r?-n:n},clz32:function clz32(e){var t=Number(e);var r=ce.ToUint32(t);if(r===0){return 32}return Pr?ce.Call(Pr,r):31-_(F(r+.5)*Ir)},cosh:function cosh(e){var t=Number(e);if(t===0){return 1}if(X(t)){return NaN}if(!T(t)){return Infinity}var r=L(k(t)-1);return(r+1/(r*Tr*Tr))*(Tr/2)},expm1:function expm1(e){var t=Number(e);if(t===-Infinity){return-1}if(!T(t)||t===0){return t}if(k(t)>.5){return L(t)-1}var r=t;var n=0;var o=1;while(n+r!==n){n+=r;o+=1;r*=t/o}return n},hypot:function hypot(e,t){var r=0;var n=0;for(var o=0;o<arguments.length;++o){var i=k(Number(arguments[o]));if(n<i){r*=n/i*(n/i);r+=1;n=i}else{r+=i>0?i/n*(i/n):i}}return n===Infinity?Infinity:n*D(r)},log2:function log2(e){return F(e)*Ir},log10:function log10(e){return F(e)*Er},log1p:Y,sign:Z,sinh:function sinh(e){var t=Number(e);if(!T(t)||t===0){return t}var r=k(t);if(r<1){var n=Math.expm1(r);return Z(t)*n*(1+1/(n+1))/2}var o=L(r-1);return Z(t)*(o-1/(o*Tr*Tr))*(Tr/2)},tanh:function tanh(e){var t=Number(e);if(X(t)||t===0){return t}if(t>=20){return 1}if(t<=-20){return-1}return(Math.expm1(t)-Math.expm1(-t))/(L(t)+L(-t))},trunc:function trunc(e){var t=Number(e);return t<0?-_(-t):_(t)},imul:function imul(e,t){var r=ce.ToUint32(e);var n=ce.ToUint32(t);var o=r>>>16&65535;var i=r&65535;var a=n>>>16&65535;var u=n&65535;return i*u+(o*u+i*a<<16>>>0)|0},fround:function fround(e){var t=Number(e);if(t===0||t===Infinity||t===-Infinity||X(t)){return t}var r=Z(t);var n=k(t);if(n<Sr){return r*Or(n/Sr/wr)*Sr*wr}var o=(1+wr/Number.EPSILON)*n;var i=o-(o-n);if(i>jr||X(i)){return r*Infinity}return r*i}};var Mr=function withinULPDistance(e,t,r){return k(1-e/t)/Number.EPSILON<(r||8)};b(Math,Cr);h(Math,"sinh",Cr.sinh,Math.sinh(710)===Infinity);h(Math,"cosh",Cr.cosh,Math.cosh(710)===Infinity);h(Math,"log1p",Cr.log1p,Math.log1p(-1e-17)!==-1e-17);h(Math,"asinh",Cr.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7));h(Math,"asinh",Cr.asinh,Math.asinh(1e300)===Infinity);h(Math,"atanh",Cr.atanh,Math.atanh(1e-300)===0);h(Math,"tanh",Cr.tanh,Math.tanh(-2e-17)!==-2e-17);
h(Math,"acosh",Cr.acosh,Math.acosh(Number.MAX_VALUE)===Infinity);h(Math,"acosh",Cr.acosh,!Mr(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON)));h(Math,"cbrt",Cr.cbrt,!Mr(Math.cbrt(1e-300),1e-100));h(Math,"sinh",Cr.sinh,Math.sinh(-2e-17)!==-2e-17);var xr=Math.expm1(10);h(Math,"expm1",Cr.expm1,xr>22025.465794806718||xr<22025.465794806718);var Nr=Math.round;var Ar=Math.round(.5-Number.EPSILON/4)===0&&Math.round(-.5+Number.EPSILON/3.99)===1;var Rr=mr+1;var _r=2*mr-1;var kr=[Rr,_r].every(function(e){return Math.round(e)===e});h(Math,"round",function round(e){var t=_(e);var r=t===-1?-0:t+1;return e-t<.5?t:r},!Ar||!kr);m.preserveToString(Math.round,Nr);var Lr=Math.imul;if(Math.imul(4294967295,5)!==-5){Math.imul=Cr.imul;m.preserveToString(Math.imul,Lr)}if(Math.imul.length!==2){ne(Math,"imul",function imul(e,t){return ce.Call(Lr,Math,arguments)})}var Fr=function(){var e=S.setTimeout;if(typeof e!=="function"&&typeof e!=="object"){return}ce.IsPromise=function(e){if(!ce.TypeIsObject(e)){return false}if(typeof e._promise==="undefined"){return false}return true};var r=function(e){if(!ce.IsConstructor(e)){throw new TypeError("Bad promise constructor")}var t=this;var r=function(e,r){if(t.resolve!==void 0||t.reject!==void 0){throw new TypeError("Bad Promise implementation!")}t.resolve=e;t.reject=r};t.resolve=void 0;t.reject=void 0;t.promise=new e(r);if(!(ce.IsCallable(t.resolve)&&ce.IsCallable(t.reject))){throw new TypeError("Bad promise constructor")}};var n;if(typeof window!=="undefined"&&ce.IsCallable(window.postMessage)){n=function(){var e=[];var t="zero-timeout-message";var r=function(r){M(e,r);window.postMessage(t,"*")};var n=function(r){if(r.source===window&&r.data===t){r.stopPropagation();if(e.length===0){return}var n=N(e);n()}};window.addEventListener("message",n,true);return r}}var o=function(){var e=S.Promise;var t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}};var i=ce.IsCallable(S.setImmediate)?S.setImmediate:typeof process==="object"&&process.nextTick?process.nextTick:o()||(ce.IsCallable(n)?n():function(t){e(t,0)});var a=function(e){return e};var u=function(e){throw e};var f=0;var s=1;var c=2;var l=0;var p=1;var v=2;var y={};var h=function(e,t,r){i(function(){g(e,t,r)})};var g=function(e,t,r){var n,o;if(t===y){return e(r)}try{n=e(r);o=t.resolve}catch(i){n=i;o=t.reject}o(n)};var d=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.fulfillReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+l],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=s;r.reactionLength=0};var m=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.rejectReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+p],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=c;r.reactionLength=0};var O=function(e){var t=false;var r=function(r){var n;if(t){return}t=true;if(r===e){return m(e,new TypeError("Self resolution"))}if(!ce.TypeIsObject(r)){return d(e,r)}try{n=r.then}catch(o){return m(e,o)}if(!ce.IsCallable(n)){return d(e,r)}i(function(){j(e,r,n)})};var n=function(r){if(t){return}t=true;return m(e,r)};return{resolve:r,reject:n}};var w=function(e,r,n,o){if(e===I){t(e,r,n,o,y)}else{t(e,r,n,o)}};var j=function(e,t,r){var n=O(e);var o=n.resolve;var i=n.reject;try{w(r,t,o,i)}catch(a){i(a)}};var T,I;var E=function(){var e=function Promise(t){if(!(this instanceof e)){throw new TypeError('Constructor Promise requires "new"')}if(this&&this._promise){throw new TypeError("Bad construction")}if(!ce.IsCallable(t)){throw new TypeError("not a valid resolver")}var r=Ae(this,e,T,{_promise:{result:void 0,state:f,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}});var n=O(r);var o=n.reject;try{t(n.resolve,o)}catch(i){o(i)}return r};return e}();T=E.prototype;var P=function(e,t,r,n){var o=false;return function(i){if(o){return}o=true;t[e]=i;if(--n.count===0){var a=r.resolve;a(t)}}};var C=function(e,t,r){var n=e.iterator;var o=[];var i={count:1};var a,u;var f=0;while(true){try{a=ce.IteratorStep(n);if(a===false){e.done=true;break}u=a.value}catch(s){e.done=true;throw s}o[f]=void 0;var c=t.resolve(u);var l=P(f,o,r,i);i.count+=1;w(c.then,c,l,r.reject);f+=1}if(--i.count===0){var p=r.resolve;p(o)}return r.promise};var x=function(e,t,r){var n=e.iterator;var o,i,a;while(true){try{o=ce.IteratorStep(n);if(o===false){e.done=true;break}i=o.value}catch(u){e.done=true;throw u}a=t.resolve(i);w(a.then,a,r.resolve,r.reject)}return r.promise};b(E,{all:function all(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return C(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},race:function race(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return x(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},reject:function reject(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}var n=new r(t);var o=n.reject;o(e);return n.promise},resolve:function resolve(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}if(ce.IsPromise(e)){var n=e.constructor;if(n===t){return e}}var o=new r(t);var i=o.resolve;i(e);return o.promise}});b(T,{"catch":function(e){return this.then(null,e)},then:function then(e,t){var n=this;if(!ce.IsPromise(n)){throw new TypeError("not a promise")}var o=ce.SpeciesConstructor(n,E);var i;var b=arguments.length>2&&arguments[2]===y;if(b&&o===E){i=y}else{i=new r(o)}var g=ce.IsCallable(e)?e:a;var d=ce.IsCallable(t)?t:u;var m=n._promise;var O;if(m.state===f){if(m.reactionLength===0){m.fulfillReactionHandler0=g;m.rejectReactionHandler0=d;m.reactionCapability0=i}else{var w=3*(m.reactionLength-1);m[w+l]=g;m[w+p]=d;m[w+v]=i}m.reactionLength+=1}else if(m.state===s){O=m.result;h(g,i,O)}else if(m.state===c){O=m.result;h(d,i,O)}else{throw new TypeError("unexpected Promise state")}return i.promise}});y=new r(E);I=T.then;return E}();if(S.Promise){delete S.Promise.accept;delete S.Promise.defer;delete S.Promise.prototype.chain}if(typeof Fr==="function"){b(S,{Promise:Fr});var Dr=w(S.Promise,function(e){return e.resolve(42).then(function(){})instanceof e});var zr=!i(function(){return S.Promise.reject(42).then(null,5).then(null,W)});var qr=i(function(){return S.Promise.call(3,W)});var Wr=function(e){var t=e.resolve(5);t.constructor={};var r=e.resolve(t);try{r.then(null,W).then(null,W)}catch(n){return true}return t===r}(S.Promise);var Gr=s&&function(){var e=0;var t=Object.defineProperty({},"then",{get:function(){e+=1}});Promise.resolve(t);return e===1}();var Hr=function BadResolverPromise(e){var t=new Promise(e);e(3,function(){});this.then=t.then;this.constructor=BadResolverPromise};Hr.prototype=Promise.prototype;Hr.all=Promise.all;var Vr=a(function(){return!!Hr.all([1,2])});if(!Dr||!zr||!qr||Wr||!Gr||Vr){Promise=Fr;ne(S,"Promise",Fr)}if(Promise.all.length!==1){var Br=Promise.all;ne(Promise,"all",function all(e){return ce.Call(Br,this,arguments)})}if(Promise.race.length!==1){var Ur=Promise.race;ne(Promise,"race",function race(e){return ce.Call(Ur,this,arguments)})}if(Promise.resolve.length!==1){var $r=Promise.resolve;ne(Promise,"resolve",function resolve(e){return ce.Call($r,this,arguments)})}if(Promise.reject.length!==1){var Jr=Promise.reject;ne(Promise,"reject",function reject(e){return ce.Call(Jr,this,arguments)})}Mt(Promise,"all");Mt(Promise,"race");Mt(Promise,"resolve");Mt(Promise,"reject");Ce(Promise)}var Xr=function(e){var t=n(p(e,function(e,t){e[t]=true;return e},{}));return e.join(":")===t.join(":")};var Kr=Xr(["z","a","bb"]);var Zr=Xr(["z",1,"a","3",2]);if(s){var Yr=function fastkey(e,t){if(!t&&!Kr){return null}if(se(e)){return"^"+ce.ToString(e)}else if(typeof e==="string"){return"$"+e}else if(typeof e==="number"){if(!Zr){return"n"+e}return e}else if(typeof e==="boolean"){return"b"+e}return null};var Qr=function emptyObject(){return Object.create?Object.create(null):{}};var en=function addIterableToMap(e,n,o){if(r(o)||re.string(o)){l(o,function(e){if(!ce.TypeIsObject(e)){throw new TypeError("Iterator value "+e+" is not an entry object")}n.set(e[0],e[1])})}else if(o instanceof e){t(e.prototype.forEach,o,function(e,t){n.set(t,e)})}else{var i,a;if(!se(o)){a=n.set;if(!ce.IsCallable(a)){throw new TypeError("bad map")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{if(!ce.TypeIsObject(f)){throw new TypeError("Iterator value "+f+" is not an entry object")}t(a,n,f[0],f[1])}catch(s){ce.IteratorClose(i,true);throw s}}}}};var tn=function addIterableToSet(e,n,o){if(r(o)||re.string(o)){l(o,function(e){n.add(e)})}else if(o instanceof e){t(e.prototype.forEach,o,function(e){n.add(e)})}else{var i,a;if(!se(o)){a=n.add;if(!ce.IsCallable(a)){throw new TypeError("bad set")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{t(a,n,f)}catch(s){ce.IteratorClose(i,true);throw s}}}}};var rn={Map:function(){var e={};var r=function MapEntry(e,t){this.key=e;this.value=t;this.next=null;this.prev=null};r.prototype.isRemoved=function isRemoved(){return this.key===e};var n=function isMap(e){return!!e._es6map};var o=function requireMapSlot(e,t){if(!ce.TypeIsObject(e)||!n(e)){throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+ce.ToString(e))}};var i=function MapIterator(e,t){o(e,"[[MapIterator]]");this.head=e._head;this.i=this.head;this.kind=t};i.prototype={isMapIterator:true,next:function next(){if(!this.isMapIterator){throw new TypeError("Not a MapIterator")}var e=this.i;var t=this.kind;var r=this.head;if(typeof this.i==="undefined"){return Ke()}while(e.isRemoved()&&e!==r){e=e.prev}var n;while(e.next!==r){e=e.next;if(!e.isRemoved()){if(t==="key"){n=e.key}else if(t==="value"){n=e.value}else{n=[e.key,e.value]}this.i=e;return Ke(n)}}this.i=void 0;return Ke()}};Me(i.prototype);var a;var u=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}if(this&&this._es6map){throw new TypeError("Bad construction")}var e=Ae(this,Map,a,{_es6map:true,_head:null,_map:G?new G:null,_size:0,_storage:Qr()});var t=new r(null,null);t.next=t.prev=t;e._head=t;if(arguments.length>0){en(Map,e,arguments[0])}return e};a=u.prototype;m.getter(a,"size",function(){if(typeof this._size==="undefined"){throw new TypeError("size method called on incompatible Map")}return this._size});b(a,{get:function get(e){o(this,"get");var t;var r=Yr(e,true);if(r!==null){t=this._storage[r];if(t){return t.value}else{return}}if(this._map){t=V.call(this._map,e);if(t){return t.value}else{return}}var n=this._head;var i=n;while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){return i.value}}},has:function has(e){o(this,"has");var t=Yr(e,true);if(t!==null){return typeof this._storage[t]!=="undefined"}if(this._map){return B.call(this._map,e)}var r=this._head;var n=r;while((n=n.next)!==r){if(ce.SameValueZero(n.key,e)){return true}}return false},set:function set(e,t){o(this,"set");var n=this._head;var i=n;var a;var u=Yr(e,true);if(u!==null){if(typeof this._storage[u]!=="undefined"){this._storage[u].value=t;return this}else{a=this._storage[u]=new r(e,t);i=n.prev}}else if(this._map){if(B.call(this._map,e)){V.call(this._map,e).value=t}else{a=new r(e,t);U.call(this._map,e,a);i=n.prev}}while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){i.value=t;return this}}a=a||new r(e,t);if(ce.SameValue(-0,e)){a.key=+0}a.next=this._head;a.prev=this._head.prev;a.prev.next=a;a.next.prev=a;this._size+=1;return this},"delete":function(t){o(this,"delete");var r=this._head;var n=r;var i=Yr(t,true);if(i!==null){if(typeof this._storage[i]==="undefined"){return false}n=this._storage[i].prev;delete this._storage[i]}else if(this._map){if(!B.call(this._map,t)){return false}n=V.call(this._map,t).prev;H.call(this._map,t)}while((n=n.next)!==r){if(ce.SameValueZero(n.key,t)){n.key=e;n.value=e;n.prev.next=n.next;n.next.prev=n.prev;this._size-=1;return true}}return false},clear:function clear(){o(this,"clear");this._map=G?new G:null;this._size=0;this._storage=Qr();var t=this._head;var r=t;var n=r.next;while((r=n)!==t){r.key=e;r.value=e;n=r.next;r.next=r.prev=t}t.next=t.prev=t},keys:function keys(){o(this,"keys");return new i(this,"key")},values:function values(){o(this,"values");return new i(this,"value")},entries:function entries(){o(this,"entries");return new i(this,"key+value")},forEach:function forEach(e){o(this,"forEach");var r=arguments.length>1?arguments[1]:null;var n=this.entries();for(var i=n.next();!i.done;i=n.next()){if(r){t(e,r,i.value[1],i.value[0],this)}else{e(i.value[1],i.value[0],this)}}}});Me(a,a.entries);return u}(),Set:function(){var e=function isSet(e){return e._es6set&&typeof e._storage!=="undefined"};var r=function requireSetSlot(t,r){if(!ce.TypeIsObject(t)||!e(t)){throw new TypeError("Set.prototype."+r+" called on incompatible receiver "+ce.ToString(t))}};var o;var i=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}if(this&&this._es6set){throw new TypeError("Bad construction")}var e=Ae(this,Set,o,{_es6set:true,"[[SetData]]":null,_storage:Qr()});if(!e._es6set){throw new TypeError("bad set")}if(arguments.length>0){tn(Set,e,arguments[0])}return e};o=i.prototype;var a=function(e){var t=e;if(t==="^null"){return null}else if(t==="^undefined"){return void 0}else{var r=t.charAt(0);if(r==="$"){return C(t,1)}else if(r==="n"){return+C(t,1)}else if(r==="b"){return t==="btrue"}}return+t};var u=function ensureMap(e){if(!e["[[SetData]]"]){var t=new rn.Map;e["[[SetData]]"]=t;l(n(e._storage),function(e){var r=a(e);t.set(r,r)});e["[[SetData]]"]=t}e._storage=null};m.getter(i.prototype,"size",function(){r(this,"size");if(this._storage){return n(this._storage).length}u(this);return this["[[SetData]]"].size});b(i.prototype,{has:function has(e){r(this,"has");var t;if(this._storage&&(t=Yr(e))!==null){return!!this._storage[t]}u(this);return this["[[SetData]]"].has(e)},add:function add(e){r(this,"add");var t;if(this._storage&&(t=Yr(e))!==null){this._storage[t]=true;return this}u(this);this["[[SetData]]"].set(e,e);return this},"delete":function(e){r(this,"delete");var t;if(this._storage&&(t=Yr(e))!==null){var n=z(this._storage,t);return delete this._storage[t]&&n}u(this);return this["[[SetData]]"]["delete"](e)},clear:function clear(){r(this,"clear");if(this._storage){this._storage=Qr()}if(this["[[SetData]]"]){this["[[SetData]]"].clear()}},values:function values(){r(this,"values");u(this);return new f(this["[[SetData]]"].values())},entries:function entries(){r(this,"entries");u(this);return new f(this["[[SetData]]"].entries())},forEach:function forEach(e){r(this,"forEach");var n=arguments.length>1?arguments[1]:null;var o=this;u(o);this["[[SetData]]"].forEach(function(r,i){if(n){t(e,n,i,i,o)}else{e(i,i,o)}})}});h(i.prototype,"keys",i.prototype.values,true);Me(i.prototype,i.prototype.values);var f=function SetIterator(e){this.it=e};f.prototype={isSetIterator:true,next:function next(){if(!this.isSetIterator){throw new TypeError("Not a SetIterator")}return this.it.next()}};Me(f.prototype);return i}()};var nn=S.Set&&!Set.prototype["delete"]&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys);if(nn){S.Set=rn.Set}if(S.Map||S.Set){var on=a(function(){return new Map([[1,2]]).get(1)===2});if(!on){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,S.Map.prototype);return e};S.Map.prototype=O(G.prototype);h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var an=new Map;var un=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);e.set(-0,e);return e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}();var fn=an.set(1,2)===an;if(!un||!fn){ne(Map.prototype,"set",function set(e,r){t(U,this,e===0?0:e,r);return this})}if(!un){b(Map.prototype,{get:function get(e){return t(V,this,e===0?0:e)},has:function has(e){return t(B,this,e===0?0:e)}},true);m.preserveToString(Map.prototype.get,V);m.preserveToString(Map.prototype.has,B)}var sn=new Set;var cn=Set.prototype["delete"]&&Set.prototype.add&&Set.prototype.has&&function(e){e["delete"](0);e.add(-0);return!e.has(0)}(sn);var ln=sn.add(1)===sn;if(!cn||!ln){var pn=Set.prototype.add;Set.prototype.add=function add(e){t(pn,this,e===0?0:e);return this};m.preserveToString(Set.prototype.add,pn)}if(!cn){var vn=Set.prototype.has;Set.prototype.has=function has(e){return t(vn,this,e===0?0:e)};m.preserveToString(Set.prototype.has,vn);var yn=Set.prototype["delete"];Set.prototype["delete"]=function SetDelete(e){return t(yn,this,e===0?0:e)};m.preserveToString(Set.prototype["delete"],yn)}var hn=w(S.Map,function(e){var t=new e([]);t.set(42,42);return t instanceof e});var bn=Object.setPrototypeOf&&!hn;var gn=function(){try{return!(S.Map()instanceof S.Map)}catch(e){return e instanceof TypeError}}();if(S.Map.length!==0||bn||!gn){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Map.prototype);return e};S.Map.prototype=G.prototype;h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var dn=w(S.Set,function(e){var t=new e([]);t.add(42,42);return t instanceof e});var mn=Object.setPrototypeOf&&!dn;var On=function(){try{return!(S.Set()instanceof S.Set)}catch(e){return e instanceof TypeError}}();if(S.Set.length!==0||mn||!On){var wn=S.Set;S.Set=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}var e=new wn;if(arguments.length>0){tn(Set,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Set.prototype);return e};S.Set.prototype=wn.prototype;h(S.Set.prototype,"constructor",S.Set,true);m.preserveToString(S.Set,wn)}var jn=new S.Map;var Sn=!a(function(){return jn.keys().next().done});if(typeof S.Map.prototype.clear!=="function"||(new S.Set).size!==0||jn.size!==0||typeof S.Map.prototype.keys!=="function"||typeof S.Set.prototype.keys!=="function"||typeof S.Map.prototype.forEach!=="function"||typeof S.Set.prototype.forEach!=="function"||u(S.Map)||u(S.Set)||typeof jn.keys().next!=="function"||Sn||!hn){b(S,{Map:rn.Map,Set:rn.Set},true)}if(S.Set.prototype.keys!==S.Set.prototype.values){h(S.Set.prototype,"keys",S.Set.prototype.values,true)}Me(Object.getPrototypeOf((new S.Map).keys()));Me(Object.getPrototypeOf((new S.Set).keys()));if(c&&S.Set.prototype.has.name!=="has"){var Tn=S.Set.prototype.has;ne(S.Set.prototype,"has",function has(e){return t(Tn,this,e)})}}b(S,rn);Ce(S.Map);Ce(S.Set)}var In=function throwUnlessTargetIsObject(e){if(!ce.TypeIsObject(e)){throw new TypeError("target must be an object")}};var En={apply:function apply(){return ce.Call(ce.Call,null,arguments)},construct:function construct(e,t){if(!ce.IsConstructor(e)){throw new TypeError("First argument must be a constructor.")}var r=arguments.length>2?arguments[2]:e;if(!ce.IsConstructor(r)){throw new TypeError("new.target must be a constructor.")}return ce.Construct(e,t,r,"internal")},deleteProperty:function deleteProperty(e,t){In(e);if(s){var r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable){return false}}return delete e[t]},has:function has(e,t){In(e);return t in e}};if(Object.getOwnPropertyNames){Object.assign(En,{ownKeys:function ownKeys(e){In(e);var t=Object.getOwnPropertyNames(e);if(ce.IsCallable(Object.getOwnPropertySymbols)){x(t,Object.getOwnPropertySymbols(e))}return t}})}var Pn=function ConvertExceptionToBoolean(e){return!i(e)};if(Object.preventExtensions){Object.assign(En,{isExtensible:function isExtensible(e){In(e);return Object.isExtensible(e)},preventExtensions:function preventExtensions(e){In(e);return Pn(function(){return Object.preventExtensions(e)})}})}if(s){var Cn=function get(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n){var o=Object.getPrototypeOf(e);if(o===null){return void 0}return Cn(o,t,r)}if("value"in n){return n.value}if(n.get){return ce.Call(n.get,r)}return void 0};var Mn=function set(e,r,n,o){var i=Object.getOwnPropertyDescriptor(e,r);if(!i){var a=Object.getPrototypeOf(e);if(a!==null){return Mn(a,r,n,o)}i={value:void 0,writable:true,enumerable:true,configurable:true}}if("value"in i){if(!i.writable){return false}if(!ce.TypeIsObject(o)){return false}var u=Object.getOwnPropertyDescriptor(o,r);if(u){return ae.defineProperty(o,r,{value:n})}else{return ae.defineProperty(o,r,{value:n,writable:true,enumerable:true,configurable:true})}}if(i.set){t(i.set,o,n);return true}return false};Object.assign(En,{defineProperty:function defineProperty(e,t,r){In(e);return Pn(function(){return Object.defineProperty(e,t,r)})},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(e,t){In(e);return Object.getOwnPropertyDescriptor(e,t)},get:function get(e,t){In(e);var r=arguments.length>2?arguments[2]:e;return Cn(e,t,r)},set:function set(e,t,r){In(e);var n=arguments.length>3?arguments[3]:e;return Mn(e,t,r,n)}})}if(Object.getPrototypeOf){var xn=Object.getPrototypeOf;En.getPrototypeOf=function getPrototypeOf(e){In(e);return xn(e)}}if(Object.setPrototypeOf&&En.getPrototypeOf){var Nn=function(e,t){var r=t;while(r){if(e===r){return true}r=En.getPrototypeOf(r)}return false};Object.assign(En,{setPrototypeOf:function setPrototypeOf(e,t){In(e);if(t!==null&&!ce.TypeIsObject(t)){throw new TypeError("proto must be an object or null")}if(t===ae.getPrototypeOf(e)){return true}if(ae.isExtensible&&!ae.isExtensible(e)){return false}if(Nn(e,t)){return false}Object.setPrototypeOf(e,t);return true}})}var An=function(e,t){if(!ce.IsCallable(S.Reflect[e])){h(S.Reflect,e,t)}else{var r=a(function(){S.Reflect[e](1);S.Reflect[e](NaN);S.Reflect[e](true);return true});if(r){ne(S.Reflect,e,t)}}};Object.keys(En).forEach(function(e){An(e,En[e])});var Rn=S.Reflect.getPrototypeOf;if(c&&Rn&&Rn.name!=="getPrototypeOf"){ne(S.Reflect,"getPrototypeOf",function getPrototypeOf(e){return t(Rn,S.Reflect,e)})}if(S.Reflect.setPrototypeOf){if(a(function(){S.Reflect.setPrototypeOf(1,{});return true})){ne(S.Reflect,"setPrototypeOf",En.setPrototypeOf)}}if(S.Reflect.defineProperty){if(!a(function(){var e=!S.Reflect.defineProperty(1,"test",{value:1});var t=typeof Object.preventExtensions!=="function"||!S.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})){ne(S.Reflect,"defineProperty",En.defineProperty)}}if(S.Reflect.construct){if(!a(function(){var e=function F(){};return S.Reflect.construct(function(){},[],e)instanceof e})){ne(S.Reflect,"construct",En.construct)}}if(String(new Date(NaN))!=="Invalid Date"){var _n=Date.prototype.toString;var kn=function toString(){var e=+this;if(e!==e){return"Invalid Date"}return ce.Call(_n,this)};ne(Date.prototype,"toString",kn)}var Ln={anchor:function anchor(e){return ce.CreateHTML(this,"a","name",e)},big:function big(){return ce.CreateHTML(this,"big","","")},blink:function blink(){return ce.CreateHTML(this,"blink","","")},bold:function bold(){return ce.CreateHTML(this,"b","","")},fixed:function fixed(){return ce.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(e){return ce.CreateHTML(this,"font","color",e)},fontsize:function fontsize(e){return ce.CreateHTML(this,"font","size",e)},italics:function italics(){return ce.CreateHTML(this,"i","","")},link:function link(e){return ce.CreateHTML(this,"a","href",e)},small:function small(){return ce.CreateHTML(this,"small","","")},strike:function strike(){return ce.CreateHTML(this,"strike","","")},sub:function sub(){return ce.CreateHTML(this,"sub","","")},sup:function sub(){return ce.CreateHTML(this,"sup","","")}};l(Object.keys(Ln),function(e){var r=String.prototype[e];var n=false;if(ce.IsCallable(r)){var o=t(r,"",' " ');var i=P([],o.match(/"/g)).length;n=o!==o.toLowerCase()||i>2}else{n=true}if(n){ne(String.prototype,e,Ln[e])}});var Fn=function(){if(!oe){return false}var e=typeof JSON==="object"&&typeof JSON.stringify==="function"?JSON.stringify:null;if(!e){return false}if(typeof e($())!=="undefined"){return true}if(e([$()])!=="[null]"){return true}var t={a:$()};t[$()]=true;if(e(t)!=="{}"){return true}return false}();var Dn=a(function(){if(!oe){return true}return JSON.stringify(Object($()))==="{}"&&JSON.stringify([Object($())])==="[{}]"});if(Fn||!Dn){var zn=JSON.stringify;ne(JSON,"stringify",function stringify(e){if(typeof e==="symbol"){return}var n;if(arguments.length>1){n=arguments[1]}var o=[e];if(!r(n)){var i=ce.IsCallable(n)?n:null;var a=function(e,r){var n=i?t(i,this,e,r):r;if(typeof n!=="symbol"){if(re.symbol(n)){return Nt({})(n)}else{return n}}};o.push(a)}else{o.push(n)}if(arguments.length>2){o.push(arguments[2])}return zn.apply(this,o)})}return S});
/*! jQuery v3.7.1 | (c) OpenJS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(ie,e){"use strict";var oe=[],r=Object.getPrototypeOf,ae=oe.slice,g=oe.flat?function(e){return oe.flat.call(e)}:function(e){return oe.concat.apply([],e)},s=oe.push,se=oe.indexOf,n={},i=n.toString,ue=n.hasOwnProperty,o=ue.toString,a=o.call(Object),le={},v=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},y=function(e){return null!=e&&e===e.window},C=ie.document,u={type:!0,src:!0,nonce:!0,noModule:!0};function m(e,t,n){var r,i,o=(n=n||C).createElement("script");if(o.text=e,t)for(r in u)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[i.call(e)]||"object":typeof e}var t="3.7.1",l=/HTML$/i,ce=function(e,t){return new ce.fn.init(e,t)};function c(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!v(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function fe(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}ce.fn=ce.prototype={jquery:t,constructor:ce,length:0,toArray:function(){return ae.call(this)},get:function(e){return null==e?ae.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=ce.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ce.each(this,e)},map:function(n){return this.pushStack(ce.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(ae.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(ce.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(ce.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:oe.sort,splice:oe.splice},ce.extend=ce.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||v(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(ce.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||ce.isPlainObject(n)?n:{},i=!1,a[t]=ce.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},ce.extend({expando:"jQuery"+(t+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==i.call(e))&&(!(t=r(e))||"function"==typeof(n=ue.call(t,"constructor")&&t.constructor)&&o.call(n)===a)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){m(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(c(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n="",r=0,i=e.nodeType;if(!i)while(t=e[r++])n+=ce.text(t);return 1===i||11===i?e.textContent:9===i?e.documentElement.textContent:3===i||4===i?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(c(Object(e))?ce.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:se.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!l.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(c(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:le}),"function"==typeof Symbol&&(ce.fn[Symbol.iterator]=oe[Symbol.iterator]),ce.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var pe=oe.pop,de=oe.sort,he=oe.splice,ge="[\\x20\\t\\r\\n\\f]",ve=new RegExp("^"+ge+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ge+"+$","g");ce.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var f=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function p(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}ce.escapeSelector=function(e){return(e+"").replace(f,p)};var ye=C,me=s;!function(){var e,b,w,o,a,T,r,C,d,i,k=me,S=ce.expando,E=0,n=0,s=W(),c=W(),u=W(),h=W(),l=function(e,t){return e===t&&(a=!0),0},f="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",t="(?:\\\\[\\da-fA-F]{1,6}"+ge+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",p="\\["+ge+"*("+t+")(?:"+ge+"*([*^$|!~]?=)"+ge+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+t+"))|)"+ge+"*\\]",g=":("+t+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+p+")*)|.*)\\)|)",v=new RegExp(ge+"+","g"),y=new RegExp("^"+ge+"*,"+ge+"*"),m=new RegExp("^"+ge+"*([>+~]|"+ge+")"+ge+"*"),x=new RegExp(ge+"|>"),j=new RegExp(g),A=new RegExp("^"+t+"$"),D={ID:new RegExp("^#("+t+")"),CLASS:new RegExp("^\\.("+t+")"),TAG:new RegExp("^("+t+"|[*])"),ATTR:new RegExp("^"+p),PSEUDO:new RegExp("^"+g),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ge+"*(even|odd|(([+-]|)(\\d*)n|)"+ge+"*(?:([+-]|)"+ge+"*(\\d+)|))"+ge+"*\\)|)","i"),bool:new RegExp("^(?:"+f+")$","i"),needsContext:new RegExp("^"+ge+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ge+"*((?:-\\d)?\\d*)"+ge+"*\\)|)(?=[^-]|$)","i")},N=/^(?:input|select|textarea|button)$/i,q=/^h\d$/i,L=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,H=/[+~]/,O=new RegExp("\\\\[\\da-fA-F]{1,6}"+ge+"?|\\\\([^\\r\\n\\f])","g"),P=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},M=function(){V()},R=J(function(e){return!0===e.disabled&&fe(e,"fieldset")},{dir:"parentNode",next:"legend"});try{k.apply(oe=ae.call(ye.childNodes),ye.childNodes),oe[ye.childNodes.length].nodeType}catch(e){k={apply:function(e,t){me.apply(e,ae.call(t))},call:function(e){me.apply(e,ae.call(arguments,1))}}}function I(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(V(e),e=e||T,C)){if(11!==p&&(u=L.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return k.call(n,a),n}else if(f&&(a=f.getElementById(i))&&I.contains(e,a)&&a.id===i)return k.call(n,a),n}else{if(u[2])return k.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&e.getElementsByClassName)return k.apply(n,e.getElementsByClassName(i)),n}if(!(h[t+" "]||d&&d.test(t))){if(c=t,f=e,1===p&&(x.test(t)||m.test(t))){(f=H.test(t)&&U(e.parentNode)||e)==e&&le.scope||((s=e.getAttribute("id"))?s=ce.escapeSelector(s):e.setAttribute("id",s=S)),o=(l=Y(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+Q(l[o]);c=l.join(",")}try{return k.apply(n,f.querySelectorAll(c)),n}catch(e){h(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return re(t.replace(ve,"$1"),e,n,r)}function W(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function F(e){return e[S]=!0,e}function $(e){var t=T.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function B(t){return function(e){return fe(e,"input")&&e.type===t}}function _(t){return function(e){return(fe(e,"input")||fe(e,"button"))&&e.type===t}}function z(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&R(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function X(a){return F(function(o){return o=+o,F(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function U(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function V(e){var t,n=e?e.ownerDocument||e:ye;return n!=T&&9===n.nodeType&&n.documentElement&&(r=(T=n).documentElement,C=!ce.isXMLDoc(T),i=r.matches||r.webkitMatchesSelector||r.msMatchesSelector,r.msMatchesSelector&&ye!=T&&(t=T.defaultView)&&t.top!==t&&t.addEventListener("unload",M),le.getById=$(function(e){return r.appendChild(e).id=ce.expando,!T.getElementsByName||!T.getElementsByName(ce.expando).length}),le.disconnectedMatch=$(function(e){return i.call(e,"*")}),le.scope=$(function(){return T.querySelectorAll(":scope")}),le.cssHas=$(function(){try{return T.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}}),le.getById?(b.filter.ID=function(e){var t=e.replace(O,P);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&C){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(O,P);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&C){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},b.find.CLASS=function(e,t){if("undefined"!=typeof t.getElementsByClassName&&C)return t.getElementsByClassName(e)},d=[],$(function(e){var t;r.appendChild(e).innerHTML="<a id='"+S+"' href='' disabled='disabled'></a><select id='"+S+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+ge+"*(?:value|"+f+")"),e.querySelectorAll("[id~="+S+"-]").length||d.push("~="),e.querySelectorAll("a#"+S+"+*").length||d.push(".#.+[+~]"),e.querySelectorAll(":checked").length||d.push(":checked"),(t=T.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),r.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(t=T.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||d.push("\\["+ge+"*name"+ge+"*="+ge+"*(?:''|\"\")")}),le.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),l=function(e,t){if(e===t)return a=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!le.sortDetached&&t.compareDocumentPosition(e)===n?e===T||e.ownerDocument==ye&&I.contains(ye,e)?-1:t===T||t.ownerDocument==ye&&I.contains(ye,t)?1:o?se.call(o,e)-se.call(o,t):0:4&n?-1:1)}),T}for(e in I.matches=function(e,t){return I(e,null,null,t)},I.matchesSelector=function(e,t){if(V(e),C&&!h[t+" "]&&(!d||!d.test(t)))try{var n=i.call(e,t);if(n||le.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){h(t,!0)}return 0<I(t,T,null,[e]).length},I.contains=function(e,t){return(e.ownerDocument||e)!=T&&V(e),ce.contains(e,t)},I.attr=function(e,t){(e.ownerDocument||e)!=T&&V(e);var n=b.attrHandle[t.toLowerCase()],r=n&&ue.call(b.attrHandle,t.toLowerCase())?n(e,t,!C):void 0;return void 0!==r?r:e.getAttribute(t)},I.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ce.uniqueSort=function(e){var t,n=[],r=0,i=0;if(a=!le.sortStable,o=!le.sortStable&&ae.call(e,0),de.call(e,l),a){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)he.call(e,n[r],1)}return o=null,e},ce.fn.uniqueSort=function(){return this.pushStack(ce.uniqueSort(ae.apply(this)))},(b=ce.expr={cacheLength:50,createPseudo:F,match:D,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(O,P),e[3]=(e[3]||e[4]||e[5]||"").replace(O,P),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||I.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&I.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return D.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&j.test(n)&&(t=Y(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(O,P).toLowerCase();return"*"===e?function(){return!0}:function(e){return fe(e,t)}},CLASS:function(e){var t=s[e+" "];return t||(t=new RegExp("(^|"+ge+")"+e+"("+ge+"|$)"))&&s(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=I.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(v," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(d,e,t,h,g){var v="nth"!==d.slice(0,3),y="last"!==d.slice(-4),m="of-type"===e;return 1===h&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u=v!==y?"nextSibling":"previousSibling",l=e.parentNode,c=m&&e.nodeName.toLowerCase(),f=!n&&!m,p=!1;if(l){if(v){while(u){o=e;while(o=o[u])if(m?fe(o,c):1===o.nodeType)return!1;s=u="only"===d&&!s&&"nextSibling"}return!0}if(s=[y?l.firstChild:l.lastChild],y&&f){p=(a=(r=(i=l[S]||(l[S]={}))[d]||[])[0]===E&&r[1])&&r[2],o=a&&l.childNodes[a];while(o=++a&&o&&o[u]||(p=a=0)||s.pop())if(1===o.nodeType&&++p&&o===e){i[d]=[E,a,p];break}}else if(f&&(p=a=(r=(i=e[S]||(e[S]={}))[d]||[])[0]===E&&r[1]),!1===p)while(o=++a&&o&&o[u]||(p=a=0)||s.pop())if((m?fe(o,c):1===o.nodeType)&&++p&&(f&&((i=o[S]||(o[S]={}))[d]=[E,p]),o===e))break;return(p-=g)===h||p%h==0&&0<=p/h}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||I.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?F(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=se.call(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:F(function(e){var r=[],i=[],s=ne(e.replace(ve,"$1"));return s[S]?F(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:F(function(t){return function(e){return 0<I(t,e).length}}),contains:F(function(t){return t=t.replace(O,P),function(e){return-1<(e.textContent||ce.text(e)).indexOf(t)}}),lang:F(function(n){return A.test(n||"")||I.error("unsupported lang: "+n),n=n.replace(O,P).toLowerCase(),function(e){var t;do{if(t=C?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=ie.location&&ie.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===r},focus:function(e){return e===function(){try{return T.activeElement}catch(e){}}()&&T.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:z(!1),disabled:z(!0),checked:function(e){return fe(e,"input")&&!!e.checked||fe(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return q.test(e.nodeName)},input:function(e){return N.test(e.nodeName)},button:function(e){return fe(e,"input")&&"button"===e.type||fe(e,"button")},text:function(e){var t;return fe(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:X(function(){return[0]}),last:X(function(e,t){return[t-1]}),eq:X(function(e,t,n){return[n<0?n+t:n]}),even:X(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:X(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:X(function(e,t,n){var r;for(r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:X(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=B(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=_(e);function G(){}function Y(e,t){var n,r,i,o,a,s,u,l=c[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=y.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=m.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(ve," ")}),a=a.slice(n.length)),b.filter)!(r=D[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?I.error(e):c(e,s).slice(0)}function Q(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function J(a,e,t){var s=e.dir,u=e.next,l=u||s,c=t&&"parentNode"===l,f=n++;return e.first?function(e,t,n){while(e=e[s])if(1===e.nodeType||c)return a(e,t,n);return!1}:function(e,t,n){var r,i,o=[E,f];if(n){while(e=e[s])if((1===e.nodeType||c)&&a(e,t,n))return!0}else while(e=e[s])if(1===e.nodeType||c)if(i=e[S]||(e[S]={}),u&&fe(e,u))e=e[s]||e;else{if((r=i[l])&&r[0]===E&&r[1]===f)return o[2]=r[2];if((i[l]=o)[2]=a(e,t,n))return!0}return!1}}function K(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Z(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function ee(d,h,g,v,y,e){return v&&!v[S]&&(v=ee(v)),y&&!y[S]&&(y=ee(y,e)),F(function(e,t,n,r){var i,o,a,s,u=[],l=[],c=t.length,f=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)I(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),p=!d||!e&&h?f:Z(f,u,d,n,r);if(g?g(p,s=y||(e?d:c||v)?[]:t,n,r):s=p,v){i=Z(s,l),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(s[l[o]]=!(p[l[o]]=a))}if(e){if(y||d){if(y){i=[],o=s.length;while(o--)(a=s[o])&&i.push(p[o]=a);y(null,s=[],i,r)}o=s.length;while(o--)(a=s[o])&&-1<(i=y?se.call(e,a):u[o])&&(e[i]=!(t[i]=a))}}else s=Z(s===t?s.splice(c,s.length):s),y?y(null,t,s,r):k.apply(t,s)})}function te(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=J(function(e){return e===i},a,!0),l=J(function(e){return-1<se.call(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!=w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[J(K(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return ee(1<s&&K(c),1<s&&Q(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ve,"$1"),t,s<n&&te(e.slice(s,n)),n<r&&te(e=e.slice(n)),n<r&&Q(e))}c.push(t)}return K(c)}function ne(e,t){var n,v,y,m,x,r,i=[],o=[],a=u[e+" "];if(!a){t||(t=Y(e)),n=t.length;while(n--)(a=te(t[n]))[S]?i.push(a):o.push(a);(a=u(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=E+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==T||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==T||(V(o),n=!C);while(s=v[a++])if(s(o,t||T,n)){k.call(r,o);break}i&&(E=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=pe.call(r));f=Z(f)}k.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&ce.uniqueSort(r)}return i&&(E=h,w=p),c},m?F(r):r))).selector=e}return a}function re(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&Y(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&C&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(O,P),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=D.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(O,P),H.test(o[0].type)&&U(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&Q(o)))return k.apply(n,r),n;break}}}return(l||ne(e,c))(r,t,!C,n,!t||H.test(e)&&U(t.parentNode)||t),n}G.prototype=b.filters=b.pseudos,b.setFilters=new G,le.sortStable=S.split("").sort(l).join("")===S,V(),le.sortDetached=$(function(e){return 1&e.compareDocumentPosition(T.createElement("fieldset"))}),ce.find=I,ce.expr[":"]=ce.expr.pseudos,ce.unique=ce.uniqueSort,I.compile=ne,I.select=re,I.setDocument=V,I.tokenize=Y,I.escape=ce.escapeSelector,I.getText=ce.text,I.isXML=ce.isXMLDoc,I.selectors=ce.expr,I.support=ce.support,I.uniqueSort=ce.uniqueSort}();var d=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&ce(e).is(n))break;r.push(e)}return r},h=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},b=ce.expr.match.needsContext,w=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function T(e,n,r){return v(n)?ce.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?ce.grep(e,function(e){return e===n!==r}):"string"!=typeof n?ce.grep(e,function(e){return-1<se.call(n,e)!==r}):ce.filter(n,e,r)}ce.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ce.find.matchesSelector(r,e)?[r]:[]:ce.find.matches(e,ce.grep(t,function(e){return 1===e.nodeType}))},ce.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(ce(e).filter(function(){for(t=0;t<r;t++)if(ce.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)ce.find(e,i[t],n);return 1<r?ce.uniqueSort(n):n},filter:function(e){return this.pushStack(T(this,e||[],!1))},not:function(e){return this.pushStack(T(this,e||[],!0))},is:function(e){return!!T(this,"string"==typeof e&&b.test(e)?ce(e):e||[],!1).length}});var k,S=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(ce.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||k,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:S.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof ce?t[0]:t,ce.merge(this,ce.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:C,!0)),w.test(r[1])&&ce.isPlainObject(t))for(r in t)v(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=C.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(ce):ce.makeArray(e,this)}).prototype=ce.fn,k=ce(C);var E=/^(?:parents|prev(?:Until|All))/,j={children:!0,contents:!0,next:!0,prev:!0};function A(e,t){while((e=e[t])&&1!==e.nodeType);return e}ce.fn.extend({has:function(e){var t=ce(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ce.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&ce(e);if(!b.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&ce.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?ce.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?se.call(ce(e),this[0]):se.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ce.uniqueSort(ce.merge(this.get(),ce(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ce.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return d(e,"parentNode")},parentsUntil:function(e,t,n){return d(e,"parentNode",n)},next:function(e){return A(e,"nextSibling")},prev:function(e){return A(e,"previousSibling")},nextAll:function(e){return d(e,"nextSibling")},prevAll:function(e){return d(e,"previousSibling")},nextUntil:function(e,t,n){return d(e,"nextSibling",n)},prevUntil:function(e,t,n){return d(e,"previousSibling",n)},siblings:function(e){return h((e.parentNode||{}).firstChild,e)},children:function(e){return h(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(fe(e,"template")&&(e=e.content||e),ce.merge([],e.childNodes))}},function(r,i){ce.fn[r]=function(e,t){var n=ce.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=ce.filter(t,n)),1<this.length&&(j[r]||ce.uniqueSort(n),E.test(r)&&n.reverse()),this.pushStack(n)}});var D=/[^\x20\t\r\n\f]+/g;function N(e){return e}function q(e){throw e}function L(e,t,n,r){var i;try{e&&v(i=e.promise)?i.call(e).done(t).fail(n):e&&v(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}ce.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},ce.each(e.match(D)||[],function(e,t){n[t]=!0}),n):ce.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){ce.each(e,function(e,t){v(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==x(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return ce.each(arguments,function(e,t){var n;while(-1<(n=ce.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<ce.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},ce.extend({Deferred:function(e){var o=[["notify","progress",ce.Callbacks("memory"),ce.Callbacks("memory"),2],["resolve","done",ce.Callbacks("once memory"),ce.Callbacks("once memory"),0,"resolved"],["reject","fail",ce.Callbacks("once memory"),ce.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return ce.Deferred(function(r){ce.each(o,function(e,t){var n=v(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&v(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,v(t)?s?t.call(e,l(u,o,N,s),l(u,o,q,s)):(u++,t.call(e,l(u,o,N,s),l(u,o,q,s),l(u,o,N,o.notifyWith))):(a!==N&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){ce.Deferred.exceptionHook&&ce.Deferred.exceptionHook(e,t.error),u<=i+1&&(a!==q&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(ce.Deferred.getErrorHook?t.error=ce.Deferred.getErrorHook():ce.Deferred.getStackHook&&(t.error=ce.Deferred.getStackHook()),ie.setTimeout(t))}}return ce.Deferred(function(e){o[0][3].add(l(0,e,v(r)?r:N,e.notifyWith)),o[1][3].add(l(0,e,v(t)?t:N)),o[2][3].add(l(0,e,v(n)?n:q))}).promise()},promise:function(e){return null!=e?ce.extend(e,a):a}},s={};return ce.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=ae.call(arguments),o=ce.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?ae.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(L(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||v(i[t]&&i[t].then)))return o.then();while(t--)L(i[t],a(t),o.reject);return o.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ce.Deferred.exceptionHook=function(e,t){ie.console&&ie.console.warn&&e&&H.test(e.name)&&ie.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},ce.readyException=function(e){ie.setTimeout(function(){throw e})};var O=ce.Deferred();function P(){C.removeEventListener("DOMContentLoaded",P),ie.removeEventListener("load",P),ce.ready()}ce.fn.ready=function(e){return O.then(e)["catch"](function(e){ce.readyException(e)}),this},ce.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--ce.readyWait:ce.isReady)||(ce.isReady=!0)!==e&&0<--ce.readyWait||O.resolveWith(C,[ce])}}),ce.ready.then=O.then,"complete"===C.readyState||"loading"!==C.readyState&&!C.documentElement.doScroll?ie.setTimeout(ce.ready):(C.addEventListener("DOMContentLoaded",P),ie.addEventListener("load",P));var M=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===x(n))for(s in i=!0,n)M(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,v(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(ce(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},R=/^-ms-/,I=/-([a-z])/g;function W(e,t){return t.toUpperCase()}function F(e){return e.replace(R,"ms-").replace(I,W)}var $=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function B(){this.expando=ce.expando+B.uid++}B.uid=1,B.prototype={cache:function(e){var t=e[this.expando];return t||(t={},$(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[F(t)]=n;else for(r in t)i[F(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][F(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(F):(t=F(t))in r?[t]:t.match(D)||[]).length;while(n--)delete r[t[n]]}(void 0===t||ce.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ce.isEmptyObject(t)}};var _=new B,z=new B,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,U=/[A-Z]/g;function V(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(U,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:X.test(i)?JSON.parse(i):i)}catch(e){}z.set(e,t,n)}else n=void 0;return n}ce.extend({hasData:function(e){return z.hasData(e)||_.hasData(e)},data:function(e,t,n){return z.access(e,t,n)},removeData:function(e,t){z.remove(e,t)},_data:function(e,t,n){return _.access(e,t,n)},_removeData:function(e,t){_.remove(e,t)}}),ce.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=z.get(o),1===o.nodeType&&!_.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=F(r.slice(5)),V(o,r,i[r]));_.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){z.set(this,n)}):M(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=z.get(o,n))?t:void 0!==(t=V(o,n))?t:void 0;this.each(function(){z.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){z.remove(this,e)})}}),ce.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=_.get(e,t),n&&(!r||Array.isArray(n)?r=_.access(e,t,ce.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=ce.queue(e,t),r=n.length,i=n.shift(),o=ce._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){ce.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return _.get(e,n)||_.access(e,n,{empty:ce.Callbacks("once memory").add(function(){_.remove(e,[t+"queue",n])})})}}),ce.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?ce.queue(this[0],t):void 0===n?this:this.each(function(){var e=ce.queue(this,t,n);ce._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&ce.dequeue(this,t)})},dequeue:function(e){return this.each(function(){ce.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=ce.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=_.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var G=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Y=new RegExp("^(?:([+-])=|)("+G+")([a-z%]*)$","i"),Q=["Top","Right","Bottom","Left"],J=C.documentElement,K=function(e){return ce.contains(e.ownerDocument,e)},Z={composed:!0};J.getRootNode&&(K=function(e){return ce.contains(e.ownerDocument,e)||e.getRootNode(Z)===e.ownerDocument});var ee=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&K(e)&&"none"===ce.css(e,"display")};function te(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return ce.css(e,t,"")},u=s(),l=n&&n[3]||(ce.cssNumber[t]?"":"px"),c=e.nodeType&&(ce.cssNumber[t]||"px"!==l&&+u)&&Y.exec(ce.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)ce.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,ce.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ne={};function re(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=_.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ee(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ne[s])||(o=a.body.appendChild(a.createElement(s)),u=ce.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ne[s]=u)))):"none"!==n&&(l[c]="none",_.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}ce.fn.extend({show:function(){return re(this,!0)},hide:function(){return re(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ee(this)?ce(this).show():ce(this).hide()})}});var xe,be,we=/^(?:checkbox|radio)$/i,Te=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ce=/^$|^module$|\/(?:java|ecma)script/i;xe=C.createDocumentFragment().appendChild(C.createElement("div")),(be=C.createElement("input")).setAttribute("type","radio"),be.setAttribute("checked","checked"),be.setAttribute("name","t"),xe.appendChild(be),le.checkClone=xe.cloneNode(!0).cloneNode(!0).lastChild.checked,xe.innerHTML="<textarea>x</textarea>",le.noCloneChecked=!!xe.cloneNode(!0).lastChild.defaultValue,xe.innerHTML="<option></option>",le.option=!!xe.lastChild;var ke={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Se(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&fe(e,t)?ce.merge([e],n):n}function Ee(e,t){for(var n=0,r=e.length;n<r;n++)_.set(e[n],"globalEval",!t||_.get(t[n],"globalEval"))}ke.tbody=ke.tfoot=ke.colgroup=ke.caption=ke.thead,ke.th=ke.td,le.option||(ke.optgroup=ke.option=[1,"<select multiple='multiple'>","</select>"]);var je=/<|&#?\w+;/;function Ae(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===x(o))ce.merge(p,o.nodeType?[o]:o);else if(je.test(o)){a=a||f.appendChild(t.createElement("div")),s=(Te.exec(o)||["",""])[1].toLowerCase(),u=ke[s]||ke._default,a.innerHTML=u[1]+ce.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;ce.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<ce.inArray(o,r))i&&i.push(o);else if(l=K(o),a=Se(f.appendChild(o),"script"),l&&Ee(a),n){c=0;while(o=a[c++])Ce.test(o.type||"")&&n.push(o)}return f}var De=/^([^.]*)(?:\.(.+)|)/;function Ne(){return!0}function qe(){return!1}function Le(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Le(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=qe;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return ce().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=ce.guid++)),e.each(function(){ce.event.add(this,t,i,r,n)})}function He(e,r,t){t?(_.set(e,r,!1),ce.event.add(e,r,{namespace:!1,handler:function(e){var t,n=_.get(this,r);if(1&e.isTrigger&&this[r]){if(n)(ce.event.special[r]||{}).delegateType&&e.stopPropagation();else if(n=ae.call(arguments),_.set(this,r,n),this[r](),t=_.get(this,r),_.set(this,r,!1),n!==t)return e.stopImmediatePropagation(),e.preventDefault(),t}else n&&(_.set(this,r,ce.event.trigger(n[0],n.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Ne)}})):void 0===_.get(e,r)&&ce.event.add(e,r,Ne)}ce.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=_.get(t);if($(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&ce.find.matchesSelector(J,i),n.guid||(n.guid=ce.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof ce&&ce.event.triggered!==e.type?ce.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(D)||[""]).length;while(l--)d=g=(s=De.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=ce.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=ce.event.special[d]||{},c=ce.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ce.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),ce.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=_.hasData(e)&&_.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(D)||[""]).length;while(l--)if(d=g=(s=De.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=ce.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||ce.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)ce.event.remove(e,d+t[l],n,r,!0);ce.isEmptyObject(u)&&_.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=ce.event.fix(e),l=(_.get(this,"events")||Object.create(null))[u.type]||[],c=ce.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=ce.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((ce.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<ce(i,this).index(l):ce.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(ce.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[ce.expando]?e:new ce.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return we.test(t.type)&&t.click&&fe(t,"input")&&He(t,"click",!0),!1},trigger:function(e){var t=this||e;return we.test(t.type)&&t.click&&fe(t,"input")&&He(t,"click"),!0},_default:function(e){var t=e.target;return we.test(t.type)&&t.click&&fe(t,"input")&&_.get(t,"click")||fe(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ce.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ce.Event=function(e,t){if(!(this instanceof ce.Event))return new ce.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ne:qe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ce.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[ce.expando]=!0},ce.Event.prototype={constructor:ce.Event,isDefaultPrevented:qe,isPropagationStopped:qe,isImmediatePropagationStopped:qe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ne,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ne,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ne,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ce.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},ce.event.addProp),ce.each({focus:"focusin",blur:"focusout"},function(r,i){function o(e){if(C.documentMode){var t=_.get(this,"handle"),n=ce.event.fix(e);n.type="focusin"===e.type?"focus":"blur",n.isSimulated=!0,t(e),n.target===n.currentTarget&&t(n)}else ce.event.simulate(i,e.target,ce.event.fix(e))}ce.event.special[r]={setup:function(){var e;if(He(this,r,!0),!C.documentMode)return!1;(e=_.get(this,i))||this.addEventListener(i,o),_.set(this,i,(e||0)+1)},trigger:function(){return He(this,r),!0},teardown:function(){var e;if(!C.documentMode)return!1;(e=_.get(this,i)-1)?_.set(this,i,e):(this.removeEventListener(i,o),_.remove(this,i))},_default:function(e){return _.get(e.target,r)},delegateType:i},ce.event.special[i]={setup:function(){var e=this.ownerDocument||this.document||this,t=C.documentMode?this:e,n=_.get(t,i);n||(C.documentMode?this.addEventListener(i,o):e.addEventListener(r,o,!0)),_.set(t,i,(n||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=C.documentMode?this:e,n=_.get(t,i)-1;n?_.set(t,i,n):(C.documentMode?this.removeEventListener(i,o):e.removeEventListener(r,o,!0),_.remove(t,i))}}}),ce.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){ce.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||ce.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),ce.fn.extend({on:function(e,t,n,r){return Le(this,e,t,n,r)},one:function(e,t,n,r){return Le(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ce(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=qe),this.each(function(){ce.event.remove(this,e,n,t)})}});var Oe=/<script|<style|<link/i,Pe=/checked\s*(?:[^=]|=\s*.checked.)/i,Me=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Re(e,t){return fe(e,"table")&&fe(11!==t.nodeType?t:t.firstChild,"tr")&&ce(e).children("tbody")[0]||e}function Ie(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function We(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Fe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(_.hasData(e)&&(s=_.get(e).events))for(i in _.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)ce.event.add(t,i,s[i][n]);z.hasData(e)&&(o=z.access(e),a=ce.extend({},o),z.set(t,a))}}function $e(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=v(d);if(h||1<f&&"string"==typeof d&&!le.checkClone&&Pe.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),$e(t,r,i,o)});if(f&&(t=(e=Ae(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=ce.map(Se(e,"script"),Ie)).length;c<f;c++)u=e,c!==p&&(u=ce.clone(u,!0,!0),s&&ce.merge(a,Se(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,ce.map(a,We),c=0;c<s;c++)u=a[c],Ce.test(u.type||"")&&!_.access(u,"globalEval")&&ce.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?ce._evalUrl&&!u.noModule&&ce._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):m(u.textContent.replace(Me,""),u,l))}return n}function Be(e,t,n){for(var r,i=t?ce.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||ce.cleanData(Se(r)),r.parentNode&&(n&&K(r)&&Ee(Se(r,"script")),r.parentNode.removeChild(r));return e}ce.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=K(e);if(!(le.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ce.isXMLDoc(e)))for(a=Se(c),r=0,i=(o=Se(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&we.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||Se(e),a=a||Se(c),r=0,i=o.length;r<i;r++)Fe(o[r],a[r]);else Fe(e,c);return 0<(a=Se(c,"script")).length&&Ee(a,!f&&Se(e,"script")),c},cleanData:function(e){for(var t,n,r,i=ce.event.special,o=0;void 0!==(n=e[o]);o++)if($(n)){if(t=n[_.expando]){if(t.events)for(r in t.events)i[r]?ce.event.remove(n,r):ce.removeEvent(n,r,t.handle);n[_.expando]=void 0}n[z.expando]&&(n[z.expando]=void 0)}}}),ce.fn.extend({detach:function(e){return Be(this,e,!0)},remove:function(e){return Be(this,e)},text:function(e){return M(this,function(e){return void 0===e?ce.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return $e(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Re(this,e).appendChild(e)})},prepend:function(){return $e(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Re(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ce.cleanData(Se(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ce.clone(this,e,t)})},html:function(e){return M(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!ke[(Te.exec(e)||["",""])[1].toLowerCase()]){e=ce.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(ce.cleanData(Se(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return $e(this,arguments,function(e){var t=this.parentNode;ce.inArray(this,n)<0&&(ce.cleanData(Se(this)),t&&t.replaceChild(e,this))},n)}}),ce.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){ce.fn[e]=function(e){for(var t,n=[],r=ce(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),ce(r[o])[a](t),s.apply(n,t.get());return this.pushStack(n)}});var _e=new RegExp("^("+G+")(?!px)[a-z%]+$","i"),ze=/^--/,Xe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=ie),t.getComputedStyle(e)},Ue=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ve=new RegExp(Q.join("|"),"i");function Ge(e,t,n){var r,i,o,a,s=ze.test(t),u=e.style;return(n=n||Xe(e))&&(a=n.getPropertyValue(t)||n[t],s&&a&&(a=a.replace(ve,"$1")||void 0),""!==a||K(e)||(a=ce.style(e,t)),!le.pixelBoxStyles()&&_e.test(a)&&Ve.test(t)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==a?a+"":a}function Ye(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",J.appendChild(u).appendChild(l);var e=ie.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),J.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=C.createElement("div"),l=C.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",le.clearCloneStyle="content-box"===l.style.backgroundClip,ce.extend(le,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=C.createElement("table"),t=C.createElement("tr"),n=C.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",J.appendChild(e).appendChild(t).appendChild(n),r=ie.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,J.removeChild(e)),a}}))}();var Qe=["Webkit","Moz","ms"],Je=C.createElement("div").style,Ke={};function Ze(e){var t=ce.cssProps[e]||Ke[e];return t||(e in Je?e:Ke[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Qe.length;while(n--)if((e=Qe[n]+t)in Je)return e}(e)||e)}var et=/^(none|table(?!-c[ea]).+)/,tt={position:"absolute",visibility:"hidden",display:"block"},nt={letterSpacing:"0",fontWeight:"400"};function rt(e,t,n){var r=Y.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function it(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=ce.css(e,n+Q[a],!0,i)),r?("content"===n&&(u-=ce.css(e,"padding"+Q[a],!0,i)),"margin"!==n&&(u-=ce.css(e,"border"+Q[a]+"Width",!0,i))):(u+=ce.css(e,"padding"+Q[a],!0,i),"padding"!==n?u+=ce.css(e,"border"+Q[a]+"Width",!0,i):s+=ce.css(e,"border"+Q[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u+l}function ot(e,t,n){var r=Xe(e),i=(!le.boxSizingReliable()||n)&&"border-box"===ce.css(e,"boxSizing",!1,r),o=i,a=Ge(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(_e.test(a)){if(!n)return a;a="auto"}return(!le.boxSizingReliable()&&i||!le.reliableTrDimensions()&&fe(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===ce.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===ce.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+it(e,t,n||(i?"border":"content"),o,r,a)+"px"}function at(e,t,n,r,i){return new at.prototype.init(e,t,n,r,i)}ce.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ge(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=F(t),u=ze.test(t),l=e.style;if(u||(t=Ze(s)),a=ce.cssHooks[t]||ce.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=Y.exec(n))&&i[1]&&(n=te(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(ce.cssNumber[s]?"":"px")),le.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=F(t);return ze.test(t)||(t=Ze(s)),(a=ce.cssHooks[t]||ce.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Ge(e,t,r)),"normal"===i&&t in nt&&(i=nt[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),ce.each(["height","width"],function(e,u){ce.cssHooks[u]={get:function(e,t,n){if(t)return!et.test(ce.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ot(e,u,n):Ue(e,tt,function(){return ot(e,u,n)})},set:function(e,t,n){var r,i=Xe(e),o=!le.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===ce.css(e,"boxSizing",!1,i),s=n?it(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-it(e,u,"border",!1,i)-.5)),s&&(r=Y.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=ce.css(e,u)),rt(0,t,s)}}}),ce.cssHooks.marginLeft=Ye(le.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ge(e,"marginLeft"))||e.getBoundingClientRect().left-Ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ce.each({margin:"",padding:"",border:"Width"},function(i,o){ce.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+Q[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(ce.cssHooks[i+o].set=rt)}),ce.fn.extend({css:function(e,t){return M(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Xe(e),i=t.length;a<i;a++)o[t[a]]=ce.css(e,t[a],!1,r);return o}return void 0!==n?ce.style(e,t,n):ce.css(e,t)},e,t,1<arguments.length)}}),((ce.Tween=at).prototype={constructor:at,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||ce.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ce.cssNumber[n]?"":"px")},cur:function(){var e=at.propHooks[this.prop];return e&&e.get?e.get(this):at.propHooks._default.get(this)},run:function(e){var t,n=at.propHooks[this.prop];return this.options.duration?this.pos=t=ce.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):at.propHooks._default.set(this),this}}).init.prototype=at.prototype,(at.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ce.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){ce.fx.step[e.prop]?ce.fx.step[e.prop](e):1!==e.elem.nodeType||!ce.cssHooks[e.prop]&&null==e.elem.style[Ze(e.prop)]?e.elem[e.prop]=e.now:ce.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=at.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ce.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ce.fx=at.prototype.init,ce.fx.step={};var st,ut,lt,ct,ft=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;function dt(){ut&&(!1===C.hidden&&ie.requestAnimationFrame?ie.requestAnimationFrame(dt):ie.setTimeout(dt,ce.fx.interval),ce.fx.tick())}function ht(){return ie.setTimeout(function(){st=void 0}),st=Date.now()}function gt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=Q[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function vt(e,t,n){for(var r,i=(yt.tweeners[t]||[]).concat(yt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function yt(o,e,t){var n,a,r=0,i=yt.prefilters.length,s=ce.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=st||ht(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:ce.extend({},e),opts:ce.extend(!0,{specialEasing:{},easing:ce.easing._default},t),originalProperties:e,originalOptions:t,startTime:st||ht(),duration:t.duration,tweens:[],createTween:function(e,t){var n=ce.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=F(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=ce.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=yt.prefilters[r].call(l,o,c,l.opts))return v(n.stop)&&(ce._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return ce.map(c,vt,l),v(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),ce.fx.timer(ce.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}ce.Animation=ce.extend(yt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return te(n.elem,e,Y.exec(t),n),n}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(D);for(var n,r=0,i=e.length;r<i;r++)n=e[r],yt.tweeners[n]=yt.tweeners[n]||[],yt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ee(e),v=_.get(e,"fxshow");for(r in n.queue||(null==(a=ce._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,ce.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],ft.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||ce.style(e,r)}if((u=!ce.isEmptyObject(t))||!ce.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=_.get(e,"display")),"none"===(c=ce.css(e,"display"))&&(l?c=l:(re([e],!0),l=e.style.display||l,c=ce.css(e,"display"),re([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===ce.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=_.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&re([e],!0),p.done(function(){for(r in g||re([e]),_.remove(e,"fxshow"),d)ce.style(e,r,d[r])})),u=vt(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?yt.prefilters.unshift(e):yt.prefilters.push(e)}}),ce.speed=function(e,t,n){var r=e&&"object"==typeof e?ce.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};return ce.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in ce.fx.speeds?r.duration=ce.fx.speeds[r.duration]:r.duration=ce.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&ce.dequeue(this,r.queue)},r},ce.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ee).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=ce.isEmptyObject(t),o=ce.speed(e,n,r),a=function(){var e=yt(this,ce.extend({},t),o);(i||_.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=ce.timers,r=_.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&pt.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||ce.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=_.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=ce.timers,o=n?n.length:0;for(t.finish=!0,ce.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),ce.each(["toggle","show","hide"],function(e,r){var i=ce.fn[r];ce.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(gt(r,!0),e,t,n)}}),ce.each({slideDown:gt("show"),slideUp:gt("hide"),slideToggle:gt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){ce.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),ce.timers=[],ce.fx.tick=function(){var e,t=0,n=ce.timers;for(st=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||ce.fx.stop(),st=void 0},ce.fx.timer=function(e){ce.timers.push(e),ce.fx.start()},ce.fx.interval=13,ce.fx.start=function(){ut||(ut=!0,dt())},ce.fx.stop=function(){ut=null},ce.fx.speeds={slow:600,fast:200,_default:400},ce.fn.delay=function(r,e){return r=ce.fx&&ce.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=ie.setTimeout(e,r);t.stop=function(){ie.clearTimeout(n)}})},lt=C.createElement("input"),ct=C.createElement("select").appendChild(C.createElement("option")),lt.type="checkbox",le.checkOn=""!==lt.value,le.optSelected=ct.selected,(lt=C.createElement("input")).value="t",lt.type="radio",le.radioValue="t"===lt.value;var mt,xt=ce.expr.attrHandle;ce.fn.extend({attr:function(e,t){return M(this,ce.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){ce.removeAttr(this,e)})}}),ce.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?ce.prop(e,t,n):(1===o&&ce.isXMLDoc(e)||(i=ce.attrHooks[t.toLowerCase()]||(ce.expr.match.bool.test(t)?mt:void 0)),void 0!==n?null===n?void ce.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=ce.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!le.radioValue&&"radio"===t&&fe(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(D);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),mt={set:function(e,t,n){return!1===t?ce.removeAttr(e,n):e.setAttribute(n,n),n}},ce.each(ce.expr.match.bool.source.match(/\w+/g),function(e,t){var a=xt[t]||ce.find.attr;xt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=xt[o],xt[o]=r,r=null!=a(e,t,n)?o:null,xt[o]=i),r}});var bt=/^(?:input|select|textarea|button)$/i,wt=/^(?:a|area)$/i;function Tt(e){return(e.match(D)||[]).join(" ")}function Ct(e){return e.getAttribute&&e.getAttribute("class")||""}function kt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(D)||[]}ce.fn.extend({prop:function(e,t){return M(this,ce.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[ce.propFix[e]||e]})}}),ce.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ce.isXMLDoc(e)||(t=ce.propFix[t]||t,i=ce.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ce.find.attr(e,"tabindex");return t?parseInt(t,10):bt.test(e.nodeName)||wt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),le.optSelected||(ce.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ce.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ce.propFix[this.toLowerCase()]=this}),ce.fn.extend({addClass:function(t){var e,n,r,i,o,a;return v(t)?this.each(function(e){ce(this).addClass(t.call(this,e,Ct(this)))}):(e=kt(t)).length?this.each(function(){if(r=Ct(this),n=1===this.nodeType&&" "+Tt(r)+" "){for(o=0;o<e.length;o++)i=e[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=Tt(n),r!==a&&this.setAttribute("class",a)}}):this},removeClass:function(t){var e,n,r,i,o,a;return v(t)?this.each(function(e){ce(this).removeClass(t.call(this,e,Ct(this)))}):arguments.length?(e=kt(t)).length?this.each(function(){if(r=Ct(this),n=1===this.nodeType&&" "+Tt(r)+" "){for(o=0;o<e.length;o++){i=e[o];while(-1<n.indexOf(" "+i+" "))n=n.replace(" "+i+" "," ")}a=Tt(n),r!==a&&this.setAttribute("class",a)}}):this:this.attr("class","")},toggleClass:function(t,n){var e,r,i,o,a=typeof t,s="string"===a||Array.isArray(t);return v(t)?this.each(function(e){ce(this).toggleClass(t.call(this,e,Ct(this),n),n)}):"boolean"==typeof n&&s?n?this.addClass(t):this.removeClass(t):(e=kt(t),this.each(function(){if(s)for(o=ce(this),i=0;i<e.length;i++)r=e[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&"boolean"!==a||((r=Ct(this))&&_.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===t?"":_.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+Tt(Ct(n))+" ").indexOf(t))return!0;return!1}});var St=/\r/g;ce.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=v(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,ce(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=ce.map(t,function(e){return null==e?"":e+""})),(r=ce.valHooks[this.type]||ce.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=ce.valHooks[t.type]||ce.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(St,""):null==e?"":e:void 0}}),ce.extend({valHooks:{option:{get:function(e){var t=ce.find.attr(e,"value");return null!=t?t:Tt(ce.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!fe(n.parentNode,"optgroup"))){if(t=ce(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=ce.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<ce.inArray(ce.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),ce.each(["radio","checkbox"],function(){ce.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<ce.inArray(ce(e).val(),t)}},le.checkOn||(ce.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Et=ie.location,jt={guid:Date.now()},At=/\?/;ce.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new ie.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||ce.error("Invalid XML: "+(n?ce.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Dt=/^(?:focusinfocus|focusoutblur)$/,Nt=function(e){e.stopPropagation()};ce.extend(ce.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||C],d=ue.call(e,"type")?e.type:e,h=ue.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||C,3!==n.nodeType&&8!==n.nodeType&&!Dt.test(d+ce.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[ce.expando]?e:new ce.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:ce.makeArray(t,[e]),c=ce.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!y(n)){for(s=c.delegateType||d,Dt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||C)&&p.push(a.defaultView||a.parentWindow||ie)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(_.get(o,"events")||Object.create(null))[e.type]&&_.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&$(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!$(n)||u&&v(n[d])&&!y(n)&&((a=n[u])&&(n[u]=null),ce.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,Nt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,Nt),ce.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=ce.extend(new ce.Event,n,{type:e,isSimulated:!0});ce.event.trigger(r,null,t)}}),ce.fn.extend({trigger:function(e,t){return this.each(function(){ce.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ce.event.trigger(e,t,n,!0)}});var qt=/\[\]$/,Lt=/\r?\n/g,Ht=/^(?:submit|button|image|reset|file)$/i,Ot=/^(?:input|select|textarea|keygen)/i;function Pt(n,e,r,i){var t;if(Array.isArray(e))ce.each(e,function(e,t){r||qt.test(n)?i(n,t):Pt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==x(e))i(n,e);else for(t in e)Pt(n+"["+t+"]",e[t],r,i)}ce.param=function(e,t){var n,r=[],i=function(e,t){var n=v(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!ce.isPlainObject(e))ce.each(e,function(){i(this.name,this.value)});else for(n in e)Pt(n,e[n],t,i);return r.join("&")},ce.fn.extend({serialize:function(){return ce.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ce.prop(this,"elements");return e?ce.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ce(this).is(":disabled")&&Ot.test(this.nodeName)&&!Ht.test(e)&&(this.checked||!we.test(e))}).map(function(e,t){var n=ce(this).val();return null==n?null:Array.isArray(n)?ce.map(n,function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}}):{name:t.name,value:n.replace(Lt,"\r\n")}}).get()}});var Mt=/%20/g,Rt=/#.*$/,It=/([?&])_=[^&]*/,Wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ft=/^(?:GET|HEAD)$/,$t=/^\/\//,Bt={},_t={},zt="*/".concat("*"),Xt=C.createElement("a");function Ut(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(D)||[];if(v(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Vt(t,i,o,a){var s={},u=t===_t;function l(e){var r;return s[e]=!0,ce.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function Gt(e,t){var n,r,i=ce.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&ce.extend(!0,e,r),e}Xt.href=Et.href,ce.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ce.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Gt(Gt(e,ce.ajaxSettings),t):Gt(ce.ajaxSettings,e)},ajaxPrefilter:Ut(Bt),ajaxTransport:Ut(_t),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=ce.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?ce(y):ce.event,x=ce.Deferred(),b=ce.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Wt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Et.href)+"").replace($t,Et.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(D)||[""],null==v.crossDomain){r=C.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Xt.protocol+"//"+Xt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=ce.param(v.data,v.traditional)),Vt(Bt,v,t,T),h)return T;for(i in(g=ce.event&&v.global)&&0==ce.active++&&ce.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Ft.test(v.type),f=v.url.replace(Rt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Mt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(At.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(It,"$1"),o=(At.test(f)?"&":"?")+"_="+jt.guid+++o),v.url=f+o),v.ifModified&&(ce.lastModified[f]&&T.setRequestHeader("If-Modified-Since",ce.lastModified[f]),ce.etag[f]&&T.setRequestHeader("If-None-Match",ce.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+zt+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Vt(_t,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=ie.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&ie.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<ce.inArray("script",v.dataTypes)&&ce.inArray("json",v.dataTypes)<0&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(ce.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(ce.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--ce.active||ce.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return ce.get(e,t,n,"json")},getScript:function(e,t){return ce.get(e,void 0,t,"script")}}),ce.each(["get","post"],function(e,i){ce[i]=function(e,t,n,r){return v(t)&&(r=r||n,n=t,t=void 0),ce.ajax(ce.extend({url:e,type:i,dataType:r,data:t,success:n},ce.isPlainObject(e)&&e))}}),ce.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),ce._evalUrl=function(e,t,n){return ce.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){ce.globalEval(e,t,n)}})},ce.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=ce(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return v(n)?this.each(function(e){ce(this).wrapInner(n.call(this,e))}):this.each(function(){var e=ce(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=v(t);return this.each(function(e){ce(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){ce(this).replaceWith(this.childNodes)}),this}}),ce.expr.pseudos.hidden=function(e){return!ce.expr.pseudos.visible(e)},ce.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ce.ajaxSettings.xhr=function(){try{return new ie.XMLHttpRequest}catch(e){}};var Yt={0:200,1223:204},Qt=ce.ajaxSettings.xhr();le.cors=!!Qt&&"withCredentials"in Qt,le.ajax=Qt=!!Qt,ce.ajaxTransport(function(i){var o,a;if(le.cors||Qt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Yt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&ie.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),ce.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ce.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ce.globalEval(e),e}}}),ce.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ce.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=ce("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),C.head.appendChild(r[0])},abort:function(){i&&i()}}});var Jt,Kt=[],Zt=/(=)\?(?=&|$)|\?\?/;ce.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Kt.pop()||ce.expando+"_"+jt.guid++;return this[e]=!0,e}}),ce.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Zt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Zt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Zt,"$1"+r):!1!==e.jsonp&&(e.url+=(At.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||ce.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=ie[r],ie[r]=function(){o=arguments},n.always(function(){void 0===i?ce(ie).removeProp(r):ie[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Kt.push(r)),o&&v(i)&&i(o[0]),o=i=void 0}),"script"}),le.createHTMLDocument=((Jt=C.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Jt.childNodes.length),ce.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(le.createHTMLDocument?((r=(t=C.implementation.createHTMLDocument("")).createElement("base")).href=C.location.href,t.head.appendChild(r)):t=C),o=!n&&[],(i=w.exec(e))?[t.createElement(i[1])]:(i=Ae([e],t,o),o&&o.length&&ce(o).remove(),ce.merge([],i.childNodes)));var r,i,o},ce.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=Tt(e.slice(s)),e=e.slice(0,s)),v(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&ce.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?ce("<div>").append(ce.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},ce.expr.pseudos.animated=function(t){return ce.grep(ce.timers,function(e){return t===e.elem}).length},ce.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=ce.css(e,"position"),c=ce(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=ce.css(e,"top"),u=ce.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),v(t)&&(t=t.call(e,n,ce.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},ce.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ce.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===ce.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===ce.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=ce(e).offset()).top+=ce.css(e,"borderTopWidth",!0),i.left+=ce.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-ce.css(r,"marginTop",!0),left:t.left-i.left-ce.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===ce.css(e,"position"))e=e.offsetParent;return e||J})}}),ce.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;ce.fn[t]=function(e){return M(this,function(e,t,n){var r;if(y(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),ce.each(["top","left"],function(e,n){ce.cssHooks[n]=Ye(le.pixelPosition,function(e,t){if(t)return t=Ge(e,n),_e.test(t)?ce(e).position()[n]+"px":t})}),ce.each({Height:"height",Width:"width"},function(a,s){ce.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){ce.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return M(this,function(e,t,n){var r;return y(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?ce.css(e,t,i):ce.style(e,t,n,i)},s,n?e:void 0,n)}})}),ce.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ce.fn[t]=function(e){return this.on(t,e)}}),ce.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),ce.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){ce.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var en=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;ce.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),v(e))return r=ae.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(ae.call(arguments)))}).guid=e.guid=e.guid||ce.guid++,i},ce.holdReady=function(e){e?ce.readyWait++:ce.ready(!0)},ce.isArray=Array.isArray,ce.parseJSON=JSON.parse,ce.nodeName=fe,ce.isFunction=v,ce.isWindow=y,ce.camelCase=F,ce.type=x,ce.now=Date.now,ce.isNumeric=function(e){var t=ce.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},ce.trim=function(e){return null==e?"":(e+"").replace(en,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return ce});var tn=ie.jQuery,nn=ie.$;return ce.noConflict=function(e){return ie.$===ce&&(ie.$=nn),e&&ie.jQuery===ce&&(ie.jQuery=tn),ce},"undefined"==typeof e&&(ie.jQuery=ie.$=ce),ce});
/*
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);
/*!
 * imagesLoaded PACKAGED v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return n.indexOf(t)==-1&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{},n=i[e]=i[e]||{};return n[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return n!=-1&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],o=0;o<i.length;o++){var r=i[o],s=n&&n[r];s&&(this.off(e,r),delete n[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){function i(e,t){for(var i in t)e[i]=t[i];return e}function n(e){if(Array.isArray(e))return e;var t="object"==typeof e&&"number"==typeof e.length;return t?d.call(e):[e]}function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);var s=e;return"string"==typeof e&&(s=document.querySelectorAll(e)),s?(this.elements=n(s),this.options=i({},this.options),"function"==typeof t?r=t:i(this.options,t),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(this.check.bind(this))):void a.error("Bad element for imagesLoaded "+(s||e))}function r(e){this.img=e}function s(e,t){this.url=e,this.element=t,this.img=new Image}var h=e.jQuery,a=e.console,d=Array.prototype.slice;o.prototype=Object.create(t.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),this.options.background===!0&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&u[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=e.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var u={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,e),n=i.exec(t.backgroundImage)}},o.prototype.addImage=function(e){var t=new r(e);this.images.push(t)},o.prototype.addBackground=function(e,t){var i=new s(e,t);this.images.push(i)},o.prototype.check=function(){function e(e,i,n){setTimeout(function(){t.progress(e,i,n)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},o.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,e,t)},o.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},r.prototype=Object.create(t.prototype),r.prototype.check=function(){var e=this.getIsImageComplete();return e?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var e=this.getIsImageComplete();e&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},o.makeJQueryPlugin=function(t){t=t||e.jQuery,t&&(h=t,h.fn.imagesLoaded=function(e,t){var i=new o(this,e,t);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});
/*! lz-string.min.js v1.5.0 | (c) 2023 Pieroxy | MIT license */
var LZString=function(){var r=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",e={};function t(r,o){if(!e[r]){e[r]={};for(var n=0;n<r.length;n++)e[r][r.charAt(n)]=n}return e[r][o]}var i={compressToBase64:function(r){if(null==r)return"";var n=i._compress(r,6,function(r){return o.charAt(r)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(r){return null==r?"":""==r?null:i._decompress(r.length,32,function(n){return t(o,r.charAt(n))})},compressToUTF16:function(o){return null==o?"":i._compress(o,15,function(o){return r(o+32)})+" "},decompressFromUTF16:function(r){return null==r?"":""==r?null:i._decompress(r.length,16384,function(o){return r.charCodeAt(o)-32})},compressToUint8Array:function(r){for(var o=i.compress(r),n=new Uint8Array(2*o.length),e=0,t=o.length;e<t;e++){var s=o.charCodeAt(e);n[2*e]=s>>>8,n[2*e+1]=s%256}return n},decompressFromUint8Array:function(o){if(null==o)return i.decompress(o);for(var n=new Array(o.length/2),e=0,t=n.length;e<t;e++)n[e]=256*o[2*e]+o[2*e+1];var s=[];return n.forEach(function(o){s.push(r(o))}),i.decompress(s.join(""))},compressToEncodedURIComponent:function(r){return null==r?"":i._compress(r,6,function(r){return n.charAt(r)})},decompressFromEncodedURIComponent:function(r){return null==r?"":""==r?null:(r=r.replace(/ /g,"+"),i._decompress(r.length,32,function(o){return t(n,r.charAt(o))}))},compress:function(o){return i._compress(o,16,function(o){return r(o)})},_compress:function(r,o,n){if(null==r)return"";var e,t,i,s={},u={},a="",p="",c="",l=2,f=3,h=2,d=[],m=0,v=0;for(i=0;i<r.length;i+=1)if(a=r.charAt(i),Object.prototype.hasOwnProperty.call(s,a)||(s[a]=f++,u[a]=!0),p=c+a,Object.prototype.hasOwnProperty.call(s,p))c=p;else{if(Object.prototype.hasOwnProperty.call(u,c)){if(c.charCodeAt(0)<256){for(e=0;e<h;e++)m<<=1,v==o-1?(v=0,d.push(n(m)),m=0):v++;for(t=c.charCodeAt(0),e=0;e<8;e++)m=m<<1|1&t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}else{for(t=1,e=0;e<h;e++)m=m<<1|t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t=0;for(t=c.charCodeAt(0),e=0;e<16;e++)m=m<<1|1&t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}0==--l&&(l=Math.pow(2,h),h++),delete u[c]}else for(t=s[c],e=0;e<h;e++)m=m<<1|1&t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;0==--l&&(l=Math.pow(2,h),h++),s[p]=f++,c=String(a)}if(""!==c){if(Object.prototype.hasOwnProperty.call(u,c)){if(c.charCodeAt(0)<256){for(e=0;e<h;e++)m<<=1,v==o-1?(v=0,d.push(n(m)),m=0):v++;for(t=c.charCodeAt(0),e=0;e<8;e++)m=m<<1|1&t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}else{for(t=1,e=0;e<h;e++)m=m<<1|t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t=0;for(t=c.charCodeAt(0),e=0;e<16;e++)m=m<<1|1&t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}0==--l&&(l=Math.pow(2,h),h++),delete u[c]}else for(t=s[c],e=0;e<h;e++)m=m<<1|1&t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;0==--l&&(l=Math.pow(2,h),h++)}for(t=2,e=0;e<h;e++)m=m<<1|1&t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;for(;;){if(m<<=1,v==o-1){d.push(n(m));break}v++}return d.join("")},decompress:function(r){return null==r?"":""==r?null:i._decompress(r.length,32768,function(o){return r.charCodeAt(o)})},_decompress:function(o,n,e){var t,i,s,u,a,p,c,l=[],f=4,h=4,d=3,m="",v=[],g={val:e(0),position:n,index:1};for(t=0;t<3;t+=1)l[t]=t;for(s=0,a=Math.pow(2,2),p=1;p!=a;)u=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=e(g.index++)),s|=(u>0?1:0)*p,p<<=1;switch(s){case 0:for(s=0,a=Math.pow(2,8),p=1;p!=a;)u=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=e(g.index++)),s|=(u>0?1:0)*p,p<<=1;c=r(s);break;case 1:for(s=0,a=Math.pow(2,16),p=1;p!=a;)u=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=e(g.index++)),s|=(u>0?1:0)*p,p<<=1;c=r(s);break;case 2:return""}for(l[3]=c,i=c,v.push(c);;){if(g.index>o)return"";for(s=0,a=Math.pow(2,d),p=1;p!=a;)u=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=e(g.index++)),s|=(u>0?1:0)*p,p<<=1;switch(c=s){case 0:for(s=0,a=Math.pow(2,8),p=1;p!=a;)u=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=e(g.index++)),s|=(u>0?1:0)*p,p<<=1;l[h++]=r(s),c=h-1,f--;break;case 1:for(s=0,a=Math.pow(2,16),p=1;p!=a;)u=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=e(g.index++)),s|=(u>0?1:0)*p,p<<=1;l[h++]=r(s),c=h-1,f--;break;case 2:return v.join("")}if(0==f&&(f=Math.pow(2,d),d++),l[c])m=l[c];else{if(c!==h)return null;m=i+i.charAt(0)}v.push(m),l[h++]=i+m.charAt(0),i=m,0==--f&&(f=Math.pow(2,d),d++)}}};return i}();"function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module?module.exports=LZString:"undefined"!=typeof angular&&null!=angular&&angular.module("LZString",[]).factory("LZString",function(){return LZString});
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/dist/FileSaver.js */
(function(a,b){if("function"==typeof define&&define.amd)define([],b);else if("undefined"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){"use strict";function b(a,b){return"undefined"==typeof b?b={autoBom:!1}:"object"!=typeof b&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open("GET",a),d.responseType="blob",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error("could not download file")},d.send()}function d(a){var b=new XMLHttpRequest;b.open("HEAD",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent("click"))}catch(c){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement("a");g=g||b.name||"download",j.download=g,j.rel="noopener","string"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target="_blank")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:"msSaveOrOpenBlob"in navigator?function(f,g,h){if(g=g||f.name||"download","string"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement("a");i.href=f,i.target="_blank",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),"string"==typeof b)return c(b,d,e);var h="application/octet-stream"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&"undefined"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,"undefined"!=typeof module&&(module.exports=g)});
/*! seedrandom.js v3.0.5 | Copyright 2019 David Bau. | MIT license */
!function(f,a,c){var s,l=256,p="random",d=c.pow(l,6),g=c.pow(2,52),y=2*g,h=l-1;function n(n,t,r){function e(){for(var n=u.g(6),t=d,r=0;n<g;)n=(n+r)*l,t*=l,r=u.g(1);for(;y<=n;)n/=2,t/=2,r>>>=1;return(n+r)/t}var o=[],i=j(function n(t,r){var e,o=[],i=typeof t;if(r&&"object"==i)for(e in t)try{o.push(n(t[e],r-1))}catch(n){}return o.length?o:"string"==i?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[n,S(a)]:null==n?function(){try{var n;return s&&(n=s.randomBytes)?n=n(l):(n=new Uint8Array(l),(f.crypto||f.msCrypto).getRandomValues(n)),S(n)}catch(n){var t=f.navigator,r=t&&t.plugins;return[+new Date,f,r,f.screen,S(a)]}}():n,3),o),u=new m(o);return e.int32=function(){return 0|u.g(4)},e.quick=function(){return u.g(4)/4294967296},e.double=e,j(S(u.S),a),(t.pass||r||function(n,t,r,e){return e&&(e.S&&v(e,u),n.state=function(){return v(u,{})}),r?(c[p]=n,t):n})(e,i,"global"in t?t.global:this==c,t.state)}function m(n){var t,r=n.length,u=this,e=0,o=u.i=u.j=0,i=u.S=[];for(r||(n=[r++]);e<l;)i[e]=e++;for(e=0;e<l;e++)i[e]=i[o=h&o+n[e%r]+(t=i[e])],i[o]=t;(u.g=function(n){for(var t,r=0,e=u.i,o=u.j,i=u.S;n--;)t=i[e=h&e+1],r=r*l+i[h&(i[e]=i[o=h&o+t])+(i[o]=t)];return u.i=e,u.j=o,r})(l)}function v(n,t){return t.i=n.i,t.j=n.j,t.S=n.S.slice(),t}function j(n,t){for(var r,e=n+"",o=0;o<e.length;)t[h&o]=h&(r^=19*t[h&o])+e.charCodeAt(o++);return S(t)}function S(n){return String.fromCharCode.apply(0,n)}if(j(c.random(),a),"object"==typeof module&&module.exports){module.exports=n;try{s=require("crypto")}catch(n){}}else"function"==typeof define&&define.amd?define(function(){return n}):c["seed"+p]=n}("undefined"!=typeof self?self:this,[],Math);
/*! console_hack.js | (c) 2015 Thomas Michael Edwards | Licensed under SugarCube's Simple BSD license */
!function(){for(var methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],length=methods.length,noop=function(){},console=window.console=window.console||{};length--;){var method=methods[length];console[method]||(console[method]=noop)}}();
}else{document.documentElement.setAttribute("data-init", "lacking");}
</script>
<style id="style-normalize" type="text/css">/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}</style>
<style id="style-init-screen" type="text/css">@-webkit-keyframes init-loading-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes init-loading-spin{0%{-o-transform:rotate(0);transform:rotate(0)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes init-loading-spin{0%{-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}#init-screen{display:none;z-index:500000;position:fixed;top:0;left:0;height:100%;width:100%;font:28px/1 Helmet,Freesans,sans-serif;font-weight:700;color:#eee;background-color:#111;text-align:center}#init-screen>div{display:none;position:relative;margin:0 auto;max-width:1136px;top:25%}html[data-init=lacking] #init-screen,html[data-init=loading] #init-screen,html[data-init=no-js] #init-screen{display:block}html[data-init=lacking] #init-lacking,html[data-init=no-js] #init-no-js{display:block;padding:0 1em}html[data-init=no-js] #init-no-js{color:red}html[data-init=loading] #init-loading{-webkit-animation:init-loading-spin 2s linear infinite;-o-animation:init-loading-spin 2s linear infinite;animation:init-loading-spin 2s linear infinite;border:12px solid transparent;border-bottom-color:#7f7f7f;border-radius:50%;border-top-color:#7f7f7f;display:block;height:100px;width:100px}html[data-init=loading] #init-loading>div{text-indent:16128px;overflow:hidden;white-space:nowrap}html[data-init=loading] #story,html[data-init=loading] #ui-bar{display:none!important}</style>
<style id="style-font-icons" type="text/css">@font-face{font-family:sc-icons;font-display:block;src:url("data:application/octet-stream;base64,d09GRgABAAAAAFRoAAsAAAAAVBwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgD1IUnWNtYXAAAAFoAAACdAAAAnQzsxFSZ2FzcAAAA9wAAAAIAAAACAAAABBnbHlmAAAD5AAASzgAAEs4ynuL3WhlYWQAAE8cAAAANgAAADYc3WiNaGhlYQAAT1QAAAAkAAAAJAiCBP1obXR4AABPeAAAAfAAAAHwyjAFu2xvY2EAAFFoAAAA+gAAAPpXLER0bWF4cAAAUmQAAAAgAAAAIACEAIVuYW1lAABShAAAAcIAAAHCiTu08nBvc3QAAFRIAAAAIAAAACAAAwAAAAMDyQGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA+CoDgP+AAIADgACAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEAlgAAACSAIAABgASAAEAIPAC8AXwDvAR8BPwFfAZ8CPwKPAu8E7wWvBe8GPwaPBq8G7wcfB48InwjfCT8JzwoPDC8MfwyfDQ8Nrw5/Dr8P7xDvEQ8SfxOvE+8ULxRPFG8UrxUvGG8YjxkfGr8d3x4PH48gXyRPKL8o3y6vLt8vHy+fMe813zgvQQ9Vr1b/V09cD2qfeM99n4Kv/9//8AAAAAACDwAvAE8AzwEPAT8BXwGfAj8CbwLvBI8FDwXvBg8GXwavBu8HDwd/CJ8I3wk/Cc8KDwwfDH8Mnw0PDX8Ofw6/D+8Q3xEPEn8TfxPvFB8UTxRvFK8VDxhfGI8ZHxq/Hd8eDx+PIE8kDyi/KN8ury7fLx8vnzHvNd84H0EPVa9W31dPXA9qn3jPfZ+Cn//f//AAH/4xACEAEP+w/6D/kP+A/1D+wP6g/lD8wPyw/ID8cPxg/FD8IPwQ+8D6wPqQ+kD5wPmQ95D3UPdA9uD2gPXA9ZD0cPOQ84DyIPEw8QDw4PDQ8MDwkPBA7SDtEOyQ6wDn8OfQ5mDlsOIQ3bDdoNfg18DXkNcg1ODRAM7QxgCxcLBQsBCrYJzgjsCKAIUQADAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAIAAP+OA/IDgAArAEcAACUWFA8BBiIvAS4BPQEOASMiJy4BJyY1NDc+ATc2MzIXHgEXFhUUBgczMhYXJTI3PgE3NjU0Jy4BJyYjIgcOAQcGFRQXHgEXFgPyDg45DigOxwcHNYNIVkxMcSAhISBxTExWVkxMcSAhLykhCRIH/nU1Ly5GFBQUFEYuLzU1Ly5GFBQUFEYuLwsOKA45Dg7HBxIJISkvISBxTExWVkxMcSAhISBxTExWSIM1BwcOFBRGLi81NS8uRhQUFBRGLi81NS8uRhQUAAAAAAEAEv/TA+4DNQAjAAABFhceAQcGBwEGIicBJicmNjc2NzY3NhYXFh8BNzY3PgEXFhcDnS8YGQUUFCr+fRM1Ev59KxMUBRkYLyoxMWUvMCYnJyYwL2UxMikDAyg2NnI3Nyz+cBMTAZAsNzdyNjYoIw8OCBYWJykpJxYWCA4PIwAAAQA8/4cERANcABgAAAE2MhcTBR4BDwETFgYnJQUGJjcTJyY2NyUCBxFQEYMBJCgYHNQyB0Ej/vv++yNBBzLUHBknASQDXCQk/vgrBksczv7dKC4SiooSLigBI84cSwYrAAAAAAEADwARA/EC7wAVAAAlASY0PwE2Mh8BATYyHwEWFAcBBiInAVz+sw8PSA8rD+AB4A8rD0gPD/2zDyoPEQFNDyoPSQ8P4AHgDw9JDyoP/bMPDwAAAAEAEgAyAq4CzgAjAAABFxYUDwEGIi8BBwYiLwEmND8BJyY0PwE2Mh8BNzYyHwEWFAcB5ckSEi0SNBPIyBM0Ei0SEsnJEhItEjQTyMgTNBItEhIBgMgTNBItEhLJyRISLRI0E8jIEzQSLRISyckSEi0SNBMAAwAA/44D8gOAACMAUABsAAABFRQGKwEVFAYrASImPQEjIiY9ATQ2OwE1NDY7ATIWHQEzMhYBBwYiLwEuAT0BDgEjIicuAScmNTQ3PgE3NjMyFx4BFxYVFAYHMzIWHwEWFAcBNCcuAScmIyIHDgEHBhUUFx4BFxYzMjc+ATc2AmAOCnAOCkAKDnAKDg4KcA4KQAoOcAoOAZI5DicOyAcHNYNIVkxMcSAhISBxTExWVkxMcSAhLykhCRIHxw4O/r4VFkkyMjg4MjFKFhUVFkkyMjg4MjFKFhUCAEAKDnAKDg4KcA4KQAoOcAoODgpwDv29OQ4OxwcSCSEpLyEgcUxMVlZMTHEgISEgcUxMVkiDNQcHxw4oDgIZODIxShYVFRZJMjI4ODIxShYVFRZJMjIAAAMAAP+OA/IDgAAPADwAWAAAARUUBiMhIiY9ATQ2MyEyFgEHBiIvAS4BPQEOASMiJy4BJyY1NDc+ATc2MzIXHgEXFhUUBgczMhYfARYUBwE0Jy4BJyYjIgcOAQcGFRQXHgEXFjMyNz4BNzYCYA4K/rAKDg4KAVAKDgGSOQ4nDsgHBzWDSFZMTHEgISEgcUxMVlZMTHEgIS8pIQkSB8cODv6+FRZJMjI4ODIxShYVFRZJMjI4ODIxShYVAgBACg4OCkAKDg79vTkODscHEgkhKS8hIHFMTFZWTExxICEhIHFMTFZIgzUHB8cOKA4CGTgyMUoWFRUWSTIyODgyMUoWFRUWSTIyAAAAAAIAEP+QA/ADgAA+AE4AAAEWFx4BFxYVFAcOAQcGIyInLgEnJjU0Nz4BNzY3NhYfARYGBw4BFRQXHgEXFjMyNz4BNzY1NCYnLgE/AT4BFwMUBisBIiY1ETQ2OwEyFhUDIC8nJjYPDycnhlpaZ2ZbWocoJw8ONyYmMBEqCx8JBw8+ShoaWz49RkU9PVwbGkdBDwcJHwsqEdAcFEAUHBwUQBQcAxQiLCxnOjs+Z1pahycnJyeGWltmPzo6aCwsIgwJEzgQIwsujVNFPT1cGhsaGlw9PkdOjjALIxA4EwkM/lwUHBwUAeAUHBwUAAAAAgAm/5wD2gNkAFMAXwAAAR4BBw4BBw4BLwEOAQcVFAYHBiInLgE9AS4BJwcGJicuAScmNj8BJjQ3Jy4BNz4BNz4BHwE+ATc1NDY3PgEXHgEdAR4BFzc2FhceARcWBg8BFhQHBTI2NTQmIyIGFRQWA88HBgIRNyUGEQdVGz4hCgk0bzcICyE+GlYHEQUlOBECBgdWBwdWBwYCETglBREHVRs+IQsING83CAshPhtVBxEFJTgRAgYHVQYG/oZCXl5CQl5eAQkFDwk1YCgGAwUxFyQLYwgNAgwMAg0IYwskFzEFAwYoYDUJDwQyIkcjMQQQCDZfKAcCBDEXIwxiCQ0CCwEMAg0JYgwjFzEEAgYpXzYIDwUxI0YjWl5CQl5eQkJeAAAAAAIAAP/ABIADQAAjAFcAAAE+ATMyFhcBERQGIyciJjU4ATE1NCYrASIGHQEUBiMHIiY1ESUeARUUBg8BDgEjIiYnAS4BIyIGBwEOASMiJi8BLgE1NDY3AT4BMzIWHwE1NDY7ATIWFRECMQMIBAQIAwFxEw3gDRMTDYANExMN4A0TA7cEBQMCMwQJBgQIA/4pAwgEBAgD/ikDCAQGCQQzAgMFBAH6DCARESAMsw4KcAoOAlcDAwMD/tH+uA0TARIOvw0TEw2/DhIBEw0BSGEDCgYECAM+BAUDAwGDAwMDA/59AwMFBD4DCAUFCgMBoQoMDAqTkQoODgr+6wAAAAQAAP+ABAADgAAWAC0AOQBFAAABMzIWFREzMhYHAQYiJwEmNjsBETQ2MwEVFAYjISImPQE0NjMhFxYyPwEhMhYVBzQmIyIGFRQWMzI2NzQmIyIGFRQWMzI2AbCgFByvGxQS/s8LIAv+zxMVGrAcFAJQHBT8YBQcHBQBJWIfVB9iASUUHPgXERAYFxEQGIAXERAYFxEQGAOAHBT+sDET/s8LCwExEzEBUBQc/RDgFBwcFOAUHGIeHmIcFLAQGBcREBgXERAYFxEQGBcAAAIAAP+AA4ADgAAgACkAAAEyFhURFAYjISImNRE0NjsBNTQ3PgE3NjMyFx4BFxYdASM1NCYjIgYdAQMgKDg4KP1AKDg4KDAYGFI4Nz8/NzhSGBigVDw8VAHAOCj+gCg4OCgBgCg4kD83OFIYGBgYUjg3P5CQPFRUPJAAAAABAAAADgIAAvIAEQAAATYWFREUBi8BIyImNRE0NjsBAa4WPDsXsswUHBwUzALyFhgg/WAgGBayHBQBIBQcAAAAAgAAAAwDAALwABEAKgAAATYWFREUBi8BIyImNRE0NjsBBR4BFRQGBwYmJyY2Nz4BNTQmJy4BNz4BFwGuFzs7F7LMFBwcFMwBqCsxMSsRJgoJCxEUFhYUEQsJCiYRAvAWGCD9YCAYFrIcFAEgFBwmGFIwMFIYCQsREiYJCyUWFiULCSYSEQsJAAQAAP+oBIADWAARADoAWwB0AAABNhYVERQGLwEjIiY1ETQ2OwEBFhceARcWFRQHDgEHBgcGJicmNjc2Nz4BNzY1NCcuAScmJy4BNz4BFxMUBw4BBwYHBiYnJjY3PgE1NCYnLgE3PgEXFhceARcWFSUeARUUBgcGJicmNjc+ATU0JicuATc+ARcBrhc7OxeyzBQcHBTMAoU8Ly9CEhEREkIvLzwSJwoLCBExKCc2Dw4ODzYnKDERCAsLJxE/DAstHyApEiYKCggRPENDPBEICgsnECkgHy0LDP7kKzExKxEmCgkLERQWFhQRCwkKJhEC8hYYIP1gIBgWshwUASAUHAEYJzQ0ekRER0dERHo0NCcLCRARJwsgKytlODk7Ozk4ZSsrIAsnEREIC/4oMC0tUCMiGQwLDxEnCyZ7RkZ7JgsnERAJCxkiI1AtLTCaGFIwMFIYCQsREiYJCyUWFiULCSYSEQsJAAAAAAEAAP+AAwADgAAKAAAXETQ2MyEyFhURJQA4KAJAKDj+gIADoCg4OCj8YOAAAQCA/8ADAANAABkAABcRNDY7ATIWFREBNhYVERQGJwERFAYrASImgA4KYAoOAYcfSkof/nkOCmAKDigDUAoODgr+nwFqGiIp/QApIhoBaP6hCg4OAAAAAAEAAAAABAADAAAkAAA3ETQ2OwEyFhURATYWFREBNhYVERQGJwERFAYnAREUBisBIiY1AA4KUAoOAVcfSgFXH0pKH/6pSh/+qQ4KUAoOGALQCg4OCv7QATkaIin++AE5GiIp/YApIhoBNv77KSIaATb+0woODgoAAAIAFwAPBAAC8QALABcAABMmNDcBNhYVERQGJxMmNDcBNhYVERQGJxcXFwGAH0pKH4AXFwGAH0pKHwFPEzwTAUAaIin9gCkiGgFAEzwTAUAaIin9gCkiGgABAAD/jQNRA3MACwAAARYUBwEGJjURNDYXA1EvL/1AMGFmKwHTHG4c/mAcNzgDQD8tGQAAAgAA/8IDgANCAA8AHwAABSMiJjURNDY7ATIWFREUBiUUBisBIiY1ETQ2OwEyFhUBIMAoODgowCg4OAI4OCjAKDg4KMAoOD44KALAKDg4KP1AKDhgKDg4KALAKDg4KAAAAQAA/8ADgANAAA8AAAEyFhURFAYjISImNRE0NjMDICg4OCj9QCg4OCgDQDgo/UAoODgoAsAoOAACAAAADwPpAvEACwAXAAABFhQHAQYmNRE0NhcDFhQHAQYmNRE0NhcD6RcX/oAfSkofgBcX/oAfSkofAbETPBP+wBoiKQKAKSIa/sATPBP+wBoiKQKAKSIaAAAAAAEAAAAABAADAAAjAAABERQGKwEiJjURAQYmNREBBiY1ETQ2FwERNDYXARE0NjsBMhYEAA4KUAoO/qkfSv6pH0pKHwFXSh8BVw4KUAoOAuj9MAoODgoBMP7HGiIpAQj+xxoiKQKAKSIa/skBBikiGv7JAS4KDg4AAAEAgP/AAwADQAAZAAABERQGKwEiJjURAQYmNRE0NhcBETQ2OwEyFgMADgpgCg7+eR9KSh8Bhw4KYAoOAyj8sAoODgoBYf6WGiIpAwApIhr+mAFfCg4OAAACAAD/wAOAAyEADwAcAAAlFRQGIyEiJj0BNDYzITIWJSImNwE2MhcBFgYjIQOAJRv9ABslJRsDABsl/OA+MyoBYB1UHQFgKjM+/UCAgBslJRuAGyUlZXMuAYAfH/6ALnMAAAAAAQBF/9kCOwMnABUAABMBNjIfARYUBwkBFhQPAQYiJwEmNDdFAYUOKA4tDg7+zAE0Dg4tDigO/nsODgGiAYUODi4OJw/+y/7LDycOLg4OAYUOKA4AAQBF/9kCOwMnABUAAAkBBiIvASY0NwkBJjQ/ATYyFwEWFAcCO/57DigOLQ4OATT+zA4OLQ4oDgGFDg4BXv57Dg4uDicPATUBNQ8nDi4ODv57DigOAAAAAAIAEP+QA/ADcAAbAD8AAAEyFx4BFxYVFAcOAQcGIyInLgEnJjU0Nz4BNzYBNTQmKwE1NCYrASIGHQEjIgYdARQWOwEVFBY7ATI2PQEzMjYCAGdaWocnJycnh1paZ2daWocnJycnh1paAYcOCrgOCnAKDrgKDg4KuA4KcAoOuAoOA3AnJ4daWmdnWlqHJycnJ4daWmdnWlqHJyf92HAKDrgKDg4KuA4KcAoOuAoODgq4DgAAAAIAEP+QA/ADcAAbACsAAAEyFx4BFxYVFAcOAQcGIyInLgEnJjU0Nz4BNzYDITI2PQE0JiMhIgYdARQWAgBnWlqHJycnJ4daWmdnWlqHJycnJ4daWqECEAoODgr98AoODgNwJyeHWlpnZ1pahycnJyeHWlpnZ1pahycn/cAOCnAKDg4KcAoOAAACABD/kAPwA3AAGwBAAAABMhceARcWFRQHDgEHBiMiJy4BJyY1NDc+ATc2ASc3NjQvASYiDwEnJiIPAQYUHwEHBhQfARYyPwEXFjI/ATY0JwIAZ1pahycnJyeHWlpnZ1pahycnJyeHWloBWoODBwdPBxQHgoIHFAdPBweDgwcHTwcUB4KCBxQHTwcHA3AnJ4daWmdnWlqHJycnJ4daWmdnWlqHJyf9joKCBxQHTwcHg4MHB08HFAeCggcUB08HB4ODBwdPBxQHAAIAEP+QA/ADcAAbADEAAAEUBw4BBwYjIicuAScmNTQ3PgE3NjMyFx4BFxYJATY0LwEmIgcBJyYiDwEGFB8BFjI3A/AnJ4daWmdnWlqHJycnJ4daWmdnWlqHJyf91wFwCQkuCRsJ/tSMCRsJLgkJ0AoaCgGAZ1pahycnJyeHWlpnZ1pahycnJyeHWlr+kgFwChoKLQkJ/tSMCQktChoK0AkJAAAAAwAQ/5AD8ANwABsASQBVAAABFAcOAQcGIyInLgEnJjU0Nz4BNzYzMhceARcWJSIGBwYWHwEWNjc+ATMyFhUUBgcOAR0BFBY7ATI2PQE0Nz4BNzY1NCcuAScmIwMiBhUUFjMyNjU0JgPwJyeHWlpnZ1pahycnJyeHWlpnZ1pahycn/h1RbykFAwhFCBMGGy8pHzwiHyNKDgpwCg4aGj4aGhQVQiopKw0mNjYmJjY2AYBnWlqHJycnJ4daWmdnWlqHJycnJ4daWuVCPgcTBjUGAwgiJSQeFh0REzw+CAoODgoDFQ4PKCEgOiwlJTcPEP4QNiYmNjYmJjYAAAAAAwAQ/5AD8ANwABsAJwBGAAABMhceARcWFRQHDgEHBiMiJy4BJyY1NDc+ATc2FyIGFRQWMzI2NTQmEzU0JisBNTQmKwEiBh0BFBY7ARUjIgYdARQWOwEyNgIAZ1pahycnJyeHWlpnZ1pahycnJyeHWlpnIzExIyMxMU0OChgOCoAKDg4KGBgKDg4KsAoOA3AnJ4daWmdnWlqHJycnJ4daWmdnWlqHJyfcMSMjMTEjIzH+BDAKDsgKDg4KMAoOgA4KMAoODgAAAAADABD/kAPwA3AAGwArADsAAAEyFx4BFxYVFAcOAQcGIyInLgEnJjU0Nz4BNzYFJicuAQcGBwE2NzYmJyYnARYXHgE3NjcBBgcGFhcWFwIAZ1pahycnJyeHWlpnZ1pahycnJyeHWloBazE8PH4+PTUCASUQEQoaGzH9+DE8PH4+PTX9/yUQEQoaGzEDcCcnh1paZ2daWocnJycnh1paZ2daWocnJ+wxGxoKERAl/f81PT5+PDwx/fgxGxoKERAlAgE1PT5+PDwxAAEADv/ZA4ADJwAeAAAlBwYiJwEmNDcBNjIfARYUDwEhMhYdARQGIyEXFhQHAgMsDigO/nsODgGFDigOLA4P8QI/FBwcFP3B8Q8OBi0ODgGFDigOAYUODi0OKA7mHBRAFBzmDigOAAAAAQAA/9kDcgMnAB4AAAE3NjIXARYUBwEGIi8BJjQ/ASEiJj0BNDYzIScmNDcBfSwOKA4BhQ4O/nsOKA4sDg/x/cEUHBwUAj/xDw4C+i0ODv57DigO/nsODi0OKA7mHBRAFBzmDigOAAABABn/wANmAzIAHgAAEycmNDcBNjIXARYUDwEGIi8BERQGKwEiJjURBwYiJ0YtDg4BhQ4oDgGEDw8sDikO5RwUQBQc5g4oDgE9LA4oDgGFDg7+ew4nDi0OD/H9wRQcHBQCP/EPDgAAAAEAGf/OA2cDQAAeAAABFxYUBwEGIicBJjQ/ATYyHwERNDY7ATIWFRE3NjIXAzotDg7+ew4oDv57Dg4tDigO5hwUQBQc5g4oDgHDLA4oDv57Dg4BhQ4oDiwOD/ECPxQcHBT9wfEPDgAABAAA/8ADgANAABQAKQA+AFMAABM1NDY7ATIWHQEUBisBFRQGKwEiJgE0NjsBMhYdARQGKwEiJj0BIyImNQEyFh0BFAYrASImPQE0NjsBNTQ2MwEUBisBIiY9ATQ2OwEyFh0BMzIWFQAcFPgKDg4KqA4KUAoOAkAOCvgUHA4KUAoOqAoOASgKDhwU+AoODgqoDgr+KA4K+BQcDgpQCg6oCg4CGPgUHA4KUAoOqAoODgEaCg4cFPgKDg4KqA4K/igOCvgUHA4KUAoOqAoO/tgKDhwU+AoODgqoDgoAAAQAAP/AA4ADQAAUACkAPgBTAAABIyImPQE0NjsBMhYdATMyFh0BFAYlFAYrASImPQE0NjsBNTQ2OwEyFhURFAYrASImPQEjIiY9ATQ2OwEyFhUFFAYrASImPQE0NjsBMhYdARQGKwEDaPgUHA4KUAoOqAoODv3OHBT4Cg4OCqgOClAKDg4KUAoOqAoODgr4FBwBgA4KUAoOHBT4Cg4OCqgCABwU+AoODgqoDgpQCg4wFBwOClAKDqgKDg4K/LAKDg4KqA4KUAoOHBT4Cg4OCvgUHA4KUAoOAAEAAP/AA4ADQAAjAAABMhYdARQGIyERFAYrASImNREhIiY9ATQ2MyERNDY7ATIWFREDQBslJRv+4CUbQBsl/uAbJSUbASAlG0AbJQHgJRtAGyX+4BslJRsBICUbQBslASAbJSUb/uAAAQAAASADgAHgAA8AAAEyFh0BFAYjISImPQE0NjMDQBslJRv9ABslJRsB4CUbQBslJRtAGyUAAAADABD/kAPwA3AAGwAnADcAAAEUBw4BBwYjIicuAScmNTQ3PgE3NjMyFx4BFxYFIgYVFBYzMjY1NCYDEx4BOwEyNjcTNiYrASIGA/AnJ4daWmdnWlqHJycnJ4daWmdnWlqHJyf+ECY2NiYmNjZ9DgEOCWIJDgEOAQ4LfgsOAYBnWlqHJycnJ4daWmdnWlqHJycnJ4daWss2JiY2NiYmNgFL/vAKDQ0KARAKDw8AAwAAAAAEgAMAACgASQBlAAABHgEVFAYHBgcOAQcGIyInLgEnJicuATU0Njc2Nz4BNzYzMhceARcWFwE4ATEyNz4BNzY1MTQnLgEnJiMiBw4BBwYVFBceARcWMxE4ATEyFhUUBiMiJjU0NjceATMyNjU0Jic+ATMEeQMEBAMpOzuTVlVcXFVWkzs7KQMEBAMpOzuTVlVcXFVWkzs7Kf3HPDQ1ThYXFxZONTQ8PDQ1ThYXFxZONTQ8UHBwUE9wAwQLHRAoOAoJDBoNAZ0GDwgIDwZQQUFeGRoaGV5BQVAGDwgIDwZQQUFeGRoaGV5BQVD+wxcWTjU0PDw0NU4WFxcWTjU0PDw0NU4WFwHgcFBPcHBPDRoMCQo4KBAdCwQEAAAAAwAA/4AFAAOAAB8ATwB0AAAlMjY3Fw4BIyInLgEnJicuATU0Njc+ATcXFhceARcWMwUeARUUBg8BDgEjIiYnAS4BNTQ2PwE+ATMyFh8BPgEzMhceARcWFx4BFRQGBw4BByc+ATU4ATE0Jy4BJyYjMSIGBxc+ATU0Jic+ATMyFhUcARUUBgcCgA0aDWgmTihcVVaTOzspAwQEAw8mFNIEGBhNMjI5AnQFBwQDJwQOBwYKBPtnBQcEAycEDgcGCgT+QpVQXFVWkzs7KQMEBAMeUjKTDQ8XFk41NDw0XSWTAQIKCQ0bDU9vBgRgAwJQCgsaGV5BQVAGDwgIDwYeNxqiODAxSBQVdAUNBwYKBDMFBwQDA40FDQcGCgQzBQcEA8QjKBoZXkFBUAYPCAgPBjtnKnEbPSA8NDVOFhcjH3IFCgUQHQsEBG9OAQEBEB0OAAAAAwAN/4AEcwNQAAsAFwAnAAAlFgYjISImNwE2MhcDIgYVFBYzMjY1NCYDEx4BOwEyNjcTNiYrASIGBHMcODf8QDc4HAHgHG8bUyY2NiYmNjZ9DgEOCWIJDgEOAQ4LfgsOEDBgYDADQDAw/Ww2JiY2NiYmNgFL/vAKDQ0KARAKDw8AAAAAAQAZAIUDZwJ7ABUAAAkBFhQPAQYiJwkBBiIvASY0NwE2MhcB4gGFDg4uDicP/sv+yw8nDi4ODgGFDigOAnv+ew4oDi0ODgE0/swODi0OKA4BhQ4OAAAAAAEAGQCFA2cCewAVAAAlASY0PwE2MhcJATYyHwEWFAcBBiInAZ7+ew4OLg4nDwE1ATUPJw4uDg7+ew4oDoUBhQ4oDi0ODv7MATQODi0OKA7+ew4OAAEAPP+IAkADgAAPAAABEQUGJjcTJyY2NyUTPgEzAkD++yNBBzLUHBknASSDCCARA4D8kYkTLycBI84cSwYrAQgSEgAAAQAA/4kDAAOAAC0AAAEeARUUBiMhFRQGDwEGIi8BLgE9ASEiJjU0Nj8BIyImPQE0NjMhMhYdARQGKwECVEhkHBT+8AEBMAQUBDABAf7wFBxjSRhUFBwcFAIgFBwcFFQB0yF1TRQc0AIEAWAJCWABBALQHBRMdiHtHBRgFBwcFGAUHAAABAAA/4AEAAN1ABYAMAA8AEgAACUjIiY1ESMiJjcBNjIXARYGKwERFAYjJRUUBiMhIiY9ATQ2MyEVFBY7ATI2PQEhMhYHNCYjIgYVFBYzMjY3NCYjIgYVFBYzMjYCUKAUHK8bFBIBMQsgCwExExUbrxwUAbAcFPxgFBwcFAEQQi6gLkIBEBQc+BcREBgXERAYgBcREBgXERAYgBwUAVAxEwExCwv+zxMx/rAUHBDgFBwcFOAUHBAuQkIuEBzEEBgXERAYFxEQGBcREBgXAAAAAAEAAP+AA4ADgAAwAAABMhYVERQGIyEiJjURNDY7ATU0Nz4BNzYzMhceARcWHQEUBisBIiY9ATQmBw4BHQEhAyAoODgo/UAoODgoMBgXUzc3Pz84N1MYGBwUQBQcVTw8UwHwAYA4KP7AKDg4KAFAKDjNPzg4UxgZGBdTODc/IBQcHBQgPFUBAVU8zgAABAAAAAAEgAMAAA8AJAAwADwAAAEVFAYjISImPQE0NjMhMhYnITgBMSIGBxM+ATMhMhYXEy4BIzEHIgYVFBYzMjY1NCYjIgYVFBYzMjY1NCYEgDgo/EAoODgoA8AoOGD8QBEeD8IMKhkCGhkqDMIPHxBgGyUlGxslJdsbJSUbGyUlASDAKDg4KMAoODh4BgYBIRQXFxT+3wYGwCUbGyUlGxslJRsbJSUbGyUAAAIAFv+WA+oDagA+AH0AAAEWFxYUBwYHMAYxBwYHBiInJicmJyY0NzY/ATYWFx4BFxYGDwEOARcWMj8BNjQnLgEnLgE1JjY/AT4BFx4BFwEWFxYUBwYPAQYmJy4BJyY2PwE+AScmIg8BBhQXHgEXHgEVFgYPAQ4BJy4BJyYnJjQ3NjcwNjE3Njc2MhcWFwKNLRYWFhYsAYYtODh1ODgsLRYWFhYtSg8nAQEJCQMEBhsqAioqeCuGKioFCwUGBwELDSoIGAkLFQkBGi0WFhYWLUoPJwEBCQkDBAYbKgIqKngrhioqBQsFBgcBCw0qCBgJCxUJLRYWFhYsAYYtODh1ODgsAg0tODh0ODgsAYYtFhYWFi0sODh1ODgtSg8PFRs1GggSBxoqdysrKoYrdyoGCAMEDgcQIAwqCAIGCBEKARosODh1ODgtSg8PFRs1GggSBxoqdysrKoYrdyoGCAMEDgcQIAwqCAIGCBEKLTg4dDg4LAGGLRYWFhYtAAAAAQAA/8AFAANAADcAAAEWFx4BFxYVFAcOAQcGIyEiJy4BJyY1NDc+ATc2NzwBNTQ3PgE3NjMyFx4BFxYXPgEzMhYVFAYHBDMsJSY3DxAUFEYuLzX9IDw0NU4WFw4PMyMjKhkZVzo7QiwqKUcdHhQXNh5PcQcGAbsJFxdCKiouNS8uRhQUFxZONTQ8LysrRxobDwQIBEI7OlcZGQwLKh4dJA8RcU8SIxAAAwAA/8ADgANAABMAHwA0AAABHgEVERQGIyEiJjURNDYzITIWFwMyNjU0JiMiBhUUFhM0Ji8BLgEjISIGHQEUFjMhMjY9AQNkDQ84KP1AKDg4KAIYFCMN/DVLSzU1S0v1BAMHAwkF/jcKDg4KAdAKDgJ8DSMU/egoODgoAsAoOA8N/RxLNTVLSzU1SwJhBQkDBwMEDgrQCg4OCskAAwAA//gDgAMIAA8AHwAvAAATIiY9ATQ2MyEyFh0BFAYjASImPQE0NjMhMhYdARQGIwEiJj0BNDYzITIWHQEUBiMgDRMTDQNADRMTDfzADRMTDQNADRMTDfzADRMTDQNADRMTDQJ4Ew1QDRMTDVANE/7AEw1QDRMTDVANE/7AEw1QDRMTDVANEwAAAAAFAAD/gAQAA4AABwAPABcALQAxAAABLwE/AR8BBwUvAT8BHwEHAR8BDwEvATcTFhQHAQ4BIyImLwEmNDcBPgEzMhYXAzcnBwHAIEBAICBAQP7ANWtrNTVrawKLNWtrNTVra8ITE/0qCRgMDRcKqRMTAtYJGAwNFwp1rWatAsBAICBAQCAgwGs1NWtrNTX+lWs1NWtrNTUB7xM1E/0qCgkJCqkTNRMC1goJCQr+fK1mrQAAAAABACIAugJdAgAADAAAEyEyFgcBBiInASY2Mz8CAhsUE/7/DCEL/v4TFRsCADET/v4LCwECEzEAAAEAIgDAAl4CBgALAAAlISImNwE2MhcBFgYCQf3+GxUTAQILIgsBAhMVwDETAQILC/7+EzEAAAAAAQA6AGIBgAKeAAwAAAERFAYnASY0NwE2FhUBgDET/v4LCwECEzECgf3+GxUTAQILIgsBAhMVGwABAAAAYgFGAp4ADAAANxE0NhcBFhQHAQYmNQAxEwECCwv+/hMxfwICGxUT/v4LIgv+/hMVGwAAAAEAAP+AAnkDgAAZAAABMhYHAQ4BIyImNxMjIiY3Ez4BMyEyFgcDMwJQHBsO/qAGFwwXHQVc7RYcAkADGxIBIBgcBlXnAkAwGP2gCw0kFwGFIRUB4BIYJhb+/AAAAwAA/4ACwAOAABIANABKAAAXNSEVFAYPAQ4BKwEiJi8BLgE1AzQ3PgE3NjMyFx4BFxYVFAYHDgEHHAExITA0NS4BJy4BNSUyNjU0JiMiBw4BBwYVFBYzMjY1NDbAAUAGBSIJHBB8EBwJIgUGwBoaXkBATUlAQV8cHC4pGUEP/sAPQRkpLgFgDRMTDS4pKT0REhMNDRNeDU1NCRIIMw0QEA0zCBIJAi1GP0BhHR0bHGBAQElDdi8caTEBAQEBMWkcL3ZDoBMNDRMSET0pKS4NExMNQl4AAAAAAgAA/8ADgANAAA8AMwAAATIWFREUBiMhIiY1ETQ2MwE1NCYrATU0JisBIgYdASMiBh0BFBY7ARUUFjsBMjY9ATMyNgMgKDg4KP1AKDg4KAKADgq4DgpwCg64Cg4OCrgOCnAKDrgKDgNAOCj9QCg4OCgCwCg4/ghwCg64Cg4OCrgOCnAKDrgKDg4KuA4AAAAAAgAA/8AEAANAACAAQQAAATIWFREUBiMhIiY1ETQ3PgE3NjsBMhYdARQGKwEiBh0BITIWFREUBiMhIiY1ETQ3PgE3NjsBMhYdARQGKwEiBh0BA6AoODgo/wAoOBkZVzo7QhAUHBwUEDVL/mAoODgo/wAoOBkZVzo7QhAUHBwUEDVLAYA4KP8AKDg4KAHgQjs6VxkZHBRgFBxLNYA4KP8AKDg4KAHgQjs6VxkZHBRgFBxLNYAAAgAA/8AEAANAACAAQQAAATIWFREUBw4BBwYrASImPQE0NjsBMjY9ASMiJjURNDYzITIWFREUBw4BBwYrASImPQE0NjsBMjY9ASMiJjURNDYzA6AoOBkZVzo7QhAUHBwUEDVLoCg4OCj+wCg4GRlXOjtCEBQcHBQQNUugKDg4KANAOCj+IEI7OlcZGRwUYBQcSzWAOCgBACg4OCj+IEI7OlcZGRwUYBQcSzWAOCgBACg4AAAABwAA/4AEAAOAAAsAFwAjAC8AOwBHAFMAAAEUBiMiJjU0NjMyFgMyFhUUBiMiJjU0NgEyFhUUBiMiJjU0NgUUBiMiJjU0NjMyFhcyFhUUBiMiJjU0NiEyFhUUBiMiJjU0NgEyFhUUBiMiJjU0NgJgOCgoODgoKDhgKDg4KCg4OAHIKDg4KCg4OP1IOCgoODgoKDgaKDg4KCg4OAJ0KDg4KCg4OP3cKDg4KCg4OAMgKDg4KCg4OPz4OCgoODgoKDgBoDgoKDg4KCg4YCg4OCgoODjuOCgoODgoKDg4KCg4OCgoOAJMOCgoODgoKDgAAAAAAwAO/44D8gNyACUATABcAAAlFhQPAQYHBiInJicmJyY0NzY/ATYyHwEWFA8BBhQXFjI/ATYyFwMnJjQ/ATY3NjIXFhcWFxYUBwYPAQYiLwEmND8BNjQnJiIPAQYiJwEGIicBJjQ/ATYyFwEWFAcCYAcHWS04OHU4OCwtFhYWFi1ZBxQHTwcHWSoqKngqWQcUByJPBwdZLTg4dTg4LC0WFhYWLVkHFAdPBwdZKioqeCpZBxQHAdYOKA78jQ4OLQ4oDgNzDg5UBxQHWS0WFhYWLSw4OHU4OC1ZBwdPBxQHWSp4KioqWQcHAbpPBxQHWS0WFhYWLSw4OHU4OC1ZBwdPBxQHWSp4KioqWQcH/TEODgNzDigOLQ4O/I0OKA4AAAAAAgAQ/5AD8ANwABsAMQAABSInLgEnJjU0Nz4BNzYzMhceARcWFRQHDgEHBgkBFjI/ATY0LwE3NjQvASYiBwEGFBcCAGdaWocnJycnh1paZ2daWocnJycnh1pa/rUBDw4oDiIODsvLDg4iDigO/vEODnAnJ4daWmdnWlqHJycnJ4daWmdnWlqHJycBzv7xDg4iDigOy8sOKA4iDg7+8Q4oDgAAAAACABD/kAPwA3AAGwAxAAABMhceARcWFRQHDgEHBiMiJy4BJyY1NDc+ATc2CQEmIg8BBhQfAQcGFB8BFjI3ATY0JwIAZ1pahycnJyeHWlpnZ1pahycnJyeHWloBS/7xDigOIg4Oy8sODiIOKA4BDw4OA3AnJ4daWmdnWlqHJycnJ4daWmdnWlqHJyf+MgEPDg4iDigOy8sOKA4iDg4BDw4oDgAAAAIAEP+QA/ADcAAbADEAABM0Nz4BNzYzMhceARcWFRQHDgEHBiMiJy4BJyYJAQYUHwEWMj8BFxYyPwE2NCcBJiIHECcnh1paZ2daWocnJycnh1paZ2daWocnJwHO/vEODiIOKA7Lyw4oDiIODv7xDigOAYBnWlqHJycnJ4daWmdnWlqHJycnJ4daWgFL/vEOKA4iDg7Lyw4OIg4oDgEPDg4AAAAAAgAQ/5AD8ANwABsAMQAAARQHDgEHBiMiJy4BJyY1NDc+ATc2MzIXHgEXFgkBNjQvASYiDwEnJiIPAQYUFwEWMjcD8Ccnh1paZ2daWocnJycnh1paZ2daWocnJ/4yAQ8ODiIOKA7Lyw4oDiIODgEPDigOAYBnWlqHJycnJ4daWmdnWlqHJycnJ4daWv61AQ8OKA4iDg7Lyw4OIg4oDv7xDg4AAAACAAD/gAOAA4AAMAA+AAABMhYVERQGIyEiJjURNDY7ATU0Nz4BNzYzMhceARcWHQEUBisBIiY9ATQmBw4BHQEhATU0JiMiBh0BFBYzMjYDICg4OCj9QCg4OCgwGBdTNzc/Pzg3UxgYHBRAFBxVPDxTAfD+8C8hIS8vISEvAYA4KP7AKDg4KAFAKDjNPzg4UxgZGBdTODc/IBQcHBQgPFUBAVU8zv7QYCEvLyFgIS8vAAMAEADwA/ACEAALABcAIwAAARQGIyImNTQ2MzIWNzIWFRQGIyImNTQ2ITIWFRQGIyImNTQ2ApBUPDxUVDw8VNA8VFQ8PFRU/Xw8VFQ8PFRUAYA8VFQ8PFRUVFQ8PFRUPDxUVDw8VFQ8PFQAAAMAMP+QAVADcAALABcAIwAAEzIWFRQGIyImNTQ2JzQ2MzIWFRQGIyImETQ2MzIWFRQGIyImwDxUVDw8VFRUVDw8VFQ8PFRUPDxUVDw8VAIQVDw8VFQ8PFTQPFRUPDxUVP18PFRUPDxUVAAAAAIAEP+QA/ADcAAbACcAAAEyFx4BFxYVFAcOAQcGIyInLgEnJjU0Nz4BNzYBNjQnJSYGFREUFjcCAGdaWocnJycnh1paZ2daWocnJycnh1paAU4ZGf6gFzAwFwNwJyeHWlpnZ1pahycnJyeHWlpnZ1pahycn/eAOOA7WDRsc/mAcGw0AAAIAAP/AA4ADQAAPAB8AAAEyFhURFAYjISImNRE0NjMTITI2PQE0JiMhIgYdARQWAyAoODgo/UAoODgoWAIQCg4OCv3wCg4OA0A4KP1AKDg4KALAKDj98A4KcAoODgpwCg4AAAACAAD/wAOAA0AADwAlAAAFISImNRE0NjMhMhYVERQGJQE2NC8BJiIHAScmIg8BBhQfARYyNwMg/UAoODgoAsAoODj+PwFwCQkuCRsJ/tSMCRsJLgkJ0AoaCkA4KALAKDg4KP1AKDjEAXAJGwkuCQn+1IwJCS4JGwnQCQkAAgAA/8ADgANAAA8AGwAAAREUBiMhIiY1ETQ2MyEyFgEXFjI/ATYmIyEiBgOAOCj9QCg4OCgCwCg4/Tn2BxQH9gsMEP4UEAwC4P1AKDg4KALAKDg4/r/2Bwf2Cx4eAAAAAgAA/8ADgANAAA8AHAAANxE0NjMhMhYVERQGIyEiJgEnJiIPAQYWMyEyNicAOCgCwCg4OCj9QCg4Asf2BxQH9gsMEAHsEAwLIALAKDg4KP1AKDg4AUH2Bwf2Cx4eCwAAAgAA/8ADgANAAA8AHAAAEyEyFhURFAYjISImNRE0NgE3NjQvASYGFREUFjdgAsAoODgo/UAoODgBQfYHB/YLHh4LA0A4KP1AKDg4KALAKDj9OfYHFAf2CwwQ/hQQDAsAAwAT/5MD7QNtAAsAMwBPAAABMhYVFAYjIiY1NDYFFhQPARcWBi8BBwYiLwEHBiY/AScmND8BJyY2HwE3NjIfATc2Fg8BAzY3NjQnJicmJyYiBwYHBgcGFBcWFxYXFjI3NgIAT3FxT09xcQI8ExS9QwceFcleCisJX8kUHgdDvhMTvkMHHhTJXwoqCl/JFB4HQ3olExMTEyUlMC9iLzAlJRMTExMlJTAvYi8wAkBxT09xcU9PcaEKKgpfyRQeB0O+ExO+QwceFMlfCioKX8kUHgdDvhMTvkMHHhXI/s0lMC9iLzAlJRMTExMlJTAvYi8wJSUTExMTAAABADb/gAPEA4AALAAABSInLgEnJjU0Nz4BNzYzMhYXHgEHBgcOAQcGFRQXHgEXFjc2FgcGBw4BBwYjAjZqXV2LKCkpKItdXWoYLxcQBg8vJSY0Dg8oKIRWVl0QEgskLC1lODg8gCgpi11dampdXosoKAQFAyEIGyUmWjM0Nl5QUG0YGBEDHA0tIyMxDQ0AAAACAAD/kwQAA4AASgBZAAABDgErARUUBgcXFhQHBiIvAQ4BIxE0JisBIgYVESImJwcGIicmND8BLgE9ASMiJicmNjsBNScmNDc2Mh8BITc2MhcWFA8BFTMyFgcBMhceARcWFSE0Nz4BNzYEAAEmGm8ODXgTExI2Em4lXDQOCjAKDjRcJW4SNhITE3gNDm8aJgEBJhtwXRMTEjYSbgHKbhI2EhMTXXAbJgH+Ai4pKT0REv5AEhE9KSkBPhokICE9HHkSNhITE20eIgHoCg4OCv4YIh5tExMSNhJ5HD0hICQaGyd1XhI2EhMTbW0TExI2El51JxsCQhIRPSkpLi4pKT0REgAAAAIAAP/AA4ADQAAPABwAAAUhIiY1ETQ2MyEyFhURFAYBBwYUHwEWNjURNCYHAyD9QCg4OCgCwCg4OP6/9gcH9gseHgtAOCgCwCg4OCj9QCg4Asf2BxQH9gsMEAHsEAwLAAUAAABABQACwAAKABQAXgBoAIIAAAEXIzc+ATEzMBYXATIWFREUBiMhEQU1NCYrATU0JisBIgYdASMiBh0BFBY7AQ4BBy4BJy4BDwIOARceARcOAQcOAR8BHgE3PgE3HgEXFjY/ATYmJy4BJz4BNzMyNjUlNDYzIREhIiY1NwYWOwEyNj8BMxceATsBMjYnAy4BKwEiBgcBMBZMFgULAQoFA6AUHBwU/dACAA4KgA4KIAoOgAoODgrlCh4UChIHBhIIDw0JBAYJFQwMGg4JBQUQBRQIEyQQESMTCRMFEAUFCA0bDB8sChcKDvtgHBQCMP3QFBx2BA4NLQgNAhN4EwINCC4MDgRzAg0HQQgNAgGoS0sSMDASARgcFP3gFBwCgPAgCg4gCg4OCiAOCiAKDhUsFQoVCggEBQgIBRUIDRoNCRIJBRMIHAkFBQwZDQ0ZDAUFCRwIEwUIEwkiRyMOCsAUHP2AHBRwDBQKB0BABwoUDAFSBwkJBwABAED/wAOAA0AAKgAAARUUBisBERQGKwEiJjURIxEUBisBIiY9ASMiJy4BJyY1NDc+ATc2MyEyFgOAEw1gEw1ADRNAEw1ADRNAQjs6VxkZGRlXOjtCAeANEwMgQA0T/SANExMNAuD9IA0TEw3gGRlXOjtCQjs6VxkZEwAAAQAA/4ADgAOAADYAAAEyFhUUBiMiJjU4ATE0NjcnDgEjIiY1NDYzMhYXNy4BNTQ2MzIWFRQGIyImJwceARUUBgcXPgECwFBwcFBQcAIDzRk9IlBwcFAiPRnNAwJwUFBwcFAiPRnNAwICA80ZPQEAcFBQcHBQCxUKgBQWcFBQcBYUgAoVC1BwcFBQcBYUgAoVCwsVCoAUFgACAAD/gAOAA4AAHQAoAAABMhYdARQGIyEiJj0BNDY7ATc+ATsBOAExMhYfATMBAyEDDgEjISImJwNgDRMTDfzADRMTDfATBhYO5Q4XBhPw/QoqAwAqAzcm/hQmNwMDQBMNQA0TEw1ADRMlDA8PDCX8mgKm/VomNDQmAAAAAwAAAAAEgAMAAB0AOQBQAAABMhceARcWFRQHDgEHBiMhIicuAScmNTQ3PgE3NjMBFBceARcWMzI3PgE3NjU0Jy4BJyYjIgcOAQcGATI3PgE3NjU0Jy4BJyYrARYXFhQHBgcDAFBFRmkeHh4eaUZFUP6AUEVGaR4eHh5pRkVQ/wAUFEYuLzU1Ly5GFBQUFEYuLzU1Ly5GFBQCgDUvLkYUFBQURi4vNWIxGRgYGTEDAB4eaUZFUFBFRmkeHh4eaUZFUFBFRmkeHv6ANS8uRhQUFBRGLi81NS8uRhQUFBRGLi/+yxQURi4vNTUvLkYUFDdCQopCQjcAAAACAAAAAASAAwAAHQA5AAABMhceARcWFRQHDgEHBiMhIicuAScmNTQ3PgE3NjMBMjc+ATc2NTQnLgEnJiMiBw4BBwYVFBceARcWAwBPRkZpHh4eHmlGRVD+gE9GRmkeHh4eaUZFUAGANS8uRhQUFBRGLi81NS8uRhQUFBRGLi8DAB4eaUZFUE9GRmkeHh4eaUZFUE9GRmkeHv2AFBRGLi81NS8uRhQUFBRGLi81NS8uRhQUAAADAAAAQAUAAsAABwAhACUAAAEhESE1MzUjEzIWHQEzMhYVERQGKwEVFAYjISImNRE0NjMFESERBED8QAPAQEAgKDgQFBwcFBA4KPwAKDg4KAOg/MACQP6AgIABADgoIBwU/uAUHCAoODgoAcAoOMD/AAEAAAMAAABABQACwAAHACEAJQAAASERITUzNSMTMhYdATMyFhURFAYrARUUBiMhIiY1ETQ2MwURIREEQPxAA8BAQCAoOBAUHBwUEDgo/AAoODgoAuD9gAJA/oCAgAEAOCggHBT+4BQcICg4OCgBwCg4wP8AAQAAAwAAAEAFAALAAAcAIQAlAAABIREhNTM1IxMyFh0BMzIWFREUBisBFRQGIyEiJjURNDYzBREhEQRA/EADwEBAICg4EBQcHBQQOCj8ACg4OCgCIP5AAkD+gICAAQA4KCAcFP7gFBwgKDg4KAHAKDjA/wABAAADAAAAQAUAAsAABwAhACUAAAEhESE1MzUjEzIWHQEzMhYVERQGKwEVFAYjISImNRE0NjMFESERBED8QAPAQEAgKDgQFBwcFBA4KPwAKDg4KAFg/wACQP6AgIABADgoIBwU/uAUHCAoODgoAcAoOMD/AAEAAAIAAABABQACwAAHACEAAAEhESE1MzUjEzIWHQEzMhYVERQGKwEVFAYjISImNRE0NjMEQPxAA8BAQCAoOBAUHBwUEDgo/AAoODgoAkD+gICAAQA4KCAcFP7gFBwgKDg4KAHAKDgAAAAAAwAQ/5AD8ANwABsAKwA7AAABMhceARcWFRQHDgEHBiMiJy4BJyY1NDc+ATc2ExE0JisBIgYVERQWOwEyNjcRNCYrASIGFREUFjsBMjYCAGdaWocnJycnh1paZ2daWocnJycnh1paRxMNYA0TEw1gDRPgEw1gDRMTDWANEwNwJyeHWlpnZ1pahycnJyeHWlpnZ1pahycn/XABQA0TEw3+wA0TEw0BQA0TEw3+wA0TEwACABD/kAPwA3AAGwArAAABMhceARcWFRQHDgEHBiMiJy4BJyY1NDc+ATc2ARE0JiMhIgYVERQWMyEyNgIAZ1pahycnJyeHWlpnZ1pahycnJyeHWloBJxMN/sANExMNAUANEwNwJyeHWlpnZ1pahycnJyeHWlpnZ1pahycn/XABQA0TEw3+wA0TEwAAAAEAEP+QA/ADcABEAAABMhceARcWFRQHDgEHBiMiJy4BJyYnLgE/ATYyFx4BMzI3PgE3Njc2Jy4BJyYHDgEHFxYGIyEiJjURNDYfATY3PgE3NjMB/2daW4cnJycnh1paZzAtLlQmJiEIAQhPBxMHLnE+Rj0+WhoaAQEbG10+PkVAdC5TFxkg/vQUHDsXRyInJ1YvLzIDcCcnh1paZ2daWocnJwkJIRcYHgcUCE8HBigrGxpbPTxESD4+XBoaAQEuLFMXOxwUAQwgGRdHHxoZJAkKAAAABQAA/4ADgAOAAAkAFwAlADMAUQAAFxEhERQGIyEiJgERFBYzMjY1ETQmIyIGBxEUFjMyNjURNCYjIgYHERQWMzI2NRE0JiMiBgEyFh0BFAYjISImPQE0NjsBNz4BOwE4ATEyFh8BM0ADADgo/cAoOAIgEw0NExMNDRPAEw0NExMNDRPAEw0NExMNDRMCgA0TEw38wA0TEw3wEwYWDuUOFwYT8CACoP1gKDg4Aij+QA0TEw0BwA0TEw3+QA0TEw0BwA0TEw3+QA0TEw0BwA0TEwFTEw1ADRMTDUANEyUMDw8MJQAAAgAQ/5AD8ANwACsAWAAAAS4BIyIHDgEHBgcOASsBIiY3Njc+ATc2MzIXHgEXFhc3NhYVERQGIyEiJjcFITIWDwEeATMyNz4BNzY3PgE7ATIWBwYHDgEHBiMiJy4BJyYnBwYmNRE0NjMC5S53QDo1NVYfHw4CDQhzCw4CECwsgVJRWzIvL1cnJyJHFzscFP70IBkX/a4BDCAZF1Mud0A6NTVWHx8OAg0IcwsOAhAsLIFSUVsyLy9XJyciRxc7HBQCdSwvExNDLy44CAoRC1dJSmwfHwkKJBkZIEcXGSD+9BQcOxfyOxdTLC8TE0MvLjgIChELV0lKbB8fCQokGRkgRxcZIAEMFBwAAQAQ/5AD8ANwAEQAAAEyFx4BFxYXNzYWFREUBiMhIiY/AS4BJyYHDgEHBhcWFx4BFxYzMjY3NjIfARYGBwYHDgEHBiMiJy4BJyY1NDc+ATc2MwIBMi8vVicnIkcXOxwU/vQgGRdTLnRART4+XRsbAQEaGlo+PUY+cS4HEwdPCAEIISYmVC4tMGdaWocnJycnh1taZwNwCgkkGRofRxcZIP70FBw7F1MsLgEBGhpcPj5IRDw9WxobKygGB08IFAceGBchCQknJ4daWmdnWlqHJycAAAABAAD/wAOAA0AASAAAJRUUBiM4ATEjIiY/AScHFxYGKwEiJjU4ATE1NDYfATcnBwYmPQE0NjM4ATEzMhYPARc3JyY2OwEyFhU4ATEVFAYvAQcXNzYWFQOAHBTgIBkXSNbWSBcZIOAUHDsXSNfXSBc7HBTgIBkXSNbWSBcZIOAUHDsXSNfXSBc70OAUHDsXSNfXSBc7HBTgIBkXSNbXSRcZIOAUHDsXSNfXSBc7HBTgIBkXSNbXSRcZIAAAAAIAAP+ABAADgAAeADoAAAEyFhURFAYjISImNRE0NjMhMhYdARQGIyERITU0NjMTMhYVERQGLwEBDgEjIiYvAS4BNTQ2NwEnJjYzA2ANEzgo/UAoODgoAUANExMN/uACgBMNsBQcOxdH/hgGEgoKEQctBwcHBwHnRxcZIAEAEw3/ACg4OCgCwCg4Ew1ADRP9gOANEwKAHBT/ACAYFkf+GQcHBwctBxEKChIGAehHFzsAAgAA/8AFAANAADcATQAAARYXHgEXFhUUBw4BBwYjISInLgEnJjU0Nz4BNzY3PAE1NDc+ATc2MzIXHgEXFhc+ATMyFhUUBgcFNiYrATU0JisBIgYdASMiBh8BFjI3BDMsJSY3DxAUFEYuLzX9IDw0NU4WFw4PMyMjKhkZVzo7QiwqKUcdHhQXNh5PcQcG/vYQERWDEw1gDRODFREQ0goaCgG7CRcXQioqLjUvLkYUFBcWTjU0PC8rK0caGw8ECARCOzpXGRkMCyoeHSQPEXFPEiMQshAn4A0TEw3gJxDSCgoAAAAAAgAA/8AFAANAADcATgAAARYXHgEXFhUUBw4BBwYjISInLgEnJjU0Nz4BNzY3PAE1NDc+ATc2MzIXHgEXFhc+ATMyFhUUBgcFMjYvASYiDwEGFjsBFRQWOwEyNj0BMwQzLCUmNw8QFBRGLi81/SA8NDVOFhcODzMjIyoZGVc6O0IsKilHHR4UFzYeT3EHBv7gFREQ0goaCtIQERWDEw1gDRODAbsJFxdCKiouNS8uRhQUFxZONTQ8LysrRxobDwQIBEI7OlcZGQwLKh4dJA8RcU8SIxB7JxDSCgrSECfgDRMTDeAAAgAA/8AEAANAAA8ANAAAATIWFREUBiMhIiY1ETQ2MwEnNzY0LwEmIg8BJyYiDwEGFB8BBwYUHwEWMj8BFxYyPwE2NCcDoCg4OCj8wCg4OCgCmYaGBwdRBxUHhYUHFQdRBweGhgcHUQcVB4WFBxUHUQcHA0A4KP1AKDg4KALAKDj9u4WFBxUHUQcHhoYHB1EHFQeFhQcVB1EHB4aGBwdRBxUHAAACABMAAAUAAwAAFAA5AAABMhYVERQGIyEiJicBJjQ3AT4BMyEDJzc2NC8BJiIPAScmIg8BBhQfAQcGFB8BFjI/ARcWMj8BNjQnBIA1S0s1/RsaLxL+0xMTAS0RLxoC5ql8fAkJLgkbCXx8CRsJLgkJfX0JCS4JGwl8fAkbCS4JCQMASzX+ADVLExIBLhI2EgEtEhT+BHx8CRsJLgkJfX0JCS4JGwl8fAkbCS4JCXx8CQkuCRsJAAAAAwAA/4ADAAOAABEAJwAyAAABFBYzIREUBiMhIiY1ETQ2MyETNiYrATU0JisBIgYdASMiBh8BFjI3AR4BHQEhETMyFhcBwBwUARAcFP1gFBwcFAGQmQ8QFoITDUANE4IWEA/BChwKAVoHB/8ADAoRBwJwFBz9cBQcHBQDoBQc/UkPKKANExMNoCgPvwoKAqQHEQoMAQAHBwADAAD/gAR2A4AACgAaADYAAAEVIREzMhYfAR4BARYUDwEGJj0BIzUzNTQ2FwUUFjMhERQGIyEiJjURNDYzIREUFjMhESEiBhUDAP8ADAoRB8QHBwF2Cgq/ECeAgCcQ/ckTDQFgHBT9YBQcHBQBkBwUARD+oA0TAowMAQAHB8QHEf6CChwKwQ8QFoKAghYQD/kNE/7wFBwcFAOgFBz+8BQc/wATDQAAAAADAAD/gAQAA4AACQAUADcAABMzFSMiJj0BNDYBHgEdASERMzIWFwMUFjMhERQGIyEiJjURIRUUFj8BNjQvASYGHQEhETQ2MyERIODgDRMTA98HB/8ADAoRB24cFAEQHBT9YBQcAQAnEL8KCr8PKP8AHBQBkAFAgBMNQA0TAW4HEQoMAQAHB/7+FBz9cBQcHBQBEIIWEA/BChwKwQ8QFoICEBQc/vAAAAADAAD/gAMAA4AAEQAoADMAAAEUFjMhERQGIyEiJjURNDYzIRMyNi8BJiIPAQYWOwEVFBY7ATI2PQEzEx4BHQEhETMyFhcBwBwUARAcFP1gFBwcFAGQghYQD8EKHArBDxAWghMNQA0TgrAHB/8ADAoRBwJwFBz9cBQcHBQDoBQc/UAoD78KCr8PKKANExMNoAHuBxEKDAEABwcAAAACABP/gAQdA4AAIQAoAAABHgEPARMWBiMiJiclBQ4BIyImNxMnJjY3JRM+ATMyFhcTEzclJxEXAwP5Jxkc1DIFKRwHDwf++v76Bw8IHCgFMtQcGScBJYMIIBERIAmCMqX+6Xz5MAIpBksczv7dHywEA4qJBAQsHwEjzhxLBisBCBISEhL++P7foCn8/YWCARQAAAAAAgAAAA4D9wLyABEANQAAATYWFREUBi8BIyImNRE0NjsBBRcWFA8BBiIvAQcGIi8BJjQ/AScmND8BNjIfATc2Mh8BFhQHAa4XOzsXsswUHBwUzAKfXAkJLgoaCltbChoKLgkJXFwJCS4KGgpbWwoaCi4JCQLyFhgg/WAgGBayHBQBIBQcwFsKGgouCQlcXAkJLgoaCltbChoKLgkJXFwJCS4KGgoAAAAABAAJ/4kD9wN3ABYALABCAFgAAAEyFh0BFAYvAQcGIi8BJjQ/AScmNjsBNyImPQE0Nh8BNzYyHwEWFA8BFxYGIwMXFhQPAQYiLwEHBiY9ATQ2OwEyFgcBNhYdARQGKwEiJj8BJyY0PwE2Mh8BAZAUHDsXPscJGwkzCQnHQhcZIODgFBw7Fz7HCRsJMwkJx0IXGSAgxwkJMwkbCcc+FzscFOAgGRf9/Bc7HBTgIBkXQscJCTMJGwnHAUAcFOAgGRdCxwkJMwkbCcc+FzuAHBTgIBkXQscJCTMJGwnHPhc7/vDHCRsJMwkJx0IXGSDgFBw7FwIEFhgg4BQcOxc+xwkaCjMJCccAAAAABAAA/5YD9wOAABUANABAAEwAACUWFA8BBiIvAS4BNycjAzcFFRc2FhcnIgYHJyY2Nz4BFx4BDwEfATc2FhcWBgcOAQcnLgEjBwYWFwcGIicmNDcBAzI2NTQmIyIGFRQWA+oWFmkWPhbqIg4U1XzAgAEA1SpeI2kMGQykASgrOJJHDggKlReHlQobAxImNxQsGCceTSvPCAYM+CVqJiUlATHWFBwcFBQcHGkWPhZpFhbqI14q1QEAgMB81RQOImsDA6Q5bCs3JhIDGwqViBaVCggNR5M4Ex0LJx4gpCBAHfglJSZqJQEx/kUcFBQcHBQUHAAAAAMAAP+AA4ADgAAKACMAQQAAFwMhAw4BIyEiJicTBhY7ARUUFjsBMjY9ATMyNi8BLgEjIgYHATIWHQEUBiMhIiY9ATQ2OwE3PgE7ATgBMTIWHwEzaioDACoDNyb+FCY3A40PEBVzEw1ADRNzFREQsgULBwcLBQG3DRMTDfzADRMTDfATBhYO5Q4XBhPwJgKm/VomNDQmAWAQKuANExMN4CoQvAUFBQUBShMNQA0TEw1ADRMlDA8PDCUAAAAAAwAA/4ADgAOAAAkAIgBAAAAXESERFAYjISImEwYWOwEVFBY7ATI2PQEzMjYvAS4BIyIGBwEyFh0BFAYjISImPQE0NjsBNz4BOwE4ATEyFh8BM0ADADgo/cAoOLcPEBVzEw1ADRNzFREQsgULBwcLBQG3DRMTDfzADRMTDfATBhYO5Q4XBhPwIAKg/WAoODgBghAq4A0TEw3gKhC8BQUFBQFKEw1ADRMTDUANEyUMDw8MJQAAAQAAAAEAAII1aM1fDzz1AAsEAAAAAADcXxJIAAAAANxfEkgAAP+ABQADgAAAAAgAAgAAAAAAAAABAAADgP+AAAAFAAAAAAAFAAABAAAAAAAAAAAAAAAAAAAAfAQAAAAAAAAAAAAAAAAAAAAEAAAABAAAEgSAADwEAAAPAsAAEgQAAAAEAAAABAAAEAQAACYEgAAABAAAAAOAAAACAAAAAwAAAASAAAADAAAAA4AAgAQAAAAEAAAXA4AAAAOAAAADgAAABAAAAAQAAAADgACAA4AAAAKAAEUCgABFBAAAEAQAABAEAAAQBAAAEAQAABAEAAAQBAAAEAOAAA4DgAAAA4AAGQOAABkDgAAAA4AAAAOAAAADgAAABAAAEASAAAAFAAAABIAADQOAABkDgAAZBIAAPAMAAAAEAAAAA4AAAASAAAAEAAAWBQAAAAOAAAADgAAABAAAAAKAACICgAAiAYAAOgGAAAACgAAAAsAAAAOAAAAEAAAABAAAAAQAAAAEAAAOBAAAEAQAABAEAAAQBAAAEAOAAAAEAAAQAYAAMAQAABADgAAAA4AAAAOAAAADgAAAA4AAAAQAABMEAAA2BAAAAAOAAAAFAAAAA4AAQAOAAAADgAAABIAAAASAAAAFAAAABQAAAAUAAAAFAAAABQAAAAQAABAEAAAQBAAAEAOAAAAEAAAQBAAAEAOAAAAEAAAABQAAAAUAAAAEAAAABQAAEwMAAAAEgAAABAAAAAMAAAAEMAATBAAAAAQAAAkEAAAAA4AAAAOAAAAAAAAAAAoAFAAeAIoAygD8ASYBYAH4AnwC8gOEBAIEaASmBMYFCgW+BdQGAAY8BmgGggayBs4G/Ac4B2QHlgfAB+wIRgiKCO4JQAm+CiIKhgq6Cu4LIgtWC8QMMAxkDIAM1g1mDg4OUA58DqYOyA8KD3IPuBAOEMwRIBFuEbQSDhIqEkYSYhJ+EqwTGBNgE7oUFBSMFRwVbhXAFhIWZBa8FvIXKBdqF5wX2hgKGDoYahjmGS4ZsBngGpwa2hsmG2Qb4Bw6HHQcrhzoHSIdVh2uHfQeXh7QH1QfviAcIHQg5iFYIaoiBiJSIqYi+iNII5Ij5iRqJOQlQiWcAAAAAQAAAHwAgwAHAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAwAAAABAAAAAAACAAcAjQABAAAAAAADAAwARQABAAAAAAAEAAwAogABAAAAAAAFAAsAJAABAAAAAAAGAAwAaQABAAAAAAAKABoAxgADAAEECQABABgADAADAAEECQACAA4AlAADAAEECQADABgAUQADAAEECQAEABgArgADAAEECQAFABYALwADAAEECQAGABgAdQADAAEECQAKADQA4HNjLWljb25zLTkwMABzAGMALQBpAGMAbwBuAHMALQA5ADAAMFZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMHNjLWljb25zLTkwMABzAGMALQBpAGMAbwBuAHMALQA5ADAAMHNjLWljb25zLTkwMABzAGMALQBpAGMAbwBuAHMALQA5ADAAMFJlZ3VsYXIAUgBlAGcAdQBsAGEAcnNjLWljb25zLTkwMABzAGMALQBpAGMAbwBuAHMALQA5ADAAMEZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("woff")}</style>
<style id="style-font-emoji" type="text/css">@font-face{font-family:color-emoji;src:local("Twemoji Mozilla"),local("Apple Color Emoji"),local("Segoe UI Emoji"),local("Segoe UI Symbol"),local("Noto Color Emoji"),local("EmojiOne Color"),local("Android Emoji")}</style>
<style id="style-core" type="text/css">#store-area,tw-storydata{display:none!important;z-index:0}::-webkit-scrollbar{height:8px;width:8px}::-webkit-scrollbar-corner,::-webkit-scrollbar-track{background-color:#111}::-webkit-scrollbar-thumb{background-color:#333;border:1px solid #111}*{scrollbar-color:#333 #111;scrollbar-width:thin}:-webkit-full-screen{height:100%;width:100%}:-ms-fullscreen{height:100%;width:100%}:fullscreen{height:100%;width:100%}body::-ms-backdrop{background:0 0}:focus{outline:thin dotted}:disabled{cursor:not-allowed!important}html{font-family:-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Cantarell,Ubuntu,"Helvetica Neue",Helvetica,Arial,sans-serif,color-emoji;font-size:16px;line-height:1}body{color:#eee;background-color:#111;overflow:auto}a{cursor:pointer;color:#68d;text-decoration:none;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}a:hover,html[data-outlines] a:focus{color:#8af;text-decoration:underline}a.link-broken{color:#c22}a.link-broken:hover,html[data-outlines] a.link-broken:focus{color:#e44}a[disabled],span.link-disabled{color:#aaa;cursor:not-allowed!important;text-decoration:none}a.link-internal{-webkit-touch-callout:none}area{cursor:pointer}button{cursor:pointer;color:#eee;background-color:#35a;border:1px solid #57c;line-height:normal;padding:.4em;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}button:hover,html[data-outlines] button:focus{background-color:#57c;border-color:#79e}button:disabled{background-color:#444;border:1px solid #666}code,kbd,pre,samp,var{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Lucida Console","Courier New",Courier,monospace,monospace}pre{overflow:auto}input,select,textarea{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}select{padding:.34em .4em}input[type=text]{min-width:18em}textarea{min-width:30em;resize:vertical}input[type=checkbox],input[type=file],input[type=radio],select{cursor:pointer}input[type=range]{-webkit-appearance:none;min-height:1.2em}input[type=range]:focus{outline:0}input[type=range]::-webkit-slider-runnable-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;margin-top:-5px;width:33px}input[type=range]:focus::-webkit-slider-runnable-track{background:#222}input[type=range]::-moz-range-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-moz-range-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;width:33px}input[type=range]::-ms-track{background:0 0;border-color:transparent;color:transparent;cursor:pointer;height:10px;width:calc(100% - 1px)}input[type=range]::-ms-fill-lower{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-fill-upper{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:16px;width:33px}html[data-outlines] input:focus,html[data-outlines] select:focus,html[data-outlines] textarea:focus,input:hover,select:hover,textarea:hover{background-color:#333;border-color:#eee}input:disabled,select:disabled,textarea:disabled{color:#333;background-color:transparent;border-color:#111}hr{display:block;height:1px;border:none;border-top:1px solid #eee;margin:1em 0;padding:0}audio,canvas,progress,video{max-width:100%;vertical-align:middle}.no-transition{-webkit-transition:none!important;-o-transition:none!important;transition:none!important}.error-view{background-color:#511;border-left:.5em solid #c22;display:inline-block;margin:.1em;max-width:100%;padding:0 .25em;position:relative}.error-view>.error-toggle{background-color:transparent;border:none;line-height:inherit;left:0;padding:0;position:absolute;top:0;width:1.75em}.error-view>.error-toggle:hover,html[data-outlines] .error-view>.error-toggle:focus{background-color:transparent}.error-view>.error{display:inline-block;margin-left:.25em}.error-view>.error-toggle+.error{margin-left:1.5em}.error-view>.error-source[hidden]{display:none}.error-view>.error-source:not([hidden]){background-color:rgba(0,0,0,.2);display:block;margin:0 0 .25em;overflow-x:auto;padding:.25em}.highlight,.marked{color:#ff0;font-weight:700;font-style:italic}.nobr{white-space:nowrap}.error-view>.error-toggle::before,.error-view>.error::before,[data-icon-after]::after,[data-icon-before]::before,[data-icon]::before,a.link-external::after{font-family:sc-icons!important;font-style:normal;font-weight:400;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}[data-icon]::before{content:attr(data-icon)}[data-icon-before]::before{content:attr(data-icon-before);margin-right:.35em}[data-icon-after]::after{content:attr(data-icon-after);margin-left:.35em}.error-view>.error-toggle::before{content:"\f0da"}.error-view>.error-toggle.enabled::before{content:"\f0d7"}.error-view>.error::before{content:"\f071";margin-right:.35em}a.link-external::after{content:"\f35d";margin-left:.25em}</style>
<style id="style-core-display" type="text/css">#story{z-index:10;margin:2.5em}@media screen and (max-width:1136px){#story{margin-right:1.5em}}#passages{max-width:54em;margin:0 auto}</style>
<style id="style-core-passage" type="text/css">.passage{line-height:1.75;text-align:left;-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.passage-in{opacity:0}.passage ol,.passage ul{margin-left:.5em;padding-left:1.5em}.passage table{margin:1em 0;border-collapse:collapse;font-size:100%}.passage caption,.passage td,.passage th,.passage tr{padding:3px}@media (prefers-reduced-motion:reduce){.passage{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}}</style>
<style id="style-core-macro" type="text/css">@-webkit-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@-o-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}.macro-append-insert,.macro-linkappend-insert,.macro-linkprepend-insert,.macro-linkreplace-insert,.macro-prepend-insert,.macro-repeat-insert,.macro-replace-insert,.macro-timed-insert{-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.macro-append-in,.macro-linkappend-in,.macro-linkprepend-in,.macro-linkreplace-in,.macro-prepend-in,.macro-repeat-in,.macro-replace-in,.macro-timed-in{opacity:0}.macro-type-cursor::after{-webkit-animation:cursor-blink 1s infinite;-o-animation:cursor-blink 1s infinite;animation:cursor-blink 1s infinite;content:"\2590";opacity:1}</style>
<style id="style-ui-dialog" type="text/css">html[data-dialog] body{overflow:hidden}#ui-overlay{background-color:#000;height:200%;left:-50%;opacity:0;position:fixed;top:-50%;-webkit-transition:visibility .2s step-end,opacity .2s ease-in;-o-transition:visibility .2s step-end,opacity .2s ease-in;transition:visibility .2s step-end,opacity .2s ease-in;visibility:hidden;width:200%;z-index:100000}#ui-overlay.open{opacity:.8;-webkit-transition:visibility 0s;-o-transition:visibility 0s;transition:visibility 0s;visibility:visible}#ui-dialog{display:none;margin:0;max-width:66em;opacity:0;padding:0;position:fixed;top:50px;z-index:100100}#ui-dialog.open{display:block;opacity:1;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-dialog>*{-webkit-box-sizing:border-box;box-sizing:border-box}#ui-dialog-titlebar{background-color:#444;min-height:24px;position:relative}#ui-dialog-title{font-size:1.5em;margin:0;padding:.2em 3.5em .2em .5em;text-align:center;text-transform:uppercase}#ui-dialog-close{background-color:transparent;border:1px solid transparent;cursor:pointer;display:block;font-size:120%;height:92%;margin:0;padding:0;position:absolute;right:0;top:0;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;width:3.6em;font-family:sc-icons!important;font-style:normal;font-weight:400;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#ui-dialog-close:hover{background-color:#b44;border-color:#d66}#ui-dialog-body{background-color:#111;border:1px solid #444;height:calc(100% - 2.1em);line-height:1.5;min-width:300px;overflow:auto;padding:1em;text-align:left}#ui-dialog-body>:first-child{margin-top:0}#ui-dialog-body hr{background-color:#444}#ui-dialog-body ul.buttons{margin:0;padding:0;list-style:none}#ui-dialog-body ul.buttons li{display:inline-block;margin:0;padding:.4em .4em 0 0}#ui-dialog-body ul.buttons>li+li>button{margin-left:1em}@media (prefers-reduced-motion:reduce){#ui-overlay{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}#ui-overlay.open{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}#ui-dialog.open{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}}</style>
<style id="style-ui-dialog-saves" type="text/css">#ui-dialog-body.saves{padding:0 0 1px}#ui-dialog-body.saves>:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves>h2{background-color:#222;font-size:inherit;margin:0;padding:.1em 0 .1em .4em}#ui-dialog-body.saves table{border-spacing:0;width:100%}#ui-dialog-body.saves tr:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves td{padding:.33em}#ui-dialog-body.saves td:first-child{display:none!important}#ui-dialog-body.saves td:nth-child(3){line-height:1.2;width:100%}#ui-dialog-body.saves td:last-child{text-align:right}#ui-dialog-body.saves .empty{color:#999;speak:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves .details{font-size:75%;margin-left:.25em}#ui-dialog-body.saves #saves-list button{color:#eee;background-color:transparent;border:1px solid #444;height:2.237em;width:2.237em}#ui-dialog-body.saves #saves-list button:disabled{color:#444;border-color:#444}#ui-dialog-body.saves #saves-list button:not(:disabled):hover{background-color:#222;border-color:#ddd}#ui-dialog-body.saves #saves-list button.delete:not(:disabled),#ui-dialog-body.saves button[id=saves-clear]:not(:disabled){background-color:#911;border-color:#b33}#ui-dialog-body.saves #saves-list button.delete:not(:disabled):hover,#ui-dialog-body.saves button[id=saves-clear]:not(:disabled):hover{background-color:#b33;border-color:#d55}#ui-dialog-body.saves #saves-list button.load:not(:disabled){background-color:#161;border-color:#383}#ui-dialog-body.saves #saves-list button.load:not(:disabled):hover{background-color:#383;border-color:#5a5}#ui-dialog-body.saves .buttons li{padding:.4em}#ui-dialog-body.saves .buttons>li+li>button{margin-left:.2em}#ui-dialog-body.saves .buttons.slots>li:last-child{float:right}#ui-dialog-body.saves #saves-list button::before,#ui-dialog-body.saves .buttons button::before{font-family:sc-icons!important;font-style:normal;font-weight:400;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#ui-dialog-body.saves .buttons button::before{margin-right:.35em}#ui-dialog-body.saves button.delete::before{content:"\f2ed"}#ui-dialog-body.saves button.delete:disabled::before{content:"\f1f8"}#ui-dialog-body.saves button.load::before{content:"\f04b"}#ui-dialog-body.saves button.save::before{content:"\f0c7"}#ui-dialog-body.saves button[id=saves-export]::before{content:"\f56e"}#ui-dialog-body.saves button[id=saves-import]::before{content:"\f56f"}#ui-dialog-body.saves button[id=saves-clear]::before{content:"\f2ed"}#ui-dialog-body.saves button[id=saves-clear]:disabled::before{content:"\f1f8"}#ui-dialog-body.saves button[id=saves-disk-save]::before{content:"\f56d"}#ui-dialog-body.saves button[id=saves-disk-load]::before{content:"\f574"}</style>
<style id="style-ui-dialog-settings" type="text/css">#ui-dialog-body.settings [id|=setting-body]>div:first-child{display:table;width:100%}#ui-dialog-body.settings [id|=setting-label]{display:table-cell;padding:.4em 2em .4em 0}#ui-dialog-body.settings [id|=setting-label]+div{display:table-cell;min-width:8em;text-align:right;vertical-align:middle;white-space:nowrap}#ui-dialog-body.settings div[id|=header-body]{margin:1em 0}#ui-dialog-body.settings div[id|=header-body]:first-child{margin-top:0}#ui-dialog-body.settings div[id|=header-body]:not(:first-child){border-top:1px solid #444;padding-top:1em}#ui-dialog-body.settings div[id|=header-body]>*{margin:0}#ui-dialog-body.settings h2[id|=header-heading]{font-size:1.375em}#ui-dialog-body.settings p[id|=header-desc],#ui-dialog-body.settings p[id|=setting-desc]{font-size:87.5%;margin:0 0 0 .5em}#ui-dialog-body.settings div[id|=setting-body]+div[id|=setting-body]{margin:1em 0}#ui-dialog-body.settings [id|=setting-control]{white-space:nowrap}#ui-dialog-body.settings button[id|=setting-control]{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}#ui-dialog-body.settings button[id|=setting-control]:hover{background-color:#333;border-color:#eee}#ui-dialog-body.settings button[id|=setting-control].enabled{background-color:#282;border-color:#4a4}#ui-dialog-body.settings button[id|=setting-control].enabled:hover{background-color:#4a4;border-color:#6c6}#ui-dialog-body.settings input[type=range][id|=setting-control]{max-width:35vw}#ui-dialog-body.settings span[id|=setting-input]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.settings button[id|=setting-control].enabled::after,#ui-dialog-body.settings button[id|=setting-control]::after{font-family:sc-icons!important;font-style:normal;font-weight:400;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;margin-left:.35em}#ui-dialog-body.settings button[id|=setting-control]::after{content:"\f204"}#ui-dialog-body.settings button[id|=setting-control].enabled::after{content:"\f205"}</style>
<style id="style-ui-dialog-legacy" type="text/css">#ui-dialog-body.list{padding:0}#ui-dialog-body.list ul{margin:0;padding:0;list-style:none;border:1px solid transparent}#ui-dialog-body.list li{margin:0}#ui-dialog-body.list li:not(:first-child){border-top:1px solid #444}#ui-dialog-body.list li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-decoration:none}#ui-dialog-body.list li a:hover{background-color:#333;border-color:#eee}#ui-dialog-body.list a{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}</style>
<style id="style-ui-bar" type="text/css">#story{margin-left:20em;-webkit-transition:margin-left .2s ease-in;-o-transition:margin-left .2s ease-in;transition:margin-left .2s ease-in}#ui-bar.stowed~#story{margin-left:4.5em}@media screen and (max-width:1136px){#story{margin-left:19em}#ui-bar.stowed~#story{margin-left:3.5em}}@media screen and (max-width:768px){#story{margin-left:3.5em}}#ui-bar{background-color:#222;border-right:1px solid #444;height:100%;left:0;margin:0;padding:0;position:fixed;text-align:center;top:0;-webkit-transition:left .2s ease-in;-o-transition:left .2s ease-in;transition:left .2s ease-in;width:17.5em;z-index:50}#ui-bar.stowed{left:-15.5em}#ui-bar-tray{position:absolute;top:.2em;left:0;right:0}#ui-bar-body{height:calc(100% - 2.5em);line-height:1.5;margin:2.5em 0;overflow:auto;padding:0 1.5em}#ui-bar.stowed #ui-bar-body,#ui-bar.stowed #ui-bar-history{visibility:hidden;-webkit-transition:visibility .2s step-end;-o-transition:visibility .2s step-end;transition:visibility .2s step-end}#ui-bar a{text-decoration:none}#ui-bar hr{border-color:#444}#ui-bar-tray button{color:#eee;background-color:transparent;border:1px solid #444}#ui-bar-tray button:hover{background-color:#444;border-color:#eee}#ui-bar-tray button:disabled{color:#444;background-color:transparent;border-color:#444}button#ui-bar-toggle{border-right:none;position:absolute;right:0;top:0}#ui-bar-history{margin:0 auto}#ui-bar-history button:not(:first-child){margin-left:1.2em}#ui-bar-body>:not(:first-child){margin-top:2em}#story-title{margin:0;font-size:162.5%}#story-author{margin-top:2em;font-weight:700}#menu ul{margin:1em 0 0;padding:0;list-style:none;border:1px solid #444}#menu ul:empty{display:none}#menu li{margin:0}#menu li:not(:first-child){border-top:1px solid #444}#menu li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-transform:uppercase}#menu li a:hover{background-color:#444;border-color:#eee}#menu a,#ui-bar-tray button{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#menu-core li[id|=menu-item] a::before,#ui-bar-tray button::before{font-family:sc-icons!important;font-style:normal;font-weight:400;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#ui-bar-tray button::before{display:block;font-size:1.1em;width:1em}#ui-bar-toggle::before{content:"\f053"}#ui-bar.stowed #ui-bar-toggle::before{content:"\f054"}#ui-bar-tray #history-backward::before{content:"\f060"}#ui-bar-tray #history-jumpto::before{content:"\f0e7"}#ui-bar-tray #history-forward::before{content:"\f061"}#menu-item-continue a::before,#menu-item-restart a::before,#menu-item-saves a::before,#menu-item-settings a::before,#menu-item-share a::before{margin-right:.35em}#menu-item-continue a::before{content:"\f04b"}#menu-item-saves a::before{content:"\f0c7"}#menu-item-settings a::before{content:"\f013"}#menu-item-restart a::before{content:"\f011"}#menu-item-share a::before{content:"\f1e0"}@media (prefers-reduced-motion:reduce){#story{-webkit-transition:margin-left 0s;-o-transition:margin-left 0s;transition:margin-left 0s}#ui-bar{-webkit-transition:left 0s;-o-transition:left 0s;transition:left 0s}}</style>
<style id="style-ui-debug-bar" type="text/css">#debug-bar{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:0;margin:0;max-height:95%;max-width:66em;min-width:300px;padding:.5em;position:fixed;right:0;z-index:99900}#debug-bar>div:not([id])+div{margin-top:.5em}#debug-bar>div>label{margin-right:.5em}#debug-bar>div>input[type=text]{min-width:8em;width:14em}#debug-bar>div>select{width:22em}#debug-bar-toggle{color:#eee;background-color:#222;border:1px solid #444;height:calc(100% + 1px);left:calc(-2em - 1px);position:absolute;top:-1px;width:2em}#debug-bar-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-hint{bottom:.75em;font-size:4.5em;opacity:.33;pointer-events:none;position:fixed;right:.6em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}#debug-bar-watch{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:calc(100% + 1px);font-size:.9em;left:-1px;max-height:280%;max-height:calc(95vh - 100%);position:absolute;overflow-x:hidden;overflow-y:scroll;right:0;z-index:99800}#debug-bar-watch[hidden]{display:none}#debug-bar-watch div{color:#999;font-style:italic;margin:1em auto;text-align:center}#debug-bar-watch table{width:100%}#debug-bar-watch tr:nth-child(2n){background-color:rgba(127,127,127,.15)}#debug-bar-watch td{padding:.2em 0}#debug-bar-watch td:first-child+td{padding:.2em .3em .2em .1em}#debug-bar-watch .watch-delete{background-color:transparent;border:none;color:#c00}#debug-bar-watch-all,#debug-bar-watch-clear{margin-left:.5em}#debug-bar-views-toggle,#debug-bar-watch-toggle{color:#eee;background-color:transparent;border:1px solid #444;margin-right:1em;padding:.4em}#debug-bar-views-toggle:hover,#debug-bar-watch-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle,html[data-debug-view] #debug-bar-views-toggle{background-color:#282;border-color:#4a4}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:hover,html[data-debug-view] #debug-bar-views-toggle:hover{background-color:#4a4;border-color:#6c6}#debug-bar-hint::after,#debug-bar-passage-play::before,#debug-bar-toggle::before,#debug-bar-views-toggle::after,#debug-bar-watch .watch-delete::before,#debug-bar-watch-add::before,#debug-bar-watch-all::before,#debug-bar-watch-clear::before,#debug-bar-watch-toggle::after{font-family:sc-icons!important;font-style:normal;font-weight:400;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#debug-bar-toggle::before{content:"\f188"}#debug-bar-hint::after{content:"\f188\202f\f061"}#debug-bar-watch .watch-delete::before{content:"\f00d"}#debug-bar-watch-add::before{content:"\f067"}#debug-bar-watch-all::before{content:"\f0d0"}#debug-bar-watch-clear::before{content:"\f2ed"}#debug-bar-views-toggle::after,#debug-bar-watch-toggle::after{content:"\f204";margin-left:.35em}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle::after,html[data-debug-view] #debug-bar-views-toggle::after{content:"\f205"}#debug-bar-passage-play::before{content:"\f04b"}</style>
<style id="style-ui-debug-views" type="text/css">html[data-debug-view] .debug{padding:.25em;background-color:#234}html[data-debug-view] .debug[title]{cursor:help}html[data-debug-view] .debug.block{display:inline-block;vertical-align:middle}html[data-debug-view] .debug.invalid{text-decoration:line-through}html[data-debug-view] .debug.hidden,html[data-debug-view] .debug.hidden .debug{background-color:#555}html:not([data-debug-view]) .debug.hidden{display:none}html[data-debug-view] .debug[data-name][data-type].nonvoid::after,html[data-debug-view] .debug[data-name][data-type]::before{background-color:rgba(0,0,0,.25);font-family:monospace,monospace;white-space:pre}html[data-debug-view] .debug[data-name][data-type]::before{content:attr(data-name)}html[data-debug-view] .debug[data-name][data-type|=macro]::before{content:"<<" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=macro].nonvoid::after{content:"<</" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=html]::before{content:"<" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type|=html].nonvoid::after{content:"</" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type]:not(:empty)::before{margin-right:.25em}html[data-debug-view] .debug[data-name][data-type].nonvoid:not(:empty)::after{margin-left:.25em}html[data-debug-view] .debug[data-name][data-type|=special],html[data-debug-view] .debug[data-name][data-type|=special]::before{display:block}</style>
</head>
<body>
	<div id="init-screen">
		<div id="init-no-js"><noscript>JavaScript must be enabled to play.</noscript></div>
		<div id="init-lacking"><p>Browser lacks capabilities required to play.</p><p>Upgrade or switch to another browser.</p></div>
		<div id="init-loading"><div>Loading&hellip;</div></div>
	</div>
	<!-- UUID://CF3227DE-0448-44C3-9B78-EBCAFD5F2AC0// --><tw-storydata name="The Unity" startnode="110" creator="Tweego" creator-version="2.1.1+81d1d71" ifid="CF3227DE-0448-44C3-9B78-EBCAFD5F2AC0" zoom="1" format="SugarCube" format-version="2.37.3" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">/* twine-user-stylesheet #1: "StyleSheet" */
.hide{display : none;}
.macrotypesim textarea {background-color: #222831; color: #EEEEEE; height: 2em}

body[data-tags~="OOC"] {background-color: #262656; color: #CCFFCC;}
.passage[data-tags~="OOC"] .link-internal {color: #D9C063;}
.passage[data-tags~="OOC"] .link-internal:hover {color: #66CC00;}
body[data-tags~="OOC"] #ui-bar {background-color: #262656; color: #CCFFCC;}
body[data-tags~="OOC"] #menu a {color: #D9C063;}
body[data-tags~="OOC"] #menu a:hover {color: #66CC00;}

body[data-tags~="Blood"] {background-color: #09112a; color: #e27565;}
.passage[data-tags~="Blood"] .link-internal {color: #bf3144;}
.passage[data-tags~="Blood"] .link-internal:hover {color: #dab2ac;}
body[data-tags~="Blood"] #ui-bar {background-color: #09112a; color: #872341;}
body[data-tags~="Blood"] #menu a {color: #bf3144;}
body[data-tags~="Blood"] #menu a:hover {color: #dab2ac;}

body[data-tags~="BloodlikeEarth"] {background-color: #2a0921; color: #65e275;}
.passage[data-tags~="BloodlikeEarth"] .link-internal {color: #44bf31;}
.passage[data-tags~="BloodlikeEarth"] .link-internal:hover {color: #acdab2;}
body[data-tags~="BloodlikeEarth"] #ui-bar {background-color: #22092a; color: #418723;}
body[data-tags~="BloodlikeEarth"] #menu a {color: #44bf31;}
body[data-tags~="BloodlikeEarth"] #menu a:hover {color: #acdab2;}

body[data-tags~="DownToEarth"] {background-color: #261b15; color: #F0F2BD;}
.passage[data-tags~="DownToEarth"] .link-internal {color: #CA7842;}
.passage[data-tags~="DownToEarth"] .link-internal:hover {color: #B2CD9C;}
body[data-tags~="DownToEarth"] #ui-bar {background-color: #261b15; color: #F0F2BD;}
body[data-tags~="DownToEarth"] #menu a {color: #CA7842;}
body[data-tags~="DownToEarth"] #menu a:hover {color: #B2CD9C;}

body[data-tags~="DarkFuture"] {background-color: #222831; color: #EEEEEE;}
.passage[data-tags~="DarkFuture"] .link-internal {color: #76ABAE;}
.passage[data-tags~="DarkFuture"] .link-internal:hover {color: #9576ae;}
body[data-tags~="DarkFuture"] #ui-bar {background-color: #222831; color: #a9cacc;}
body[data-tags~="DarkFuture"] #menu a {color: #76ABAE;}
body[data-tags~="DarkFuture"] #menu a:hover {color: #9576ae;}

body[data-tags~="Unity"] {background-color: #000000; color: #e0abe0;}
.passage[data-tags~="Unity"] .link-internal {color: #c036c0;}
.passage[data-tags~="Unity"] .link-internal:hover {color: #FFFFFF;}
body[data-tags~="Unity"] #ui-bar {background-color: #000000; color: #953495;}
body[data-tags~="Unity"] #menu a {color: #c036c0;}
body[data-tags~="Unity"] #menu a:hover {color: #FFFFFF;}

/* Untagged Link Styling */
.passage .link-internal {color: #75b5ff;}
.passage .link-internal:hover {color: #75ffe4;}
html {font-family: hyperlegible}

/* Glitchy Text - Start (Credit to HiEv Heavy Industries ) */
.glitchy {
  color: white;
  position: relative;}
.glitchy::before {
  content: attr(data-text);
  width: calc(100% + 0.5em);
  position: absolute;
  left: -9px;
  text-shadow: 1px 0 blue;
  top: -5px;
  color: #FFD;
  background: #222831;
  overflow: hidden;
  clip-path: polygon(0 0);
  animation: noise-animY-2 3s infinite linear alternate-reverse;
  -webkit-animation: noise-animY-2 3s infinite linear alternate-reverse;}
.glitchy::after {
  content: attr(data-text);
  width: calc(100% + 0.5em);
  position: absolute;
  left: -5px;
  text-shadow: -1px 0 red;
  top: -5px;
  color: #DFF;
  background: #222831;
  overflow: hidden;
  clip-path: polygon(0 0);
  animation: noise-animY 2s infinite linear alternate-reverse;
  -webkit-animation: noise-animY 2s infinite linear alternate-reverse;}
@keyframes noise-animY {
  0% {
    clip-path: polygon(0 80px, 100% 80px, 100% 16px, 0 16px);
  }
  5% {
    clip-path: polygon(0 94px, 100% 94px, 100% 17px, 0 17px);
  }
  10% {
    clip-path: polygon(0 9px, 100% 9px, 100% 92px, 0 92px);
  }
  15.0% {
    clip-path: polygon(0 37px, 100% 37px, 100% 4px, 0 4px);
  }
  20% {
    clip-path: polygon(0 53px, 100% 53px, 100% 47px, 0 47px);
  }
  25% {
    clip-path: polygon(0 99px, 100% 99px, 100% 69px, 0 69px);
  }
  30.0% {
    clip-path: polygon(0 15px, 100% 15px, 100% 49px, 0 49px);
  }
  35% {
    clip-path: polygon(0 83px, 100% 83px, 100% 81px, 0 81px);
  }
  40% {
    clip-path: polygon(0 55px, 100% 55px, 100% 43px, 0 43px);
  }
  45% {
    clip-path: polygon(0 28px, 100% 28px, 100% 27px, 0 27px);
  }
  50% {
    clip-path: polygon(0 64px, 100% 64px, 100% 28px, 0 28px);
  }
  55.0% {
    clip-path: polygon(0 76px, 100% 76px, 100% 91px, 0 91px);
  }
  60.0% {
    clip-path: polygon(0 29px, 100% 29px, 100% 72px, 0 72px);
  }
  65% {
    clip-path: polygon(0 70px, 100% 70px, 100% 10px, 0 10px);
  }
  70% {
    clip-path: polygon(0 5px, 100% 5px, 100% 84px, 0 84px);
  }
  75% {
    clip-path: polygon(0 46px, 100% 46px, 100% 81px, 0 81px);
  }
  80% {
    clip-path: polygon(0 7px, 100% 7px, 100% 85px, 0 85px);
  }
  85.0% {
    clip-path: polygon(0 17px, 100% 17px, 100% 89px, 0 89px);
  }
  90% {
    clip-path: polygon(0 41px, 100% 41px, 100% 59px, 0 59px);
  }
  95% {
    clip-path: polygon(0 53px, 100% 53px, 100% 90px, 0 90px);
  }
  100% {
    clip-path: polygon(0 10px, 100% 10px, 100% 30px, 0 30px);
  }}
@keyframes noise-animY-2 {
  0% {
    clip-path: polygon(0 84px, 100% 84px, 100% 3px, 0 3px);
  }
  5% {
    clip-path: polygon(0 31px, 100% 31px, 100% 69px, 0 69px);
  }
  10% {
    clip-path: polygon(0 37px, 100% 37px, 100% 33px, 0 33px);
  }
  15.0% {
    clip-path: polygon(0 18px, 100% 18px, 100% 6px, 0 6px);
  }
  20% {
    clip-path: polygon(0 25px, 100% 25px, 100% 87px, 0 87px);
  }
  25% {
    clip-path: polygon(0 100px, 100% 100px, 100% 8px, 0 8px);
  }
  30.0% {
    clip-path: polygon(0 24px, 100% 24px, 100% 87px, 0 87px);
  }
  35% {
    clip-path: polygon(0 39px, 100% 39px, 100% 16px, 0 16px);
  }
  40% {
    clip-path: polygon(0 96px, 100% 96px, 100% 25px, 0 25px);
  }
  45% {
    clip-path: polygon(0 16px, 100% 16px, 100% 100px, 0 100px);
  }
  50% {
    clip-path: polygon(0 92px, 100% 92px, 100% 76px, 0 76px);
  }
  55.0% {
    clip-path: polygon(0 29px, 100% 29px, 100% 40px, 0 40px);
  }
  60.0% {
    clip-path: polygon(0 40px, 100% 40px, 100% 39px, 0 39px);
  }
  65% {
    clip-path: polygon(0 94px, 100% 94px, 100% 44px, 0 44px);
  }
  70% {
    clip-path: polygon(0 2px, 100% 2px, 100% 78px, 0 78px);
  }
  75% {
    clip-path: polygon(0 86px, 100% 86px, 100% 50px, 0 50px);
  }
  80% {
    clip-path: polygon(0 2px, 100% 2px, 100% 46px, 0 46px);
  }
  85.0% {
    clip-path: polygon(0 41px, 100% 41px, 100% 71px, 0 71px);
  }
  90% {
    clip-path: polygon(0 75px, 100% 75px, 100% 15px, 0 15px);
  }
  95% {
    clip-path: polygon(0 41px, 100% 41px, 100% 8px, 0 8px);
  }
  100% {
    clip-path: polygon(0 23px, 100% 23px, 100% 75px, 0 75px);
  }}
/* Glitchy Text - End */

@font-face{
  font-family: "hyperlegible";
  font-weight: normal;
  font-style: normal;
  src: url("media/fonts/AHLN_Regular.otf");
}
@font-face{
  font-family: "hyperlegible";
  font-weight: normal;
  font-style: italic;
  src: url("media/fonts/AHLN_RegularItalic.otf");
} 
@font-face{
  font-family: "hyperlegible";
  font-weight: bold;
  font-style: normal;
  src: url("media/fonts/AHLN_Bold.otf");
}
@font-face{
  font-family: "hyperlegible";
  font-weight: bold;
  font-style: italic;
  src: url("media/fonts/AHLN_BoldItalic.otf");
}

/* Horizontal Health Bar - Start (Credit to HiEv Heavy Industries)*/
.hzbarbkg {  /* default class for all horizontal bar backgrounds */
	position: relative;
	height: 15px;
	width: 25%;
	background-color: #111;
	background-image: linear-gradient(to right, rgba(68, 68, 68, 0.5), rgba(34, 34, 34, 0.5) 5px), linear-gradient(to bottom, rgba(68, 68, 68, 0.5), rgba(0, 0, 0, 0) 5px), linear-gradient(to left, rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0) 5px), linear-gradient(to top, rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0) 5px);
	border-radius: 10px;
	z-index: 10;
	visibility: visible;
}
.hzbar {  /* default class for all horizontal bars */
	position: absolute;
	bottom: 0px;
	left: 0px;
	height: 15px;
	background-color: transparent;
	background-image: linear-gradient(to left, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0) 5px), linear-gradient(to top, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0) 5px), linear-gradient(to right, rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0) 5px), linear-gradient(to bottom, rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0) 5px);
	border-radius: 10px;
	z-index: 20;
	transition: width ease 1s, background-color ease 1s;
}
/* Horizontal Health Bar - End */
/* twine-user-stylesheet #2: "click-to-proceed.css" */
.--macro-ctp-hidden {
	display: none;
}

.--macro-ctp-t8n {
	animation: macro-ctp-t8n 400ms ease-in;
}

@keyframes macro-ctp-t8n {
	from { opacity: 0; }
	to { opacity: 1; }
}</style><script role="script" id="twine-user-script" type="text/twine-javascript">/* twine-user-script #1: "autosave" */
Config.saves.maxAutoSaves = 1;
Config.saves.isAllowed = function (saveType) {
	if (saveType === Save.Type.Auto) {
		return tags().includes("autosave");
	}

	return true;
};
/* twine-user-script #2: "healthbar" */
/* Health Bar code - Start (Credit to HiEv Heavy Industries) */
window.Health2 = function (CurHP, MaxHP, BarID, Horizontal, Container) {
	if (Container == undefined) {
		Container = document;
	}
	var HP = parseInt((CurHP / MaxHP) * 100).clamp(0, 100);
	var BarElement = $(Container).find("#" + BarID);
	if (Horizontal) {
		BarElement.css({ width: HP + "%" });
	} else {
		BarElement.css({ height: HP + "%" });
	}
	// Hue goes from -20 to 240 = red (hue = 0) -> green -> blue (hue = 240)
	var col = "hsl(" + (Math.floor(HP * 2.6) - 20) + ", 50%, 60%)";
	BarElement.css("background-color", col);
	BarElement.attr("title", CurHP + "/" + MaxHP + " HP");
	$(Container).find("#" + BarID + "bkg").attr("title", CurHP + "/" + MaxHP + " HP");
};
/* Health Bar code - End */
/* twine-user-script #3: "click-to-proceed.js" */
(() => {
	"use strict";

	$(document).on(":passageinit", () => {
		CTP.Logs.forEach((_, id) => {
			if (!CTP.Repository.get(id)?.persist) CTP.Logs.delete(id);
		});
		CTP.Repository.forEach(({ persist }, id) => {
			if (!persist) CTP.Repository.delete(id);
		});
	});

	var CTP = class _CTP {
		constructor(id, persist = false) {
			this.stack = [];
			this.clears = [];
			this.options = {};
			if (!id?.trim()) throw new Error(`No ID specified!`);
			this.id = id;
			this.persist = persist;
			_CTP.Repository.set(id, this);
		}
		static get Repository() {
			if (!setup["@CTP/Repository"]) setup["@CTP/Repository"] = new Map();
			return setup["@CTP/Repository"];
		}
		static get Logs() {
			if (!variables()["@CTP/Logs"]) variables()["@CTP/Logs"] = new Map();
			return variables()["@CTP/Logs"];
		}
		get log() {
			if (!_CTP.Logs.get(this.id)) _CTP.Logs.set(this.id, { lastClear: -1, index: -1, seen: -1 });
			return _CTP.Logs.get(this.id);
		}
		static getCTP(id) {
			return _CTP.Repository.get(id);
		}
		add(content, options = {}) {
			if (options.clear) this.clears.push(this.stack.length);
			this.stack.push({
				options,
				content,
				index: this.stack.length,
				element: $()
			});
			return this;
		}
		print(index) {
			const { content, options: iOpts } = this.stack[index];
			const options = {
				...this.options,
				...iOpts
			};
			const element = $(document.createElement(options.element || "span")).addClass("--macro-ctp-hidden").attr({
				"data-macro-ctp-id": this.id,
				"data-macro-ctp-index": index
			}).on("update-internal.macro-ctp", (event, firstTime) => {
				if ($(event.target).is(element)) {
					if (index === this.log.index) {
						if (firstTime) {
							if (typeof content === "string") element.wiki(content);
							else element.append(content);
							element.addClass(options.transition ? "--macro-ctp-t8n" : "");
						}
						element.removeClass("--macro-ctp-hidden");
					} else {
						if (index < this.log.seen) element.removeClass("--macro-ctp-t8n");
						element.toggleClass("--macro-ctp-hidden", index > this.log.index || index < this.log.lastClear);
					}
				}
			});
			this.stack[index].element = element;
			return element;
		}

		output() {
			const wrapper = document.createDocumentFragment();
			for (let i = 0; i < this.stack.length; i++) {
				this.print(i).appendTo(wrapper);
			}
			return wrapper;
		}

		advance() {
			if (this.log.index < this.stack.length - 1) {
				this.log.index++;
				const firstTime = this.log.index > this.log.seen;
				this.log.seen = Math.max(this.log.seen, this.log.index);
				this.log.lastClear = this.clears.slice().reverse().find((el) => el <= this.log.index) ?? -1;
				$(document).trigger("update.macro-ctp", ["advance", this.id, this.log.index]);
				this.stack.forEach(({ element }) => element.trigger("update-internal.macro-ctp", [firstTime, "advance", this.id, this.log.index]));
			}
			return this;
		}

		back() {
			if (this.log.index > 0) {
				this.log.index--;
				this.log.lastClear = this.clears.slice().reverse().find((el) => el <= this.log.index) ?? -1;
				$(document).trigger("update.macro-ctp", ["back", this.id, this.log.index]);
				this.stack.forEach(({ element }) => element.trigger("update-internal.macro-ctp", [false, "back", this.id, this.log.index]));
			}
			return this;
		}
	};
	window.CTP = CTP;

	Macro.add("ctp", {
		tags: ["ctpNext"],
		handler() {
			const id = this.args[0];
			const persist = this.args.slice(1).includes("persist");
			const ctp = new CTP(id, persist);
			const _passage = passage();
			this.payload.forEach(({ args, name, contents }) => {
				const options = {};
				if (args.includes("clear")) options.clear = true;
				if (args.includesAny("t8n", "transition")) options.transition = true;
				const elementArg = args.find((el) => el.startsWith("element:")) ?? "";
				if (elementArg) options.element = elementArg.replace("element:", "");
				if (name === "ctp") ctp.options = { ...options };
				ctp.add(contents, options);
			});
			$(this.output).append(ctp.output());
			
			if (_passage === passage()) {
				const i = Math.max(ctp.log.index, 0);
				ctp.log.index = -1;
				ctp.log.seen = -1;
				while (ctp.log.index < i) ctp.advance();
			}
		}
	});

	Macro.add("ctpAdvance", {
		handler() {
			const id = this.args[0];
			if (id) {
				const ctp = CTP.getCTP(id);
				if (ctp) ctp.advance();
				else throw new Error(`No CTP with ID '${id}' found!`);
			} else throw new Error(`No ID specified!`);
		}
	});

	Macro.add("ctpBack", {
		handler() {
			const id = this.args[0];
			if (id) {
				const ctp = CTP.getCTP(id);
				if (ctp) ctp.back();
				else throw new Error(`No CTP with ID '${id}' found!`);
			} else throw new Error(`No ID specified!`);
		}
	});
})();
/* twine-user-script #4: "type-sim.min.js" */
// type-sim.min.js, for SugarCube 2, by Chapel
// v2.0.0, 2024-07-22, 336675ff2cabe5f729a5f30d86aa409cc8432726
;!function(){"use strict";Macro.add("typesim",{tags:null,handler:function(){if(!this.args.length||!this.args[0]||"string"!=typeof this.args[0])return this.error("no text to type out was provided");var t,e=$(document.createElement("span")).addClass("macro"+this.name),n=$(document.createElement("div"));this.payload[0].contents&&this.payload[0].contents.trim()&&(t=this.payload[0].contents),function(t,e,n){if(t&&"string"==typeof t){!e||e instanceof $||(e=$(e));var i=0,s=t.split(""),a=[],o=$(document.createElement("textarea")).addClass("type-sim").on("input.type-sim",(function(){var e=$(this);i=a.push(s[i]),e.val(a.join("")),t.length===a.length&&(e.off("input.type-sim").ariaDisabled(!0),n&&"function"==typeof n&&n(a.join("")),$(document).trigger({type:":type-sim-end",message:a.join("")}))}));e&&e[0]&&e.append(o)}}(this.args[0],e,(function(){n.wiki(t)})),e.append(n).appendTo($(this.output))}})}();
// end type-sim.min.js</script><tw-passagedata pid="1" name="1Start" tags="DarkFuture" position="200,100" size="100,100">Droning noise greets you as you stir and your vision returns in patches. You&#39;re awkwardly draped over an undersized shop bench, and, when you attempt to wrench your leg free, you feel the restraints binding you to it. A familiar voice breaks through.

&quot;Do you have to squirm around like this every time? You won&#39;t be much use if I get bumped and weld your proprio module in place.&quot; Your vision adjusts enough to see her. Short, silvery hair with dark roots, stained with oil... Her pin suggests she&#39;s an Expeditionary Force authorized mechanic, but you can&#39;t quite recognize her. Then, when she sees your confused face, she curses to herself and reaches into your chassis to flip a small switch on your neural board. Once your IFF module finally passes boot, you calm down and smile her way.

&quot;Miss! I wondered where you&#39;d run off to... I was worried.&quot; She scoffs as her fingers get back to work on your power board. You do your best to sit still for her.

&quot;I never left, silly girl. I just didn&#39;t want you burning my shop&#39;s power bill on useless parts while you were broken down.&quot; She disconnects a bracket before taking your hand. Your eyes meet, and she gives your palm a soft, two-fingered touch over your kinetic interface port. It feels almost shameful opening it for her, but you do so without hesitation. &quot;The weeks since your fight have been quiet, if you were wondering.&quot; She snips off the heading of a dead wire, making you wince.

&quot;R-right... I&#39;m glad things worked out. I thought you might be ups–&quot; Without warning, she grabs hold of the unlatched power rail and pulls out its full length in one swift motion. You sputter and gag and cry out while the edges of your vision go blurry. 

&quot;Oh? What was that, now?&quot; She pulls out a replacement, deftly weaving it through the tight port and up the length of your arm. You stutter for a second, before falling quiet. After latching the new rail in place, she pets your head and speaks in that same mocking tone. &quot;There, there. Be a good girl and test it out for me.&quot; You sniffle and lean into her touch, but you&#39;re sure to do as you&#39;re told, flexing and twisting your repaired arm. 

When you flick your wrist towards her, a thin blade glides into your grasp, precisely angled to press ever-so-slightly into her neck. She stands perfectly still, and you take a moment to admire her slow, careful breathing and the fear buried so deep in her expression. Then, you dislocate a finger to turn the blade to its flat and retract it. Her gaze lingers against yours for a moment, with a bit of color rising into her cheeks.. then she looks back to her work. &quot;Save that for the Others, would you?&quot; A smile creeps across your face.

&quot;Of course, Miss.&quot;

[[(Return Home)|30Days]] &lt;&lt;set $Finished_1 to true&gt;&gt;</tw-passagedata><tw-passagedata pid="2" name="1CW" tags="OOC" position="225,100" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Intimate Partner Violence (Lightly Threatened)
[[I consent.|1Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="3" name="10Start" tags="BloodlikeEarth" position="350,100" size="100,100">&quot;Amen.&quot;

You raise your head halfway through morning prayers to a strange sight. At the other end of the chapel, you see Sister Irene, shivering and whimpering with her face bright red. The Mother Superior follows your gaze to her in the middle of &quot;Confírma hoc, Deus&quot;. She blushes, then she silently waves for another sister to remove her from the room. Sister Laura quietly peels away from the crowd, dragging Iris away by the arm. The rest of the chapel takes notice soon after, and the awkward air lasts through the end of prayer.

When you exit out into the hall after, Sister Letizia creeps up, nudging you with her elbow and snickering, &quot;Can you believe her, Delia?&quot; You sigh.

&quot;It&#39;s not something she has control over. If you gossip too much, The Lord will be sure you&#39;re next. St. Matthew 19:17-20.&quot; She shrugs, then casts her eyes around. When she doesn&#39;t find what she&#39;s looking for, she leans in close and whispers something to you.

&quot;With so many Omegas in one place, it&#39;s bound to happen sometimes... but... in the middle of prayer? Are we sure Irene isn&#39;t some kind of pervert?&quot; You whirl around, ready to stomp your foot and chew Letizia out, until you the Mother Superior jogging to catch up to the two of you. You freeze, and your companion follows suit.

When she reaches you, she sighs and shoots you an apologetic look.

&quot;Sister Delia! I&#39;m glad I caught you.&quot; She sighs again. &quot;I assume you took notice of Sister Irene&#39;s... predisposition...?&quot; You nod, and Letizia takes the opportunity to creep out of the conversation.

&quot;Well, I was hoping you could take over for her work today. She was taking care of our patient in the infirmary, but she&#39;s in no condition to work now...&quot; Sensing that ‘no&#39; was off the table here, you accept her request, and the Mother Superior rushes off towards her office, leaving you to walk yourself to the infirmary.

You&#39;d heard about a new patient arriving yesterday. There were rumors around that he was a papal knight, coming down the road from Tuscany after catching a spear in the leg as he routed a regiment of Orleans. Other said he was handsome, well-read, and some even that he had claim to a castle waiting for him in Montescaglioso. Coming from Letizia, though, a smart woman wrote off half what she said on a good day. You&#39;re sure she&#39;s already spinning rumors about poor Irene to some gullible sister.

[[...|10Infirm]]</tw-passagedata><tw-passagedata pid="4" name="10Infirm" tags="BloodlikeEarth" position="475,100" size="100,100">When you finally reach the infirmary, you get a look at who&#39;s sleeping on the cot, and you gasp aloud. The patient does indeed have a neatly wrapped leg wound and, even under layers of fleece, he appears quite handsome. However, laid out beside his bed is a tabbard embroidered with the Crest of Bourbon, marking him as a French man-at-arms.

Then, woken by your uncouth reaction, the patient stirs stretches out from under their blankets. Seeing this, your heart flutters, and you call out without noticing.

&quot;You&#39;re...!&quot;

She looks your way, cocking her head.

&quot;An invader? The last lady told me it wouldn&#39;t be an issue.&quot; You shake your head. There&#39;s a strange fog over you, which you attribute to shock. You take a few steps towards the soldier, then you sit on a nearby stool and drop your voice to a whisper.

&quot;She was correct, we&#39;re all children of The Lord, it&#39;s just...&quot; You sigh. &quot;You&#39;re a woman.&quot;

The soldier gives you a blank stare before simply shrugging.

&quot;I wouldn&#39;t expect that to be a problem at a nunnery of all places.&quot; You poise yourself to argue before realizing you have nothing to say on the matter. Instead, you deflect.

&quot;It&#39;s just... They told me you&#39;d be a handsome man, is all...&quot; She seems to delight in this, laughing and sitting up straighter. For a few moments, she looks you over with a quiet look of bemusement.

&quot;You wouldn&#39;t be too disappointed with a handsome //woman//, would you, miss?&quot;

You wouldn&#39;t...

You push the unbidden thought from your mind, but the patient seems plenty satisfied with the color rising in your cheeks. Rather than embarrassing yourself any further, you turn to the desk and bury yourself in some writing you&#39;ve been putting off. Here gaze burns the back of your head for a few moments, before she loses interest and turns away.

The quiet, contemplative work washes away your concerns. For some time, you only have to worry about your pen and The Bible. But, as you&#39;re transcribing Esdras: 9:8, the patient speaks something hoarsely, and you jump, rolling your pen to the side and striking a thick black line through ‘our bondage&#39;. You push your work aside and listen closer to the patient.

&quot;Water, please?&quot; You step across the room to a basin, filling a cup for her. As she downs it, she smiles at you. &quot;Thank you, miss... You looked so peaceful at your work that I hardly wanted to disturb you.&quot;

Somehow, you find yourself smiling. In the moment, you notice a strange scent around the patient. Even after staying so long in hospital, she&#39;s carried the smell of the Apenine woods on her, with a strong perfume of mint. There&#39;s something calming about it all. You draw closer to her without realizing.

&quot;Say, you might be here a while longer... Could I trouble you for your name?&quot; She seems surprised, but she nods.

&quot;Violette. And, I&#39;m from Provence.&quot; Then, she sighs. &quot;I would say I&#39;m from the Fifth Bourbon Regiment, but, I&#39;m afraid I&#39;m all that&#39;s left of it.&quot; Your hand rests naturally on hers. You feel obligated to share as much as you can.

&quot;Well, here, I&#39;m known as Sister Delia. I took my oaths too young to remember what my parents called me... I come from a little township in Pescara, but...&quot; You gulp, trying to find a tactical way to say that, &quot;It doesn&#39;t... exist anymore.&quot; Violette sighs. 

&quot;It was rolled over by French looters. There wasn&#39;t much reason to stay, so... The survivors picked up and left.&quot;

...

You try to speak several times, but you can&#39;t find any smooth way to break the silence. Eventually, Violette takes your hand, still staring off into the distance.

&quot;There&#39;s no need to justify it. It&#39;s cruel.&quot; You nod, and she turns to you with a somber expression. &quot;I&#39;ve been reprimanded by my commander for letting families leave with their jewelry. It&#39;s wretched... and probably why I&#39;ve never seen a promotion.&quot; And she laughs.

&quot;But, I guess it&#39;s part of why I feel so normal around you. I know officers who&#39;d sooner bleed out in the woods than let a //Neapolitan// treat their wounds, like you&#39;re so different.&quot; You laugh, in turn.

It&#39;s unclear to you why you&#39;d place so much stake in a random foreigner&#39;s view of you. Still, you&#39;re overjoyed when the tension drains out of the room. She smiles, and you feel yourself relaxing even deeper.

The time for second prayer comes, and you step out, then into the temple. There, Letizia tries to extract gossip from you, you stonewall her; Irene apologizes and offers to finish out her shift, you insist she get her rest; the Mother Superior offers to switch in another sister to work in the infirmary, and you reassure her that she needen&#39;t waste any of your sisters&#39; time.

[[...|10Return]]</tw-passagedata><tw-passagedata pid="5" name="10Return" tags="BloodlikeEarth" position="600,100" size="100,100">When you return to the infirmary, you bring Violette back some pottage, bread, wine, and a little sliver of cheese, which Sister Irene graciously snuck out from dinner&#39;s portion. Your patient&#39;s spirits seem lifted by the meal. You could probably write a few more verses while she eats, but instead you just watch her, sighing.

After she wolfs down her meal, Violette gets self-conscious, and you&#39;re all to delighted to tease her about it. The two of you chat for hours, until... before you even notice it... something washes over you again. Like the same fog from before, but much stronger. You lean against the cot to keep yourself upright.

&quot;Sister...? Sister, are you okay?&quot; You slowly blink towards her as heat floods your body. There&#39;s an overwhelming scent of mint around you, choking you and burning your throat. You shiver and whimper as you stagger towards her. She puts an arm around your waist to keep you stable, and you lean into it, rubbing your face against her skin.

You&#39;re burning up. Every muscle in your body aches and begs and shivers. Her touch is the only thing that can cool you down. You know it. You could tell from the moment her skin touched yours. She&#39;s worried for you, but you can&#39;t get out anything more than a gasp or a moan. Instead, you lean in towards her, and you kiss her.

Violette seems unsure, then she gets sucked into your rhythm, reaching her cool, soothing hands under your habit to hold your face close to hers. Everything around you blurs and swims in an ocean of heat and pleasure, but it&#39;s not enough. She pulls back for air and holds your gaze with a sad expression.

&quot;You&#39;re in heat, aren&#39;t you?&quot; You can only whimper in response. She smiles and takes your hands in hers. &quot;I&#39;m sorry. That must be my fault. I should take responsibility.&quot;

She gets out of bed, still barely able to stand upright, and she drags you to the corner of the room, far away from the door. There, she hikes up your dress and pulls you back against her. Each time she pulls you around so forcefully, your body gushes with ecstasy. She keeps whispering, either to you or herself.

&quot;It&#39;s alright. This&#39;ll be over soon. Just a little longer and it&#39;ll all be okay...&quot;

Violette leans down... and she bites down hard on the back of your neck. Every muscle in your body goes slack in her grip, and your eyes roll back. Everything but the two of you is clouded in a thick, pink mist. Her fingers slip inside you with no resistance. Each time, she pumps them deeper and quicker, thrusting her hips against yours as she does it. It&#39;s unclear if that part is for your sake or her own.

You can&#39;t last long at all under her touch. As you approach the edge, your whimpering moans must get louder, because she turns you around, moving her mouth to yours and dominating you with hard, needy kisses. You finally reach your breaking point, bucking helplessly against her fingers while your cries are muffled by Violette&#39;s mouth. She rides it out with you, thrusting against you and moaning into your mouth at a pace that slows, then slows, then, finally, stops.

Bit-by-bit, reason returns to you, and you regain control over your faculties. You move to hide, apologize, or reclothe out of shame, but she easily overpowers you and keeps you steady in her arms.

You weep, and she kisses your slow, hot tears away. She dresses you, and when another sister knocks at the Infirmary door, she makes an excuse for you to miss your third prayer.

The two of you sit quietly for a long time, holding hands and staring at the floor. She speaks first.

&quot;Say... Delia...&quot;

&quot;When I&#39;m healed enough to leave this place...&quot;

&quot;Would you like to run away with me...?&quot;

[[(Return Home)|30Days]] &lt;&lt;set $Finished_10 to true&gt;&gt;</tw-passagedata><tw-passagedata pid="6" name="10CW" tags="OOC" position="725,100" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Sexual Content
[[I consent.|10Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="7" name="11Start" tags="BloodlikeEarth" position="850,100" size="100,100">&quot;You&#39;re not getting me, Febe. I already understand that the ALLMOTHER is all-seeing. She&#39;s clearly proven that much. My issue is with the idea that she&#39;s all-powerful!&quot; 

On the way home from your daily labors, you carry a heavy barrel of catfish and debate theology with your unfortunate sister, Miriam. 

&quot;Say, for example, why do we have to haul all these fish back home? Couldn&#39;t the ALLMOTHER move them for us? Better yet, couldn&#39;t She have made new fish in the stocks?&quot; You click your tongue at her.

&quot;Have you been slacking at school? She&#39;d clearly be violating Conservation of Mass if She did that.&quot; She groans. &quot;Besides, you&#39;re missing the point. If She was going to do everything for us, why waste her blood giving us souls in the first place?&quot; Miriam turns away, but you continue.

&quot;You shouldn&#39;t blaspheme just because you don&#39;t want to do your chores, sister.&quot; That truly sets her off. She kicks up loose roots, slinging mud all around her, swearing the whole time. You can&#39;t help but snicker at her.

Then, as you&#39;re closing in on your home, you hear an unfamiliar voice ahead. On instinct, you grab Miriam by the shoulders, dropping the two of you into the underbrush. The strange voice continues.

&quot;–wn. Near rock edge is at around 15 feet. Chance of subterranean cavity is high. Will return with proper gear to perform core.&quot; Then, you hear footsteps approaching. You weigh your options for a split second, before resolving yourself of your choice.

You rush to your feet, standing strong with Miriam safely obscured behind you. Where the voice was, an Outsider in muddy slacks stands and stares open-eyed at you. At your back, you hear your sister clambering through the undergrowth and towards safety.

&quot;You seem lost, Outsider. The ground you walk on is holy, and it belongs to Her faithful.&quot; She gives you a confused look.

&quot;H-hold up, you speak Portugese? Maybe we should start with introductions.&quot; You shake your head.

&quot;No need. You&#39;re leaving. Now.&quot; She looks like she may argue... then she sighs, lifting her hands and walking backwards. This is, until something collides with her, launching her to the ground face-first.

...

&quot;Come on, Febe! Can you at least hold her down?&quot; You sigh and rush to your sister&#39;s side. The Outsider squirms and yells out under your weight, and you force her face into the mud to silence her. After a few minutes of brutal struggle, she goes quiet and compliant, just in time for Miriam to finish with her makeshift restraints. Your new prisoner kicks at you when you first stand her up, but you discourage her from it with a jab to the sternum.

After a long day of work, this much exertion leaves you panting and aching. You sit while your sister checks over the prisoner&#39;s restraints.

&quot;That wasn&#39;t necessary, Miriam.&quot; She takes a breath... then gives a small, nod. &quot;The ALLMOTHER is going to be pissed...&quot;

[[...|12Inside]]</tw-passagedata><tw-passagedata pid="8" name="12Inside" tags="BloodlikeEarth" position="975,100" size="100,100">The two of you provoke many curious stares and teasing whispers as you drag your prisoner to Her chambers. When you enter, you realize you&#39;re unlucky enough to have caught Her on a bad day. Miriam tries to explain her reasoning, but the ALLMOTHER is only more engaged, haranguing and degrading her for at least five minutes in front of Her entire court. 

When she is ordered to leave, Miriam is totally broken down. Her eyes are red and puffy, her voice hoarse, and, worst of all, she gives you a little smile at the end, just happy to finally leave. You stay behind, though, at Her request.

&quot;Approach, child.&quot; You do, and She whispers to you. &quot;What you have done today is admirable... but one must make up for your sister&#39;s failings.&quot;

You understand perfectly.

As you approach, the prisoner&#39;s eyes become crazed, and she lets out a long, muffled wail. She strains against her new bindings as much as she can, to no avail. You reach her side and produce a small-bladed knife.

&lt;&lt;linkreplace &quot;Kill her.&quot;&gt;&gt;&lt;&lt;linkreplace &quot;...&quot;&gt;&gt;&lt;&lt;linkreplace &quot;Do it...&quot;&gt;&gt;
\There is no pleasure on your face as you do it. You thrust the blade into her with a look of quiet melancholy. When she cries out, you do it again. And, again. And, again. And... and... and... and...... and...... and...... and......... and......... and.........

At some point, you fall on top of her (or, has she already become ‘it&#39;?), still bearing down and leaving nothing but an unrecognizable red pulp. At some point, you start weeping. //At some point//, you stop, only to roll to your side and retch. Pure, starved bile burns your throat and sullies the tiles of the court.

...

A hand lingers over your shoulder before it reaches down and brushes hair out of your face. Then, you hear Her voice.

&quot;You&#39;ve done well, my child.&quot;

Then, the ALLMOTHER presses a soft, hesitant kiss into your cheek, [[and a shudder runs through your entire body.|30Days]]&lt;&lt;set $Finished_11 to true&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;</tw-passagedata><tw-passagedata pid="9" name="11CW" tags="OOC" position="1100,100" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Intense Graphic Violence
* Blood
* Vomiting
[[I consent.|11Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="10" name="12Start" tags="Blood" position="300,275" size="100,100">As you polish your bayonet, you frown. 

The fireside is warm, and the camp is in high spirits. Your allies bicker over the day&#39;s war stories, the loot to come, and... of course... you. This sort of talk used to disgust you, but you&#39;ve grown used to it. Of the three, Zhewyn believes you ‘need an intellectual gentleman to thaw [your] heart&#39; (gross), Ante has plans to ‘elope and spirit [you] away in the night&#39; (unconscionable), and XU-PURGE insists you ‘offered to keep [his] gears in good condition&#39; (gross, unconscionable, and not what you were implying). If any of them realize you can hear them, they don&#39;t act on it.

You sigh, hoist your rifle, and stand. There&#39;s still one more person for you to see. You slip out along a route you&#39;ve long memorized to a clearing near camp. There, you can see hundreds of stars flitting back and forth past the rings and, in its center, Lusinette with her familiar.

There are several empty bottles next to her, and a full-face flush has warmed her cool green complexion. You slide in beside her, and politely shake Umi&#39;s tentacle.

You sit for as long as you can, watching Lusinette&#39;s drunken sleeping face, until she stirs. As soon as she waves off her stupor, she glares at you.

&quot;What could you possibly want?&quot; She rolls to her side and grumbles. &quot;You&#39;ve already royally fucked things for me, Nikte. At least let me drown my sorrows.&quot; You inch closer, pulling a fresh bottle of wine from your pack.

&quot;I would never begrudge you that.&quot; She glances you over, taking it without a word, and you laugh. &quot;Maybe you can forgive me now?&quot;

Lusinette turns to face you, uncorks the bottle, and takes a long swig without offering you any. She looks long and hard at your face, and you feel yourself color.

&quot;I don&#39;t get it. What&#39;s so special about you?&quot; She throws an arm around you without asking and gropes down your back, past your ass. You squirm, but you don&#39;t feel inclined to stop her.

&quot;You&#39;re so petite, so frail, so... smooth...&quot; Her exploring hand swings upwards, holding and angling your face, baring your fangs. &quot;And you&#39;re smart... but a little naive. Far too trusting. Smooth-talking, cute... constantly... pestering...&quot; She lets go of your face, first grabbing at your neck, then your chest.

&quot;A-are you insulting me or not? I don&#39;t unders-s–&quot; She presses down, and your speech comes to a sputtering, mewling stop.

&quot;Ugh, you act so pure. How do people still fall for that? If you could see yourself right now...&quot; Lusinette smirks as she stretches down the neck of your top. &quot;Oh my gods. You&#39;re so shameless. I knew you&#39;d wear something cute like this. I bet you planned this whole party as a chance to lock in a dowry from one of those losers. Who was it?&quot; You squirm and try to blubber out an answer, but she&#39;s pressing her weight against you now, and it&#39;s hard to breathe.

&quot;v–y, –r –o–...&quot;

&quot;Oh, oh, don&#39;t tell me. It&#39;s more fun to guess. It&#39;s Zhewyn, isn&#39;t it? I bet he&#39;s got a fortune waiting for him in Sh&#39;enceriday. Tell me I&#39;m right, huh? Huh??&quot;

&quot;v– n—t you...&quot;

Umi yanks her arm off your chest, and you finally heave a full breath. Your dress has been distended at the top, stretching to show a little glimpse of what&#39;s underneath. You sit up, pointlessly attempting to cover it with your hands.

&quot;Idiot...&quot; Lusinette cocks her head at you.

&quot;You&#39;re the worst.&quot;

&quot;I&#39;ve worn this every night, just in case you ever decided to sneak a peek...&quot;

Lusinette colors once more... [[but you turn away.|30Days]] &lt;&lt;set $Finished_12 to true&gt;&gt;</tw-passagedata><tw-passagedata pid="11" name="12CW" tags="OOC" position="100,225" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Sexual Harassment
* Sexual Aggression (Light)
* Asphyxiation (Light)
[[I consent.|12Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="12" name="dptg" tags="Blood" position="225,225" size="100,100">You spot her from across the field: Nasrin of Galandis. Scales black as death, clad in blood-red robes, absolutely dwarfing the few remaining undead she commands. Her eyes meet yours, and a smile flicks to her face as she incants, crossing the massive distance between you and charging.

She brings her mace down hard, dropping all of her weight with it. You react an instant before it reaches you, parrying it to the side and sending her tumbling. Then, you flick out your sword-arm. She catches herself first, and it grazes a few inches shy of her neck.

The two of you look one another over. For a moment, her subtle confusion matches your own, then she grins again before catching your flank with an underhanded strike. You keep up and deflect it, but there&#39;s no weight behind it. Only then, do you spot her offhand, extended towards you and wreathed in light. Acid sprays from her palm, coating and searing into your breastplate, just above your heart.

In the split second you look down to where she&#39;s attacked, Nasrin follows up, once again dropping her entire weight onto you. Too late to block, you sidestep and catch the blow in your shoulder. Your pauldron is shattered into scrap, and you feel bone cracking. You hold strong, redirecting your shield arm to grab, then redirect your opponent&#39;s momentum. She falls ungracefully into the dirt at your side, quickly righting herself while you reel.

For the few seconds it takes for you both to catch your breath, you watch her laugh to herself, looking up at you with some new expression you can&#39;t place.

Then, you counter, throwing all your weight into a low thrust. She deftly steps out of its path before returning and stomping your blade into the dirt. Your wrist wrenches into an awful angle, and she sneers at you.

&quot;Is that it? With the strength of your troops, I expected you to put up a better fight.&quot; She raises her mace.

&lt;&lt;linkreplace &quot;Then, you incant.&quot;&gt;&gt;Then, you incant. In your sword&#39;s hilt, your Catalyst reacts, and a golden wave of force ripples out, launching Nasrin down into the dirt, where she lands hard. She moves to sit up, but you reach her first, leaving your sword and shield in the dirt to slam down onto her with your armored bulk and pin her in place. She squirms, but you concuss her with an upward blow to the head. For a moment, she seems to be out, then she simply laughs.

&quot;I stand corrected... Gods, now you&#39;ve got me all excited to drain your blood and raise you as my–&quot; Your knee connects with her stomach, and she wheezes.

&quot;Fuck, you sorcerers love the sounds of your voices. Give up and join your pets already.&quot; She opens her mouth again, and you slam your head down, bloodying her snout and silencing her. Then, you follow with a decisive hook to the face... which she catches.

Nasrin incants, then lightning surges through your arm and gauntlet. You jerk your hand from her grasp and pull back, giving her just enough freedom to collect her dropped mace and swing it into a low blow too quick for you to dodge. You grimace and reach forward, grabbing hold of one of Nasrin&#39;s horns, which you leverage to slam her face-first into the ground and pin her there. As you grind her snout through the dirt and gravel, you reach out with a leg, kicking your dropped sword back your way, where you catch it in your free hand.

&quot;ENOUGH. This ends here, witch.&quot; You let up just enough to bring your blade down towards her neck, but this gives Nasrin the freedom to twist out of your grasp and kick you away, winding you and launching you back to the ground. She pulls herself on top of you, crushing your wrist to disarm you again before raking her claws up your armor and to your neck.

Her face lingers close to yours, and a cruel expression comes over her bloodied face as she wraps her claws around your throat. For a moment, your breaths mix, and your eyes meet... then, you ram her maw with your head again, before both of you fall backwards off one another.

Far away, the sounds of battle are thinning out. Every second you waste here risks more of your troops&#39; lives... but your body is starting to fail you. Both you and Nasrin have started to slow down, a fact she seems to notice too, as she spits up the blood pooling in her mouth.

&quot;I&#39;ll admit it. We seem like we&#39;re pretty evenly matched, miss.&quot; You give her a grave look, which she only rolls her eyes at.

&lt;&lt;linkappend &quot;\&quot;No, there&#39;s a difference between us.\&quot;&quot;&gt;&gt;

&lt;&lt;linkappend &quot;\&quot;Even if it means my death, I&#39;m destined to outlast you.\&quot;&quot;&gt;&gt; She laughs.

&quot;You can&#39;t be serious. Don&#39;t tell me you actually believe in things like that.&quot; You try to stand before speaking, but your legs have totally given out. Despite your best efforts, you think she can tell.

&quot;I mean it. When I arrived here this morning, I swore to the people of Milé that you would never breach their walls under my watch.&quot; You adjust to stare her dead-on. &quot;Even if it means my death, you&#39;ll never reach the city.&quot;

Nasrin looks you up and down, as if assessing your wounds, maybe judging if you&#39;re serious about what you&#39;ve said. Then, she shrugs.

&quot;I&#39;ll admit it. I came here for Milé, but now... I think you&#39;re the only one I care about.&quot; And at that, she finds her strength and launches towards you, bearing down on you with a jagged stone. The best you can do is take the attack in your gauntlet, which cracks under this final bit of abuse. Nasrin wobbles, falling down to her side after failing her attack. You seize the opportunity, crawling past her to reach your sword for the final time.

You turn to Nasrin, whose ragged breaths shake her entire body, and you weakly raise your blade. Then, you drop it down... where it lands firmly off target, embedding itself in her shoulder. Your final blow misses, but she still screams out in agony. 

Then, Nasrin grabs your sword by the blade and incants, pouring in the last of her strength and wreathing it in white-hot flames. You try to hold on, but you only manage to scorch your fingertips. And, with a shaking hand, she pulls your sword from her cauterized wound... and she throws it towards the city, where it sails far beyond your reach.

And, totally out of will to fight, you collapse on top of her. She holds on for a moment longer, then she wraps a shaky arm around you.

[[...|dptg2]]
&lt;&lt;/linkappend&gt;&gt;&lt;&lt;/linkappend&gt;&gt;&lt;&lt;/linkreplace&gt;&gt;</tw-passagedata><tw-passagedata pid="13" name="dptg2" tags="Blood" position="350,225" size="100,100">As you lay together, the noises from the rest of the battlefield fade down, eventually into nothing. Nobody from either side comes to find you.

The two of you are, truly, all that remains...

...

&lt;&lt;linkappend &quot;You whisper to Nasrin.&quot;&gt;&gt;

&lt;&lt;linkappend &quot;\&quot;Hey. I know you&#39;re conscious. Help me out.\&quot;&quot;&gt;&gt; She exhales in response, but nothing more. &quot;There are four clasps on my back keeping this breastplate on. Can you grab them for me?&quot; She grumbles.

&quot;Fine...&quot; And she carefully snaps each one off using her claws. You roll off of her, sighing as you finally free yourself of your breastplate, then your remaining armor. She gives you a disgusted look.

&quot;Seriously? Is this an insult to me?&quot; She taps a claw to your cheek. &quot;I could easily still be a threat to you.&quot; You shake your head.

&quot;There&#39;d be no point. You couldn&#39;t breach the city with all your power spent, and if you just wanted to kill me like this, well...&quot; You turn over, looking her in the eye. &quot;I&#39;d already be dead.&quot; She groans and averts her gaze.

You study her expressions from this position for some time. Up close, you can see all the little wounds you inflicted on Nasrin during your fight. Her jaw is swollen and partially dislocated, she&#39;s got a few cuts, and her facial scales are all caked with dirt and dried blood.

Then, there&#39;s a moment. Your eyes meet, and you both start breathing the same air. Neither of you backs out of the tension. Instead, you lean in, bracing yourself with a hand to her cheek, and you press your mouth to hers.

When you feel nothing but cold, hard scales, you realize you&#39;d never considered the logistics of kissing a dragonborn. You try a few more times, always coming up short, before Nasrin throws you a bone.

&quot;Here, this should be more like your... //ridiculous// human rituals...&quot; And she extends her tongue slightly, giving you somewhere to focus your energy. You lean in again, and the two of you can finally kiss. Like everything with her, it uses all the same muscle memory, but it feels nothing like any of your past experiences. You fully throw yourself into her, and she treats you with a tenderness you don&#39;t quite understand.

You come up for air, panting and shuddering, and Nasrin pulls you close to rest your face against her chest. You can&#39;t see her face, but you can picture the smug, bloodlusted expression she&#39;s had on so many times today. At the thought, you growl up towards her.

&quot;Don&#39;t... don&#39;t look down on me, you mutt.&quot; She scoffs, and you pull back to level with her. There&#39;s a look of smug superiority in her eye.

&quot;Oh? That&#39;s rich coming from a literal human. Do you even know your fath—&quot; You slam her down to the ground, straddling her lap. Your face is reflected in Nasrin&#39;s eyes with a crazed, horrible expression as you unlatch your gambeson and strip. She gets caught up in your pace, tracing a claw up over your breast and making your head spin. You prise open her robe. She halfheartedly attempts to resist, but even that quickly crumbles.

You run your hands over the now-bashful Nasrin&#39;s bruises and cuts, then down to the slick spot spread across her lower stomach. She grimaces as you singsong, ‘all because of me~&#39;.

&quot;W-well, it&#39;s not like you&#39;re any different!&quot; And you&#39;re all too happy to prove her wrong. You undo your belts and have Nasrin tug away your pants, all to demonstrate that you&#39;re...

...

&quot;Soaking wet for me? How cute...&quot; Power shifts back towards Nasrin, and she shows it, pulling you down to her level. All she does is hold you close and look you up and down, but it&#39;s much more revealing now. You try to complain, and she pulls in close to ‘kiss&#39; you. You can&#39;t stop yourself from moving the last bit of distance to fall into her again. Still, she never quite gives you all you want, always holding back just enough to leave you frustrated and needy. You pull up for air.

&quot;Are you just gonna torment me forever, or do you actually plan to... to do something about it...&quot; She smirks.

&quot;I&#39;ll consider it...&quot; She loops a claw around your stomach, before slipping it between your legs. Every place she touches feels electric, leaving trails of heat across your body. &quot;First though, I&#39;d like to hear exactly what you want...&quot; She fixes a self-satisfied look at you as you squirm and curse her over it.

&quot;You already know what I want...&quot; No reaction.

&quot;I mean, we&#39;ve already worked our way up to it... just... do it already, damnit.&quot; She smiles and tracks your embarrassed face.

&quot;Just... stop fooling around and take advantage of me. I know you want to!&quot; A jolt shoots up you as she gives your clit a hard flick. You close your eyes expecting more, but she stops there. You grumble, before finally shouting at her.

&lt;&lt;linkreplace &quot;\&quot;FINE!\&quot;&quot;&gt;&gt;&quot;FINE! I WANT YOU TO TAKE ME! I WANT TO FEEL YOU INSIDE ME! I WANT YOU TO MAKE ME YOURS! I... damnit... I WANT YOUR COCK...!&quot; At that, she laughs, taking your head in her hands. You can&#39;t help but lean into her touch, and she&#39;s happy to exploit that.

&quot;Was that so hard, lady?&quot; Her tongue flits around your face, teasing up and down your cheeks and circling your mouth, but then she pulls away. &quot;Still... I think I&#39;m about spent for now. I expected you&#39;d break sooner.&quot; She rolls away and onto her back, stretching and sighing. You tremble and seethe, but you can&#39;t bring yourself to argue with her. She dusts herself off and stands on shaky legs. 

Then, she flashes that smug expression at you, and your heart starts beating even faster.

&quot;You...&quot; A wave of adrenaline hits you, and you pull yourself up to your knees.

&quot;You...... witch...&quot; She glances your way... then &lt;&lt;linkappend &quot;you launch towards her center of mass and tackle her into the dirt.&quot;&gt;&gt; Before she can speak, you kiss her, circling her tongue with yours and pushing deep enough to cut your lips on her fangs. You both sputter and gag and cough as you pull back.

&quot;Don&#39;t you dare look down on me, you witch.&quot; You pin her wrists above her head and slowly lower yourself onto her. She curses and squirms under you, then... slides into you with no resistance.

Nasrin wraps two unsure arms around you, and you sink deeper against her. When your eyes meet, her gaze is clouded over, struggling to focus even on you. You worry that your expression is something similarly embarrassing. Then, she hilts herself in you, and the shocks running up your body overpower your brain.

Your hips buck against her without your control. You cry out, beg, and weep freely, to the point Nasrin has to wrap you in a deep kiss to muffle your voice. She scrapes her claws up your back as she whimpers into your kiss. Where her fangs graze your lips, blood leaks into your mouths. It&#39;s still not enough. Thankfully, Nasrin seems to feel the same way.

She holds you tight and turns over, laying you on your back beneath her. When she pulls out of your long, desperate kiss, there&#39;s a look of pure, unending hunger in her eyes. You shudder. Nasrin&#39;s gaze wanders downwards, and she leans into your neck, biting down hard on the soft flesh there.

In that moment, you realize she could, if the whim came to her for even a moment, end your life here and now. Her fangs graze mere inches from your carotid, and she supps and licks where they cut. She soothes the pain, just as easily as she creates it.

In that moment, you decide to fully give yourself over to her, and in the next, she thrusts deep into you. When you cry out, she presses only her thumb against your lips, and you take it happily. You bite and cry into the tough flesh as Nasrin rocks her hips against yours. Your pace accelerates like this, pushing, and biting, and licking, and moaning, and clawing, and sucking, and weeping, and devouring, and, and, and... and... [[and...|dptg3]]
&lt;&lt;/linkappend&gt;&gt;&lt;&lt;/linkreplace&gt;&gt;&lt;&lt;/linkappend&gt;&gt;&lt;&lt;/linkappend&gt;&gt;</tw-passagedata><tw-passagedata pid="14" name="dptg3" tags="Blood" position="475,225" size="100,100">You stir to the sounds of gulls crying.

The field around you is quiet, and you&#39;re sore all over, especially in your neck. When you move, you notice a cloak has been placed over you. It&#39;s bloodstained and clearly not yours.

When you turn to your side, you see Nasrin, leaned against a tree and watching you. Your eyes meet, and she smiles.

&quot;I was expecting you to be out for longer. Seems like I really did underestimate how they train in Vanaret.&quot; You look out over the battlefield and sigh.

&quot;If you&#39;re still here, what does that mean?&quot; At your words, she shifts on her feet. &quot;Do you plan to give up, or...?&quot;

Nasrin takes a moment to consider before walking past you, and away from Milé. There&#39;s a somber expression on her face.

&quot;I&#39;ll be back. It will take some time to rebuild my forces, but... I&#39;ll be back.&quot; Then, she turns to face you, with that old, smug expression. &quot;Should I expect to see you again, miss?&quot;

You push yourself up to your feet, tightening the cloak around your shoulders.

&quot;Renata.&quot; She cocks her head to the side. &quot;If you plan to return, we&#39;ll be fighting again. I&#39;d rather you call me by my name next time.&quot; Nasrin laughs and looks over you with an unreadable expression. Then, she shrugs.

&quot;Fine.&quot; And, she steps out towards the wilds.

&quot;We&#39;ll meet again soon, Renata. I guarantee it.&quot;

[[(Return Home)|30Days]] &lt;&lt;set $Finished_13 to true&gt;&gt;</tw-passagedata><tw-passagedata pid="15" name="13CW" tags="OOC" position="600,225" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Graphic Sexual Content
* Graphic Violence
* Sexual Aggression
* Blood
[[I consent.|dptg]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="16" name="15Start" tags="DarkFuture" position="725,225" size="100,100">Stale air pumps through your lungs, and you trickle back into consciousness. You open your eyes, take stock of the room around you... then sigh.

You reach up and take hold of your respirator, then, in one motion, you yank it out and cough up several feet of tubing. When you push up to your feet, a familiar voice calls out.

&quot;Good evening, H.2941!&quot; You stand and stretch your sore muscles. The pod bay is pitch black and windowless, lit only by the dim, flickering light of your pod.

&quot;Sure, I bet it is somewhere.&quot; A locker at your feet pops open and dispenses your tools and a jumpsuit, which you step into. &quot;What&#39;s the disturbance, SITRI?&quot;

Her voice appears at the far end of the room, lighting up the exit door.

&quot;Well, I&#39;m sure it&#39;s probably nothing, but...&quot; The door pops open, causing an alarm in the next room to blare until SITRI shuts it off. 

&quot;Erm... it&#39;s just that I... might have lost camera feed on the second deck storage room. A little bit.&quot; You heft your toolbox and step out into the glaring artificial light of the third deck atrium. From a cursory look outside, you figure the ship is stalled somewhere around Alpha Pyxis, not even halfway into her route. You sigh.

&quot;Did you lose it //a little bit// or did you &#39;&#39;lose it&#39;&#39;? And how long has it been out?&quot; You pass by an access point and watch SITRI&#39;s worried face deliberating for a few seconds before she responds.

&quot;It is... how should I say... OUT out. And... do you promise not to be mad?&quot;

&lt;span id = &quot;ab&quot;&gt;
\&lt;&lt;link &quot;\&quot;Absolutely not.\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#ab&quot;&gt;&gt;\
&quot;Absolutely not.&quot; Her voice garbles and statics. &lt;&lt;toggleclass &quot;#ab_fl&quot; &quot;hide&quot;&gt;&gt; &lt;&lt;set $SITRIAFFINITY to -1&gt;&gt;

&quot;You&#39;re so cold to me, Moira...&quot; She sighs. &quot;Well, the thing is... I lost eyes on the room three years ago.&quot; You groan.

&quot;I know, I get it... I&#39;m the worst. This is why I d- id--- didn--- did---&quot;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;\&quot;Fine...\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#ab&quot;&gt;&gt;\
&quot;Fine...&quot; Her voice chimes and glitters. &lt;&lt;set $SITRIAFFINITY to 1&gt;&gt;

&quot;That&#39;s great to hear, because I lost vision on the storeroom about three years ago, and I thought you&#39;d be furious.&quot;

...

&lt;span id = &quot;b_ab&quot;&gt;
\&lt;&lt;link &quot;\&quot;YOU FUCKING WHAT?!\&quot;&quot;&gt;&gt;\
&lt;&lt;replace &quot;#b_ab&quot;&gt;&gt;\
&lt;&lt;nobr&gt;&gt;&lt;span id = &quot;yell&quot;&gt;&quot;YOU FUCKING WHAT?!&lt;/span&gt;&lt;&lt;link &quot;?!&quot;&gt;&gt;&lt;&lt;append &quot;#yell&quot;&gt;&gt;?!&lt;&lt;set $SITRIAFFINITY -= 1&gt;&gt;&lt;&lt;/append&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/nobr&gt;&gt;&quot; She yelps.

&quot;I&#39;m sorry!!! Please stop yelling!!!&quot; SITRI&#39;s raised voice echoes across the deck&#39;s full length, and the feedback from it sets off another alarm.

&quot;Look, I didn&#39;t want to bother you after last time! It&#39;s probably nothing! I wouldn&#39;t have woken you if I hadn&#39;t had-- a--- ha---- a---&quot; &lt;&lt;toggleclass &quot;#ab_fl&quot; &quot;hide&quot;&gt;&gt;
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;You could have woken me earlier, you know?&quot;&gt;&gt;\
&lt;&lt;replace &quot;#b_ab&quot;&gt;&gt;\
&quot;You could have woken me earlier, you know? An outage is hardly your fault.&quot; She sighs. &lt;&lt;set $SITRIAFFINITY += 1&gt;&gt;

&quot;I know... it&#39;s just... last time was a bit of a mess.&quot; You reach out to an access point and stroke her cheek through the screen.

&quot;Totally, I get it. Still, it&#39;s only natural I&#39;d be worried about you.&quot; She giggles.

&quot;Stop trying to sound so cool, Moira. I know you --- y --- you ---ou ---- you ----- y--&quot; &lt;&lt;toggleclass &quot;#ab_fl&quot; &quot;hide&quot;&gt;&gt;
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
\&lt;/span&gt;

&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
\&lt;/span&gt;
\&lt;span id = &quot;ab_fl&quot; class = &quot;hide&quot;&gt;\
With a loud &#39;&#39;clunk&#39;&#39;, SITRI&#39;s voice shuts off. No matter how much you call out to her, she doesn&#39;t respond. [[You swear to yourself and make for the elevator.|15Storage]]
\&lt;/span&gt;</tw-passagedata><tw-passagedata pid="17" name="15Storage" tags="DarkFuture" position="850,225" size="100,100">You step off the elevator and immediately break off towards the storage room.

As you close in on it, your footfalls get heavier, and a pink haze starts to cloud your vision. With it comes a sickly sweet scent that makes you gag and spit. Before it can overpower you, you fumble through your toolbox and pull out a gas mask, taking a few breaths of relief before strapping it on. The mist reaches its most dense right outside the storage room.

You ready yourself, armed with a heavy wrench, and &lt;&lt;linkappend &quot;kick down the door.&quot;&gt;&gt;

...

The room beyond the door is almost opaque through the haze. As you step further in, you can see two things:
# A spiraling chitinous hive, built into the room&#39;s wall, and... 
# A humanoid woman, tall, voluptuous, and dressed in gossamer silks.

She watches you as you approach.

@@color:#ff7adc;&quot;That&#39;s curious. I didn&#39;t read any vital signs on this ship...&quot;@@ She steps forward and prods at your mask. You try to step back, but she seems to move with you as you do. When she reaches you, though, you don&#39;t &#39;feel&#39; her touch. 

You tense. There&#39;s only one thing this could mean.&lt;&lt;set $QUEENAFFINITY = 0&gt;&gt;

&lt;span id = &quot;wizard&quot;&gt;
\&lt;&lt;link &quot;You&#39;re a wizard.&quot;&gt;&gt;&lt;&lt;replace &quot;#wizard&quot;&gt;&gt;\
&quot;You&#39;re a wizard.&quot; She rolls her eyes. &lt;&lt;set $QUEENAFFINITY = -3&gt;&gt; &lt;&lt;removeclass &quot;#wizardfl&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;redo&gt;&gt;

@@color:#ff7adc;&quot;I&#39;m not sure what backwater planet you come from, but you&#39;re off the mark, hound.&quot;@@
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;You&#39;re a ghost.&quot;&gt;&gt;&lt;&lt;replace &quot;#wizard&quot;&gt;&gt;\
&quot;You&#39;re a ghost...&quot; She snickers. &lt;&lt;set $QUEENAFFINITY = -1&gt;&gt; &lt;&lt;removeclass &quot;#wizardfl&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;redo&gt;&gt;

@@color:#ff7adc;&quot;Do your people still believe in such things? Truly, the situation is more dire than I&#39;d known.&quot;@@
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;You&#39;re an enemy Power-User&#39;s WEAPON!&quot;&gt;&gt;&lt;&lt;replace &quot;#wizard&quot;&gt;&gt;\
&quot;You&#39;re an enemy Power-User&#39;s WEAPON!&quot; She gives you a disgusted look.&lt;&lt;set $QUEENAFFINITY = -10&gt;&gt; &lt;&lt;removeclass &quot;#wizardfl&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;redo&gt;&gt;

@@color:#ff7adc;&quot;Oh, void... you&#39;re not one of those humans that reads books instead of talking to your kind, are you?&quot;@@
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;You like girls...&quot;&gt;&gt;&lt;&lt;replace &quot;#wizard&quot;&gt;&gt;\
&quot;You like girls... &quot; She licks her lips. &lt;&lt;set $QUEENAFFINITY = 3&gt;&gt; &lt;&lt;set $v15gay = 1&gt;&gt; &lt;&lt;removeclass &quot;#wizardfl&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;redo&gt;&gt;

@@color:#ff7adc;&quot;Well, I can&#39;t fault you there. That is definitely a weakness of mine...&quot;@@
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;You&#39;re a voidborn.&quot;&gt;&gt;&lt;&lt;replace &quot;#wizard&quot;&gt;&gt;\
&quot;You&#39;re a voidborn. Or, more accurately, a manifestation created by one.&quot; She smiles. &lt;&lt;set $QUEENAFFINITY = 5&gt;&gt;

@@color:#ff7adc;&quot;Good guess, hound! How&#39;d you figure that out?&quot;@@ She circles around you, looking you up and down.

&lt;span id=&quot;voidguess&quot;&gt;\
&lt;&lt;link &quot;\&quot;You&#39;re projecting directly into my brain. With no Gifted on the manifest, there&#39;s only one alternative.\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#voidguess&quot;&gt;&gt;&lt;&lt;removeclass &quot;#wizardfl&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;redo&gt;&gt;\
&quot;You&#39;re projecting directly into my brain. With no Gifted on the manifest, there&#39;s only one option left.&quot; She stops and looks intensely at your face.&lt;&lt;set $QUEENAFFINITY += 1&gt;&gt;

@@color:#ff7adc;&quot;Hmm... I&#39;ll give you that much. Cute trick.&quot;@@
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;\&quot;That&#39;s a voidant hive. From the looks of it, you must be their queen.\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#voidguess&quot;&gt;&gt;&lt;&lt;removeclass &quot;#wizardfl&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;redo&gt;&gt;\
&quot;That&#39;s a voidant hive. From the looks of it, you must be their queen.&quot; She chitters. &lt;&lt;set $QUEENAFFINITY += 2&gt;&gt;

@@color:#ff7adc;&quot;Ah, it feels so good for my status to be recognized.&quot;@@ You pull what you&#39;ve prepared out of your toolbox, leveling a can of delouser at her. She bolts upright and raises her hands in surrender. 
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;\&quot;The word is &#39;guess&#39;. But, you&#39;ve confirmed it now.\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#voidguess&quot;&gt;&gt;&lt;&lt;removeclass &quot;#wizardfl&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;redo&gt;&gt;\
&quot;The word is &#39;guess&#39;. But, you&#39;ve confirmed it now.&quot; She laughs.

@@color:#ff7adc;&quot;How irritating...&quot;@@
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
\&lt;/span&gt;
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;You&#39;re a demon.&quot;&gt;&gt;&lt;&lt;replace &quot;#wizard&quot;&gt;&gt;\
&quot;You&#39;re a demon.&quot; She rolls her eyes. &lt;&lt;set $QUEENAFFINITY = -3&gt;&gt; &lt;&lt;removeclass &quot;#wizardfl&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;redo&gt;&gt;

@@color:#ff7adc;&quot;I&#39;m not sure what backwater planet you come from, but you&#39;re off the mark, hound.&quot;@@
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;You&#39;re an Invader.&quot;&gt;&gt;&lt;&lt;replace &quot;#wizard&quot;&gt;&gt;\
&quot;You&#39;re an Invader.&quot; She cocks her head. &lt;&lt;set $QUEENAFFINITY = -10&gt;&gt; &lt;&lt;removeclass &quot;#wizardfl&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;redo&gt;&gt;

@@color:#ff7adc;&quot;Hoh...? That&#39;s a curious thing to hear from an actual Invader.&quot;@@
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;You&#39;re some kind of... fuckin... thing, I don&#39;t know.&quot;&gt;&gt;&lt;&lt;replace &quot;#wizard&quot;&gt;&gt;\
&quot;You&#39;re... uh... I&#39;m not really sure...&quot; She giggles. &lt;&lt;set $QUEENAFFINITY = 1&gt;&gt; &lt;&lt;removeclass &quot;#wizardfl&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;redo&gt;&gt;

@@color:#ff7adc;&quot;Cute.&quot;@@ She draws closer and squeezes your cheek between two fingers.
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;/span&gt;&lt;&lt;/linkappend&gt;&gt;
\&lt;span id = &quot;wizardfl&quot; class = &quot;hide&quot;&gt;
\&lt;&lt;do&gt;&gt;
&lt;&lt;if $QUEENAFFINITY lt 5&gt;&gt;
@@color:#ff7adc;&quot;If you truly do not know, I must tell you.&quot;@@ She sighs. @@color:#ff7adc;&quot;In your Invader tongue, we are &#39;voidborn&#39;.&quot;@@
\&lt;&lt;/if&gt;&gt;
&lt;&lt;if $QUEENAFFINITY lt 7&gt;&gt;
@@color:#ff7adc;&quot;I&#39;m the Queen of this hive, and I must be given the proper respect if I&#39;m to interact with an Invader.&quot;@@ Your blood runs cold, and you reach into your toolbox, fumbling around until you find it.

You raise a can of delouser in her direction, and the queen, sighing, raises her hands in surrender.
\&lt;&lt;/if&gt;&gt;&lt;&lt;/do&gt;&gt;

@@color:#ff7adc;&quot;Of course, this is the treatment I get.&quot;@@ She looks at you with a pained expression. @@color:#ff7adc;&quot;Is there no way we can come to an agreement?&quot;@@

&lt;span id=&quot;deal&quot;&gt;\
&lt;&lt;link &quot;\&quot;What could we possibly have to discuss?\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#deal&quot;&gt;&gt;\
&quot;What could we possibly have to discuss?&quot; The queen forces a pained smile and takes a step back.

&quot;W-well, we don&#39;t have any actual quarrel, do we? You can fix your electrical mumbo-jumbo, and we can all keep living. There&#39;s no need for us to fight...&quot;

&lt;span id=&quot;dealing&quot;&gt;\
&lt;&lt;link &quot;\&quot;You&#39;ve already damaged several key electronic systems. I don&#39;t have anything against you, but your hive is bound to cause some serious damage soon.\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#dealing&quot;&gt;&gt;\
&quot;You&#39;ve already damaged several key electronic systems. I don&#39;t have anything against you, but your hive is bound to cause some serious damage soon.&quot; She grumbles and chews on her nails.

&quot;Well, we need to eat...&quot; The queen shoots you an exasperated look. &quot;Maybe you could spare some electronic junk for us to eat?&quot; You scoff.

&quot;That hardly sounds like a deal. We don&#39;t have the staff needed to keep you as a pet.&quot; She huffs.

&quot;Then what? Do you expect me to &#39;&#39;work&#39;&#39;?&quot; The idea hadn&#39;t come to you before... but it could be worth trying. You&#39;re the only human worker on this ship, but maybe a swarm of voidbugs could serve as a substitute... You smile.

&lt;span id= &quot;service&quot;&gt;\
&lt;&lt;link &quot;\&quot;Actually, yes. You can be my apprentice and help me fix this mess.\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#service&quot;&gt;&gt;\
&quot;Alright. You can be my apprentice and help me fix this mess.&quot; The queen&#39;s eyes go wide. &lt;&lt;addclass &quot;#killswitch&quot; &quot;hide&quot;&gt;&gt;

&quot;You can&#39;t be serious...&quot; When you insist, she deflates.

The two of you work together on a few hours of &#39;peasant labor&#39; and manage to fix up the storage bay wiring. After the queen flops down out of exhaustion, you pour out a box of defective toy motors from the lower storage bay, and the hive whips back to life to devour them.

[[With a smile, you step off to check up on SITRI|15ComputerCore]]
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;\&quot;Actually, yes. You can pay me using your body.\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#service&quot;&gt;&gt;\
&quot;Actually, yes. You can pay me using your body.&quot; 

The queen stares at you, open mouthed in shock. When you don&#39;t budge, she turns to hide her face.

&quot;You don&#39;t... That... I just...&quot;

...

She steps back your way, coming in close and whispering.

&quot;I&#39;m not necessarily opposed, but... do you seriously want that?&quot; She shifts around on her feet as she awaits your answer.

&lt;&lt;linkappend &quot;I&#39;m serious.&quot;&gt;&gt; &lt;&lt;set $SITRISleepCamOff to 1&gt;&gt;&lt;&lt;addclass &quot;#killswitch&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;set $QUEENAFFINITY += 10&gt;&gt;

...

She giggles.

&lt;&lt;if $v15gay&gt;&gt;\
&quot;Somehow, I expected this sort of outcome.&quot;
\&lt;&lt;else&gt;&gt;\
&quot;Very well. It suits me better than manual labor anyway.&quot;
\&lt;&lt;/if&gt;&gt; She leans up, placing a brief, very corporeal, kiss on your cheek.

&quot;We&#39;ll do the rest once the kids are asleep, okay?&quot;

[[...|15ComputerCore]]
\&lt;&lt;/linkappend&gt;&gt;
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
\&lt;/span&gt;
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;\&quot;Sorry, but having you here adds a lot of undue risk to my work.\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#dealing&quot;&gt;&gt;\
&quot;Sorry, but having you here adds a lot of undue risk to my work.&quot; She sighs.

&quot;You&#39;ll wipe my family out because it&#39;s &#39;&#39;too bothersome&#39;&#39; to let us live? The height of human depravity knows no bounds...&quot; Then, she seems to have an idea.

&quot;Well, if we&#39;re only causing trouble because of our nest... maybe we could move somewhere else on the ship?&quot;

&lt;span id=&quot;relocate&quot;&gt;\
&lt;&lt;link &quot;\&quot;How can I trust that you won&#39;t start tearing things up again anyway?\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#relocate&quot;&gt;&gt;&lt;&lt;set $QUEENAFFINITY += 1&gt;&gt;\
&quot;How can I trust that you won&#39;t start tearing things up again anyway?&quot; Your gazes meet, then she extends a hand.

&lt;span id=&quot;shake&quot;&gt;\
&lt;&lt;link &quot;Shake it.&quot; &gt;&gt;&lt;&lt;replace &quot;#shake&quot;&gt;&gt;&lt;&lt;set $QUEENAFFINITY += 5&gt;&gt;\
&quot;Fine...&quot; You reach out and shake her hand. The queen responds with a haughty self-satisfied smile.

&quot;Perfect. I&#39;ve already moved all my children out from the innermost layer. If you chip away at that, you should be able to fix... whatever it is they might have eaten.&quot;

You sigh and get to work rewiring the camera network. A few particularly brave voidants crawl onto you in the process, and you decide it&#39;s best to leave them be.

[[Once everything is connected again, you head up to check on SITRI.|15ComputerCore]] &lt;&lt;addclass &quot;#killswitch&quot; &quot;hide&quot;&gt;&gt;
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;\&quot;Are you fucking serious? No, that&#39;s not how this works.\&quot;&quot; &gt;&gt;&lt;&lt;replace &quot;#shake&quot;&gt;&gt;&lt;&lt;set $QUEENAFFINITY += 2&gt;&gt;&lt;&lt;set $SITRISleepCamOff to 1&gt;&gt;\
&quot;Are you fucking serious? No, that&#39;s not how this works.&quot; You swat her hand away, and the queen immediately starts to sniffle.

&quot;You don&#39;t even care about my royal honor...? You&#39;re the worst...&quot; Real tears drop out of her illusory eyes, and you feel suddenly self aware. The distance between you is hard to measure, so you awkwardly pat her on the head, which she seems to accept.

&quot;S-sorry... I just need more reassurance than that...&quot;

After some more comforting, she pops up with an idea.

&quot;You have stasis pods here, don&#39;t you? I heard humans always have them on their ships. &#39;&#39;I&#39;&#39; keep well in the cold, and you can use me as collateral to keep my family in line.&quot; She dances around and chitters excitedly. You, on the other hand, suddenly feel quite shy.

&quot;Well, that could work... it&#39;s just...&quot; The queen steps closer and cocks her head at you. &quot;Well, I&#39;m the only staff on the ship. So... my cryopod is the only working one.&quot; She mulls over this information for a second before shrugging.

&quot;Well, you might accidentally roll over and squish me, but I think we could figure something out for that.&quot; After a moment, she looks down at her projected form and seems to realize. &quot;I see... That&#39;s...&quot;

&quot;Right...&quot;

...

&quot;W-well, it&#39;s for the best. It&#39;s not like we&#39;ll be in there for long, anyway.&quot; You both color, and you bite back a correction that you won&#39;t spend long &#39;&#39;conscious&#39;&#39; in the pod together 

The two of you work quickly to rip out and replace the dead lines consumed by the hive, and [[you take your first chance to run away to SITRI&#39;s room.|15ComputerCore]] &lt;&lt;addclass &quot;#killswitch&quot; &quot;hide&quot;&gt;&gt;

\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
\&lt;/span&gt;

\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;\&quot;Unfortunately, I can&#39;t have you or your kids on this ship when management comes around.\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#relocate&quot;&gt;&gt;&lt;&lt;set $QUEENAFFINITY -= 2&gt;&gt;\
&quot;Unfortunately, I can&#39;t have you or your kids on this ship when management comes around.&quot; The queen groans.

&quot;Fine... Let us pack up our things, and we&#39;ll go quietly to the airlock. No need to keep waving that thing everywhere.&quot; You keep the delouser trained on her and her hive, but they don&#39;t try anything.

Once the colony forms into a long line, you lead them to the second deck airlock. There, the queen makes a series of rude gestures at you as you make her strange family //someone else&#39;s problem//.

When you return to the stockroom, you can easily strip out the dessicated hive and rewire everything they broke.

[[Afterwards, you head off to check on SITRI.|15ComputerCore]] &lt;&lt;addclass &quot;#killswitch&quot; &quot;hide&quot;&gt;&gt;
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
\&lt;/span&gt;
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
\&lt;/span&gt;
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
\&lt;/span&gt;
&lt;span id = &quot;killswitch&quot;&gt;
\&lt;&lt;link &quot;Pull the trigger.&quot;&gt;&gt;&lt;&lt;replace &quot;#deal&quot;&gt;&gt;&lt;&lt;removeclass &quot;#spritz&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;addclass &quot;#killswitch&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;if document.getElementById(&quot;dealing&quot;) isnot null&gt;&gt;&lt;&lt;addclass &quot;#dealing&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;\
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
\&lt;/span&gt;
\&lt;/span&gt;
\&lt;span id = &quot;spritz&quot; class = &quot;hide&quot;&gt;
You pull the trigger, flooding the storage room with delouser. The queen coughs and gags, discorporeating as she falls to the floor. Swarms of voidants run from the hive in a futile attempt to escape, and their psychic screams of pain ring in your ears.

...

As the room quiets down, the fog slips away with it, and you can plainly see where the storage room wall bulges around the hive. You get to work ripping it apart and repairing the internal wires.

Once you&#39;re done, [[you pack up to go check on SITRI.|15ComputerCore]]
\&lt;/span&gt;</tw-passagedata><tw-passagedata pid="18" name="15ComputerCore" tags="DarkFuture" position="975,225" size="100,100">SITRI&#39;s communication module whirs to life, joining the chorus of machinery all around her. You thrum your fingers against the terminal&#39;s dark screen until she comes into focus there.

&quot;Mnnmn... Moira...?&quot; She blinks away sleep as you stroke her hair.

&quot;I&#39;m here, I&#39;m here.&quot; Touchscreen haptics whir where she nuzzles into your hand. &quot;Any updates while you were out?&quot; She yawns.

&quot;All clear. Looks like the storeroom cams are back, too...&quot; She smiles up at you. &quot;I hope it wasn&#39;t too much trouble.&quot;

You wave away the thought.

&quot;It was nothing. Just... &lt;&lt;if $QUEENAFFINITY lte -10&gt;&gt;A pain in the ass. Nothing I couldn&#39;t handle.&lt;&lt;elseif $QUEENAFFINITY lte -5&gt;&gt;A nuisance. It shouldn&#39;t be an issue anymore.&lt;&lt;elseif $QUEENAFFINITY lte 0&gt;&gt;A dicey situation. It&#39;s been handled.&lt;&lt;elseif $QUEENAFFINITY lte 5&gt;&gt;A fun little distraction. There&#39;s no need to trouble yourself over it.&lt;&lt;else&gt;&gt;Well, I&#39;m sure she&#39;ll want to introduce herself.&lt;&lt;/if&gt;&gt;&quot; She giggles.

&quot;Then I&#39;ll just trust your judgement.&quot; She stretches up offscreen before settling down onto your hand. &quot;It&#39;s too early to worry about such a trivial thing.&quot; You sigh.
&lt;&lt;if $SITRIAFFINITY gte 0&gt;&gt;
&quot;I missed you...&quot; SITRI kisses your palm.

&quot;I missed you, too. It&#39;s always such a shame seeing you off to bed.&quot; There&#39;s a somber look in her eyes. &quot;We never get enough time together...&quot;

You lean into the screen and kiss her, leaving a little wet spot on her monitor. She giggles.

&quot;Hey, my projections say we&#39;ll be ahead of schedule after our next jump.&quot;

&quot;What do you think would happen if... say... a tech error left the ship stranded for a year or two?&quot; A sly look crosses her face, and you laugh.

&quot;Well, it&#39;d be a shame, but... well within margin, I think.&quot; And the two of you kiss.
\&lt;&lt;else&gt;&gt;\

...
    
&quot;Hey... SITRI...&quot; She perks up.

&quot;I just wanted to apologize for earlier. Cryosleep makes me moody.&quot; SITRI presses a small kiss where your hand touches her screen.

&quot;You think something like that would shake me?&quot; You sigh, but she continues. &quot;Although, you were a little scary... &lt;&lt;if $SITRIAFFINITY lte -1&gt;&gt;Like, seriously scary...&lt;&lt;/if&gt;&gt; &lt;&lt;if $SITRIAFFINITY lte -5&gt;&gt;Like, to a degree I&#39;ve never seen out of you...&lt;&lt;/if&gt;&gt; &lt;&lt;if $SITRIAFFINITY lte -10&gt;&gt;Maybe even weirdly so...&lt;&lt;/if&gt;&gt; &lt;&lt;if $SITRIAFFINITY lte -20&gt;&gt;You weren&#39;t doing that on purpose, were you?&lt;&lt;/if&gt;&gt; &lt;&lt;if $SITRIAFFINITY lte -30&gt;&gt;I mean, who would just intentionally yell at their Ship AI like that for no reason?&lt;&lt;/if&gt;&gt; &lt;&lt;if $SITRIAFFINITY lte -60&gt;&gt;That&#39;d be weird, is all I&#39;m saying.&lt;&lt;/if&gt;&gt;&quot;

&quot;Maybe a kiss would make me feel better, though?&quot; You snicker, brushing a stray hair from her face.

&quot;Fine.&quot; And the two of you kiss, leaving a little smear of wetness on her screen, which you don&#39;t dare wipe off.
\&lt;&lt;/if&gt;&gt;

Alarms cry out across the deck, washing the ship in red light. SITRI droops.

&quot;Looks like our time&#39;s up.&quot; You put your hand to her screen, and you feel hers there with you. Then, you take a step back.

&quot;You&#39;ll wake me if anything goes wrong?&quot; She nods. &quot;And you won&#39;t wait three years?&quot; SITRI laughs.

&quot;Get to your pod before you see something that destroys your brain, dummy.&quot; You blow her a kiss and run off. As you do, you hear her whisper over the PA system.

&quot;Goodnight, my dear.&quot; [[And you have a sound, dreamless year of sleep.|30Days]] &lt;&lt;set $Finished_15 to true&gt;&gt;</tw-passagedata><tw-passagedata pid="19" name="15CW" tags="OOC" position="1100,225" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Sexual Coercion (It&#39;s Complicated)
* Insects Crawling on POV
[[I consent.|15Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="20" name="16Start" tags="DarkFuture" position="1225,225" size="100,100">\ &lt;&lt;set _Corp to [&quot;Neurocore&quot;, &quot;Meta&quot;, &quot;Adhoc&quot;, &quot;Blitzr&quot;, &quot;M-Stack&quot;, &quot;RNG-Sus&quot;, &quot;Presanguine&quot;, &quot;Eletech&quot;, &quot;Newnoise&quot;, &quot;HardKore&quot;]&gt;&gt;
\ &lt;&lt;set _Thing to [&quot;Horse&quot;, &quot;Chlorine&quot;, &quot;Rose&quot;, &quot;Vibe&quot;, &quot;Memory&quot;, &quot;Dance&quot;, &quot;Hyperpop&quot;, &quot;Police&quot;, &quot;Justice&quot;, &quot;Punk&quot;]&gt;&gt;
\ &lt;&lt;set _Doer to [&quot;Repellant&quot;, &quot;Perfume&quot;, &quot;Toy&quot;, &quot;Charger&quot;, &quot;App&quot;, &quot;Phone&quot;, &quot;Sprinkler&quot;, &quot;Masticator&quot;, &quot;Detector&quot;]&gt;&gt;
Concrete dust swirls in a cloud around you. You sputter and cough, pulling your rebreather to your face for a deep breath.

As you dust off and pull yourself up to your feet, Keisha comes into view at the end of the tunnel, and she runs to your side.

&quot;What&#39;s wrong with you?!&quot; She circles around, checking you over from head to toe. &quot;I left you alone for a minute, and you&#39;re already getting into trouble.&quot; You doff the mask and exhale, then you laugh.

&quot;It&#39;s nothing. I saw some corposcrap I wanted, and I took it. Simple as that.&quot; She groans and sweeps the dust off your back.

&quot;You know better than most of us how unstable this shithole is, boss. Don&#39;t go taking risks over a...&quot; Keisha glances at the dented box at your feet. &quot;What the hell is that, anyway?&quot; You bend down and lift it up to your chest.

&quot;Not sure...&quot; You shake the box, then Keisha grabs it tight and glares at you. Instead, you look it over while she holds it.

&quot;I thought it was one of those old &lt;&lt;print _Thing.pluck()&gt;&gt; &lt;&lt;print _Doer.pluck()&gt;&gt;s that &lt;&lt;print _Corp.pluck()&gt;&gt; made back in &#39;&lt;&lt;print random(16, 67)&gt;&gt;. But, looking at the whole thing now, it looks more like an old &lt;&lt;print _Corp.pluck()&gt;&gt; model.&quot;

At the far end of the tunnel, you spot a crowd of your underlings. They&#39;re watching the two of you and whispering between themselves. When they catch you staring, they turn on their heels and leave quick. By the time Keisha checks over her shoulder, they&#39;re out of sight.

She shrugs.

&quot;Well, I would have thought it was some &lt;&lt;print _Corp.pluck()&gt;&gt; &lt;&lt;print _Thing.pluck()&gt;&gt; &lt;&lt;print _Doer.pluck()&gt;&gt;, so that goes to show what I know.&quot; You laugh and turn back towards the rubble. Before you can prise an old cyberarm from a storage case, she speaks up again.

&quot;Actually, Esi, maybe we should call it a day?&quot; You scrunch your face up at her. &quot;The CPUT&#39;ll still be here tomorrow, and you scratched yourself up pretty bad getting that... whatever.&quot; She gestures wildly towards the box she&#39;s holding.

&quot;Besides, if I can get a cutting crew in here tonight, there&#39;ll be plenty of new pickings for you.&quot; Somehow, she always knows just how to tempt you.

You stomp open the display case and lift the arm free, only to realize it&#39;s a plaster display model. It cracks in two when you chuck it against the wall.

&quot;Fine. I should run this to Azumah anyway.&quot; You take back your prize, and Keisha freely surrenders it to you.

On your way to the surface, you&#39;re able to shake it a few times without her noticing, not that it tells you much.

[[...|16AboveGround]]</tw-passagedata><tw-passagedata pid="21" name="16AboveGround" tags="DarkFuture" position="100,350" size="100,100">After some cajoling, Azumah promises to stay up late and sort through your haul through the night.

You leave his tent satisfied with yourself, and Keisha is waiting to greet you. Without a word, she slides two warm pâté and a skewer of suya into your hands. The two of you walk the edge of camp, and you regard her pastries with suspicion.

&quot;So... did Omenka and his boys get their flock eating again after all? I thought the last bird flu hit them pretty hard.&quot; She gives you a perplexed look, before laughing when she seems to realize.

&quot;You thought right.&quot; You must have given the food in your hands a strange look, because she continues. &quot;Invasive squirrel. You can hardly tell, though.&quot; And she shrugs. &quot;The pies are from me, so all-veg.&quot;

You give them each a probing sniff, before deciding you&#39;re too hungry to be bothered. Keisha watches your reactions with interest, so when you like them both, you try not to show it.

Then, a gaggle of goons pass by, taking up the entire width of the street and chatting amongst themselves. You don&#39;t register which, if any, are Scavvers under you, because when they move past you one brave punk reaches out and gives your ass a hard slap.

...

You and Keisha exchange near-instantaneous glances of confusion...

And then you wrench the poor fuck&#39;s arm and drop him to the asphalt, following soon after with your boot hard against his sternum. 

He screams, and his buddies scatter in the confusion. You&#39;re sure you yell something as well, but you can&#39;t remember after. In the next moment you experience, you&#39;re crouched over the goon, and your arm is raised high over his throat, brandishing your suya skewer.

When you realize you aren&#39;t moving, you look to your side, only to see Keisha holding you by the arm. You glare at her, and she only mouths (in truth, she might have spoken either way she&#39;d be droned out by the blood thrumming in your ears) a single, &quot;Esi...&quot; at you.

You curse and throw the skewer aside, stepping off the goon, who lays shaking in the street. Keisha squats down beside him, and you hear her whisper.

&quot;My boss has just given you a second chance.&quot; Then, she reaches to her hip and draws out a well-worn .44, bouncing it loosely in her hand. &quot;Still... it seems wrong to send you off without a warning.&quot;

She nestles its barrel into the palm he touched you with, and the goon begins to sob. You look away. Then, you hear a shot crack out and echo through the city, then a scream, then low, awful sobbing.

&quot;Now, I&#39;m going to be very clear my friends. If any of us see you anywhere on the Cape, you&#39;re dead.&quot; She stands and starts moving your way before turning back. &quot;And quit fuckin&#39; crying. Everyone&#39;s gonna think you&#39;re a creep AND a pussy.&quot;

When she reaches your side, Keisha whispers.

&quot;Hey... you okay? If you wanna get away from these-&quot; She turns away, towards where a crowd is forming, and raises her voice, &quot;assholes with nothing better to do-&quot; then back to you, &quot;it shouldn&#39;t be far to my tent.&quot; You gnash your teeth, which she takes as an answer, [[and she wraps an arm around you to lead you away|16Inside]].</tw-passagedata><tw-passagedata pid="22" name="16Inside" tags="DarkFuture" position="225,350" size="100,100">The two of you sit in awkward silence, Keisha in the corner wringing her hands, and you laying quiet in her bed.

She steps out for a moment, and returns with a glass of water, meekly placing it on the bedside table. You watch her sit down and stare at nothing with that sullen expression. Then, you take the glass and sip it.

&quot;I had the situation handled, y&#39;know?&quot; She gives you a puzzled look, then she smiles and moves to sit on the bed beside you. She sighs.

&quot;Yeah, you did. Still...&quot; She strokes your cheek. &quot;You&#39;re the boss. It&#39;s my job to get my hands dirty in your stead.&quot; You let out a small, bitter laugh.

She lays down at your side and wraps her arms around you. You settle into her and get a bit more honest than you should be.

&quot;It feels like the crew hardly respects my position anymore...&quot; You groan and turn to face Keisha.

&quot;I put in so much work to become the boss, all so nobody would fuck with me, and yet...&quot;

...

Keisha grimaces.

&quot;I... might have just realized something.&quot; She gets suddenly bashful, inching towards the other side of the bed. &quot;This might be my fault.&quot;

&quot;See... it&#39;s...&quot; She turns to hide from your stare.

&quot;Last week, I was drinking with the crew for the first time in a while.&quot; You shudder at the thought of Keisha trying to keep up with a heavyweight like Azumah. &quot;I don&#39;t know how, but you came up in the conversation.&quot;

&quot;A bunch of the guys kept insisting there was no way a girl like you could have a cute side.&quot; She scoffs at the idea, even now.

&quot;And... when I was trying to explain your appeal to them... I accidentally told them... that... mnnh... mhnm...&quot; Her speech devolves totally into meaningless mumbling.

&quot;You what? What did you tell them?&quot; She mumbles back, and you prod her to no coherent response. 

&quot;Tell me!&quot; She hides her face in her hands and groans.

&quot;You already told me this much, so tell me what you said already!&quot; She shakes her head, and you finally start to see red, towering over her.

&quot;JUST TELL ME!&quot; Then, Keisha breaks.

&quot;I-I TOLD THEM THAT YOU&#39;RE THE BOTTOM WHEN WE DO IT!!&quot; You feel yourself flush all over, but she doesn&#39;t stop. &quot;I TOLD THEM THAT YOU MAKE REALLY CUTE NOISES, AND THAT YOU ALWAYS WANNA KISS FOR HOURS AFTER!! I&#39;M SORRY!!&quot; She buries her face in the mattress and cries, and a strange mix of embarrassment and pity washes over you. 

You&#39;re not sure if you want to comfort her or strangle her, so instead you put your full weight into punching her bedpost, bloodying your knuckles in the process.

The loud &#39;&#39;THUNK&#39;&#39; seems to pull Keisha out of her stupor, and the pain forces down all the rage burning in your chest. You take a deep breath and try to lead calmly, but the best you can get out is: &quot;Why...?!&quot; followed shortly by &quot;How does that come up?!?!&quot; She sits up and sniffles.

&quot;I was like seven drinks deep... We&#39;d been apart so long, and I couldn&#39;t stand listening to them trash you. I got way too passionate...&quot; At this point, you sit beside her, and she shakily leans against you.

&quot;The worst part is, it seemed like they felt more kinship with me after. All their body language shifted, and around the camp they kept talking to me like &#39;&#39;I&#39;&#39; was in charge. Any time you pissed one of them off, they&#39;d complain to me as if I was supposed to keep you in line.&quot; You grind your teeth.

&quot;Bastards.&quot; Keisha nods. Then, she slides down, resting her head gently in your lap. You stroke her hair and massage her scalp while you think, and she seems all too comfortable there.

&lt;&lt;linkreplace &quot;Mull over your options.&quot;&gt;&gt;You consider the options before you.

While it may be humiliating for your underlings to think about you in such an inappropriate way, it&#39;s not without its perks. Since the goons have taken to viewing Keisha as the macho, powerful shadow boss, you could easily turn that against them. Your showing today has also no doubt reinforced their image of the two of you. There are two real ways you could spin this in your favor.

# If you allow Keisha to &#39;rule from the shadows&#39; while you hold her leash, she could easily pick up support from rebellious groups and launder your more controversial orders down to them. As much as you&#39;d like to simply take out those who question your authority, they still have a lot to contribute to the group. Factionalism kills most gangs (and nations, and corps) in the end. It would be embarrassing, but your pride could buy you further control over your underlings.
# However, if you wanted to rebut Keisha&#39;s assumed power, doing so publicly could spread fear around your base and heighten their respect for you. Wars are destructive, public executions waste manpower, but if someone were to overhear you &#39;asserting your authority&#39;, you&#39;d be back in your place as alpha dog in no time.

Both options ask some embarrassing things from you, but, for the unity of the Chapel Street Scavvers, you have to pick one...
\&lt;&lt;if $Finished_16_A and not $Finished_16_B&gt;&gt;
\&lt;&lt;removeclass &quot;#pathB&quot; &quot;hide&quot;&gt;&gt;
\&lt;&lt;elseif ( $Finished_16_B and not $Finished_16_A ) or random(1) == 0&gt;&gt;
\&lt;&lt;removeclass &quot;#pathA&quot; &quot;hide&quot;&gt;&gt;
\&lt;&lt;else&gt;&gt;
\&lt;&lt;removeclass &quot;#pathB&quot; &quot;hide&quot;&gt;&gt;
\&lt;&lt;/if&gt;&gt;
\&lt;&lt;/linkreplace&gt;&gt;
&lt;span id = &quot;pathA&quot; class = &quot;hide&quot;&gt;
[[ [Sadist] &quot;Pet? There&#39;s a new play I&#39;d like to try tonight...&quot;|16Sadist]]
@@color:#dd6688;==[Exhibitionist] &quot;I&#39;ve got a plan, pet, but you might not like it.&quot;==@@
&lt;/span&gt;\
\&lt;span id = &quot;pathB&quot; class = &quot;hide&quot;&gt;
@@color:#dd6688;==[Sadist] &quot;Pet? There&#39;s a new play I&#39;d like to try tonight...&quot;==@@
[[ [Exhibitionist] &quot;I&#39;ve got a plan, pet, but you might not like it.&quot;|16Voyeur]]
\&lt;/span&gt;</tw-passagedata><tw-passagedata pid="23" name="16Voyeur" tags="DarkFuture" position="350,350" size="100,100">Keisha squeezes your hand tight as she pulls you deeper into the CPUT ruins. You pant and cry out &quot;Wait! Where are we going...?&quot; and she only smiles.

You reach the third sublevel, and you slip on some debris, stumbling straight into her arms. She hugs you tight to her chest.

&quot;It&#39;s alright. This is the spot.&quot; She leans down and kisses your forehead. @@color:#6f6f6f;You claw down her back, making her whimper ever so slightly. From the second level stairway, a low-ranking goon trains his camera on the two of you.@@

Under a sign labeled &quot;NEW CAPE TOWN MATERIALS LAB&quot;, Keisha pulls out a small jewelry box and offers it to you. You open it @@color:#6f6f6f; turned so that your &#39;guest&#39; can see@@, and inside is a glittering silver choker. You look up to her.

&quot;It&#39;s beautiful...&quot; She takes the necklace and gingerly places it around your neck. When she pulls on the cross at its front, a chain extends out, and the choker clamps down into a tight collar. You yelp and cling to her@@color:#6f6f6f;, biting down hard on her collarbone and forcing her to suppress a whimper@@. Your eyes meet, and she pulls you by your chain into a deep kiss.

When she comes up for air, you give your signal, and Keisha pushes you down onto a desk. She lurches forward with you and curls an exploratory pair of fingers into you. You  @@color:#6f6f6f;play at@@ stifling your sudden, desperate moans@@color:#6f6f6f;, and even you&#39;re shocked at how real they are@@. Your love @@color:#6f6f6f;and pet dog @@nuzzles her face against yours, and it becomes clear she&#39;s drooling for you. @@color:#6f6f6f;Between gasps, you whisper out all the punishments you have planned for her when you get home. She shudders.@@

@@color:#6f6f6f;Outside, dawn is just about to break over the city. You only need to make it a little longer.@@

Then, Keisha catches you off guard by @@color:#6f6f6f;going off script and@@ wrapping a hand around your neck. She&#39;s too shy to apply that much pressure, but the new sensation shocks you, and you let out a truly embarrassing moan. You catch a glint of hunger in Keisha&#39;s eye, and before you know it, she&#39;s undoing her belt and, not long after, sliding inside you. @@color:#6f6f6f;Taking her while she&#39;s in control proves to be too much. You cry out again and feel tears forming in your eyes. Just like the absurd gallant persona she&#39;s affecting, Keisha bends down and kisses your tears away. The worst part is... it makes your heart flutter...@@

The sounds of early morning at camp arrive to save you. Your voyeur gets scared by voices at his tail and skitters off down a random hallway. Once he&#39;s out of earshot, Keisha pulls out and drops to her knees in front of you.

&quot;S-sorry ma&#39;am... I got carried away. I just wanted it to be believable...&quot; She whimpers and bows her head. You slide across the desk and take her head in your hands.

&quot;Oh, there there. There there, puppy.&quot; She leans into your touch and whines. You scratch her cheek and she presses a little kiss into your fingers, smiling up towards you full of pure love. You bring her back to Earth with a swift kick to the stomach.

While she writhes on the ground, you stretch, before dropping down to her level and whispering to her.

&quot;Now, mutt, we&#39;re short on time until the first cutting crews arrive.&quot; You wrap your hand around her throat. [[&quot;\&quot;How about you hurry up and finish what you started?\&quot;&quot;|30Days]] &lt;&lt;set $Finished_16_B to true&gt;&gt;</tw-passagedata><tw-passagedata pid="24" name="16Sadist" tags="DarkFuture" position="475,350" size="100,100">Metallic scraping echoes through the Scavvers camp as you pull Keisha from your tent into the main square. You&#39;ve tucked yourself into a corner to avoid an //obviously// public display, but you make sure your voice carries enough that everyone will hear it.

&quot;DID YOU THINK YOU COULD SLIP SOMETHING LIKE THIS PAST ME, PERVERT?!&quot; You kick her in the side, and she screams out through her gag. A shudder runs up your spine, and you kick her again, just to feel the rush a little longer. Before long, heads start poking up around camp.

&quot;IF YOU EXPECT THIS SORT OF INSUBORDINATION TO GO WITHOUT PUNISHMENT: YOU ARE IN FOR A RUDE AWAKENING, BITCH!&quot; You pull a punch just inches shy of fracturing her jaw. Keisha writhes helplessly and lands on her stomach at your feet. A smile comes to your face unbidden, and you clamber for your stashed baseball bat.

If it&#39;s any sign of your public image changing, nobody comes to Keisha&#39;s aid as you bear down on her. After three solid strikes, you realize you&#39;ve made your point as good as you&#39;re going to make it. After a fourth, you&#39;re satisfied. You press your heel into her cheek. There&#39;s no point to yell anymore, as the entire team has gathered tightly around the circle.

&quot;I hope you know that this is only the beginning. I won&#39;t be done with you for a lo-o-o-o-ong time...&quot; You scan the crowd around you, and your underlings cower at your gaze more strongly than ever before. You lift Keisha into your arms (with effort you hope the goons don&#39;t notice), and you carry her off into your tent. 

...

&quot;Ooooh, the way everyone was staring? Oh my //god//. Wasn&#39;t it so humiliating? I got chills. C&#39;mon, it was good for you, wasn&#39;t it?&quot; Keisha&#39;s expression has gone totally numb. You snap, yell, but she only responds in gasps when you wrap your thighs tighter around her.

&quot;Come on, I&#39;m asking you a question! Was it good for you or not?&quot; She whimpers in response. You growl, shoving a dry hand down the front of her pants and making her cry out. &quot;Tell me it was good or I stop right now.&quot; She blubbers and leans into you before managing to gasp out.

&quot;It was!! So good...!&quot; She looks up to you with expectant, debased eyes, and a truly horrible feeling wells up inside you. You smile as you yank out your hand, smearing its contents over her chest. She squirms against her restraints and cries.

You can&#39;t do anything but laugh as you pull her into bed beside you.

&quot;Keep quiet, will you? I&#39;ve had a long day...&quot; She shudders. [[You, meanwhile, have the best night&#39;s sleep of your life.|30Days]] &lt;&lt;set $Finished_16_A to true&gt;&gt;</tw-passagedata><tw-passagedata pid="25" name="16CW" tags="OOC" position="600,350" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Graphic Sexual Content
* Graphic Violence
* Intimate Partner Violence (Consensual)
* Sexual Harassment
* Misogyny
* Asphyxiation
[[I consent.|16Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="26" name="17Start" tags="BloodlikeEarth" position="725,350" size="100,100">You lean against your mattock and survey the land around you.

A spiraling trail of dirt and mulched earth winds through the massive overgrowth, encompassing nearly 6 hours of work and barely making a dent in the curve of the land. A bead of sweat drips down and stings your eye, and you rub at it with your gloved wrist. You curse and spit, before throwing down your tools and stomping off to the farmhouse porch.

You sit a while, there, sipping warm water and enjoying the wind. Right as you begin to doze, you&#39;re shocked by a woman&#39;s voice, and you jump.

&quot;Miss Volkova?&quot; When you open your eyes, a fashionable younger lady is standing before you and watching you with a curious look. When she smiles at you, there&#39;s a familiar aura about her.

She laughs and extends a hand to you, which you take to pull yourself to your feet.

&quot;I hadn&#39;t meant to wake you, but when you slumped over like that, I felt a little guilty.&quot; You blush and dust yourself off.

&quot;Just been a busy morning, is all...&quot; You right yourself and smile her way. &quot;I don&#39;t think we&#39;ve met, though.&quot;

She seems to remember herself, stepping back to grab a basket at the foot of the porch stairs. It&#39;s loaded down with bread, sausages, and tea.

&quot;R-right!&quot; She gives a little bow. &quot;We&#39;ve actually written, but you wouldn&#39;t know it.&quot;

&quot;Mayor Omarova... my father... has me handle all his letters.&quot; You nod, then something strikes you. Your guest blushes as you look her up and down, but you can&#39;t seem to square it in your mind.

&quot;If you&#39;re Ervin&#39;s daughter, then...&quot; You circle her. &quot;Vera?&quot; She cocks her head at you.

&quot;Then I guess we &#39;&#39;have&#39;&#39; met.&quot; Images flit through your mind of a child, tiny and sickly but paraded around the village like a treasure. You think of Her, holding that child with such a look of pure love in her eyes. You remember being asked if you&#39;d like to hold her, and you remember blowing it off, with all those awful feelings which circled around you then... There was a time you wished you would have strangled that child.

You sigh.

&quot;It&#39;s been a long time. Seems longer every day.&quot; She watches you with a strange expression, and you try your best to break the tension. &quot;Don&#39;t mind my chattering. Coming back home&#39;s just made me feel old.&quot; Vera laughs, then she slowly looks you up and down, smirking. Before you can question her, she shakes her head.

&quot;Could have fooled me.&quot; She steps closer and meets your gaze. &quot;A quick wardrobe change, and I could convince people we&#39;re sisters, Miss Volkova.&quot; You blush and roll your eyes.

&quot;If you want me to feel young, you could at least call me &#39;Medina&#39;, y&#39;know...?&quot; You both laugh, then a sharp gust of wind blows past, blasting Vera&#39;s hair all over her face. She brushes it away as she asks.

&quot;Then, //Medina//, maybe you could invite me in for tea.&quot; [[And you do, taking her basket and holding the door for her.|17Inside]]</tw-passagedata><tw-passagedata pid="27" name="17Inside" tags="BloodlikeEarth" position="850,350" size="100,100">You help Vera light the farmhouse&#39;s old gas stove, and she gets to work searing the //kazy//. Meanwhile, you busy yourself preparing the tea she brought in. The two of you work quietly, but the air between you is pleasant.

When you&#39;ve both finished, she sets out the sliced sausages with some flatbread, and you pour for the table. You take your first sips and smile.

She&#39;s chosen a mild black tea. There&#39;s a smokiness to it that&#39;s unlike anything you can get outside of Almaty, with none of the astringency you get further east. While you find it easy to drink, Vera puts it down after one sip, then seems to only idly stir at it. You step to the cabinet and return with a spare teacup full of sugar. She takes it, begrudgingly, and tips a few spoonfuls in.

When Vera takes her next sip, she sighs.

&quot;I read that this sort of tea is pretty popular out west, so I thought it might remind you of what you drank back in Ukraine.&quot; She sips, holds the tea in her mouth for a while, then swallows. &quot;I still don&#39;t get the appeal...&quot;

You laugh, and Vera seems hurt.

&quot;Sorry, it&#39;s just... I&#39;ve mainly had coffee since I left home.&quot; She groans and plants her chin against the table. You&#39;re worry that things will take a turn for the worse, but Vera happily ribs you over your reaction to the first horse meat you&#39;ve eaten in nearly ten years. The pace of conversation is peaceful and slow. She seems intrigued by all the dull mediocrities you went through abroad, and you&#39;re relieved to have someone with whom you can talk about them.

After you drain the teapot and finish all the kazy she brought, Vera leans on her hands and watches you from across the table. There&#39;s a curious, wistful look in her eye when she whispers to you.

&quot;You&#39;re just like Mother used to describe you, yknow?&quot; At that, your blood runs cold. You grip the table&#39;s underside to steady yourself.

&quot;You think so? Did Inzhu talk about me a lot back in the day?&quot; She nods and turns your stomach. 

&quot;When I was young, if it was just the two of us, she&#39;d tell me stories.&quot; There&#39;s a strange intensity in her gaze. &quot;I think she figured I&#39;d forget them all by the next day. She repeated herself a lot.&quot;

You gulp. You want to ask more than anything, but you know it would push this strange social fabric one step too far. Instead, you make an excuse to stand and put on another pot of tea. Halfway to the sink, you hear Vera stand and follow you. You pretend to be surprised when she corners you in the kitchen with that inscrutable glare. She stands, sizing you up for several seconds before speaking.

&quot;She said you were cute. Specifically that you had cute reactions. &#39;Like a frightened puppy&#39;, I think she said.&quot; You back away from her, and she pursues. &quot;She said you were easy to talk to. I think she saw us similarly in that regard.&quot; You tremble and start hyperventilating. Vera doesn&#39;t stop. &quot;She said she trusted you. She said she never gave up on you.&quot; You try to shove her away, before realizing you&#39;re still holding the teapot.

She stumbles backwards, and it hits the ground between you, exploding into a million tiny shards. 

&quot;So this is her way at getting back at me?! She always has to have the last fucking word, does she?!&quot; Vera looks shocked for a moment. She starts to speak, but you yell over her, totally hoarse now.

&quot;IF INZHU IS SO INTENT ON TORTURING ME, SHE CAN-&quot; You gag and sob and sudden, hot tears stream down your cheeks. &quot;SHE CAN COME AND FACE ME HERSELF. I&#39;M NOT PLAYING HER GAMES ANYMORE!&quot; You grind your teeth and bite your lips, trying and failing to hold back an inhuman wailing. It&#39;s all you can manage to whisper. &quot;I... I hate her...&quot;

Vera looks down towards your hunched, pitiful form, and you see tears in her eyes as well. She shakes her head.

&quot;I&#39;m sorry. That&#39;s not...&quot; She fixes you with a flickering, wounded gaze. You try to hold it through your sobbing.

&quot;She didn&#39;t send me... She... couldn&#39;t.&quot; The edges of your vision go black.

&quot;Mother passed nearly three years ago, now.&quot; You lash out, striking a jar off the counter and onto the floor. It, too, shatters, and you watch Vera flinch and cry out.

&quot;DON&#39;T FUCKING LIE FOR HER...&quot; The cool, collected cruelty on her face is gone now, replaced by a terrified, weeping girl. &quot;Don&#39;t... don&#39;t say that...&quot;

&quot;Inzhu can&#39;t just die... she doesn&#39;t get to... she... I...&quot; Your breathing quickens, and you throw out the last of your energy, slamming the ground in front of your feet. Shards of glass embed into your fist, and you gasp.

&quot;Medina!&quot; Your eyes meet, and your body burns all over. When you blink, images of Inzhu are burned into the back of your eyelids. When you open your eyes, Vera is there, almost identical.

You stumble away from her and throw open the back door, [[and you run.|17Woods]]</tw-passagedata><tw-passagedata pid="28" name="17Woods" tags="BloodlikeEarth" position="975,350" size="100,100">The cold mountain air assaults your senses. You push through, sprinting through lines of trees as far as your body will take you.

Once you reach your limit, your legs give out, and you fall to your knees. Then, you retch, and you retch, and you retch until there&#39;s nothing but stomach acid coating your throat. You collapse in a heap, wracked by sobs. You spasm, wail, and shake until there&#39;s nothing left in your body capable of fighting, and time starts to melt around you.

The next thing you notice is the sound of footsteps running towards you. Then, you see Her, standing over you, wrapped in a halo of sunset. In the moment, you don&#39;t care which of them it turns out to be.

It&#39;s Vera who speaks.

&quot;Medina...&quot; Her eyes are red and puffy. Rather than extending you her hand, she falls beside you, and the two of you lock eyes. The most you can manage is a whisper.

&quot;Isn&#39;t this what you wanted?&quot; She sighs in response. Then, she starts.

&quot;I was ten when I couldn&#39;t recognize my mother for the first time.&quot; Her voice wavers, and she squeezes a handful of dirt in an iron grip. &quot;She was like a stranger, and not a damn person believed me when I told them.&quot;

She growls back sobs, tensing up, before punching the ground in front of her.

&quot;Everyone said there must be something wrong with //me//. They took me to all sorts of doctors to try and fix me.&quot;

&quot;When none of that worked, they shipped me off to some program for &#39;troubled girls&#39;.&quot; She lets out a bitter, hoarse laugh. &quot;After that, I barely even saw her.&quot;

&quot;Each time they let me visit, I&#39;d ask her. I&#39;d say &#39;You know I&#39;m telling the truth, right? Why won&#39;t you tell them?&#39;.&quot;

&quot;If we were in front of others, she&#39;d beat me. But, if we were alone, she&#39;d just weep endlessly, until the visit ended or I banged on the door and begged to leave early.&quot;

You force out a laugh, then, with Vera&#39;s help, you rise to a sitting position.

&quot;Inzhu always had that side to her. She was paralyzed by what others thought of her...&quot; She smiles weakly and stares out towards the trees. Then, she shifts her gaze directly onto you.

&quot;That&#39;s exactly my point.&quot; She prods you with an outstretched finger. &quot;The real her, the &#39;&#39;original&#39;&#39; her? You&#39;re all she would talk about.&quot;

&quot;I know almost nothing about her. You&#39;re the only living link between me and that version of my mother.&quot; You suddenly feel your nausea returning.

&quot;So... that was how you planned to use me.&quot; She nods, taking your uninjured hand in hers.

&quot;Correct. All cards on the table? I saw your request in a pile due to my father&#39;s desk, and I burned all the others.&quot;

&quot;The whole rest of the village remembers when I got taken away; they won&#39;t tell me anything. You&#39;re my only hope, here...&quot; You push yourself to your feet on shaky legs, and she comes with, sticking way too close to you. You&#39;re too spent to shrug her off.

&quot;Please...&quot; She looks up towards you, her big faux-doe eyes in green one of the few differences between her and Inzhu. They make the whole portrait uncanny. When you try to slip out she resists for a moment, before sighing and letting you go. You groan.

&quot;Look... I don&#39;t want to sound selfish, but what reason do I have to help you?&quot; Vera makes an awful, heart-breaking expression your way, and you have to hide your face to continue. &quot;I-it&#39;s not that I&#39;m not sympathetic. But... Just looking at you is making me feel wretched...&quot;

She sinks. You open your mouth to apologize, but you&#39;re cut off again as Vera leans forward... and kisses you. As soon as you process what&#39;s happened, you shove her back, coughing and gasping for air. Vera steadies herself and stands firm, staring you down with tears in her eyes.

&quot;You&#39;d do it for Inzhu, right...?&quot; 

You move to argue, but pain surges up your arm. Without realizing it, you shoved her away with your glass-laden hand. The tiny shards each reflect your face back at you, and a small trickle of blood drips down onto the forest floor.

You look back up at Vera. When her face contorts like that, she&#39;s Her spitting image. You can&#39;t possibly deny Her, even now. [[You shudder... and you nod.|30Days]] &lt;&lt;set $Finished_17 to true&gt;&gt;</tw-passagedata><tw-passagedata pid="29" name="17CW" tags="OOC" position="1100,350" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Significant Age Gap
* Intimate Partner Violence
* Discussion of Child Abuse
* Suicidal Ideation
* Vomiting
* Serious, Serious Downer Shit
[[I consent.|17Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="30" name="18Start" tags="Blood" position="1225,350" size="100,100">The stuffy halls of Castle Enprod have left you faint and dizzy since you first arrived.

You&#39;ve done your best to adapt to your place at the queen&#39;s side, and she&#39;s been kind to you. Still... it&#39;s impossible for you to sit still for so long with so many eyes on you. In this place, you&#39;re seen as &#39;exotic&#39; at best and a spy at worst. The undisciplined court at Nox-Mystil is so unlike your home that it feels paralyzing. Even your maids, provided by Clan Fehér, are unreliable and overly friendly with you, to the point you&#39;ve given up on retraining them.

The queen says your name. You realize you&#39;ve been locked in a gruesome expression while spaced out, and the diplomat on the far end of your gaze is getting nervous. You apologize and plaster on another faux-smile, which seems to placate them both. A maid steps to your side, and you wave her off as politely as possible.

A herald arrives and kneels.

&quot;Your Majesty Sofia, Lady Cenyu, I am honored in your presence.&quot; Sofia smiles, and you try to match her energy.

&quot;And we yours, sir. Rise.&quot;

The man identifies himself as a messenger out of Jiacata. From your lessons, you can identify it as a southern county, some three or four days downstream on the Deka-Ehr. But, when the discussions shifts to Claimants&#39; Rights and Heroic Titleage, you&#39;re overwhelmed by the information. You feign attention to save face, but the rest of the conversation is a blur to you.

&quot;Perhaps your betrothed would see things differently, your highness...&quot; The herald gestures your way, and Sofia turns to you. There&#39;s a slight twitch of frustration about her brow. He clearly expects you to change the queen&#39;s mind, but you haven&#39;t the slightest clue what they&#39;ve been discussing this whole time...!

&lt;span id=&quot;ReactionChoices&quot;&gt;\
&lt;&lt;link &quot;\&quot;Do you believe I&#39;ll come to your aid if you look desperate enough? You heard her answer.\&quot;&quot;&gt;&gt;
    &lt;&lt;removeclass &quot;#PostJiacata&quot; &quot;hide&quot;&gt;&gt;
    &lt;&lt;replace &quot;#ReactionChoices&quot;&gt;&gt;&quot;Do you believe I&#39;ll come to your aid if you look desperate enough? You heard her answer.&quot; The man sinks, then bows his head in apology. He leaves shortly after. Courtiers around the hall snicker.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;\&quot;Queen Sofia has clearly given the matter much thought. I trust in her judgement.\&quot;&quot;&gt;&gt;
    &lt;&lt;removeclass &quot;#PostJiacata&quot; &quot;hide&quot;&gt;&gt;
    &lt;&lt;replace &quot;#ReactionChoices&quot;&gt;&gt;&quot;Queen Sofia has clearly given the matter much thought. I trust in her judgement.&quot; The man starts to argue, then remembers himself and bows. Thanking the two of you for your patience as he leaves. Sofia stares at you for a while when she thinks you don&#39;t notice, and she laughs to herself.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;\&quot;I believe the history of the matter goes back before my time.\&quot;&quot;&gt;&gt;
    &lt;&lt;removeclass &quot;#Duty_1&quot; &quot;hide&quot;&gt;&gt;
    &lt;&lt;replace &quot;#ReactionChoices&quot;&gt;&gt;&quot;I believe the history of the matter goes back before my time.&quot; You direct your appeal towards Sofia, since she tends to favor you. &quot;Could you explain the facts to me, my queen?&quot; She sighs.&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;/span&gt;
\&lt;span id = &quot;Duty_1&quot; class = &quot;hide&quot;&gt;\
&quot;I suppose that would only be right. All you need to know is this, Cenyu.&quot; She raises a finger.

&quot;First, in contrast to laws elsewhere, Heroic Titleage is not passed down in Nox-Mystil, but the land rights granted by it are.&quot; Then another.

&quot;Second, our late Count of Jiacata was granted a Heroic Title corresponding to a large plot of land in the county after he drove out a nest of spine devils.&quot; And then one more.

&quot;Third, the count adopted a young boy late in life. While his sons by blood inherited the county, he decreed that the land from his Heroic Title should go to that boy.&quot; She sighs and gestures towards the Jiacatan herald.

&quot;Unfortunately, the boy is much younger than even you, Cenyu. He&#39;s in no state to work nor manage the land, thus the new count asks me to strip him of the rights.&quot; The herald looks like he might complain, until Sofia sneers at him. She turns back to you and sighs again.

&quot;Surely you see why it would be wrong to do so. Don&#39;t you, Cenyu?&quot; They both give you the same expectant look.

&lt;span id = &quot;Duty_1Choices&quot;&gt;\
    \&lt;&lt;link &quot;\&quot;The boy has done nothing wrong. It would be wrong to strip him from his home, especially so soon after the loss of his father.\&quot;&quot;&gt;&gt;
        &lt;&lt;removeclass &quot;#PostJiacata&quot; &quot;hide&quot;&gt;&gt;
        &lt;&lt;replace &quot;#Duty_1Choices&quot;&gt;&gt;&quot;The boy has done nothing wrong. It would be wrong to strip him from his home, especially so soon after the loss of his father.&quot; Sofia smirks and turns to the herald.

&quot;You heard her. Let the count know that I&#39;ll have my agents watching over the boy, in case he gets any ideas.&quot; He grimaces, bows, and leaves the hall. Sofia basks in this victory for at least as long as you watch her. Having her value your opinion so highly is nerve-wracking in it&#39;s own way... but you&#39;re happy to give her a win.
        \&lt;&lt;/replace&gt;&gt;
    \&lt;&lt;/link&gt;&gt;
    &lt;&lt;link &quot;\&quot;Leaving the boy alone in that estate would be wrong, too. If the count wants the land so badly, he should have to take the boy in as his own.\&quot;&quot;&gt;&gt;
        &lt;&lt;removeclass &quot;#PostJiacata&quot; &quot;hide&quot;&gt;&gt;
        &lt;&lt;replace &quot;#Duty_1Choices&quot;&gt;&gt;&quot;Leaving the boy alone in that estate would be wrong, too. If the count wants the land so badly, he should have to take the boy in as his own.&quot; Sofia watches you with an intense gaze, as if unsure whether you&#39;re serious. When it&#39;s clear you are, she thinks on it for a moment before nodding and smiling your way. She turns to the herald.

&quot;Pass Princess Cenyu&#39;s offer to the count with my approval. When he agrees, let him know who he owes for it.&quot; The herald bows, thanks you both, and runs off. Sofia looks over as if to comment to you... but she appears to think better of it and instead just smiles.
        \&lt;&lt;/replace&gt;&gt;
    \&lt;&lt;/link&gt;&gt;
    &lt;&lt;link &quot;\&quot;Perhaps the count could assign a regent to help the boy manage the land.\&quot;&quot;&gt;&gt;
        &lt;&lt;removeclass &quot;#PostJiacata&quot; &quot;hide&quot;&gt;&gt;
        &lt;&lt;replace &quot;#Duty_1Choices&quot;&gt;&gt;&quot;Perhaps the count could assign a regent to help the boy manage the land.&quot; Sofia and the herald exchange a look. Then, he nods.
&quot;If it stops the land lying fallow, I believe that would be amenable to the count.&quot; You both look to Sofia, then she nods.

&quot;Rare, but not unprecedented. You have my approval.&quot; The herald thanks you both before heading off, then Sofia calls over the chancellor and whispers just loud enough for you to hear. &quot;Make room for Princess Cenyu to join me at next month&#39;s council meeting.&quot; You blush at her clear praise, but you fear you&#39;ve created more work for yourself.
        \&lt;&lt;/replace&gt;&gt;
    \&lt;&lt;/link&gt;&gt;
\&lt;/span&gt;
\&lt;/span&gt;
&lt;span id = &quot;PostJiacata&quot; class = &quot;hide&quot;&gt;
Thankfully, the herald is the last to join you for open court. And, as the gates shut, the entire room relaxes. 

Posturing in front of an ocean of scrapers has sapped your energy. It&#39;s the most you can do to slouch in your chair and rest your eyes.

While the council regroups during the recess, you watch courtiers flit each and every way through half-wakeness. A maid crosses the floor to the queen&#39;s throne, hands her a tray, then curtsies and leaves. In your current state, you don&#39;t register it as remarkable. For that reason, you don&#39;t notice Sofia&#39;s approach until she sits down beside you.

She slides the tray into your lap.

&quot;There&#39;s not long left, but you should still eat something.&quot; On the tray are two neat custard tarts and a tall glass of water. You nod your thanks to Sofia, and she watches you eat in silence. After you finish, your maid steps in to take away the tray, and the queen dotes on you some more, smoothing out your hair and straightening wrinkles from your dress.

The steady influx of courtiers stops, and an orderly queue is formed. Sofia lingers with you for a few moments, but eventually she stands, smiles, and steps over to her throne, where court proceeds as normal. You sigh and do your best to uphold decorum. There are more eyes on you than usual, today.

Hours of meaningless court prattle drag on. Sofia attempts to engage you in the discussion around an upcoming festival, but it&#39;s the most you can do to smile and nod appropriately. The court seems to accept this response, but it deflates Sofia. For the rest of the proceedings, she doesn&#39;t try to include you, nor does she talk more than strictly necessary. 

As the session comes to an anticlimactic end, Sofia seeks you out. But, before she can reach you, she&#39;s pulled aside by her councilors, begging for her opinions on material they&#39;ll pester her with the next day anyway. You know better than to wait for one of these impromptu meetings, [[so you and your maid head off.|18Hallway]]
&lt;/span&gt;</tw-passagedata><tw-passagedata pid="31" name="18Hallway" tags="Blood" position="100,475" size="100,100">You&#39;re halfway down the hall to your quarters when Sofia finds you. She&#39;s well outpaced her maid, somehow managing a light sprint in her elaborate court dress. When she reaches you, she&#39;s flushed red and sweating, and she has to lean on the wall for support.

&quot;C... Cenyu!&quot; She takes a deep breath and wipes the back of her hand across her face. &quot;Sorry, I was worried I&#39;d missed you entirely.&quot; Your maid, just as shocked as you, steps off into a servants&#39; room and brings back a glass of water for the queen, who sips it and thanks her. It&#39;s a strange sight to behold, and even you have to hold back laughter. Sofia seems to see it on your face, and she smiles.

&quot;Sorry... I&#39;m a bit of a mess.&quot; For the first time today, you find yourself genuinely smiling with her.

&quot;Things have been hectic, and I wanted to apologize.&quot; You open your mouth to appease her, but she continues. &quot;It&#39;s important to me that you feel safe here. This is supposed to be your home, after all.&quot; Sofia looks down to you with a serious expression, and you feel color rising into your cheeks. The best you can do is to cast your eyes to the floor and nod.

&quot;The culture here must be pretty different from Sh&#39;enceriday. I want to make the adjustment as easy as possible, but... it will always be hard.&quot; She speaks as if from experience, brushing hair out of your face as she goes. &quot;If a full day of court is too much for you right now, I understand. There&#39;s no need to force yourself for my sake, Cenyu.&quot;

The two of you sit in silence while she preens over you. Her touch is shaky and uncertain. When you bring your gaze to meet Sofia&#39;s, there&#39;s a soft, unspoken sadness in her eyes. It&#39;s exactly then that you steel your resolve.

You shake your head.

&quot;No. That won&#39;t do.&quot; Sofia gives you a perplexed expression, and you take her hands between yours.

&quot;You said this was supposed to be my home, didn&#39;t you? That just means it&#39;s more important that I don&#39;t run.&quot; She sighs.

&quot;I understand where you&#39;re coming from, but I promise you don&#39;t have to push yourself like this.&quot;

&quot;You&#39;re still young, Cenyu. If you needed time, nobody would fault you for it.&quot; Sofia stares down at her hands &quot;If anything, it&#39;d be sensible for you to despise us all.&quot;

...

Despite everything, you laugh. Again, Sofia seems shocked by you. Before she can protest though, you squeeze her hands and remind her.

&quot;I told you on my first day. Before I left Svasdi, I let out all my anger by tearing up my rooms and chewing out any servants I disliked. Have you already forgotten?&quot; At that, she laughs as well.

&quot;How could I? Still, I thought you were only teasing me. Did you actually...?&quot; A new wave of embarrassment washes over you, and you have to nod. Sofia snickers. You try to pout, until she gives up on polite distance entirely and hugs you to her chest. 

She strokes your hair and whispers. &quot;Gods, you&#39;re such a good girl Cenyu... How could your brother bear to let you leave?&quot; You scoff.

&quot;It&#39;s not like it was for your sake, anyway...&quot; At this, she looks you over with interest, and you explain. &quot;You might have heard, but both of my older sisters were sent off into awful loveless marriages around my age.&quot;

&quot;I believed, if I was getting shipped off to some awful duke or king, it would be better to get out all those ugly feelings upfront, before they ate me up and ruined me.&quot; You let out a wistful sigh.

&quot;Although... I guess got quite lucky with you, did I not?&quot; Sofia&#39;s face goes bright red, and she turns away to cough.

Once she collects herself, Queen Sofia meets your gaze. Then, she leans down and presses a small, quick kiss into your forehead. You both laugh.

&quot;Thank you, Princess Cenyu. It is... heartening... to hear that.&quot; She looses her grip on you, and you step back.

Sofia sighs.

&quot;I believe I&#39;ll be late to my meeting with the Knight Commander, now. Still, it&#39;s such a shame we can&#39;t spend more time chatting like this.&quot; In the moment, you have a rather bold idea, you and decide to put it forward.

&quot;A-actually... I was supposed to have tea in the gardens with my tutor this afternoon. If you have the time, perhaps you could stop by.&quot; Sofia&#39;s eyes light up. You can tell from her face that she wants to hug you again, but she holds herself back.

&quot;That sounds wonderful! If there&#39;s a war council meeting, I&#39;ll cancel it for you.&quot; You groan.

&quot;Please, don&#39;t do that. If it comes to it, we can pick a different time and meet, just the two of us.&quot; And she laughs.

&quot;Fine, fine. If you&#39;re sure.&quot; Sofia smiles your way. &quot;We&#39;ll talk soon then, Cenyu.&quot;

&quot;I&#39;m looking forward to it. See you then, my qu...&quot; You cough. &quot;My... Sofia.&quot;

[[The queen grins at you, then you watch her as she disappears down the hall.|30Days]] &lt;&lt;set $Finished_18 to true&gt;&gt;</tw-passagedata><tw-passagedata pid="32" name="18CW" tags="OOC" position="225,475" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Significant Age Gap
[[I consent.|18Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="33" name="19Start" tags="BloodlikeEarth" position="350,475" size="100,100">When you hear the door latch, you run out into the living room just in time to intercept Nadia. She grins and opens her arms, and you leap into her embrace at full tilt. The two of you twist and sway around, kissing, giggling, and &#39;Hi... Hiiii.... Hi.&#39;—ing. While you lean on her shoulder and rub your face against her suit, she whispers to you.

&quot;I missed you last night. Was there a good turnout?&quot; You giggle as you pull back to look her in the eye.

&quot;One of our best yet. Still not sure if it compares to a night with you, though...&quot; Nadia kisses your forehead and rolls her eyes. As the two of you part, you remember.

&quot;Actually, there was something from the show I wanted you to see. You can change first, though.&quot; She smiles.

&quot;Then I&#39;ll have to be quick!&quot; 

And she is. You&#39;re only waiting a few minutes before Nadia plops onto the couch with you in an old oversized tee of yours. She watches you expectantly, and you cough.

&quot;Erm... right, one of my Plasmid Guy&#39;s buddies showed up at last night&#39;s show. He liked it enough that he left us some of these.&quot; You raise up the pair of coupons. &quot;I was just going to use mine, but Raghda gave me hers and said that it&#39;d make a cute couple&#39;s activity.&quot; Nadia lights up.

&quot;How sweet of her! What are we doing?&quot; You raise the coupons her way, and Nadia squints towards them. She makes little progress without her glasses, so you read them out to her instead.

&quot;They&#39;re from a new clinic in the city called NKTide. We can exchange them for a DNA Test, and they&#39;ll map out any of our ancestry info they can find.&quot; Nadia winces and scoots away from you. Once she realizes she&#39;s done so, she grimaces and whispers an apology.

&quot;S-sorry... I don&#39;t know if I&#39;d be comfortable with that...&quot; You deflate a little, but you smile back to her.

&quot;It&#39;s cool. I only asked because I thought it&#39;d be fun to do together.&quot; Nadia nods, and you continue. &quot;You don&#39;t talk much about your family, so I thought it might be fun to learn a little about your history.&quot;

You take Nadia&#39;s hand in yours and give it a soft, reassuring squeeze. Sweat from her palm rubs off onto your fingers.

&quot;But... if you&#39;re not comfortable, there&#39;s no need to push yourself. We&#39;ll be plenty busy this week, anyway.&quot;

You stand to slip the coupons back in your dresser, and Nadia suddenly shoots towards you and hugs your arm. She stammers for a few seconds before sighing into you. You bring her back down to the couch, where you let her cling to you until she can form a response. When she does, Nadia props herself up on your shoulder and whispers.

&quot;No matter what they find, you&#39;re sure you won&#39;t hate me...?&quot; You snicker, and when she pouts, you kiss her.

&quot;I promise.&quot; And even when she smiles, you can&#39;t help but kiss her again. &quot;Besides... we&#39;re a family, aren&#39;t we?&quot; Nadia gulps... but she nods.

&quot;Let&#39;s do it.&quot;

That night, you spoil Nadia with one of her favorites— a bean stew from your childhood, which your mother taught you not long before she passed— and the two of you stay up late into the night dancing, laughing, and making love. You agree to head down to the clinic over the weekend, [[and it&#39;s only a few days later that you get your results.|19Explosion]]</tw-passagedata><tw-passagedata pid="34" name="19Explosion" tags="BloodlikeEarth" position="475,475" size="100,100">That evening, you&#39;re cuddling with Nadia on the couch when the doorbell rings. She pouts when you leave her arms, but you come back with a thickly-packed envelope bearing an NKTide logo.

With Nadia watching, you rip it open and pull out two folded and labeled pamphlets. You take the one for your test, and you hand the other to Nadia. Only you open it, and inside you find a whole slew of statistics, analyses for genetic diseases, as well as a thorough family tree. You recognize most of the people present there from your family&#39;s awkward history. Some are missing and marked &#39;Name Unknown&#39;, but one, right beside you underneath your parents, is missing and labeled &#39;Unreleased Specimen&#39; in the key. A circle, so... a woman. More specifically, a //sister//.

&lt;center&gt;@@margins:auto;height:auto;padding:5px;max-width:100%;[img[A family tree. At the bottom are two circles (women). The left is missing, and the right is highlighted in red with text saying &quot;This is you.&quot;|&quot;media/bloodchartAGWhite.png&quot;]]@@&lt;/center&gt;

You turn it towards her and scrunch up your face.

&quot;Something&#39;s up with mine... Yours?&quot; She hands you the pamphlet, still fully folded up. You unfurl it, flip to the family tree, and...

&lt;center&gt;@@margins:auto;height:auto;max-width:100%;[img[A family tree. At the bottom are two circles (women). The *right* is missing, and the *left* is highlighted in red with text saying &quot;This is you.&quot;|&quot;media/bloodchartBGWhite.png&quot;]]@@&lt;/center&gt;

They&#39;re identical. Actually, you look a little closer, and they&#39;re //mostly// identical. On Nadia&#39;s, the &#39;Unreleased Specimen&#39; and &#39;You are Here&#39; circles have swapped. You look to Nadia, but she only shrugs, with a bored smirk.

&quot;Could just be a printing error. Those happen all the time.&quot; She takes your free hand in hers and brushes over your nicely manicured nails as she speaks. &quot;Guess it&#39;s all a wash, in the end.&quot;

You&#39;re unconvinced. As far back as you can remember, you&#39;ve never had any siblings, and neither of your parents ever mentioned previous children. The idea that they not only had other children, but had a child //together// doesn&#39;t sit right to you. What reason could they even have to hide something like that? Nadia&#39;s soft kisses into your hand soothe you, and your gaze drifts over to her. Just looking at her should make it obvious that this is all some big mixup. Still...

&quot;It doesn&#39;t make any sense...&quot; Unbothered, she bends down from behind you and presses a quick kiss against your cheek. You flip through the other pages of the report. &quot;Even the keys are identical. Those are //my// aunts and uncles...&quot;

&quot;So what?&quot; Nadia drapes herself around you and whispers into your ear. &quot;If they duplicated your results, seems obvious they&#39;d duplicate all of it.&quot; You sigh.

&quot;I would agree, but it bugs me that it&#39;s flipped.&quot; She tosses her report out of your grasp, then slips the same hand up your shirt. You start to complain, until she kisses your neck and sends chills down your spine. You try your best to continue. &quot;A-anyway, the extra person is the bigger issue. How could—&quot;

Nadia spins you around her way and kisses deep into you. While you&#39;re focused entirely on her, she pulls you gently by the waist and lays you back down on the couch.

When you pull away, you&#39;re left gasping for air, and a totally unfazed Nadia pulls your top over your head. You try to argue between desperate pants, but she only laughs away your feeble attempt. No matter how hard you try to fight against her rhythm, fog rolls over your brain when she unhooks your bra and talks down to you in that sickly sweet voice.

&quot;You think too hard about everything, Blanche.&quot; Unconsciously, you focus too hard on Nadia&#39;s face, and a sharp flick to your nipple sends you reeling and whimpering. &quot;Some startup douche screwed you out of some money. Are you gonna focus on that all night, or is there something else you want?&quot; She takes your hand and slips it under your skirt, delicately puppeteering your fingers as if they were her own. She traces circles on your thighs, overstimulating the sensitive places she&#39;s learned too well. Then, she pulls you deeper, pressuring your clit while she forces you to displace your panties with your own hand. 

Only then do you notice: you&#39;re fully soaked through and leaving a wet spot on the couch. Nadia savors the realization as it crosses your face, and you give in. Underneath her, you wonder if you ever had a chance of resisting.

Before you can give it much thought, Nadia pulls off her ring and slips two fingers into you, and everything in your head is reduced to fuzzy, warm static. You cry out louder than you intend, and she silences you with her free hand. Once bucking wildly against her fingers isn&#39;t enough to cool the heat inside you, you resort to lapping at Nadia&#39;s hand with a flat tongue

This strange, puppy-like display of affection appears to throw her for a moment, then she stops moving her fingers entirely. Nadia just sits, watching you with a cold, expectant smirk. You quickly redouble your efforts, whining, sucking, and making out with the hand over your mouth. Only when you&#39;re truly desperate, humping the air and starting to cry, does she take her hand away... and smear your saliva across your face.

You cough and gag at the strange sensations assaulting you, but Nadia just laughs as she hoists you into her arms.

&quot;What a dumb, thoughtless puppy...&quot; And she kisses you. When she slips back inside you, you moan against her tongue, and she laughs. She toys with you, teasing around all your favorite spots but never reaching them. You whimper and plead, but she carries you all the way to the edge with the lightest touch she can manage. When she pulls away, you whimper and groan, expecting some further torture. Instead, she simply repositions you, pushing you down below her and kissing little reassurances into your cheek.

Once she has you where she wants you, Nadia gives you two fingers to suck on, then she surges with new energy, drilling into you with a ferocity you&#39;ve never seen before. Within seconds you reach the edge again and blow right past it, spasming around her and biting down on her fingers so you don&#39;t scream. Nadia doesn&#39;t stop. If anything, she moves faster, rubbing you red and raw. A second time, you hitch and moan and cry, and Nadia refuses to stop. You try begging, and she pins your tongue between her two fingers, leaving you unable to do anything but drool all over them and cry. You count a third, fourth, and fifth time before Nadia finally slows and then stops...

Every muscle and your body aches. Nadia wipes you clean and lays a warm blanket over you, and you feel the call of sleep in an instant. She still sits by your side, intermittently pouring sips of water in your numb mouth and stroking your face with pruned fingers. At no point does she touch you or kiss you. Instead, she rests her head on the edge of the couch and whispers sweet love and praise, hardly loud enough for you to hear.

Right at the edge of sleep, you see her stand over you, looking intensely over your sleeping face. She laughs to herself and says quietly.

&quot;Just as I thought... we look nothing alike.&quot;

[[(Return Home)|30Days]] &lt;&lt;set $Finished_19 to true&gt;&gt;</tw-passagedata><tw-passagedata pid="35" name="19CW" tags="OOC" position="600,475" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Graphic Sexual Content
* Sexual Coercion
* Incest
[[I consent.|19Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="36" name="2Start" tags="Blood" position="600,375" size="100,100">Eleanor grumbles over her writing desk, retreading the same three lines, sighing, and replacing her stationary with a fresh piece. By her fourth in a row, you take her hand to stop her.

&quot;What&#39;s bothering you, ma&#39;am?&quot; She&#39;s surprised at your touch, but she quickly slumps back down with a sigh.

&quot;It&#39;s nothing. Just... struggling to find the words.&quot; She turns back to her work, but you keep hold of her hand.

&quot;If you truly must know... It&#39;s for the duke. I need him to see that I won&#39;t back down, but my head&#39;s a mess. I keep coming off like some sort of monster.&quot; 

You crouch down to look through her discarded letters. The first two barely make it past the letterhead, and the next begins with &quot;Take your messenger&#39;s life as proof that I am forgiving.&quot; The next after gently rewords that to &quot;If I were not a generous, logical woman, I would have had the carrier of your last message staked in front of my home.&quot; You can&#39;t help but laugh, which Eleanor pouts about.

&quot;My lady, it&#39;s been a few nights since you&#39;ve had dinner. Maybe you&#39;ll let me prepare you something tonight?&quot; She colors at that.

&quot;I... I do not think that will be necessary. I&#39;ve simply worked myself too hard tonight. A quick rest is all I need.&quot; Eleanor stands and takes a few shaky steps across the room before collapsing into your expectant arms. You lift her easily and carry her to bed, kneeling down beside her.

&quot;Anna... I&#39;m sorry. I just feel a little... dizzy.&quot; You sigh and take penknife off her bedside.

&quot;This isn&#39;t good for you, my lady. I can&#39;t let you starve yourself, whether you like it or not.&quot; This sets her off. She swings a lazy arm in your direction, slurring her words.

&quot;N-no...! I won&#39;t do it...!&quot; And, in a rare moment, you lose your cool with her.

&quot;Then what? Do you intend to die? Would you rather leave me alone and penniless out here?&quot; 

&quot;And for what? Royal Favor? Some sense of pride? What&#39;s so important you&#39;d trade it for your own life?!&quot; Without thinking, you&#39;ve inched closer towards Eleanor, close enough that she reaches up and takes your cheek in her hand.

Then she leans up with great effort, and she kisses you. Slowly, with none of the hunger she&#39;s shown before, Eleanor circles her tongue around your own, whimpering at your touch. You pull away, gasping, and she gives you a long, withering look.

&quot;You know I don&#39;t care about anything like that... but...&quot;

&quot;People at the capitol have been talking about me. Even... about us. They say I&#39;m a cruel witch who&#39;s taken her maid as a thrall.&quot; You scoff, and, from Eleanor&#39;s reaction, you can tell you must be making a truly unbecoming face.

&quot;Is that all? You have no need to listen to something so low, my lady. If it bothers you, simply say the word and I can introduce some beautiful nightshade teas to their staff.&quot; You chew on your nails, fuming that such lowlifes would even think to come after your mistress. But, Eleanor only grimaces.

&quot;Actually, I think they have a point.&quot; You freeze. As you process what she&#39;s saying, tears start to well up in your eyes.

&quot;I&#39;ve been... taking advantage of your kindness, I think. Our relationship may never be traditional, but if I can get by without hurting you, others might be more willing to accept us.&quot; 

She gives you a sweet, determined look, and you feel something stirring in your chest. You resolve yourself, laying at her side and taking her hand in yours.

&quot;This is truly what you want? Even if it leaves you weak and sickly for all our days?&quot; Her eyes light up, and she grins.

&quot;Yes! I&#39;m so glad you understand, my sweet!&quot; Eleanor leans into you, squeezing you as tight as her frail body can manage. You hold her.

&quot;Of course I understand. I know how big your heart is, my Eleanor. How could I not, after all these years?&quot;

&quot;I&#39;m so happy that you&#39;ve told me this. Do you know what I think, my lady?&quot; She pulls from your embrace, looking up to you with those sweet, harmless eyes.

...

You pull the penknife from your dress pocket, slashing it across your left forearm in a single motion.

&quot;//&#39;&#39;I&#39;&#39;// think jealous bitches like that should just fall over dead.&quot;

And you press the wound to Eleanor&#39;s protesting mouth, letting her instincts take over until she&#39;s hazily panting and begging for more.

...

Even long after your initial cut has scabbed over, a blooddrunk Eleanor continues kissing and lapping at your arm between soft moans of &quot;I wub you, Anna...&quot; and &quot;Mine... All mine.&quot;

You pull her into your lap, keeping her attached to the arm she insists on hugging. When she spots something tastier, she finally leaves it be, leveling with you and brazenly staring daggers into your carotid. You grip her tight by the hair.

&quot;There, there. You know what you really want, don&#39;t you, lovely?&quot; She licks stale blood off her lips before leaning into you, trembling and waiting for permission an inch away from your mouth.

&quot;Good girl.&quot; You kiss her, and she goes wild, pushing you down onto the bed and straddling you. The taste of iron gushes into your mouth in an instant. Eleanor&#39;s hands are all over you, desperately scraping you with her claws and ripping at your dress. If the ladies from the capitol saw all the marks you&#39;ll obtain tonight, they&#39;d be scandalized.

You put them out of your mind. They couldn&#39;t understand a fraction of the love you have for your mistress.

[[(Return Home)|30Days]] &lt;&lt;set $Finished_2 to true&gt;&gt;</tw-passagedata><tw-passagedata pid="37" name="2CW" tags="OOC" position="850,475" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Self-Inflicted Injury
* Intimate Acts while Intoxicated (It&#39;s Complicated...)
[[I consent.|2Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="38" name="20Start" tags="DarkFuture" position="975,475" size="100,100">You put your boot through the glass of the control room door and carefully snake your hand inside to open the way.

As soon as you do, a factory-wide alarm activates, casting the room before you in on-off flashes of red light. You duck through the doorway before a security shutter slams down. In the process, you&#39;ve fully and finally locked yourself in the control room. You put two fingers to the communicator controls on your neck.

&quot;Gods above, please tell me one of you has eyes on the network...&quot;

...

Silence.

&quot;My perfect luck...&quot; You put in earplugs to quiet the constant, droning klaxon and give yourself mental room to devise a plan. 

The SETCO control center had a similar layout, with a security terminal hidden within the south wall. When you check here, you&#39;re lucky enough to find a similar one, but it&#39;s been outfitted with a bespoke security grating. You regret the bravado that led you here without any meatspace backup, even moreso when you fumble through your bag and find your oxyacetylene torch steeping in a pool of fulminant. You gag and desperately try to wipe it from your hands, to no effect. On further investigation, you realize the head has leaked through the towel around it, and it&#39;s dripping all over your tools. You curse and lift it out, dropping it onto the control room floor with a massive //thunk//, before pouring out the thick blue sludge it left behind.

While you&#39;re dealing with this, the massive wingbeat of helicopters overhead draws your attention. If this isn&#39;t a fast and decisive blow to The Order, you&#39;ll become a martyr tonight.

You work in a smooth rhythm, cutting out enough grating to give yourself a sizable work envelope. Inside the secured panel is an old-school M-Stack terminal in factory-standard M650 kit from the looks of it. You breathe a sigh of relief and try to deploy it, only to find its mount has been electrically locked. You punch a hole in the wall, large enough for you to trace the arm back and yank out its control wires. The terminal falls slack, but when you backdrive the arm into a typically-usable state, the terminal flicks on. You thank the stars for Ilse&#39;s guidance on cracking the M-Series as you drill blindly into the case and perfectly pop open the security hatch. The terminal is booted to a login screen, and, when you stick a (weirdly damp) screwdriver through the borehole to bridge the fifth and six pin on the TPM, the operating system freaks the fuck out and loads into an elevated user with the name &lt;span class = &quot;glitchy&quot; data-text=&quot;4I(LO/[.3,,&quot;&gt;&quot;4I(LO/[.3,,&quot;&lt;/span&gt;, immediately opening the control panel. Without a moment&#39;s hesitation, you slam &#39;Disable Alarm&#39; and let the security terminal drop.

The factory wakes around you. When you remove your earplugs, you can make out sirens approaching and surrounding the building, as well as footfalls on the rooftop. You pick up your prize where you&#39;ve left it, unwrapping it to reveal the pristinely preserved Chidrone head inside. With a swift kiss to its side panel (the freezing cold metal leaves an awful film of acidic fulminant onto your lips), you charge towards the control room&#39;s central console.

It whirs to life in your presence. You try your comms, but they&#39;re clearly still being jammed. Without any dirty tricks, all you can do is get in the old foreman&#39;s head. You have one idea.

&lt;&lt;typesim &quot;Alice4152127&quot;&gt;&gt;
&#39;One failed login attempt.&#39; You curse.

A memory comes back to you. The Order goon at the SETCO office had some familiar posters in his office. It&#39;s a long shot... but without backup and without leveling the factory, it&#39;s the best plan you&#39;re going to get.

&lt;&lt;typesim &quot;uberalles&quot;&gt;&gt;
Daybreak. A shell loads up, and a cacophony of machines follows on the floor below you. You flick through the menus as fast as you can under time pressure, until you find &quot;Flash HUB BIOS.&quot; You reach deep up the Chidrone&#39;s artificial esophagus and pull out a link cable, which slots into the control console with some forcing and starts a long progress bar.

Outside, Order agents have begun ramming the factory&#39;s reinforced gate. You curse and slam the console. You won&#39;t have enough time to take the straightforward route... Instead, you boot up ten shells at a time and fire up all the factory&#39;s core systems simultaneously. Metal lurches and screams, welders burn themselves out, and extruders pour out long, avante-garde twists of aluminum pasta, which catch on the rollers and make them scream. The first misshapen pieces of Marauder chassis roll into the assembly line, just as the factory gate topples over. You catch one last glimpse of the factory line as it is flooded with hostiles, and you duck into cover.

Seconds after you move out of the way, shots ring out, and armor-penetrating rounds explode the observation window into tiny chunks which rain down over you. Adrenaline fully takes over your body. You listen to the agents chattering on the factory floor and figure you have about twenty seconds before they break into the control room. You&#39;re unarmed, and the only way in or out leads directly into their waiting hands. It will take at least twice that for the first units to roll off the line. The Order&#39;s goons on the factory floor have a clear shot if you so much as stand.

Still... if you don&#39;t buy QSTOR some time, this will all be for nothing. You&#39;ll be a martyr for a dead cause, and no chance like this will ever come again. More than anything you&#39;ve ever known, you know you can &#39;&#39;not&#39;&#39; permit that.

Then, the Chidrone head you&#39;ve unconsciously been cradling chimes, and its link retracts from the central console. An idea reaches you, but the thought of it churns your stomach. You steel your resolve anyway.

&quot;Sorry, Q.Q...&quot;

&lt;&lt;linkreplace &quot;Kiss her.&quot;&gt;&gt;\
You kiss the top of the head, then you raise it up. In an instant, a hail of gunfire flies through the air, shredding the severed head&#39;s armor, chassis, and internals into nothing. There&#39;s a pause, and in that pause you shoot up, navigating the control console&#39;s menus to &quot;Factorywide Controls&quot;. You reach forward and slam &quot;Close Security Shutters&quot;, just as the first agent finishes reloading. In a quick burst, three bullets hit you in the shoulder, and you scream.

As you sink back down, you slide across every option in the column. Massive control shutters slam down around every section of the factory, blocking doors, the gate, and the walkways on the factory floor. You hear screams from below as an Order agent is pinned under one of these shutters. Then, in order: every light in the factory strobes, a deafening warning screeches out over the factory&#39;s speakers, and ceiling mounted fire extinguishers spray choking gas over the factory floor. There&#39;s panic among the Order&#39;s assault squad. You, on the other hand, feel... heavy and... slow.

All the sounds across the factory seem to blur together. You know instinctively to press down when you see spurting blood, but even your uninjured arm is having trouble complying. Across the room, you know your bag has supplies that could help your chances, but... you couldn&#39;t even reach it in this state. On the factory floor, there&#39;s gunfire and voices coming from all sides. It feels distant now.

You let in a long, haggard breath. It was never your plan to die for the cause, but, if it gives her another chance... you can make peace with that.

The noise downstairs has died down, replaced with a din of footfalls towards the control room and the sound of crunching and cutting metal. You let your eyelids drop as the control room security door crumples down into nothing. Something massive crosses the room towards you, then it grabs you by your injured arm and squeezes, sending horrific pain shooting up through your body. Then... it stops. You force open your eyes, only to see a Marauder unit towering over you, mottled with fresh blood and stemming the bloodflow into your arm with its oversized gripper hand. It speaks in a deep, synthesized voice you&#39;ve only heard used for dispersing protestors.

&quot;This is the best I can do for you in this form, Halyna.&quot;

Tears rush to your eyes. You go to move, but she properly pins you to the wall. Your voice is scratchy and weak.

&quot;Q.Q... you came back for me...&quot; She slides over your bag, skewered on her blade arm and slicked in a mix of fulminant and blood. It tips over and all your tools, including your first aid kit, fall out.

&quot;Don&#39;t waste energy stating the obvious. Do I need to spell that out for you?&quot; You shake your head. Even if her words are cold, you can tell she&#39;s worried. You feel a surge of energy and resolve yourself to not disappoint her.

You lever open your first aid kit with your working hand, spilling its contents out onto the floor where they mix into chunks of broken glass. Carefully, slowly, you pull free a tourniquet, shaking it to clear off any debris. You&#39;re able to pull it into your lap, but your hand trembles and refuses to comply, no matter how hard you try. The adrenaline coursing through you finally crashes, and your body starts to recognize that &#39;&#39;you are going to die&#39;&#39;. That terror freezes you up, and you begin sobbing. QSTOR calls out to you, as close a whisper as her vocal synth allows.

&quot;Halyna, please...&quot; She brings her featureless, geodesic faceplate closer to you. &quot;I need you to believe we can do this. It&#39;s the only way.&quot; You look up at her, and the eight glowing dots marking the cameras inside her faceplate. You remember the first time you saw that &#39;expression&#39; bearing down on you, and the pure terror it inflicted on you. This time... you feel a slight trickle of hope... and you nod.

One-handed, your only option is to sling the tourniquet over your arm, which takes several agonizing tries before you manage to secure it. You look over to QSTOR... and you pull down hard, trying and failing to bite back a scream as it tightens. She holds you in place with the flat of her blade to keep you still. Once you&#39;ve regained your composure, you lift the windlass and turn it, then push it back down to lock the completed tourniquet. QSTOR lets go of you, and the bleeding has slowed to a minor trickle. With her help, you&#39;re able to pack and bind the wound. You sigh and try to smile her way, but you&#39;re unsure if your numb facial muscles actually make the expression. She checks you over with a worried look (but no face to show it).

&quot;The closest org base is a few miles out. And... from the looks of it, you&#39;ve lost at least a liter of blood...&quot; She paces. The most you can manage is a hoarse whisper.

&quot;And what does that mean for us? Just tell me what we have to do.&quot; She grimaces at you (still no face), before eyeing the unfortunate mercs she left on the factory floor. She answers with a question.

&quot;Do you have the supplies for a field transfusion? Catheters, tubes, and the like?&quot; You search through the pile of supplies beside you, identifying everything you might need. You nod, and she steps towards the door.

&quot;W-wait! Where are you going?&quot; She turns back to you as she slots her free arm into an autocannon holstered on her back.

&quot;If I try to transport you in this state, you&#39;ll go into hemorrhagic shock before we even get close. The Order&#39;s got &#39;peacekeepers&#39; surrounding the factory on all sides. My other units have made quick work of them, but there should still be a few left.&quot;

&quot;So?! What am I supposed to do?!&quot; QSTOR stands tall and clearly tries to smile your way.

&quot;Sit tight. I&#39;ll be back with some blood for you.&quot;

[[And with that, she dashes out.|30Days]] &lt;&lt;set $Finished_20 to true&gt;&gt;
\&lt;&lt;/linkreplace&gt;&gt;
\&lt;&lt;/typesim&gt;&gt;
\&lt;&lt;/typesim&gt;&gt;</tw-passagedata><tw-passagedata pid="39" name="20CW" tags="OOC" position="1100,475" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Graphic Violence
* Graphic Blood (Extreme)
* Traumatic Near Death Experience
[[I consent.|20Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="40" name="21Start" tags="Blood" position="1225,475" size="100,100">The sun beats down hard in the ducal capitol, and Eleanor&#39;s hand sweats into your own. Crowds turn and stare at the two of you, shoulder-to-shoulder under her parasol. You sigh.

&quot;It&#39;s not much further, mistress.&quot; You pull her forward, towards the mansion gate. However, once you reach it, you&#39;re stopped by a guard, who raises a hand your way.

&quot;My apologies good ma&#39;ams, but the count is currently preoccupied on important business. You&#39;ll have to return another time.&quot; He bows his head. Eleanor watches him blankly, so you step up to defend her.

&quot;Does the count have his guards educated these days, or was that another of his cuts?&quot; The guard sneers, and his partner steps in from the side only to be met with your glare in turn.

&quot;Oh? Perhaps you&#39;re able to recognize &#39;&#39;the Countess of Maelthure&#39;&#39; when she approaches you?&quot; They both grimace. &quot;Literacy might be a high bar. Perhaps you should start by learning the counties &#39;&#39;directly adjacent&#39;&#39; to that of your lord.&quot; The first guard stammers out an apology and prostrates himself before Eleanor. She sighs and steps over to him.

&quot;Rise.&quot; He does, meekly. &quot;Tell me... What tea did the count have this morning?&quot; He panics and looks to his partner, who stumbles over his words. &quot;It was from a merchant out of Serix&#39;Ness, your grace. The crate had pomegranates on it, but I couldn&#39;t read the name. My apologies...&quot; She thinks for a moment, then nods. Eleanor pulls a lambskin bag from her side and drops a gold piece between the two men, who thank her profusely. Then, she leads you through the gate.



The two of you stroll towards the count&#39;s estate at a leisurely pace. You&#39;re able to take in the beauty of the scenery, all the bright flowers and chirping birds, but you worry that Eleanor will tire out before the day is done. She looks your way and sighs.

&quot;You didn&#39;t have to be so cruel to them. They had valuable information.&quot; You scoff.

&quot;Pomegranates?&quot; Eleanor shakes her head and wags a finger your way.

&quot;Count Fridjof is a very particular man, Anna. The tea that dullard described is an expensive imported varietal, //mirst-flacae//. He&#39;ll only break into his strategic reserve of it before an incredibly risky negotiation.&quot; She grins. &quot;If he&#39;s that desperate, we shouldn&#39;t be afraid to push him.&quot;

...

You snicker, and Eleanor pouts at you.

&quot;You&#39;re going in with a strategy based on pomegranate tea?&quot; She groans and snaps back.

&quot;The box clearly had a //valafeto// bulb on it! Blame the dullard guard, not me...&quot; You laugh, and, when you&#39;re sure no one is watching, you stroke Eleanor&#39;s hair until she calms down. This energetic side of her is cute in its own way...



Once you reach the estate, the two of you are shown inside by the head maid and led into a study where the count and one of his associates are talking. You&#39;re told to wait outside while Eleanor and the count have their discussion. At first you refuse, but Eleanor swears to you that she&#39;ll be okay and bids you to leave. Even as it pains you so much, you can&#39;t ignore a direct order from her...

Just outside the room, the count&#39;s associate slouches against a wall. When you do the same, he tries to engage you in idle chatter over some upcoming gala. You ignore him, too busy fretting over Eleanor to fake caring. By the end of the first hour, he&#39;s left, and you&#39;re stuck there, gnawing at your thumb and pulling on loose hairs. You try to keep calm, manage your breathing, all the things your mistress has taught you, but it barely feels like it helps.

After the second hour, a serving maid comes by. She knocks and is invited in, but she steps in and out so quickly that you barely catch a glimpse of your mistress. The maid doesn&#39;t even pay you a glance as she leaves, the bitch. You have half the mind about you to rip the door from its hinges and barge in... but you hold yourself back for Eleanor&#39;s sake. She&#39;s put in a lot of work to make this meeting happen. You claw holes in your sleeves knowing well that you&#39;ll be the one mending them tonight.

At the end of hour three, you&#39;ve got the posture and demeanor of a feral animal. Only a few servants pass by the study, and you glare at them as they go. The count&#39;s associate stops by and curses to himself when he sees the door still locked. He seems to consider waiting with you, until you snarl at him. You&#39;ve drawn blood from gnawing at your fingertips, and you so-improperly wipe it on the hem of your dress.

Finally, after four hours with no contact from Eleanor, the count&#39;s study door opens again. 



He steps out first, takes one look at you, and decides to leave without another word. Eleanor follows, looking haggard but triumphant. You can&#39;t hold back for a second, wrapping your arms around her and sniffling. She strokes your hair as you do.

&quot;//Mistressssssss//...&quot; You turn away to avoid disturbing her perfectly styled hair with your snot and tears. Eleanor coos over you and guides you along the hall, pulling you into an unused sideroom. Once you&#39;re secured inside, you sob openly against her.

&quot;Anna...&quot; She clutches you to her chest and sways. &quot;It&#39;s okay. I&#39;m here now...&quot; You cling to the fringes of her dress and take in her scent to calm yourself. She brings you down to the ground, leaning against a long-unused fireplace grating and kicking up dust as she sits. You melt into her and whimper.

&quot;H-he has no right... How dare he secrete you away like that for so long?! I&#39;ll kill him...&quot; Eleanor shushes you and kisses the crown of your head.

&quot;There&#39;s no need. He&#39;s been handled, and he won&#39;t be bothering us for a long time.&quot; She strokes behind your ears. &quot;There&#39;s no need to dirty your hands with someone like him, Anna.&quot; A shock goes through you and you pull back, untangling yourself from Eleanor and blubbering out apologies.

&quot;S-sorry, mistress... I-I didn&#39;t mean to imply— That&#39;s to say... of course you had it handled. I&#39;m sorry... Please don&#39;t hate me... I just—&quot; She watches you struggle for a moment before sighing and grabbing you by the wrist. Eleanor pulls you back down and into her lap with a force humanly impossible for someone of her stature, and she hovers her face close enough to yours that your breath mixes.

&quot;Stop it.&quot; Then, she leans in and kisses you, gentle and brief. When you fall away, she whispers, &quot;You&#39;re a good girl, Anna.&quot; She presses another teasing kiss against you. &quot;You were so patient with me, today. I&#39;m so proud of you...&quot; This time, you push forward, and the two of you fall into one another. You moan and cry against Eleanor&#39;s lips, while she clutches you tight to her. The sounds between the two of you echo across the abandoned parlor, and in the moment you hope some of the bastard&#39;s servants hear it as they pass by.

Eventually your mistress needs to catch her breath, and you part, with your lower lip clipping her fang as you do. The two of you pant and cling to one another, but Eleanor frowns at the trickle of blood.

&quot;H-here... allow me...&quot; She leans forward, wrapping her mouth over the cut, and she laps at it. You wince, but the enzymes in her saliva quickly heal the wound. When she pulls away and wipes her thumb over your lips, it&#39;s like it never happened. You find it a little disappointing, but your mistress seems pleased with her work.

...

Eleanor collects herself, rights her dress, and stands. You take her hand and pull yourself to her side. She steps to the far wall to pull away a curtain, frowning at the setting sun. She whispers to you.

&quot;Not much use calling after the duke this late... perhaps we should head straight home.&quot; You do your best to hide your excitement. Then, blushing, Eleanor makes another request of you. &quot;A-and... maybe in the carriage you could... give me my dinner...&quot;

[[You squeeze Eleanor&#39;s hand, and she eats very enthusiastically on the way home.|30Days]] &lt;&lt;set $Finished_21 to true&gt;&gt;</tw-passagedata><tw-passagedata pid="41" name="21CW" tags="OOC" position="100,600" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;WARNING:&lt;/h3&gt;
* This passage relies on context from Passage 2: Feeding. Be sure you&#39;ve read that first.
&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Blood
[[I consent.|21Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="42" name="14Start" tags="BloodlikeEarth" position="225,600" size="100,100">\&lt;&lt;ctp &quot;Mainloop&quot;&gt;&gt;
Morning sunlight creeps through your window and wakes you.

You stretch and yawn while you survey the room. Nicoletta is missing from her side of the bed, and there&#39;s noise coming from the kitchen. You scoop up you phone and roll out of bed. After a long time fighting for it, you&#39;ve finally arrived at the weekend, so you opt to throw on something comfortable.

&lt;&lt;linkreplace &quot;Step into the kitchen&quot;&gt;&gt;You step into the kitchen.&lt;&lt;ctpAdvance &quot;Mainloop&quot;&gt;&gt;&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;ctpNext&gt;&gt;
&lt;span id=&quot;td1&quot;&gt;Everything surrounding the stove is cast in flickering orange light. In the center of it is a pan containing a blackened mass of char, from which grows a huge, sputtering fire. At the base, your eyes track down, and you see her.

You sprint to Nicoletta&#39;s side, yanking her from the fire&#39;s grasp and sheltering her with your body. Just then, it flares and spreads up onto the wall. You slide down against the sink, with Nicoletta&#39;s head coming to rest in your lap, and you call down to her.

&quot;What the hell are you doing, you idiot?! Wake up!!&quot; You shake her, and it&#39;s only then that you notice... the half of her body further from the fire has gone cold. Looking closer, there&#39;s a small, round hole in the middle of her forehead. You lift her up and notice the larger exit wound, as well as the thickened, coagulated blood that has wiped off onto your skirt.

You lay Nicoletta down and curse and spit. In a little longer, the flames will spread and cause a scene... you can&#39;t be here for that. You sigh.

&lt;&lt;linkreplace &quot;\&quot;RIPITI!\&quot;&quot;&gt;&gt;&quot;RIPITI!&quot;

...

When there&#39;s no response, you call out again.

&quot;RIPITII! Don&#39;t fuck with me right now...&quot; You wait... nothing. The flames have grown and started eating into the timbers of the house. You close Nicoletta&#39;s eyes, then you punch the nearest cabinet with enough force to, from your experience, shatter your hand.

&quot;Is this funny to you?!&quot; Tears rush to your eyes, and you stumble away from Nicoletta&#39;s body before pulling out your phone with your offhand.

&quot;Don&#39;t do this to me now... please...&quot; You break into sobs and stumble to pull out and flip open your phone.

&lt;&lt;linkreplace &quot;Dial Ripiti&quot;&gt;&gt;You dial a number you&#39;re all to used to by now.

&lt;&lt;timed 2s&gt;&gt;Ringing...&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 4s&gt;&gt;Ringing...&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 6s&gt;&gt;Ringing...&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 8s&gt;&gt;Ringing...&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 10s&gt;&gt;Ringing...&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 12s&gt;&gt;Ringing...&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 14s&gt;&gt;Ringing......&lt;&lt;/timed&gt;&gt;

&lt;&lt;timed 16s&gt;&gt;How&#39;d you manage this?&lt;&lt;/timed&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;&lt;&lt;timed 12s&gt;&gt;&lt;&lt;ctpAdvance &quot;Mainloop&quot;&gt;&gt;&lt;&lt;replace &quot;#td1&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/timed&gt;&gt;&lt;&lt;/linkreplace&gt;&gt;&lt;/span&gt;&lt;&lt;ctpNext t8n&gt;&gt;\
...

&quot;Amihan...?&quot; You blink, and Nicoletta is there. She waves you over towards the stove and grins. &quot;I was wondering when you&#39;d be up. C&#39;mon!&quot; You head to her side, and she dishes out fried spam with rice for you, only taking coffee for herself. 

You move to the dining room table in a daze, and she follows, eyeing you as you eat. Each component is terribly oversalted, the spam is badly charred at the edges, but you eat it with a smile, which makes her smile as well. Then, staring out into the space behind you, Nicoletta jumps&lt;span id = &quot;td2&quot;&gt;.

&lt;&lt;linkreplace &quot;Turn around.&quot;&gt;&gt;You whirl around to follow her gaze.

You squint and spot a man you&#39;ve seen before. A foreigner in a well-tailored suit is standing beyond your window and staring back at you. You spin towards Nicoletta, grab her hand, and hit the dirt.

&lt;&lt;linkreplace &quot;...&quot;&gt;&gt;...

When you open your eyes, you&#39;re curled up under the table with Nicoletta across from you. Her breathing is shallow and fast, and a large chunk of debris has pinned down her legs. You gasp, and her eyes flutter open. When her gaze meets yours, Nicoletta smiles.

&quot;Amihan... thank goodness...&quot; She shift slightly, and a trickle of aspirated blood leaks from her mouth. She looks away. &quot;S-sorry... please don&#39;t look...&quot; She retches. You try to inch her way, but you can&#39;t stop shaking. Nicoletta extends her hand to take yours, and you&#39;re wracked with sobs. Your voice is hoarse. 

&quot;I&#39;m so sorry... I-if I was just a little quicker—&quot; She squeezes your hand. 

&quot;Stop it. Don&#39;t do that...&quot; Nicoletta pulls your hand up to her cheek. It&#39;s cold. &quot;I&#39;m gone, Ami. You have a shot though.&quot;

&quot;That&#39;s not... I can&#39;t!&quot; You push yourself as hard as you can, successfully sliding an inch forward, but slicing your calf on a shard of glass in the process. &quot;Y-you can&#39;t ask me to do that... That&#39;s cruel, even for you.&quot;

Nicoletta shakes... and her cold lips awkwardly slide over your palm.

&quot;I&#39;m sorry.&quot;

&quot;I love you, Ami... Please...&quot;

&quot;You have to live...&quot;
&lt;&lt;timed 25s&gt;&gt;&lt;&lt;replace &quot;#td2&quot;&gt;&gt;&lt;&lt;ctpAdvance &quot;Mainloop&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;&lt;&lt;/linkreplace&gt;&gt;&lt;/span&gt;&lt;&lt;ctpNext t8n&gt;&gt;, then pulls out her phone.

&quot;Right, I actually remembered today. It just felt weird to call you while you were asleep.&quot; She dials your number, and your phone begins to ring. You blink a few times into empty space before you hear it and pick up.

&quot;Hello?&quot; She hangs up, and you snap your phone shut and stuff it in your pocket. There&#39;s an ache behind your eyes that doesn&#39;t go away when you press on them. Nicoletta watches you with interest as you blankly devour the rest of your breakfast. When you look her way, she smiles and says nothing. The two of you sit around, Nicoletta sipping her coffee and you staring out into nothing, until she yawns and starts.

&quot;I don&#39;t really have any plans today. You?&quot; She raises an eyebrow a way, but you only shake your head. Nicoletta seems to think on it for a moment, then she jumps to her feet with an idea. &quot;It&#39;s been a while since we went to the arcade, hasn&#39;t it? Maybe I can call up Maria and we can mooch some quarters off her.&quot; She grins your way. &quot;Interested?&quot; You swallow.

&lt;span id = &quot;td3&quot;&gt; &lt;&lt;linkreplace &quot;\&quot;Yeah! That sounds fun.\&quot;&quot;&gt;&gt;Dim lights, loud overlapping music, sweating, paranoia. Then, a crack over the din and a chorus of screams. You knew without looking, then. Nicoletta flickered out and died in your arms, and no second shot came for you.&lt;&lt;timed 5s&gt;&gt;&lt;&lt;replace &quot;#td3&quot;&gt;&gt;&lt;&lt;ctpAdvance &quot;Mainloop&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/timed&gt;&gt;&lt;&lt;/linkreplace&gt;&gt;
&lt;/span&gt;&lt;&lt;ctpNext t8n&gt;&gt;...

&quot;Y-yeah... That sounds fun...&quot; Nicoletta circles around to your side and looks you over. You turn away under her gaze, then she sighs.

&quot;On second thought... we&#39;ve had an exciting week. Would you mind if we took a day to chill?&quot; You face her with a confused look, but Nicoletta only smiles back at you. You groan.

&quot;I don&#39;t get it... Don&#39;t you usually get pissed when I go against your whims?&quot; She laughs and steps back into the kitchen, refilling her cup with the last of her coffee.

&quot;You&#39;ve been acting so meek lately. That alone makes it no fun to bully you.&quot; You gulp, and Nicoletta cackles in response. &quot;See?! Just like that!&quot; She creeps back your way and sits on the table in front of you. &quot;I just know something&#39;s up with you, but I can&#39;t place it...&quot;

You roll your eyes and attempt to hide your reaction, but she waits, staring you down. When you blush, she snickers.

&quot;Have you fallen for me? Are you terrified of me? Did I piss you off, somehow?&quot; She creeps closer and you lean away from her, only falling back her way when you nearly topple your chair. Her face is inches away from yours, and she&#39;s made it clear you have nowhere to hide.

&quot;A-and what makes you so sure it&#39;s about you anyway?&quot; Nicoletta knits her brows in an uncharacteristic face of innocent confusion.

&quot;Well, you wouldn&#39;t have to hide it from me otherwise, would you?&quot; She blushes and leans down to rest on her hands. &quot;Best friends don&#39;t keep secrets from one another...&quot; 

Only then do you truly remember that the Nicoletta who stands before you is first and foremost a spoiled, naive girl. These past years have taken their toll on you, but, to Nicoletta, a girl she&#39;s known since childhood has become unrecognizable in three days.

You try your best to force a smile for her.

&quot;Sorry...&quot; Nicoletta sinks onto her hands. Seeing her like this twists your heart, and you feel obliged to continue. &quot;I-it&#39;s not that I hate you... or even dislike you. You haven&#39;t done anything wrong. It&#39;s just... complicated.&quot; She nods.

&quot;I get it. At least, I assumed as much.&quot; Her weak, dejected voice frustrates you. You came back here chasing a dream, fully intent on saving her whatever it took. Yet, somehow, you&#39;re still caught up in the same half-measures and angst that ruined things the first time around.

...

You resolve yourself and take Nicoletta&#39;s hands in your own.

&quot;No... I&#39;m sorry.&quot; You stare dead-on at her surprised face. &quot;There&#39;s one thing you were right about.&quot;

&quot;I&#39;m in love with you.&quot;

Nicoletta stutters and flushes and stares at the table beneath her. You refuse to look away, even as the impulse to do so becomes overwhelming.

&quot;Th-that&#39;s not... you don&#39;t...&quot; She looks back up to you. &quot;You don&#39;t mean that...&quot; You nod.

&quot;Dead serious. You&#39;re the most important person in my world, Nicoletta.&quot; She starts to cry, but you&#39;re in too deep to back out.

&quot;Even if you don&#39;t feel the same, I&#39;ll fight to protect your happiness no matter what it takes.&quot; You let go of Nicoletta&#39;s hands. Her face twists into something confused... furious.... then, she leans in and kisses you. You&#39;re caught off guard and choke, then you find Nicoletta&#39;s rhythm and fall in line just in time for her to pull back and gasp for air.

Your first kiss in this timeline is stilted, messy, and cut short, as befits the two of you. Then, Nicoletta takes in a deep breath and whispers to you.

&quot;Idiot...&quot; She sniffles. &quot;Don&#39;t say things like that. I&#39;d never forgive you if you got hurt protecting me.&quot; You laugh, and Nicoletta looks shocked.

&quot;Sorry, just...&quot; You settle down and study her. &quot;If I said the same to you, would you stop?&quot; She thinks for a moment... then pouts.

&quot;No way.&quot;

This time, you both laugh, and Nicoletta wraps her arms around you. You embrace her in turn, listening to her heartbeat while the morningtime Manila soundscape threatens to drown it out.

&quot;Then, instead of that... can I ask you to trust me with the rest of this mess?&quot;

Nicoletta thinks for a moment... then she nods into your shoulder.

[[And the two of you spend the rest of the day recouperating, making it to the end of the day without any more incidents.|30Days]] &lt;&lt;set $Finished_14 to true&gt;&gt;


&lt;&lt;/ctp&gt;&gt;</tw-passagedata><tw-passagedata pid="43" name="14CW" tags="OOC" position="350,600" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;WARNING:&lt;/h3&gt;
* This passage relies on context from Passage 5: Redo. Be sure you&#39;ve read that first.
&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Graphic Violence
* Death of a Child
* Blood
* Vomiting
[[I consent.|14Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="44" name="6Start" tags="BloodlikeEarth" position="475,600" size="100,100">&lt;&lt;if ndef $Finished_6&gt;&gt; &lt;&lt;set $Finished_6 = 0&gt;&gt; &lt;&lt;/if&gt;&gt;
&quot;Haaaahhhhh... Sometimes I forget how spoiled you are in winter, Haoran.&quot; Aniceta sighs and slips off her windbreaker. &quot;Do you think they&#39;d let me back in if I gave &#39;em a sob story about living on the farm?&quot; And you laugh.

&quot;Maybe... I could vouch for you, but I doubt it&#39;d be worth much.&quot; Her eyes go wide for a moment, then she just smiles at you.

&quot;If there&#39;s a chance, you should do it. Living with you was so much fun...&quot;

&quot;Besides... it&#39;d be easier to help with your experiments that way, wouldn&#39;t it?&quot; You blush, and she teases you for it. The two of you keep dancing around the night&#39;s plans for a while longer. For once, and only because the experiment demands it, you take extra care to keep Aniceta fed and comfortable. Thankfully, alcohol would ruin your testing conditions, so you don&#39;t have to offer any of your strategic reserves her way.

Once you&#39;re both settled in, you guide Aniceta to the living room, where you&#39;ve cordoned off a dedicated area, with a soft mat on the floor. She sits there, cross-legged while you retrieve and set up your tools. You notice her wince when you pull out a box of stubby needles. When you prep a syringe and draw out a dose of light, pink oil, she speaks up.

&quot;H-hey... aren&#39;t you supposed to tell me what this stuff does?&quot; You gulp. In any other setting, you&#39;d have pre-prepped a formal statement and all sorts of legal documents. It occurs to you that you might have gotten too used to pumping untested drugs into Aniceta. Still, you come up with the best explanation you can on the fly.

&quot;W-well... It&#39;s a cocktail of SORIs, some off-label Scopolamine, and just enough Syntocinon to kickstart the pathway. You&#39;ll get some dizziness and potentially peripheral numbness, so try to stay seated.&quot; You bend down to look her straight in the eye. &quot;You&#39;ll feel suggestible, sort of &#39;floaty&#39;, and there&#39;s a small chance of hallucinations. But, if you feel palpitations or it gets hard to breathe, let me know so we can wind you down.&quot; You return to your supplies and feel your face flush. &quot;I-it&#39;s important that you can trust me... for the experiment. So, keep me updated on how you feel.&quot; You look to Aniceta for approval, and she giggles. Then, in a soft voice...

&quot;I&#39;ll happily trust you, if it keeps you doting on me like this. I miss the sweet, cute Haoran from back in the day...&quot; You sigh as you glove up and sit beside her. Aniceta looks between you, the needle, and the floor, and sighs. In your ongoing attempt to build trust, you take her hand with your free one and squeeze it. This seems to comfort Aniceta, who smiles down into her lap.

&quot;I&#39;ll, uhm...&quot; You swallow. &quot;I need you to pull up your shirt, a little bit.&quot; She blushes, then she does as you ask, exposing a few inches of soft belly. 

When neither of you moves for a moment, she stammers out, &quot;I-it&#39;s not like you haven&#39;t seen it before!&quot; and turns away. You collect yourself and prepare to give the shot, but you realize that you can&#39;t give a subcutaneous shot single-handed. When you let go of Aniceta&#39;s hand, she makes the same worried face as before, and you start sorting through alternative ways to comfort her. Aniceta seems to catch on quickly, but right before she can tell you to forget about it, you get an idea.

You pull yourself up and straddle Aniceta&#39;s lap. Her face goes bright red, and she starts to stutter. You cut her off with a simple whisper. &quot;If it&#39;ll make you more comfortable... feel free to hug me.&quot; She hardly seems to believe it, but when she just stares at you, you nod. After that, Aniceta wraps you into her arms and rests her head on your shoulder.

Finally, you have just enough space to work. You pick a spot off to the side of her stomach and wipe small circles into it with an alcohol wipe. In the few seconds you wait, her slow, meditative breaths brush over your neck and make you shiver. Then, you pinch up some of Aniceta&#39;s belly fat between two gloved fingers, and you push in the needle. When it slides in, she whimpers and buries her face in your neck. Once the plunger bottoms out, you pull it out in one quick motion, press a cotton ball over the site, and pop the syringe into your prepared sharps container.

Aniceta breathes in and out onto your neck, mumbling &quot;Is it over...?&quot; You laugh and whisper your assent to her, pulling a small pink bandage off your supply cart and placing it over the injection site. She sighs and pulls away from your neck, still keeping her arms around you. &quot;Good.&quot; Then, she asks, &quot;Would your procedure be ruined if we sat like this a little longer, though?&quot; You flush.

&quot;T-that...&quot; Windows and times flit through your head, and you try to mathematically center yourself. &quot;If it would put you at ease... we can stay like this while we wait for the medicine to take effect.&quot; Aniceta smiles and nuzzles into your chest without another word, [[and she clings to you as long as she can.|23Hypnogogia]]</tw-passagedata><tw-passagedata pid="45" name="23Hypnogogia" tags="BloodlikeEarth" position="600,600" size="100,100">Aniceta&#39;s hot breath brushes past your neck. When you look down to her, she&#39;s watching you with slow, lethargic blinks. There&#39;s a long lag between when your eyes meet and when she blushes and looks away. When she whispers, her voice is wavering and unsure, as if half-asleep.

&quot;I think it&#39;s working...&quot; You nod. As you pull away she tries to cling to you, but you can easily overpower her in this state. Aniceta pouts about it, while you step to your laptop and start a pre-prepared playlist of slow, calming music. You crouch down beside her and try your best to speak in a soothing voice.

&quot;Alright, we&#39;re going to be starting with something called &#39;progressive relaxation&#39;. It might affect you really strongly, or it might not affect you at all. Rather than worrying about that, I just want you to focus on relaxing for me. Do you think you can do that?&quot; She smiles and nods.

&quot;I can...&quot; An unbidden smirk crosses your face.

&quot;Now, it&#39;s important that you tell me if anything is bothering you, but if you feel good and would rather not speak, feel free to respond nonverbally. I&#39;ll be here watching over you the whole time, so you don&#39;t need to worry about anything. Is that okay?&quot; She nods towards you with a glassy expression, and a shiver runs down your spine. &quot;Now, lie down on your back for me.&quot;

She does, still tracking you with her eyes. You take her hand, balled up into a fist, between yours. She unfurls it as you do, and you rub small circles into her palm, pressing into her calluses and making her sigh.

&quot;For now, I want you to focus on relieving tension in these parts, and then we&#39;ll move inward.&quot; As you stroke her hand, you feel it relax under your touch. You smile her way and move to massage her wrist. &quot;You&#39;re doing a wonderful job. Just keep focusing on that warm, floaty feeling of pure relaxation.&quot; She sighs with a placid, blank expression, seeming to sink fully into her mat. Despite having practiced this with a coworker before (for a control sample), the speed at which Aniceta melts for you is shocking. It&#39;d be a problem if the mixture induced //sleep// instead of //hypnosis//, so, as you creep upwards and relax her arms, you jump ahead to a more active step in the protocol.

&quot;As you relax, I want you to think about something you do that makes you feel at peace, and tell me what it is.&quot; Her brow narrows a bit, and she seems to think hard about it. You massage her shoulders, letting them relax and sink into the mat. Then, Aniceta speaks.

&quot;Haoran...&quot; You perk up.

&quot;Everything okay?&quot; She nods and smiles.

&quot;I like to do... Haoran.&quot;

...

You breathe in... and out... and you sigh.

&quot;Let&#39;s stick to activities for now, okay? Things you&#39;ll do after a long day to help yourself relax.&quot; She thinks a bit longer.

&quot;I like to read...&quot; You sigh. The idea that Aniceta can be normal, too reassures you.

&quot;And what sort of reading soothes you and helps you relax?&quot; This time, she doesn&#39;t even take the time to think.

&quot;Old messages... sometimes from my family, but usually from Haoran...&quot; You sigh again, and she continues without you asking. &quot;I like to imagine the two of us living together again, even that we&#39;re married... It&#39;s a really warm, healing feeling...&quot; You blush and cut her off there. Even if it is embarrassing... that feeling might be useful for your purposes.

&quot;Then... try to imagine that warmth spreading all across your body. Let everything but my voice and your pure relaxation fade far away.&quot; Aniceta sighs, and you watch a shiver creep up her body. There&#39;s a soft, far away look in her eyes. When you realize now might be your best chance to implant something in Aniceta&#39;s head, you blush. Like it was nothing, she opened up the deepest, subconscious pieces of herself, and you&#39;re still not sure what you want to do with them. You&#39;ve tried brainstorming suggestions to embarrass and degrade Aniceta while proving your superiority, but you never settled on one. So, you&#39;ll have to improvise from the scraps you had prepared.

&lt;span id = &quot;cetachoice&quot;&gt;
&lt;&lt;link &quot;When she&#39;s in your home, Aniceta should see herself as your loyal dog.&quot;&gt;&gt;&lt;&lt;replace &quot;#cetachoice&quot;&gt;&gt;&lt;&lt;removeclass &quot;#dogend&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;removeclass &quot;#waker&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;if ndef $End_6_Dogo &gt;&gt;&lt;&lt;set $End_6_Dogo to true&gt;&gt;&lt;&lt;set $Finished_6 += 1&gt;&gt;&lt;&lt;/if&gt;&gt;\
&quot;There&#39;s a feeling of loyalty there, isn&#39;t there? I want you to focus on it.&quot; She nods sluggishly. &quot;Think about how it feels to be loyal, to be appreciated for being loyal.&quot;

Aniceta squirms a bit, and you reconsider starting with something so high-concept. Instead you scratch her behind the ears and pet her head. She jumps at first, but she settles down and leans into it once she&#39;s adjusted. You even forget yourself and pet her for longer than you intended before speaking again.

&quot;Doesn&#39;t that feel good? You would feel good if the person were so attached to praised you like that?&quot; She nods aggressively, but you stop caressing her. &quot;Not like that. Speak.&quot; She fumbles, before calling out.

&quot;Y-yes...&quot; You softly //bap// her on the cheek and she grumbles.

&quot;Not like that. Good, sweet dogs don&#39;t talk, do they?&quot;

She seems conflicted for a moment. She tries leaning into your touch, but you don&#39;t pet her, as hard as that is. She whines, but then...

&quot;A-a-arf...! Arf arf...&quot; You immediately scritch her, toying with her hair and kissing the crown of her head. Without any extra training, she lolls her tongue out and enjoys it.

&quot;So cuuuuute!~&quot; You rapidfire kisses on her cheeks as you stroke her hair. She happily, limply takes the affection. You tease her, &quot;Isn&#39;t this great? Don&#39;t you wish you could be a cute puppy more often?&quot; She whimpers for a moment, then softly barks. You pet her more.

&quot;Look at you! You&#39;re sooooo cute, puppy!&quot; You reach down, pull up Aniceta&#39;s shirt, and rub her belly. She seems to love it, but you suddenly become self-aware as you do it.

&quot;A-ahem... That should be enough training. I think I need to wake you up now... puppy.&quot; She droops, then she paws at... strokes your hand with hers, and you take it, rubbing small circles into it. &quot;I know, I know... it&#39;s not scary, though. We&#39;ll just be doing our induction backwards. Think you can manage that, puppy?&quot; She licks your cheek.
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;When Aniceta gets tired, her oral fixation should grow to absurd levels. &quot;&gt;&gt;&lt;&lt;replace &quot;#cetachoice&quot;&gt;&gt;&lt;&lt;removeclass &quot;#kissend&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;removeclass &quot;#waker&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;if ndef $End_6_Suck&gt;&gt;&lt;&lt;set $End_6_Suck to true&gt;&gt;&lt;&lt;set $Finished_6 += 1&gt;&gt;&lt;&lt;/if&gt;&gt;\
&quot;Now, I want you to focus on a specific feeling for me.&quot; You hold Aniceta by the chin and trace over her lips with your thumb. She squirms a little from the sensation.

&quot;Right now, your mouth is so empty... it&#39;s feeling a little lonely, I think.&quot; She doesn&#39;t seem totally convinced, so you slip a bit of your thumb past her lips, and she moans. When you pull it out and stroke her lips more, she squirms more strongly.

&quot;There~ You get it now.&quot; She whimpers and makes the slightest forceful move to take your thumb into your mouth, which you can push back with only a light pressure against her chin. &quot;You want it bad, don&#39;t you? Don&#39;t be ashamed, it&#39;s normal.&quot;

You finally spare her the torment, plunging the length of your thumb past her lips. She shakes and cries out if electrocuted, before calming down and idly sucking on your thumb. You stroke her hair and let her enjoy herself.

&quot;That&#39;s right... this is all natural, see? You can hardly move your body, but you still know how to suckle. It&#39;s one of the first instincts we use, after all.&quot; You lightly pump your thumb in and out of Aniceta&#39;s mouth, and she makes a glassy-eyed face of pure bliss, different to anything you&#39;ve ever seen from her. A shiver runs up your spine, but you can only continue further.

&quot;I-it&#39;s hard to suppress these urges, but you can already feel that, can&#39;t you?&quot; She nods slightly, digging her teeth into your thumb at each apex. You pet her head with your free hand.

&quot;That&#39;s okay, because your body is capable of controlling it entirely on its own. Would you like that?&quot; She pauses for a moment then nods more forcefully, causing you to curse under your breath. You collect yourself and smile at her. &quot;Good. Thankfully, I&#39;ve already given you the power in this session.&quot; She seems to relax at this, slowing down to only lightly licking your thumb. You can&#39;t help but admire how low she&#39;s fallen for you so quickly. It&#39;d be a shame to just lock up something this cute, though.

&quot;You&#39;ll be safe to go throughout your day, doing everything you need without any fear of these urges returning.&quot;

&quot;//&#39;&#39;However&#39;&#39;//, the more energy you burn, the harder it will be to keep up this front. After a long day, when you&#39;re surrounded by people you trust, you&#39;ll be constantly aware of how badly you need your mouth filled.&quot; She unconsciously starts sucking on your thumb again.

You pull your hand away from Aniceta, and she immediately grows distressed. You take her hand in yours, massaging it while you soothe her back down.

&quot;It&#39;s okay. Don&#39;t be scared. I need to wake you up now, okay?&quot; It takes a moment, but she seems to calm back down.

&quot;The process is just how we started in reverse. You can do it.&quot; She nods.
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;Any time she hears your voice, Aniceta should remember to show deference to your greatness and natural talent.&quot;&gt;&gt;&lt;&lt;replace &quot;#cetachoice&quot;&gt;&gt;&lt;&lt;removeclass &quot;#praiseend&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;removeclass &quot;#waker&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;if ndef $End_6_Submit&gt;&gt;&lt;&lt;set $End_6_Submit to true&gt;&gt;&lt;&lt;set $Finished_6 += 1&gt;&gt;&lt;&lt;/if&gt;&gt;\
&quot;Now, I want you to focus on this voice, the only thing that&#39;s important to you right now. You&#39;ll feel utterly serene any time you hear it, and that warm feeling will flood you all over.&quot; You take Aniceta&#39;s hand, and she instinctively squeezes yours. When you slide closer to her, she rests her head in your lap.

&quot;Any time you hear my voice, you&#39;ll feel that burning admiration take you over. The only way you&#39;ll be able to put it out is to project it out in the world.&quot; She turns over in your lap, and you stroke her hair, soothing her back down before it can hurt her trance.

&quot;Don&#39;t worry. It&#39;s not something to be scared about. Letting it overcome you and releasing it will feel fun, light, just as peaceful as you are now.&quot; You kiss the back of her hand, and she settles nicely into your lap.

&quot;Tonight has shown that you already have that potential... you just need to embrace it.&quot; She nods into your lap.

&quot;That feeling of admiration, like everything about someone might be on a whole different level to you... well, some would consider it a form of love. You don&#39;t need to feel any shame about love, do you?&quot; Aniceta trembles under your touch and starts mumbling to herself. You stroke her hair and sigh. Her limit might be drawing near, so this is the most you&#39;ll be able to do tonight. You lower her down off your lap, stroking her hair the whole time to keep her from worrying.

&quot;I&#39;ll be waking you up, now.&quot; She seems hesitant, but she calms down from your soothing. &quot;I&#39;ll just be reversing the process we used to start.&quot;
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;When Aniceta reminisces about the two of you, she should get shamefully turned on.&quot;&gt;&gt;&lt;&lt;replace &quot;#cetachoice&quot;&gt;&gt;&lt;&lt;removeclass &quot;#nostalgiaend&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;removeclass &quot;#waker&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;if ndef $End_6_Brick&gt;&gt;&lt;&lt;set $End_6_Brick to true&gt;&gt;&lt;&lt;set $Finished_6 += 1&gt;&gt;&lt;&lt;/if&gt;&gt;\
&quot;So... you know that warm, healing feeling.&quot; Aniceta nods and sleepily smiles. &quot;Now, I want you to feel the deeper, more intense flames hiding inside it, as they burn you up from the inside.&quot; You inch closer to her, lean in and whisper right next to her, making her jump.

&quot;I want you to feel it growing... radiating heat... and so hard to deny.&quot; You stroke the crown of her head, and she whimpers. &quot;Up here... taking over your every thought... clouding your judgement and leaving you so whiny and needy.&quot; You trail your fingers down, savouring the humiliating whines Aniceta lets out from a simple touch. You stop over her chest. &quot;To here... Making your heart beat quicker... Every part of you is so sensitive from the heat.&quot; Aniceta cries out, and she starts desperately grinding against the mat, still totally unconscious. You gently hold her back with your free arm, which she doesn&#39;t struggle against.

Finally, you slide down between her legs. Aniceta lets out a ragged moan. A feeling of smug superiority washes over you as you notice the slight tent in her pants. You divert around and massage small circles into her thighs, as you whisper, &quot;Oh, oh, oh... it&#39;s so intense... Just that burning alone could take you to the edge. It makes you //so// desperate...&quot; You bend closer and place a mocking kiss on her thigh, then... Aniceta hitches, cries out, and settles back down into quiet whimpers, albeit with a small, wet spot mere inches from your face.

...

You sit up beside her and whisper to yourself as much as her.

&quot;I might have overdone things... I&#39;m going to wake you up, now.&quot; Behind that glassy-eyed look, she seems a little disappointed. You take her hand and squeeze it. &quot;It&#39;s important that you stay nice and serene for me while you wake. Otherwise, everything that&#39;s happened today won&#39;t stick.&quot; While you&#39;re not sure about that last part... it&#39;s better than her freaking out after waking up in //this// state.

&quot;I&#39;ll start it now. We&#39;ll just be reversing the last protocol to slowly ease you back into being a person.&quot; And she smiles.
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;/span&gt;
&lt;span id = &quot;waker&quot; class = &quot;hide&quot;&gt;\
&quot;Now, you&#39;re going to start regaining consciousness, and you&#39;ll notice feelings in your body again. I&#39;ll count down from ten to guide you, and you&#39;ll wake up on zero. Do you understand?&quot; Aniceta nods sleepily. You massage her hand as you start your count.

&quot;Ten. Nine.&quot; She wiggles a fingertip and shifts around in place.

&quot;Eight. Seven.&quot; She wraps her index finger around yours.

&quot;Six. Five&quot; Aniceta turns her head to watch you with long, heavy blinks, and you smile back at her.

&quot;Four. Three.&quot; She adjusts and inches closer to you, resting her head on your hand.

&quot;Two. One.&quot; Aniceta stretches out her legs and rotates her shoulders.

&quot;Zero.&quot; She whispers to you in a sleepy, but cogent voice.

&quot;Hi...&quot; And she nuzzles into your hand, which you turn to hold her cheek. &quot;Did I do good?&quot; And you smirk down towards her.

&quot;You know you did. Don&#39;t act innocent so I&#39;ll praise you.&quot; Aniceta giggles and kisses the palm of your hand.
\&lt;/span&gt;
\&lt;span id = &quot;dogend&quot; class = &quot;hide&quot;&gt;.. then, she licks it. She seems shocked by her own actions.

&quot;S-sorry! I must still be out of it... I just feel... fuzzy...&quot; You try to wave it off, and you absentmindedly pet Aniceta&#39;s head. This is a mistake, as she then proceeds to brush into your touch and whine. She switches between apologizing and begging as easily as breathing. &quot;Sorry! I don&#39;t know what&#39;s gotten into me... arf. I mean... uhm...&quot; You cough.

&quot;It&#39;s not a big deal. There&#39;s no need to apologize. This... treatment... must have affected you, is all.&quot; She looks at you wide-eyed. Then, when she blushes, you realize your mistake. Aniceta creeps closer, still shy, but openly nuzzling your hand. Try as you might, you don&#39;t have any way to resist something so cute, and you start stroking her head without any hesitation. She loves it (as she was programmed to), and this only reinforces her behavior, causing her to pounce on top of you and lick your face.

You&#39;d normally be indignant over this behavior, but her soft, puppylike charms have taken you by surprise. It&#39;s cute for a moment, but Aniceta licking your face from on top of you leads to her licking your neck while pinning you to the floor, leads to her biting your neck, growling, and holding you down... leads to an hour of desperate dryhumping while she begs to &#39;mate&#39;... leads to... you breaking down and saying yes... or, to be more precise, begging her for it...

You manage to civilize her enough that she agrees to destroy your dignity on her old bed, but you have to make a quick pit stop when you remember [[dogs are too stupid to grab condoms.|30Days]] &lt;/span&gt;
\&lt;span id = &quot;kissend&quot; class = &quot;hide&quot;&gt;.. then, as if it&#39;s completely normal, she takes your index finger into her mouth. When you give her a strange look, she seems to notice.

&quot;Oh, sowwy Haowan...&quot; She lets go of your hand and blushes. &quot;I&#39;m not sure what came over me, there.&quot; You smirk.

&quot;Well, it wasn&#39;t unpleasant... maybe if you ask nicely you could keep going.&quot; Aniceta looks you up and down, then an idea seems to come to her.

&quot;Actually, do you still have those candies I left over last time? Those would be really good right now...&quot; She smiles at the idea, and you deflate a bit. Despite your insistence that there might be something she &#39;really&#39; wants more, you still end up fetching the candies. You turn the TV on for her, and you&#39;re left pouting while she happily pops them in her mouth and sucks on them. You sigh and listen to the background noise, but your eyes have totally glazed over. Then, Aniceta scoots around to sit in front of you, and she smirks at your dejected expression.

&quot;Haoran?~&quot; You look past her. She leans in closer. &quot;Haoran, are you jealous of a guava candy right now?&quot; You look away blushing, and she giggles. Aniceta wraps her arms around you and pulls herself into your lap.

&quot;If you want me to hold you tight and kiss you all night, you just have to ask, y&#39;know?&quot;

[[And she does make you ask.|30Days]]
&lt;/span&gt;
\&lt;span id = &quot;praiseend&quot; class = &quot;hide&quot;&gt;

&quot;I love watching you in work mode, Haoran. It&#39;s such a change from when you&#39;re all cute with me.&quot; You scoff.

&quot;Where the hell do you get that idea?&quot; Aniceta giggles and pushes herself up beside you. She trails a hand across your cheek.

&quot;It&#39;s true! You&#39;re always so careful with me, then as soon as I&#39;m okay you go back to being a cute puppy.&quot; You flush and wave her off but she continues. &quot;The gap between the genius scientist and that fluffy, needy side that&#39;s only for me to see? Wow.&quot; She exaggerates herself shivering. You push her off and stand, groaning.

&quot;I don&#39;t get it! This was supposed to give mea leg up on you...&quot; She cocks her head at you. &quot;Aren&#39;t you supposed to think I&#39;m better than you? I-I thought I picked a pretty reliable script.&quot;

Aniceta giggles and stands beside you. She stoops down to rest her head on your shoulder and whispers to you.

&quot;It&#39;s true, though. You&#39;re soooo smart, Haoran. So cute, too?&quot; She hugs your waist and sighs. &quot;I can&#39;t believe I got blessed with the world&#39;s greatest girlfriend~&quot; You jump and try to wriggle out of her grasp. Unfortunately, she&#39;s much stronger, and doesn&#39;t seem intent to let you go.

&quot;G-GIRLFRIEND?!?! What are you even talking about?!&quot; You give up on trying to escape and just grumble. Aniceta laughs.

&quot;Yeah?&quot; She lets you go, causing you to stumble and fall gracelessly to the floor, and she counts on her fingers. &quot;I sleep over most nights. You always come home annoyed if I don&#39;t give you enough attention.&quot; She advances towards you as she continues. &quot;You only ever test your projects on me.&quot; She leans down and smirks at you. &quot;You got me a job at your friend&#39;s company so I wouldn&#39;t leave Shenzhen.&quot; You cover your face to try and hide your shame, which provokes a giggle out of Aniceta. &quot;And, when I lived here, we slept in your bed most nights, anyway.&quot;

She leans down and pulls your hands from your face, grinning down at your undignified expression.

&quot;Oh, and one more.&quot;

&quot;I&#39;m the only one who knows the adorable sounds you make when I bottom out in you.&quot;

[[You blubber and beg, but she doesn&#39;t let up until the sun rises in the morning.|30Days]]

&lt;/span&gt;
\&lt;span id = &quot;nostalgiaend&quot; class = &quot;hide&quot;&gt;

Then, she looks down, and she jumps, rolling away from you and laying with her stomach to the floor.

&quot;S-sorry! I... uhm... i-it&#39;s really warm in here, isn&#39;t it?&quot; She nervously coils a strand of hair around her finger, and you can hardly hide your smug feelings of triumph. You laugh, and that seems to fluster her more.

&quot;I already saw. It&#39;s no big deal.&quot; Aniceta gulps, but she seems to relax a bit, laying in a more comfortable position while she half-hides her face from you. You can&#39;t help teasing her more. &quot;There are a lot of documented cases of //weak-willed// subjects experiencing //that// during hypnosis. Although, it could just be that you&#39;re into that, Aniceta...&quot; She rolls to turn her back to you and stammers, half-whispering.

&quot;I... I-I&#39;m not! That&#39;s... that&#39;s to say... I&#39;ve never even done that before...&quot; A wicked grin spreads across your face at the thought that, even after all these years, you&#39;re still stealing &#39;first&#39;s away from Aniceta. You pursue her across the room in mock disbelief.

&quot;Oh? You&#39;ve never done &#39;&#39;&#39;that&#39;&#39;&#39; before? But, when were kids you&#39;d always-&quot; She slams a hand over your mouth and whimpers with a blushing, frustrated look on her face.

&quot;S-shut up! You know that&#39;s not what I mean. You&#39;re always such a bully, Haoran...&quot; Tears start to form in her eyes, and, while you&#39;d never admit it, your heart softens a bit. &quot;I should go...&quot; Aniceta makes to stand. You grab her at the shoulders, but this time she&#39;s able to struggle and writhe against you.

Then, you pull her into a hug... she relaxes and begins to sniffle into your shoulder. You rub circles into her back and whisper to her.

&quot;I&#39;m sorry... Don&#39;t go, okay?&quot; Aniceta leans harder on you, and she sobs. You pull her in tight. Even if you wanted to establish your superiority over her... this is a step too far, even for you. You press small kisses into her shoulder. &quot;You&#39;re going to be okay. I&#39;m here with you.&quot; Her nails cut into your back where she clings to you. You pull Aniceta up to a sitting position with you, and you sit her in your lap.

&quot;These sorts of emotional outbursts are common with hypnosis, so...&quot; You swallow down your pride. &quot;Since it&#39;s my fault... just let it all out and let me take care of you.&quot; At that, Aniceta whimpers your name, and she wails.

...

Minutes that feel like hours pass, and Aniceta starts to calm down. You keep her held close to you as she does. Then, not long after she stops crying, her breathing turns heavy and hot against your neck. When you pull away to check on her, Aniceta&#39;s face is burning up, and her pupils are dilated. Her reaction lags, but she hides her face when you look at her.

&quot;S-sorry... I don&#39;t know what&#39;s wrong with me.&quot; She crosses her legs, turning to lean her side against you. &quot;I was just so glad that you stayed with me, but then I started feeling this &#39;&#39;heat&#39;&#39;, and... mnnmmnnmh...&quot; You stroke Aniceta&#39;s hair down the back of her neck, and she lets out the most pathetic moan you&#39;ve ever heard from her. Her voice doesn&#39;t go above a shaky whisper.

&quot;I must be some sort of pervert...&quot; You coo over her and wrap an arm around her waist, watching her shudder as you do.

&quot;No... it&#39;s nothing like that.&quot; You cough, and color rises up to your face. &quot;It&#39;s a natural reaction.&quot; Aniceta turns to you and pouts. At the same time, her hands wander down towards your chest.

&quot;You can say that, but you should know...&quot; She presses down over your navel, and you whimper from the touch. &quot;Hearing you say such nice things, watching you treat me well...&quot; A bit of that heat that&#39;s surrounding her leaches off into you, clouding your vision.

&quot;All of that just makes me need you more. I can&#39;t help it...&quot; She leans into you, and you don&#39;t pull away from her kiss. It starts slow, sweet, but you can tell that&#39;s only out of politeness. Once you press back into her, Aniceta goes wild, seeming to forego kissing entirely for fucking your mouth on her tongue. You moan, whimper, and cry out into her, but she only gets more fierce. At some point, you go down to the floor, and she&#39;s on top of you and stripping. Even between touches, you feel her heat on every inch of your skin.

When Aniceta pulls out of your mouth and you can finally breathe, she&#39;s straddling you, stretching out a set of black lingerie you&#39;ve never seen her wear. She&#39;s panting just like you. You notice now that she&#39;s opened your blouse and thrown your unhooked bra to the side of the room. Your face is hot. If you were to see yourself now... you wonder if you could tell whether it was Aniceta or yourself who&#39;d been drugged tonight. You wonder if this is what it means to be &#39;drunk off&#39; someone. Then, your eyes meet hers.

&quot;I can&#39;t hold back anymore, Haoran... I need you.&quot; She grinds against your thigh, making a needy, spaced-out face as she continues. &quot;I need to make you mine...&quot; You shudder. As much as your pride demands you stop her, you&#39;re working at her pace, now. You accept— no... you pathetically beg for her cock.

You push yourself up on your wrists.

&quot;I-I just need to get a condom. I&#39;ll only be—&quot; Aniceta grabs you by the shoulder and shoves you back down to the floor, leaning into a short kiss. When it ends, she pouts at you with a hint of that same blissed out look.

&quot;Don&#39;t go... I need you &#39;&#39;now&#39;&#39;, Haoran...&quot; She looks on the verge of tears again, and you gulp. Your logical brain tells you to turn and run, but... some part of you wants this... more than that, some part of you has wanted it this entire time. Laying there, feeling her heat all around you, burning up under the intensity of her gaze... you feel the logical part of you lose out, and you sigh. 

As you settle down, you lean into a brief, chaste kiss with Aniceta. When she realizes what you&#39;re saying, she grins. Then, she returns the kiss. When she pulls back, she watches you, before whispering.

&quot;I love you.&quot; Then she trails kisses down, starting at your neck, &quot;I love you so much...&quot; then your breast, &quot;I&#39;ll always love you, Haoran...&quot; then your belly, &quot;I&#39;m burning up so bad for you...&quot;, then your thigh, &quot;I want to be with you forever, Haoran.&quot; Soft tears run down your cheeks. When Aniceta hovers between your legs and looks up to you with that pure, incoherent adoration, it&#39;s the best you can do to stammer out.

[[&quot;L-love... you...&quot;|30Days]]
&lt;/span&gt;</tw-passagedata><tw-passagedata pid="46" name="6CW" tags="OOC" position="725,600" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;WARNING:&lt;/h3&gt;
* This passage relies on context from Passage 9: Buried Feelings. Be sure you&#39;ve read that first.
&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Graphic Sexual Content
* Hypnosis
* Needles
[[I consent.|6Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="47" name="24Start" tags="Blood" position="850,600" size="100,100">It all starts from a petty land dispute between two counts near the borders of Nox-Mystil.

Going into the third hour of debates, Sofia has become haggard and pale. Still, she&#39;s doing everything she can to hear out both parties. The plaintiff is an old ally of your brother&#39;s, currently overseeing a new unincorporated territory. This is your first time meeting face to face, but his incessant, winding speech makes you quick to believe the stories your brother told you about him. Across from him is the Countess of Mencesh, a human woman not much older than Sofia. 

The council is cleanly split between the two sides, so the argument has escalated further and further with no signs of stopping.

&quot;Your Majesty... I suppose you understand your position under the High King as well as anyone here. It&#39;s only for that reason that I believed you would grasp the intricacies of my claim.&quot; The count bows shortly and continues, as he is wont to. &quot;While you connect my territory into the High Kingdom, you are not my liege, as the Northern Territories have been decreed only to answer to the high king. Now, these laws—&quot; The countess cuts him off, raising her voice and appealing directly to Sofia.

&quot;Your Majesty, do you //hear// how he speaks to you!?&quot; She glares over at the count. &quot;His respect for our laws is the same as the respect he shows you. His prattles about the high king are clearly threats and must be treated as such!&quot; You look over to the queen. She&#39;s trembling.

You stand and hurry to Sofia&#39;s side. She can only manage a small whisper your way.

&quot;C-Cenyu... I-I&#39;m sorry...&quot;

She collapses and falls forwards. You arrive just in time to catch her, and you sit her up in her chair. Her breaths are shaky and quick, and she&#39;s burning up. You curse under your breath.

The royal physician arrives before you even call for him. He looks over Sofia and confirms that she&#39;s only feverish and weak from exhaustion. You nod... but then, you notice all eyes in the court are on you.

With the queen unavailable, you&#39;re now the highest authority in the room. Your first instinct is to run... but when you look at your betrothed&#39;s pained expression, you know you won&#39;t. You sigh.

...

At your command, a swarm of maids attend to Sofia and transport her to her room. Those still invested in the court&#39;s debate pull in closer as you bid, and you regard them from atop the queen&#39;s throne. The count and countess bow in turn. You push down a perverse smugness at your newfound power over them and settle in to properly judge their case.

&quot;We&#39;ll be abridging this &#39;debate&#39; in the absence of Queen Sofia. Each of you, beginning with the plaintiff, summarize all arguments you wish to be heard before judgement in the span of a few sentences.&quot; They both gulp. Your hope was to use cheap intimidation to mask the fact that you couldn&#39;t keep up with their arguments, and it appears to work. The count stands and speaks.

&quot;Yes, Lady Cenyu.&quot; You hold a hand up.

&quot;Count... Ruoziel, was it?&quot; He nods. &quot;I am acting now in my authority as Queen-Regent of Nox-Mystil, and you will regard me as such. Treat me no differently than you would Queen Sofia herself.&quot; And you add on, because you can&#39;t resist. &quot;Though I pray you remember that passing allusions to my own brother will do little to frighten me.&quot; He shivers then nods again.

&quot;Y-yes, your majesty... of course.&quot; And he continues.

&quot;The Promena Wetlands have recently been purged of rot devils, and they&#39;ve been brought into the fold of the high kingdom. Under the law of Sh&#39;enceriday, new unclaimed territories collect into adjacent unincorporated zones, only being leased into existing county titles when the high king decrees it. As such, the wetlands should rightfully be part of the Northern Territories.&quot; He bows and looks towards the countess. You follow.

&quot;Countess Milena, is this true?&quot; She nods.

&quot;Yes, your majesty. There&#39;s more to it than that, though.&quot;

&quot;The original settlements in Promena were wiped out, but among them were brave men and women from several clan warrens within Mencesh. As such, the crown of Nox-Mystil has always recognized the region as a part of Mencesh.&quot; The count bristles and tenses up, but you watch him push it down to politely add on.

&quot;&#39;&#39;However&#39;&#39;... The crown of Sh&#39;enceriday doesn&#39;t recognize that claim. The laws of the liege supersede the laws of the vassal.&quot; The countess has no retort to this, and she simply sneers his way.

You sigh.

Cases like this came up often when you observed your brother&#39;s court as a child, and they were never pretty. But... There&#39;s one detail in the series of events that irks you still. You turn to the count,

&quot;Count Ruoziel... tell me. Have you brought this information before the high king yet? I would expect that to be your first priority, if his laws were violated.&quot; He gulps. All eyes fall on him. The count nods. &quot;And how did he find your case?&quot; He stares down at the floor.

&quot;Sp-specious... your majesty...&quot; Something in your glare incites him to continue. &quot;His majesty found that the provisions supporting acquisitions of claimed territories extended to claims recognized by vassals of the realm...&quot; The countess&#39;s mouth falls open. 

You groan.

&quot;So you brought the matter here, hoping Queen Sofia would override his judgement...&quot; He nods.

&quot;I am in no place to sanction you, count, but I must ask that you leave this court. You will not find what you seek here.&quot; He bows, and you add on, &quot;And... I will mention this insubordination when I next write to the high king.&quot; Then, the count scampers off. The countess looks up to you, and you nod.

Once the matter is settled, you gather the council and rally them to reorganize the day&#39;s work. You&#39;ll have to fill in for a lot of Sofia&#39;s duties, but you manage to eke out a small break for yourself.

[[When you&#39;re certain everything will be handled in your absence, you head off to your betrothed&#39;s quarters.|24Sof]]</tw-passagedata><tw-passagedata pid="48" name="24Sof" tags="Blood" position="975,600" size="100,100">You slip quietly into Sofia&#39;s bedroom, careful to muffle the door behind you.

She&#39;s sleeping fitfully. You step closer and kneel at her bedside. Seeing Sofia like this, your heart twists in your chest. She&#39;s curled up and shivering, not far from how you were on your first night in the castle...

You reach across the bed and pull a blanket back over her, and it seems to calm her down. Then, as you pull your arm away, she latches onto it.

&quot;M-mother?!&quot; A shiver goes down your spine. She mumbles and rolls towards you. &quot;Is it you...?&quot; Her eyes are open but glazed over. You bend your wrist to stroke her arm as you whisper to her.

&quot;Sofia... it&#39;s only me.&quot; She pants and watches you... and then she cools down. You smile her way, but Sofia still seems uneasy.

&quot;Cenyu... I&#39;m sorry. I must have caused a lot of trouble for everyone... I should be well enough, now.&quot; She tries to lift herself up, but before you can even stop her, her arms give out and drop her back down to the bed. You place a hand on her shoulder.

&quot;There&#39;s no need. I&#39;ve handled it.&quot; She stares at you wide-eyed. &quot;I&#39;m serious! It wasn&#39;t anything remarkable, but court&#39;s handled for the day.&quot; You sigh. &quot;Though, I will have a few committee meetings to attend...&quot;

Sofia shrinks into the bed and stares off into the distance..

&quot;That&#39;s not...&quot; She sighs. &quot;You didn&#39;t have to do all of that for my sake, Cenyu...&quot; She&#39;s trembling.

You resolve yourself and reach out to take her hand. Sofia meets your gaze with an uncertain expression.

&quot;I wanted to do it.&quot; She frowns. &quot;N-not at first... but, when I realized it would give me a chance to lessen your burden...&quot;

She shakes her head.

&quot;That&#39;s not something you should have to worry about.&quot; You groan and pull back from her. Even as you try to keep a level head, your stubborn, selfish feelings swell to the surface, and you explode.

&quot;Why do you insist on treating me like a child?!&quot; You&#39;re overwhelmed by the sudden urge to lash out and break something, anything to get the feeling out... but you hold yourself back and grind your teeth. &quot;There&#39;s only scant few years left until I&#39;m to be your &#39;&#39;bride&#39;&#39;! Do you understand that?&quot; She slumps over, but you continue.

&quot;Today is the first day I&#39;ve been the queen to any of those people. Soon, I&#39;ll carry that burden &#39;&#39;every day&#39;&#39;!&quot;

...

You turn to storm of the room... but Sofia calls out to you, teary-eyed.

&quot;W-wait...!&quot;

You sigh and look back towards her. She strains to pull herself to the side of the bed.

&quot;You&#39;re right... I&#39;ve been cruel to you. I&#39;m sorry.&quot; She sniffles. &quot;Could you... bear to stay a bit longer?&quot;

With one look at her, the fire in your chest back down. There&#39;s no way you could leave her like this. You cross the room towards the bed and sit down beside Sofia. She rests her head against your shoulder, and the two of you sit in silence for some time. Then, she whispers.

&quot;You truly wish for me to depend on you...?&quot; You nod, and she sighs. &quot;I&#39;m sorry, Cenyu... I&#39;ve grown too protective of you, haven&#39;t I?&quot;

You shake your head.

&quot;It&#39;s fine if you&#39;re just looking out for me... but I want to protect you too, Sofia.&quot; A little more color rushes to her face... and she nods.

&quot;I would like that...&quot; You giggle, and she shyly slips an arm around you. There&#39;s a brief pause before you lean against her as well. Sofia giggles and whispers into your ear.

&quot;&#39;&#39;Marriage&#39;&#39;... and so soon, too. Doesn&#39;t it feel strange?&quot; A draft flares up the candle on the bedside, and for a short moment you see Sofia&#39;s face shimmering in its light. 

You think to yourself &#39;No, that&#39;s the only thing that&#39;s normal here,&#39; but you bite it back, lest you put her off again.

...

The two of you rest like this for a short while, until Sofia&#39;s migraine strikes again and forces her back down. You stand at her bedside and whisper.

&quot;Sorry... I&#39;m probably not helping by keeping you up. Is there anything you&#39;d like?&quot; She watches you with a shy expression, then she nods.

&quot;Th-there&#39;s something... but it might be a little weird.&quot; When you don&#39;t move, she continues.

&quot;When I was a kid... Any time I fell ill, my mother would kneel beside my bed and pray.&quot;

&quot;S-so, I was wondering if... maybe... you could pray for me?&quot;

You weren&#39;t raised particularly religious, but you&#39;ve had some exposure to old church teachings. Plus, even if you had to make up every step along the way, you&#39;d have a hard time rejecting the sweet, earnest face Sofia is making right now.

&quot;Then... did your clan have a patron god back in the day?&quot; She deflates.

&quot;Sorry, I never got the chance to ask. I just remember her kneeling beside my bed each night and muttering when she thought I&#39;d fallen asleep...&quot; You sigh. There are a few prayers still burned into your memory from Sh&#39;enceriday, and you figure they&#39;re better than nothing.

&quot;Well, House Q&#39;oma was patronized by Inistrae. Would that be good enough?&quot; Sofia&#39;s eyes go wide, then she nods. A trickle of apprehension seeps into you.

Still, you kneel, bow your head, and clasp your hands together. And with a deep breath, you begin.

//&quot;O, Noble Inistrae...&quot;// Almost instantly, you forget how it goes. Still... Sofia is watching you so expectantly that you have to wing it.

//&quot;I-if you can hear us from within The Unity... I beseech you.&quot;//

//&quot;Carry us from hardship, and guide us along the true path...&quot;//

//&quot;Bring health and good fortune upon my sweet... future... wife, Sofia.&quot;// She smiles and feverishly mumbles something. You lean in to hear her better.

&quot;And the kids...&quot; Your face goes red. 

You quickly tack on, //&quot;A-and our children, too... if that&#39;s possible. Please...&quot;//

//&quot;In your name... It is done.&quot;// A grin spreads across Sofia&#39;s face, and she opens her arms towards you. You don&#39;t budge, but, when she seems insistent, you slip into bed beside her. She hugs you to her chest and sighs.

&quot;Cenyu... you&#39;re such a sweetheart. I really...&quot; Sofia falls quiet, and you stare up at her. Her fever would explain the flushing, but that humiliating, conflicted expression... you snicker.

&quot;Sofia...&quot; She looks your way, and your gazes meet. Then, you lean up and plant a brief, chaste kiss on her lips. Sofia&#39;s eyes go wide, and she releases her grip on you. While you extricate yourself from her embrace, she mumbles to herself.

&quot;Wh... wha... you... why...? I... That...&quot; You giggle and splay a blanket over her.

&quot;They&#39;ll need me back in court soon. We can talk more when you&#39;re better, okay?&quot;

You take one last, long glance towards Sofia... [[then you step out.|30Days]] &lt;&lt;set $Finished_23 to true&gt;&gt;</tw-passagedata><tw-passagedata pid="49" name="24CW" tags="OOC" position="1100,600" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;WARNING:&lt;/h3&gt;
* This passage relies on context from Passage 16: Betrothal. Be sure you&#39;ve read that first.
&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Significant Age Gap
[[I consent.|24Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="50" name="25Start" tags="Blood" position="1225,600" size="100,100">You&#39;re attending the first court of the cool season when it happens.

As always, you watch Queen Dekane&#39;s side and represent her authority to all the scrapers who come to beg her for judgement. In this specific session, you&#39;re passing the time between visitors by admiring the new stylings the season has brought to the courtiers of Serix&#39;ness. According to Itxaro, foreign silks have seen a resurgence in the past cool seasons. Your regalia hasn&#39;t changed, but you&#39;re perfectly content to watch your wife flaunt the Maelthuran gown you gifted her (with the queen&#39;s assistance).

When a down-on-their-luck elvish merchant rolls in, begging for a middling investment to export some local teas to his home in Sh&#39;enceriday, you instinctively look back towards Itxaro. The queen humors his pitiful request, he steps forward into a bow... and then there&#39;s a glint of steel. You step forward a split-second too late, weapon drawn to deflect, and his dagger lodges itself in your chest.

For a moment the whole court freezes in shock, including the assassin. Then, you land on your forefoot and launch toward him, colliding with an elbow and knocking the man to the ground. The landing sends shocks up your spine and leaves you gasping for air. Still you surge forward, concussing him with your pommel. When he reaches under his coat, you waste no time, turning and slashing his shoulder. The assassin wails and shakes... then goes quiet. You stagger back, finally allowing a royal guard to restrain him, then you turn to your queen and limp to her side. Each step broadens the wound, even as you steady the blade with your free hand.

Dekane stares at you in pure terror, but she&#39;s uninjured. Once you&#39;re sure of this, your body finally reacts to the attack, slowing shutting down, system by system. You try to lower yourself gently to the floor, but as soon as you tell your body to move, it collapses in a heap. The queen, Itxaro, and the remaining court guard rush to your side. There are more overlapping voices than you can count, and you watch Itxaro wailing over you...

[[But all you can hear is the thrumming of blood, and a distant, staticky blur.|25Dekane]]</tw-passagedata><tw-passagedata pid="51" name="25Dekane" tags="Blood" position="100,725" size="100,100">When you come to, there&#39;s a warm presence sitting on the bed beside you. On instinct, you sigh and wrap your arm around it, only to be met by an unfamiliar gasp.

You flutter open your eyes, and there beside you is Queen Dekane. She settles into an undignified face of relief, grinning your way. You mutter a weak apology and push yourself away from her, only to be stopped by a surging, blinding pain in your chest. Dekane grips you by the shoulders and holds you still, whispering.

&quot;Please... take it easy, Eir.&quot; She takes your arm and places it back at your side, moving herself to kneel at the bedside. Your queen looks you over and frowns. &quot;The wound you took is quite serious.&quot; Then her lips curl as she glares down at you. &quot;And... made only worse by your choice to agitate it further.&quot;

You shudder. Then, that harsh expression you&#39;re all too used to fades into something softer. You try to speak up, but your voice comes out hoarse and scratchy. Dekane steps off and returns with a glass of water, which she tips into your mouth. Once you&#39;ve finished it, you&#39;re able to whisper out to her.

&quot;It&#39;s my duty to protect you, your majesty...&quot; She groans and snaps at you.

&quot;Don&#39;t act so formal with me, Eir!&quot; Then... she shrinks. &quot;Sorry. I don&#39;t know what&#39;s gotten into me...&quot; Dekane rests her head on the side of the bed, and you turn to watch her as a question rises to your lips.

&quot;Have I been out long...?&quot; She starts to speak, then stops. Then, she sighs and answers.

&quot;About a week.&quot; Your eyes go wide. &quot;You needed intensive surgery, so the physician has had you on a course of strong anesthetics. He only moved you from elixirs to a daily tea this morning.&quot; You blink a few times and manage to pull a few scraps of memory from the past week... but everything of substance is lost. You swallow.

&quot;Then... have you been watching me this whole time?&quot; Dekane pulls back, flushed and sputtering.

&quot;A-are you crazy? Did you bleed from your brain without the physician noticing?!&quot; Then, she stops herself, looks to the floor, then back to you and speaks. &quot;Itxaro was the one watching over you all this time. I only took over for a brief moment, because she needed to rest.&quot;

There&#39;s a strange glimmer in Dekane&#39;s eye. You push it from your mind. Itxaro... she&#39;s probably been worried sick this whole time. Your stomach twists in knots thinking about her.

&quot;Is she okay?&quot; Dekane sighs, then nods.

&quot;She was terrified for you. We did everything we could to help her grieving, and it still took a day or two to convince her to eat.&quot; The queen sighs.

&quot;That girl... I haven&#39;t seen her like that since our father passed.&quot; Your heart sinks. Dekane inches back your way and knits her brows.

The two of you sit in quiet silence for a moment... then your queen takes your hand in hers.

&quot;Eir... I know things were different back home, but this court is full of people you can trust. Please... Let them shoulder a bit of your burden.&quot; Slowly, she leans in closer, dropping her voice to a whisper. &quot;If you won&#39;t do it for your own sake, do it for Ixtaro and her happiness.&quot;

&quot;And... if that&#39;s not enough... consider it a direct order from me.&quot;

Then, Dekane stoops down, and she kisses you. You close your eyes on instinct. When her hot breath spills out over your face, they flutter open on their own, and you see her, flushed and weak with a desperate uncertainty about her.

She pulls away on her own, casting shy glances your way between swipes at her creased dress. When she speaks, it&#39;s only in a low, shaky voice.

&quot;I know you have a duty. Still, I cannot bear to lose you.&quot; Dekane stands, wipes her tears, and steps to the door before you can respond. She meets your gaze one last time.

&quot;Eir...&quot; She sighs. &quot;I truly hope we understand one another...&quot;

[[And with that, she&#39;s gone.|25Itxaro]]</tw-passagedata><tw-passagedata pid="52" name="25Itxaro" tags="Blood" position="225,725" size="100,100">An hour after the queen&#39;s departure, your door flies open again. Your eyes meet, and you smile.

Then, Itxaro dashes to your side, throws an arm around you, and sobs into your shoulder. You hold her as tight as you can in this state, cooing over her and kissing her forehead. 

When she pulls away from you, she props herself up on her arms, grinning as she futilely wipes at her tears.

&quot;I-I&#39;m supposed to be mad at you, but... how could I be? Oh, thank the gods...&quot; Itxaro takes your hand and pushes her face into it, rubbing against the warmth and laughing. When you realize you&#39;ve started to cry with her, you also can&#39;t help but laugh.

Then, Itxaro carefully moves you over and slips into bed beside you. She takes your face into her hands and kisses you. When she hovers her face near yours, you move towards your natural rhythm of pressing into Itxaro with hard kisses until she relents. This time, however, she counters. Itxaro pins you with her shoulder and bears down on you with a fury you&#39;ve never seen out of her, all until you&#39;re breathless and dizzy and fully surrender to her. When she finally pulls away, both of you are left panting, and Itxaro grins. She flicks away a trail of saliva between your mouths and wags her finger your way.

&quot;The doctor said &#39;no strenuous activity&#39; for you, my love. But... I figure it&#39;s okay if I&#39;m the one spoiling you, right?&quot; You flush. Somehow, you feel that you&#39;ve been a bad influence on the pure, gentle-hearted girl you married.

Thankfully, she lets you off easy for now, and, at Itxaro&#39;s insistence, you find a comfortable, safe position for her to hold you. It&#39;s embarrassing to tarnish your reputation as &quot;Serix&#39;ness&#39;s Womanizer Knight&quot; like this, but your wife takes to it well. Itxaro fawns over you, petting your head as she tells you stories of her week at court. You&#39;re happy to hear about her triumphs... but there&#39;s something irking you. It&#39;s hard to build up the will to ask when she&#39;s doting on you like this...

You steel your nerves and blurt it out as soon as there&#39;s a pause.

&quot;U-uhm...! The man who attacked Dekane...&quot; Itxaro&#39;s expression drops, and she glares your way. You gulp. &quot;H-has anything happened...?&quot;

She stares you down... then she pouts.

...

&quot;Tell me you love me.&quot; You flush, but she insists. You nod and lean in towards her.

&quot;I love you, Itxaro...&quot; When she seems unsatisfied, you continue. &quot;Y-you&#39;re the cutest, Itxaro! I wanna protect you until we get old together! Getting to spend every day with you is bliss, Itxaro...&quot; She blushes brighter and harder, before breaking with a groan.

&quot;A-and you have to apologize!&quot; You sigh and nestle your head back onto her chest.

&quot;Fine...&quot;

&quot;I&#39;m sorry for scaring you. I can&#39;t promise it&#39;ll never happen again, but... I shouldn&#39;t have pushed myself like that.&quot;

&quot;I endangered our future together, rather than rely on the other people on my side. It was stupid. Please forgive me...&quot;

Itxaro sighs... then she nods.

&quot;It &#39;&#39;was&#39;&#39; stupid.&quot; You wince. &quot;My sister doesn&#39;t keep you at her side because of your brute strength. She does it because she //trusts// you!&quot; She flicks you on the forehead, and you yelp. &quot;Now she has to lead without you there, and she&#39;s a wreck. Stupid Eir.&quot; She flicks you again.

&quot;B-but the assassin—&quot; Itxaro shakes her head.

&quot;Already handled!&quot; She sighs and pinches your cheek. &quot;Honestly... do you think nobody was gunning for Dekane before you came along?&quot; Your heart sinks.

&quot;There are dozens of men and women out there working diligently every day to keep our queen safe.&quot;

&quot;The only thing that puts you apart from them is that the two of you are family, Eir.&quot; Itxaro loosens her steel grip on you, and, as she watches you, a small smile creeps across her face. &quot;So... we&#39;ll be okay... but we&#39;re all worried sick about you.&quot;

You sigh and nestle yourself into her embrace. Then, a memory floods back into you, and you blush. You mutter to yourself.

&quot;Then... that must be why she...&quot; Itxaro perks up.

&quot;Hmm...? Why she did what?&quot; You gulp.
&lt;&lt;set $Finished_24 to true&gt;&gt;\
&lt;span id = &quot;choices&quot;&gt;\

&lt;&lt;link &quot;\&quot;When she stopped by earlier... Dekane kissed me.\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#choices&quot;&gt;&gt;&lt;&lt;ctpAdvance &quot;truth&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;\&quot;Dekane stopped by earlier... that&#39;s all.\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#choices&quot;&gt;&gt;&lt;&lt;ctpAdvance &quot;lies&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;
\&lt;&lt;ctp &quot;truth&quot;&gt;&gt;&lt;&lt;ctpNext&gt;&gt;
&quot;When she stopped by earlier... Dekane kissed me.&quot; Itxaro&#39;s eyes go wide, and you blurt out. &quot;I-it happened really suddenly! I didn&#39;t know she was planning on it...&quot; She eyes you with suspicion. Then, after checking you over a few times, she seems satisfied and sighs.

&quot;If that&#39;s all it was... that doesn&#39;t really bother me.&quot; 

This time it&#39;s your turn to stare Itxaro down, but she just shrugs. 

&quot;The three of us already spend most of our time together, and the two of you are close. It&#39;s not farfetched that something like that would develop, especially after what we&#39;ve just been through.&quot; You blush.

&quot;H-hold on, I haven&#39;t mentioned any... &#39;developing&#39;...&quot; Itxaro snickers.

&quot;I know, I know. I&#39;m just saying...&quot; She leans down and kisses you, and you relax into her touch. &quot;The three of us... our happiness... that&#39;s more important than anything else. We&#39;re a family, after all.&quot;

You nod, and Itxaro snuggles you up to her chest. You expect more to come of it, but she seems to drop the matter entirely, and, not long after, Ixtaro soothes herself to sleep while stroking your hair. [[The two of you pass a pleasant, peaceful night together.|30Days]]
\&lt;&lt;/ctp&gt;&gt;
\&lt;&lt;ctp &quot;lies&quot;&gt;&gt;&lt;&lt;ctpNext&gt;&gt;
&quot;Dekane stopped by earlier... that&#39;s all.&quot; Itxaro seems confused, so you continue. &quot;I-I was just shocked to see her take time out of her day for me...&quot;

She snickers.

&quot;Right, you were out, so you probably don&#39;t know.&quot; She smirks down towards you. &quot;My sister and I have been alternating days watching over you.&quot; You cock your head.

&quot;B-but... that&#39;s not...&quot; She eyes you curiously, and you&#39;re reminded of Dekane&#39;s face back then. A lump rises to your throat. You can only stammer out, &quot;Nevermind... I must still be a bit fuzzy from this medicine.&quot; Ixtaro laughs and idly strokes your hair.

&quot;Sorry! Sorry. I&#39;m stressing you too much too soon, aren&#39;t I?&quot; She adjusts and settles snugly into bed. &quot;Let&#39;s just relax for now, shall we? We&#39;ll have plenty of time to talk like this...&quot; Then, Ixtaro sighs and adds on...

&quot;Although... Today was supposed to be my responsibility... so you&#39;ll actually be with my sister tomorrow.&quot;

[[And, for a reason you can&#39;t quite name... your heart starts racing.|30Days]]
\&lt;&lt;/ctp&gt;&gt;</tw-passagedata><tw-passagedata pid="53" name="25CW" tags="OOC" position="350,725" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;WARNING:&lt;/h3&gt;
* This passage relies on context from Passage 6: Holding Back. Be sure you&#39;ve read that first.
&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Fantasy Violence
* Infidelity (Branching)
[[I consent.|25Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="54" name="26Start" tags="BloodlikeEarth" position="475,725" size="100,100">There&#39;s a knock at your door, then a few seconds later it opens on its own.

&quot;Cleaning this place up could do you some good, you know?&quot; Vera sneers down at you, and you roll your eyes.

&quot;If you hate it, nobody&#39;s forcing you to keep coming over.&quot; She shrugs and steps your way, setting her bags beside the table. She pulls out a dry cleaning bag, which you eye with suspicion. Then she unzips it and turns it your way.

When you recognize what it is, bile creeps into your throat and you have to turn away. Vera cackles. You gather the strength to turn her way again, and she&#39;s hung the bag so the tan suit inside conforms precisely to the curve of her body. Rather than the spitting image of Inzhu, it leaves her distorted in parts, like an uncanny caricature of her. When you stop squirming, she tucks it back away.

&quot;Dad burned most of her clothes. You should feel lucky that I was able to find anything.&quot; You sigh, and she glares at you. &quot;If you&#39;d rather not see me in it, I can burn it, too.&quot; She seems pleased with the reaction you give, and you groan.

&quot;If you&#39;re done playing around... it&#39;s your turn to start.&quot; Vera sighs, and a wistful look enters her eyes.

&quot;Fine.&quot;

She says that, but she spends a long time fumbling with her dress and searching around inside her bag. She pulls out a notebook, opens it, closes it, puts it back in the bag, and repeats. Eventually, she lets out a long, drawn out sigh and looks you in the eye.

&quot;I wrote out a question about your relationship, but, now that I&#39;m here, I really don&#39;t want to say it.&quot; You reach out a hand, and she passes her notebook your way. When you see what it is, you turn it right back her way and pass it back, shaking your head. She grumbles.

&quot;Ugh... fine.&quot; She takes a deep breath. &quot;You and my mother...&quot;

&quot;How f...m...n...s...o...h.&quot; You raise an eyebrow, and she groans. &quot;How...&quot; She slams a hand on the table.

&quot;How far did the two of you go?!&quot; You chuckle, and she slouches down in her chair. You answer flatly.

&quot;All the way.&quot; Vera gags, but once she pushes it down, she leans forward with a questioning look.

&quot;Seriously?&quot; She flips to a page in her notes. &quot;Just... with the age difference, when I was born, and when you left, I don&#39;t see it.&quot;

Your stomach turns as that night flits back through your mind. Fire leaps across your skin to each point she touched, and you grind your teeth. Vera watches you with sober curiosity. You shake your head.

&quot;I&#39;m telling the truth... but I won&#39;t say any more, not for any number of questions.&quot; She scoffs.

&quot;That is &#39;&#39;not&#39;&#39; how this relationship works.&quot; And you shrug.

&quot;Then if you ask again, I won&#39;t answer any of your questions.&quot; Vera groans, and you continue. &quot;Unless you&#39;re only in this for the cruel voyeurism, you don&#39;t need the gruesome details.&quot; She looks like she might complain more... then she sighs.

&quot;Fine. I can pretty much guess the rest.&quot; Vera pauses like she has something more to add... but she just gets up, crosses the farmhouse to fill a glass of water, returns, and places it in front of you.

&quot;Next question.&quot; She takes a deep breath.

&quot;Why do you clearly still love her after what she did?&quot; You wince. &quot;Or... maybe it&#39;s move &#39;obsession&#39; than &#39;love&#39;. Whichever feels more accurate.&quot; Dozens of stories flood your mind, with that damn smile of hers at the forefront. It takes a few minutes of silently sipping your water for you to find one to lead with.

&quot;Inzhu and I... we were supposed to escape together. She had a whole plan laid out with secret maps, train routes, and a pen pal in Aktobe to hide out with.&quot; At this, Vera opens her notebook and starts scrawling something down. You take a peek, and you&#39;re shocked to find she has neat, girlish handwriting, with notes organized by date, place, and more. Vera makes a face at you, and you realize you&#39;ve stopped talking.

&quot;We&#39;d meet on the slope after dark and plan what our lives would be like out west. She was going to finish university soon, and she thought she might find work in Moscow. At the time, I&#39;d have followed her out of the union if she asked. I think she had that effect on a lot of people.&quot; Vera looks up at you.

&quot;People like Mayor Omarova?&quot; A wave of nausea passes over you when you think about him. With it comes a spew of unbidden thoughts about that night, about him holding Her, about a hand on yours, about the two of them dancing and kissing and everyone cheering like it&#39;s all so goddamn normal. You think about the night, about that tearful look on Her face that you&#39;d never seen before. You think about that goddamned baby. You think about your hands around Her neck. You...

...

Vera breaks the silence.

&quot;I don&#39;t get you, Medina.&quot; You look up from your lap, and she&#39;s frowning your way.

&quot;It seems like all this business with... Inzhu... really messed you up. That much makes perfect sense to me.&quot; She shuts her notebook. &quot;But... in that case... why come back?&quot;

You shiver.

&quot;Th-that hardly has anything to do with the Inzhu of back then, does it?&quot; She shakes her head.

&quot;Maybe not... maybe it does. Either way, it&#39;s the one thing on my mind right now. Will you tell me?&quot;

...

You sigh.

&quot;I spent some of the most important years of my youth caught up in her web. Inzhu was accomplished, beautiful, and destined for great things, and she got pissed any time I threatened to surpass her in anything.&quot;

&quot;When I left on my own, I couldn&#39;t rely on her anymore. I waffled around between pointless menial work, and any time I tried to improve myself, I&#39;d break down and give up.&quot; Across the table, Vera grinds her teeth.

&quot;After a particularly bad run of luck, I was out on the streets of Kyiv again. That&#39;s when I heard about the work order for this plot of land. I sent my application into the Selsoviet that day, and...&quot; She sighs.

&quot;And I ensured you were chosen...&quot; You nod. Vera thinks on this for a moment... then she slaps the table, making you jump. &quot;But that doesn&#39;t explain why?! You spent as long in Kyiv as you ever did here!&quot; When you don&#39;t respond for a moment, she apologizes and rests her head in her hands. You have to think on it for a moment... but once you do, the answer seems obvious.

&quot;I think part of me wished Inzhu was still in town...&quot; She shudders, but you continue. &quot;As if I genuinely believed things could just go back to our old &#39;normal&#39;... Like she could save me from the mess she brought into my life.&quot; A horrible laugh rings out from within you. &quot;I realize how ridiculous it all sounds, now.&quot;

&quot;She ruined me... and after it all, the one thing I wanted was to run back into her arms...&quot;

Without noticing it, you&#39;ve started crying. You shrink down in your chair.

...

Vera stands and steps to your side, awkwardly fidgeting until she crouches down beside you.

&quot;H-hey... how about we move to your turn?&quot; When you only stare blankly her way, she continues. &quot;Please... I hate this feeling. Just...&quot; She reaches over and into her bag, pulling out the case and popping in her contacts. &quot;There! Y-you can strike me, kiss me... a-anything. I don&#39;t care, just... please... don&#39;t look at me like that...&quot;

Your eyes meet Hers... and you bury your face in Her chest.

She seems unsure at first, then She settles in, wrapping Her arms around you and stroking your hair. She whispers to you.

&quot;There there... You didn&#39;t do anything wrong. Everything&#39;s going to be okay...&quot; You tremble and lean into her, and not long after you feel hot tears dripping onto you. &quot;Don&#39;t be afraid... Moth—&quot; Vera rights herself. &quot;//I&#39;m// here, Medina.&quot;

[[The two of them sound nothing alike, but... she doesn&#39;t need to know that.|30Days]] &lt;&lt;set $Finished_22 to true&gt;&gt;</tw-passagedata><tw-passagedata pid="55" name="26CW" tags="OOC" position="600,725" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;WARNING:&lt;/h3&gt;
* This passage relies on context from Passage 17: Quiet Life. Be sure you&#39;ve read that first.
&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Significant Age Gap
* Discussion of Child Abuse (Specifically Child Sexual Abuse)
* &#39;&#39;Serious, Serious Downer Shit&#39;&#39;
[[I consent.|26Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="56" name="27Start" tags="BloodlikeEarth" position="725,725" size="100,100">Sema runs to your side and takes your hand in hers.

&quot;Carina! Are you okay? What&#39;s wrong, sweetheart?&quot; She&#39;s fully made up but still in a nightshirt and sweatpants. You wave off her concerns.

&quot;I&#39;m fine. You just need to sign me in...&quot; You gesture over towards the front desk&#39;s receptionist. &quot;//She// didn&#39;t believe I had permission to go up to your suite.&quot; Sema looks over to the woman and snarls. She bows her head to you shortly, before stepping off to chew the receptionist out.

When she returns, she takes your hand again.

&quot;Shall we, then?&quot; And you walk with her to the elevators, where she quickly punches the button for the 36th floor. A pair of older men step towards the car, see the two of you, then seem to think better of it, and wait for another car. On the way up, Sema whispers to you.

&quot;By the way... there&#39;s a surprise waiting for you. I think it&#39;ll really shake things up at the Gala.&quot; She laughs, and you force yourself to giggle alongside her.

&quot;And what might that be?&quot; She shakes her head.

&quot;You&#39;ll see soon enough.&quot; So you pout and cling to her the rest of the way up. Then, Sema pushes open the door to the suite, and what you see truly does shock you to your core.

Standing in the foyer is another woman, taller, a little older than you, and raven-haired, with defined muscles peeking out over a glittering blue strapless gown that&#39;s never graced your closet. She waves, and you bristle back. With a calculated, pathetic expression, you pull yourself into Sema&#39;s chest and whimper up to her.

&quot;I-is this your way of saying you&#39;re done with me, ma&#39;am? Do you not like girls like me anymore...?&quot; She blubbers and squeezes you tight. As she does, she pulls you towards the foyer.

&quot;No! N-nothing of the sort! This is just a... sort of...&quot; //The wench// circles around and watches you from behind Sema, who coughs. You stare up at her and cock your head to mimic a tiny, helpless kitten.

&quot;W-well... I&#39;ve always wanted to walk into a party with a cute girl on each arm.&quot; She blushes, then she levels a shy, earnest look towards you. &quot;Is that no good? If you want me to pay more, I can...&quot;

...

You sigh. Sema&#39;s eyes go wide, and you reach up to stroke her head.

&quot;No... don&#39;t worry.&quot; You pout. &quot;But don&#39;t even think about replacing me...&quot; Sema snickers and kisses your cheek. Then, //the harlot// steps past her and bows slightly your way.

&quot;There&#39;s nothing to be afraid of, cutie. //This one// is too stingy for my usual rates, anyway.&quot; You grimace, and she extends a hand which you reluctantly shake.

&quot;I&#39;m Ruby. And, assuming you&#39;re Carina, I&#39;ve heard plenty of stories.&quot; When she smirks, you roll your eyes.

&quot;Pleasure. I&#39;m sure there was plenty to tell from our &#39;&#39;years&#39;&#39; together.&quot; You turn to Sema and smile. &quot;Now, if you&#39;ll excuse me ma&#39;am, I should head to my room and get dressed.&quot; She nods, and you step away.

In your room, a new white satin gown is laid out on the bed. Looking out over all its familiar accoutrements, you finally feel back in your element. You take your time with it, tweaking and refitting until every piece looks perfect from every angle. With some last adjustments to your makeup to match Sema&#39;s tastes, you step back out into the foyer.

There you see Sema, who&#39;s changed into a simple black dress, and //the slut//, both of whom check you out as you come. The two of them are holding hands, which you fume at. Ruby starts to speak, but before she can start, you stomp over and interlink your arm with Sema&#39;s. They both stare, then Sema sighs and kisses you on the cheek.

&quot;Shall we head out?&quot; //That harlot// gives up her position on Sema&#39;s arm, and she opens the door for you both. As you pass by, you stick your tongue out towards her, [[and the three of you depart.|27Gala]]</tw-passagedata><tw-passagedata pid="57" name="27Gala" tags="BloodlikeEarth" position="850,725" size="100,100">The room buzzes about the three of you as you enter the gala, but you don&#39;t get long to show off together.

You&#39;re handfeeding Sema slices of endangered beluga sturgeon (topped with their caviar and crème fraîche) when an old business partner shows up. She invites him to join the table, and he takes his time leering at you and Ruby. But, before the next round of hors d&#39;oeuvres arrives, he has to head upstairs to a meeting with some local moguls and politicians. He invites Sema alone, and she takes him up on it with barely any consideration.

She kisses each of you on the cheek, then she steps off with only some line about keeping her seat warm. You shrink. It&#39;s just you and //her// now...

Your gazes meet a few times as you idly crunch at experimental pickings that you can&#39;t enjoy as well without Sema here to explain them to you. Neither of you speaks except to appease nosy passersby. When Sema appears to be taking her time, you nod politely towards your companion [[and walk off towards the back of the hotel.|27Backstage]]</tw-passagedata><tw-passagedata pid="58" name="27Backstage" tags="BloodlikeEarth" position="975,725" size="100,100">Bright colors dance across your screen and light up the dim employee hallway you&#39;re crouched in. Some staff are taking their breaks across from you, leaning half asleep against the spongy, unpapered and unpainted walls. They take more notice of the groaning electrical feedback of the nearby vending machine than the woman hunched over in a six thousand dollar gown, dead-eyed and muttering at her phone.
&lt;&lt;set _gacha to [&quot;Dogshit. &quot;, &quot;Pointless. &quot;, &quot;Already have 10. &quot;, &quot;Already have 20. &quot;, &quot;Became irrelevant in 2019. &quot;, &quot;Nerfed. &quot;, &quot;Slop. &quot;, &quot;Garbage. &quot;, &quot;Don&#39;t piss me off... &quot;, &quot;Stupid bullshit made for gooners. &quot;, &quot;Kill me now. &quot;, &quot;Fucking rob me while you&#39;re at it. &quot;, &quot;If this were my money, I&#39;d cry. &quot;, &quot;Trash! &quot;, &quot;Don&#39;t be stupid. &quot;, &quot;She&#39;s actually cute, but she makes me insecure, so she should die. &quot;, &quot;Everyone who likes her is mentally a child online. &quot;, &quot;Straight up predator. &quot;, &quot;This is already illegal overseas, but it should be illegal here. &quot;, &quot;If anyone calls me cringe for using her again I&#39;ll pull my hair out. &quot;, &quot;Fuck this Diddygatari bullshit. &quot;, &quot;I&#39;m quitting. &quot;, &quot;&#39;Pity&#39; was a trap meant to make workers complacent. &quot;, &quot;OH COME ON?!&quot;, &quot;You used to be my fave... why&#39;d you have to get nerfed...? &quot;, &quot;Stupid fucking horsegirl. &quot;, &quot;Stupid fucking doggirl. &quot;, &quot;Stupid fucking catgirl. &quot;, &quot;Stupid fucking ratgirl. &quot;, &quot;Since when are there men in this game? &quot;, &quot;Intellisoftworks should sleep with one fucking eye open... &quot;, &quot;I sub at Revolution of the Heavenly Bodies tier, and this is what I get?! &quot;, &quot;Would you like to steal more of my TG? Is this a TG giveaway? Are we donating TG to the needy? &quot;, &quot;I&#39;m ripping all my fingernails off this time. &quot;, &quot;This time I&#39;m really gonna do it. &quot;, &quot;I swear, they act like I&#39;m made of AvFrags... &quot;, &quot;This is worse than working an actual job at this point. &quot;, &quot;... &quot;, &quot;... &quot;, &quot;... &quot;, &quot;... &quot;, &quot;... &quot;, &quot;... &quot;, &quot;... &quot;, &quot;... &quot;, &quot;... &quot;, &quot;... &quot;, &quot;... &quot;, &quot;... &quot;, &quot;... &quot;, &quot;... &quot;, &quot;Why are we still here? &quot;, &quot;I just want my SSR muscle mommy to comfort me... &quot;, &quot;For an SSR, this Cenyu bitch is overweighted... &quot;, &quot;Has anyone ever been happy to pull Nasrin? &quot;, &quot;Wow, another Redemptions!Nasrin. My favorite costume. I&#39;ll put it with the other 8. &quot;, &quot;I finally pull a current-gen Eir and it&#39;s fucking Uptown Lady!Eir? This should be a crime. &quot;, &quot;I wanna say &#39;Welcome home Revelations!Eir... do you want dinner, a bath, or...?&#39;, but I made that joke THREE YEARS AGO, and NOBODY LAUGHED! &quot;, &quot;This game... this fucking game... &quot;, &quot;Nobody even uses the Black Knight this season! Fuck offffffff. &quot;, &quot;Wow, an Heir of Inistrae!Cenyu, I&#39;m sure that&#39;ll be useful for all the STAR MAPS I&#39;m doing, SINCE IT IS STILL 2022, AFTER ALL! &quot;, &quot;Oooh, an XU-PURGE, how nice, how helpful that would be if ANY MODERN GUILD ALLOWED CROSSOVER CHARACTERS! &quot;, &quot;I don&#39;t care what outfit they put on the Black Knight, she&#39;ll ALWAYS be D-tier. &quot;, &quot;Seriously? POD!Rosana? I&#39;d at least accept POL!Rosana, but POD??? Be serious. &quot;, &quot;&#39;Oh, Moonlight Princess!Cenyu is actually really powerful guys. I have her on my team because I&#39;m farming... uhh... Midnight Trains. No, do NOT look at my Tw&#39;- Okay she is kinda cute, I guess. &quot;, &quot;Okay, Maid!Eir is actually kinda cute for a Y1, but I don&#39;t like that they changed her hair. I&#39;m still protesting the character until her twintails come back... &quot;, &quot;Nobody in this city has suffered like I do since, like, 9/11, man. &quot;, &quot;I wonder if Sema can get me in with the mayor to have Intellisoftworks shut down for this bullshit. &quot;, &quot;This skin might be attractive to some of you weirdos, but I&#39;m an //intellectual//. &quot;]&gt;&gt; &lt;&lt;set _pulls to 10&gt;&gt;
&lt;span id = &quot;puller&quot;&gt;&lt;&lt;link &quot;Pull. &quot;&gt;&gt;&lt;&lt;append &quot;#puller&quot;&gt;&gt;&lt;&lt;print _gacha.pluck()&gt;&gt;&lt;&lt;/append&gt;&gt;&lt;&lt;if _pulls lte 0&gt;&gt;&lt;&lt;ctpAdvance &quot;Rolls&quot;&gt;&gt;&lt;&lt;replace &quot;#puller&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;replace &quot;#orphan&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;set _pulls -= 1&gt;&gt;&lt;&lt;/link&gt;&gt;

&quot;... &lt;/span&gt;&lt;span id=&quot;orphan&quot;&gt;&quot;&lt;/span&gt;&lt;&lt;ctp &quot;Rolls&quot;&gt;&gt;&lt;&lt;ctpNext&gt;&gt;\
\
You sigh...

&quot;Goldstar Rising?&quot; On instinct, you jump backwards, hitting your head against the unfinished wall. Ruby, standing over you, snickers.

&quot;What are you...?!&quot;

She takes a long drag, but, when she exhales, Ruby fumbles her cigarette and burns a dark spot into a pair of beautiful, satin gloves that Sema once lent you for a charity ball. She curses and stomps it out.

&quot;Mouth got lonely. The game?&quot; You blink up at her, then back down at your phone. When you realize the two of you have just burned away nearly equal portions of your client&#39;s money, you laugh.

&quot;Yeah... Do you play?&quot; This time, she laughs.

&quot;Younger brother. Not my speed.&quot;

She slumps down beside you, then pulls out and lights another cigarette, with which she is far more careful. One of the workers across the way gets irritated by the smoke, and he cuts his break off early, glaring at the two of you as he goes. You idle away at a few more ten-pulls, mostly unbothered when they all turn out to be pointless. Ruby peers over and watches in quiet bemusement as the colors flit by. Then, after a few of your failures, she lights up.

&quot;Gimme. They say I have an idiot&#39;s luck with these things.&quot; You eye her with suspicion, and Ruby laughs, first richly, then between hacking coughs. Against your best judgement, you slide her your phone. She taps the button, once you show her which one to press, and the screen lights up again.

You count out as she goes.

Terrible. Useless. Dogshit.
Horseslop. Goonslop. Maleslop.
Pointless. Disgusting. Unforgivable.

But then...

You incant, on pure adrenaline...

&quot;Welcome home... Spring Festival!Eir...&quot; Ruby looks back between you and the phone, then she laughs.

&quot;So... did it work?&quot; You nod and take the phone from her hand, going straight to your new fave&#39;s CG page. Ruby watches you, and you flip the phone around to show her.

&quot;I mean, look at her! The gap between her physical power and the gentle, pastoral cuteness of her outfit? The tasteful fanservice? Who wouldn&#39;t be obsessed?!&quot; She leans away from you as she observes. Then, she cocks her head.

&quot;Is that what the game&#39;s about? You&#39;re just trying to get the hottest girls?&quot; You laugh.

&quot;Basically, yeah! And right now, everybody&#39;s hunting for their own SF!E.&quot; Ruby looks deep in thought as you scroll past story and event portraits for her. When you reach the end of the gallery, she chuckles.

&quot;So... correct me if I&#39;ve judged this wrong.&quot;

&quot;It seems to me that you get money from Sema because you fulfill all her weird fetishes... and then you dump all that money into your phone to get pictures of girls who fulfill &#39;&#39;your&#39;&#39; weird fetishes.&quot; You gulp.

&quot;W-well... when you put it that way, it sounds perverted... I guess it&#39;s not wrong, though...&quot; She nods.

&quot;Right... and this wolfgirl you&#39;ve been chasing, could you pull her up again?&quot;

You pull up her gallery section, then you hand Ruby your phone. She thanks you and turns it around, raising the screen beside her face.

&quot;She looks an awful lot like me, doesn&#39;t she...?&quot;

You shiver and look between the two of them. There are some obvious differences, but her build, face shape, and hair style are almost //identical//.

For some reason... your heart starts beating out of your chest, and you&#39;re a blushing, sweating mess. Ruby pulls in closer, sneering... [[and you nod.|30Days]] &lt;&lt;set $Finished_25 to true&gt;&gt;
&lt;&lt;/ctp&gt;&gt;</tw-passagedata><tw-passagedata pid="59" name="27CW" tags="OOC" position="1100,725" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Significant Age Gap
[[I consent.|27Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="60" name="28Start" tags="DarkFuture" position="1225,725" size="100,100">Morning sunlight creeps into the room as you watch over your mistress.

While she sleeps, she is perfectly serene. In a recent modification, your mistress overclocked some of your alternative sensations to make up for degradation in your visible light perception. Now, even so far away, being alone with her feels just as intense as her embrace once did. Her soft, gentle breaths; the faint scent of her sweat mixing with old perfume; heat radiating from her skin and tickling the sensors in your cheeks. You sigh. Then, your mistress stirs, and you step to her side.

&quot;Eunnnn...&quot; She reaches a hand out from the covers and sleepily swings it around yours. You take her hand, and she smiles.

&quot;Good morning, ma&#39;am.&quot; She circles a burnt-out kinetic interface with her thumb, which sends tickling sparks up your arm and makes you stutter. &quot;I-I&#39;ve prepared a bath for you, whenever you&#39;re ready for it.&quot; She pouts.

&quot;Don&#39;t wanna...&quot; You try to console her, but she pulls her hand from yours and crosses her arms. &quot;I&#39;m tired. Let me sleep in for once...&quot; You frown at her, and she turns away from the sunlight. You reach out to touch her shoulder, but she shrugs you off. &quot;N-no...! Stop it...&quot; She trembles and shrinks into the bed.

Even when your lady lashes out at you, her voice still never rises above a soft whisper. That fragile, needy part of her strengthens your devotion... but she&#39;s still quite strong-willed. You sigh and slip into the bed beside her, resting atop the covers.

&quot;Alright. I apologize, my lady. I&#39;ll push back your schedule for the day.&quot; She whirls around, still sulking, but she inches closer.

Your eyes meet, then she looks away. She grumbles to herself, so soft that even you can&#39;t make it out. For a moment, you close your eyes and commit yourself to rest beside her, until you feel your mistress prodding at your cheeks. When you blink her way, she sighs.

&quot;Are you not nervous...?&quot; When you don&#39;t respond immediately, she inches closer. &quot;I&#39;m supposed to meet with a suitor today, aren&#39;t I...? What if they steal me away...?&quot; Your joints lock up, and you shudder. Her face is incredibly close to yours now, and you can see her lips quivering. You shake her head.

&quot;Ma&#39;am... I want to support you in finding love...&quot; She rolls her eyes. &quot;But... I won&#39;t let anyone //steal// you.&quot;

&quot;A-and if he turns out to be no good, I won&#39;t let him anywhere near you.&quot; Just thinking about it makes the servos in your fingers freak out. Your mistress seems to notice. You reach up to your mouth, shorting that hand&#39;s capacitor with a filamented polymer tooth and forcing it to reset. She watches you and sighs.

&quot;What if he won&#39;t listen, though...? I&#39;m too weak to fight anyone off like this...&quot; Something deep in your circuits flips, and you grimace. Red-hot noise floods your mind, and you can only growl out between panting sprays of exhaust.

@@color:#EC7474;&quot;I&#39;ll kill him.&quot;@@ She gulps, and you continue, lurid fantasies dripping out and feeding into one another. @@color:#EC7474;&quot;I&#39;ll drain every drop of Anima from his body before he can lay a finger on you. If he&#39;s from another land, we can bury him and deny he ever arrived. If he&#39;s from the city, I know a porter who promised to dispose of any bodies I—&quot;@@

Your mistress&#39;s mouth wraps over yours, and you shrink at her touch. You reciprocate in light, fleeting motions, while she inelegantly thrusts her tongue into you, as if trying to test the limits of your facsimile throat.

When she pulls away, she whispers between sighs. &quot;Alright, alright... It won&#39;t come to that... Calm down, Eun...&quot; She rests her head against your chest, and you nod. Then, she adds. &quot;Also... you should keep your Lip Warmer on more often... I&#39;m tired of ice-cold morning kisses...&quot;

You snicker.

&quot;Yes, my lady...&quot; [[And you deliver a chilly kiss to her forehead|28BathShot]]</tw-passagedata><tw-passagedata pid="61" name="28BathShot" tags="DarkFuture" position="100,850" size="100,100">With your mistress supported by your shoulder, you walk her into the bathroom.

The bath you drew earlier has gone cold, so you leave her at the mirror and step over to turn on the heater. She watches you as she wipes away caked-on makeup. You return, and she holds her gaze on you. When you smile, she blushes and whispers to you.

&quot;Eun...&quot; You wrap an arm around her, and she leans against you. &quot;Could you call me by my name...?&quot;

You blush. She stares you down until you stammer out.

&quot;M-Miss Radia...&quot; She grimaces.

&quot;Radia...?&quot; She frowns.

&quot;My Radia?&quot; You hide your face in your hands, while she giggles. Then... she stares past you at the cupboard and sighs. You realize in the same moment and whisper down to her.

&quot;Shall I?&quot; 

She nods shyly, and you grip her around the waist. The two of you stand together for a moment, before you lift Radia up onto the counter. She blushes and settles in as you move to the cupboard.

You reach up to pull out a small gauge needle. Facing away from her, you flick your wrist, folding down your supine right hand and deploying your Enforcer in its place. Quickly drawing through a large suite of adjustment knobs, you dial in the dose and flow direction, then you slide the needle onto its tip.

You return to Radia&#39;s side, and she trembles. When she reaches out, you take her hand and squeeze it. Then, your mistress takes the hem of her nightdress in her free hand, and she lifts it up to her stomach. You blush, and she snaps at you.

&quot;D-don&#39;t act like you&#39;ve never seen them before...! Just do it...&quot; Your gazes meet. She nods. You hover your Enforcer over her thigh... and you press down.

Radia cries out. A thin trickle of Anima flows into her, and she takes refuge in you, throwing her arms around your waist and burying her face in your neck. Once the dose is complete, you pull free of her, holding back the trickle of blood with a hand flat on her thigh. As you cradle Radia, her hot tears drip onto your shoulder, one-by-one.

Then, you sense something changing within your mistress. Her body writhes and burns until it wraps you in its feverish heat. Not long after, the familiar, acrid scent of her sweat gives way to something sweet and suffocating. The pheromones wafting from Radia totally overwhelm your sensors, to the point you have to turn off your olfactory system entirely. When you shift focus to do so, Radia takes advantage. She slips past your bracing hand and locks your right hip between her legs. By the time you notice it happening, she&#39;s already pitifully grinding against you. 

You try to push her back, but she&#39;s uncharacteristically strong in this state. She pulls back, and you see the tearful, glassy expression on her face as she whimpers.

&quot;E-Eun... I&#39;m so sorry...&quot; A shudder runs up the full length of her body. &quot;I can&#39;t help it...&quot; You shush your lady and pull her in tight to your chest. She kisses the soft, synthetic skin she installed there, licking and sucking at it while she hitches against you.

Radia seems to hit a plateau, and she stares up to you with pleading, desperate eyes. When it gets too hard to watch her suffer through this, you shyly reach down a hand, which she locks onto immediately. You turn off that hand&#39;s sense of touch to give her some small modesty, but the tight room still echoes with her desperate moans and the wet, shameful sound of her helplessly thrusting against your fingers...

It doesn&#39;t take long for her to close in on the edge. When she does, you lean over her, kissing the crown of her head and whispering sweet, soft encouragement to her. She whimpers and begs and gasps, and when she finally breaks, Radia fully wraps herself around you and bites down, sinking her teeth deep enough to hit metal. A thousand warnings flare into your head, but you suppress them just long enough for her to weaken, then go limp in your arms.

You brush the hair out from Radia&#39;s face, and her eyes flutter back open. She leans into your touch. You rock side to side with her, and she whispers between sniffles.

&quot;I&#39;m s-sorry Eun... Today felt so much more intense than usual...&quot; She stares up towards you. You meet her gaze then lean down to kiss her on the forehead. &quot;You don&#39;t think I&#39;m gross or anything, do you...?&quot; You snicker and nuzzle against her cheek, whispering.

&quot;Never. I swear it.&quot; She sighs, before leaning in to briefly press her lips to yours.

Then, Radia giggles.

&quot;Look at that... nice and toasty...&quot; [[And the two of you have a pleasant, soothing bath.|30Days]] &lt;&lt;set $Finished_26 to true&gt;&gt;</tw-passagedata><tw-passagedata pid="62" name="28CW" tags="OOC" position="225,850" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Fantasy Violence (Described)
* Graphic Sexual Content
* Dubious Consent
* Intimate Acts while Intoxicated (It&#39;s REALLY Complicated)
[[I consent.|28Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="63" name="29Start" tags="Blood" position="350,850" size="100,100">The winding central road in the village of Kunedas is flanked by scorched mud houses and strewn with trampled clothes, mementos, and tools.

You canter up and down the street, scanning buildings you pass for signs of her. As you turn a corner, your steed rears up and comes to a stop, and you quickly dismount, hefting your sword towards the noise that spooked it. The street falls totally silent.

Then... a three-legged mousing cat hops out of a collapsed house and skitters down the street. You sigh... And when you turn around, you instinctively swing your arm to the sound of movement at your right, deflecting the thrust of an incoming partisan. You whirl around to face its wielder.

Across from you is a smirking lizard in the regalia of a Sera-Kashi royal knight. A grin creeps across your face.

&quot;I wondered how long you&#39;d be able to hold back. Abilio&#39;s thugs make such a habit of suicidal revenge attacks.&quot; She spits into the ash at her feet.

&quot;//Please//, we both know you&#39;re here for Princess Rosana. I won&#39;t let you take her, too.&quot; Then, she lunges again, but you intentionally lodge your blade into her catches, wrenching the spear away and sending her reeling with a flick of your wrist. Before you forget, you prop your sword against the ground and free a hand to unlatch your cape, which flutters down into the mud.

&quot;If you&#39;re willing to die just to keep her caged, I can happily grant you that.&quot; The paladin responds with nothing more than a brutal, animalistic scream as she charges towards you...

And you deflect her with the flat of your sword, redirecting her velocity and dropping her to the ground. She pulls herself up to a knee and gasps for air. Unsatisfied, you walk to your steed&#39;s side, rummaging through its saddlebags and pulling out a holy symbol. Your foe regains their footing and repeats the same boring charge, and this time you simply hold up a gauntleted hand and catch the spear by its head. She looks on in horror... then you twist and send her facefirst into the mud.

Sneering under your helmet, you drop the symbol inches from her face. She stares at it where it lands.

&quot;Take it. It&#39;d be a shame to kill you in such a pitiful state, wouldn&#39;t it?&quot; The paladin reaches out a shaky hand and picks up the symbol. She glares at you as she rises to her knees.

&quot;Why...? Not one soldier in this war has seen The Black Knight show mercy. What is this?&quot; You lean against your sword and sigh.

&quot;Honestly... your view of me is so far off base.&quot; She laughs. &quot;All the others took one shot, then gave up as soon as I shut them down. You, on the other hand...&quot; You stare down at the paladin, who&#39;s frantically turning dials on her holy symbol, slipping and cursing from the mud caked on her fingers. You sigh.

&quot;Is it so wrong to want a serious fight, even when I&#39;m so close to victory? You don&#39;t think it strange, do you?&quot;

Daybreak. Something clicks into position, and warm light streams from the folds in the paladin&#39;s cloak. Then, she launches towards you, spear aloft and shimmering. And, before you can react, she crashes into your chest. You fall away, backpedalling instinctively as she follows up with a series of precise strikes, all until she gets predictable enough for you to lead her with a precise kick and knock her back to the ground.

She rocks then flips up out of the mud as if it&#39;s nothing, and she cackles like a madwoman. You follow her gaze and spot a small, pin-prick hole left in your armor, right at the breast.

&quot;Gods... there&#39;s something wrong with you, Black Knight.&quot; Her tongue whips out and swipes a trail of blood from her cheek.

&quot;If that&#39;s your wish, though... I&#39;ll break through that shell of yours. If there&#39;s anything human in there... I swear I&#39;ll liquefy it and wash it away in the north sea...&quot;

Then, she seems to remember herself, righting her posture and coughing.

&quot;Ahem... for Princess Rosana&#39;s sake, of course...&quot; You scoff and hoist your sword back over your shoulder.

&quot;As I thought. All of Rosana&#39;s keepers are the same, after all.&quot;

&quot;I won&#39;t let Abilio&#39;s rabid dogs decide her life for her any longer.&quot; Then, you charge.

With your incredible bulk and your opponent&#39;s speed, some others might choose a purely defensive strategy. You detest the very notion. With each slash, every predictable counter parried, you watch the lightning-quick warrior in front of you waste more and more energy. In a quick break, she unfurls a membranous ring around her neck, fanning herself with it between pants and gasps. For once, you feel thankful for the sweat pooling inside your armor.

The dance between the two of you can&#39;t stop that easily, though. She takes the offensive with repeated sweeps towards your core. There&#39;s no way you could keep up with her strikes one to one, and the few that manage to slip through your guard //hurt//. You&#39;d almost forgotten the feeling.

Her assault keeps up for longer than you expect, and she leaves scorch marks across your cuirass. Then, right when you start to panic, she slips up. For only a split second, your opponent falls off her rhythm, and you whirl around for a quick overhead blow to her arm. When your blade connects and wedges into her shoulder, you&#39;re both equally surprised.

She pulls back, panting and clutching at her wounded arm. You&#39;d have the perfect opportunity to finish this, if you weren&#39;t worn down just like her. You anchor yourself with your sword and gasp for air. An awful, throbbing pain radiates out from your chest. For the first time in years, you wonder if you might be bleeding beneath all that steel. You spit into your helmet and grind your teeth.

&quot;If that&#39;s the most you can take, just tell me where she is. I&#39;ll make it quick.&quot; She laughs, then coughs, then wipes a trickle of blood from her mouth.

&quot;You&#39;re so cruel, Knight. The two of us are putting it all on the line, and you&#39;re thinking of another woman...&quot;

She sneers, and you launch towards her... only to fall to one knee a few feet away. Your body is struggling to keep up with your commands. Up close, you get a better view at the horrific wound you&#39;ve given her. Any ordinary soldier would likely need an amputation, and it&#39;d mean the end of their career. Instead, she switches grips on her spear, allowing the injured hand to focus on directing, rather than pure strength. And, with that, she flies at you again.

As both of your tempos slow, you each struggle to land any significant blows. Hefting your sword to parry has become quite difficult, so you&#39;re forced to reflect most of her sluggish attacks off your vambraces. In each pause, you watch her tremble and sigh, like any small effort might finally push her over the brink.

Then, she centers herself, and something shifts in her expression. She glares at you with cold, desperate determination, and she whispers.

&quot;Maybe not a victory... but I can at least deny you something.&quot; She takes a shaky step your way. &quot;Let&#39;s end this, shall we, Black Knight?&quot; Then, she sets her spear and leans against it.

You oblige her and throw yourself forward with all the strength you can muster. She spits out a short incantation, which you interrupt, dropping your sword overhead and letting its massive weight supply the force, and...

The point of your blade embeds in the mud beside her. Your faces are only inches apart now, and she&#39;s staring down towards your chest. You follow her gaze and see the shaft of her partisan protruding from your stomach. When you shift slightly on your feet, a horrible pain shoots out from your chest and forces you still. 

She laughs, hoarse and weak. Her mouth moves in a strained, silent whisper... then, she sinks to the ground, smearing your armor with blood where she touches it. You steady the spear by its shaft, then you slump down beside her and watch. She&#39;s unresponsive and shivering. You sigh.

...

Then, you hear footsteps behind you... and a figure kneels at your opponent&#39;s side. You look away, but she turns to you and scoffs.

&quot;You took it too godsdamned far... I swear you&#39;re still some petulant girl under all that metal.&quot; 

Rosana fumbles around at the paladin&#39;s side, pulling the holy symbol off her belt and toying with its settings. When it finally responds, she incants, and a warm glow washes out from her in waves. You watch the princess work, stitching your foe&#39;s wounds with glittering suture.

&quot;Sorry... I know you said she was //spirited//, but I wasn&#39;t expecting anything like that.&quot; She snickers, and you watch her finish up with the knight. When the magic around her fades, the princess bends down and presses a short kiss against the top of her head. 

You gulp. Rosana turns and watches you silently... then sighs.

&quot;Fine... c&#39;mere you big baby.&quot; Contrary to what she says, she inches closer to you, unlatching your gauntlet and taking the calloused hand inside between her own. She whispers incantations and massages your palm with her thumbs. Meanwhile, you take hold of the spear still protruding from your torso. When she finishes her singsong prayer, the princess nods to you, and you pull with all of your might.

The partisan slides out and lands softly in the dirt, still drenched in your own dark blood. At the same time, your wound seals itself, leaving only the massive gash in your cuirass as proof it ever happened. Then, Rosana kisses the back of your hand and smiles up at you.

&quot;Now... We have plenty of ground to cover before //this one// wakes, my dear &#39;Black Knight&#39;... Shall we?&quot; You refasten your gauntlet to take Rosana&#39;s hand, and you hoist her knight over your shoulder with the other. [[Then, the three of you follow the north road out of town.|30Days]] &lt;&lt;set $Finished_27 to true&gt;&gt;</tw-passagedata><tw-passagedata pid="64" name="29CW" tags="OOC" position="475,850" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Graphic Violence
* Blood
[[I consent.|29Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="65" name="3Start" tags="BloodlikeEarth" position="700,375" size="100,100">No one from Barracks E talks as they pack their things. There&#39;s tension in the air around the complex, but also a bitter, mourning hope. It all leaves you nauseous. Everyone you pass in the hall seem resolute, more committed than ever to carry out Emil&#39;s wish and deny the gamemasters their satisfaction. You feel a gross sort of pity towards them, throwing away their lives on pointless principle. As much as you&#39;d rather avoid a direct confrontation after living so close with them... They&#39;ve put a very tempting target on their back.

You tuck some backup boots into your pack, sighing. Those you&#39;ve seen leave have done so paired up, with packs filled to bursting with food and water. You, on the other hand, are used to traveling light and haven&#39;t come off as particularly trustworthy to your peers. Your early scouting missions have given you an edge, though. Noted in your journal are several spots beyond the game&#39;s stated range where your collar hadn&#39;t even threatened to go off. If all goes to plan, you&#39;ll set up camp in the foothills of the Carpathians and wait out the early bloodbath in comfort. 

As you&#39;re scrawling in your journal to revise an old route plan, there&#39;s a knock at your door. After a moment&#39;s consideration, you open it, being sure to tuck away your journal.

&quot;Sorry to bother you, ma&#39;am, but you&#39;re Miss Noemi Lis, are you not?&quot; A prim, soft-looking woman greets you. You&#39;ve seen her around the barracks before, but the two of you aren&#39;t acquainted. When you first arrived here, your roommate pointed her out, saying she was some bougie debutante whose family had been in the news recently. The best you can do is a shot in the dark.

&quot;Nobody told me I should be expecting Stawski&#39;s daughter. I would have cleaned up.&quot; She gives you a shy smile, which you take as a victory, and you welcome her into your room. She looks tense for a moment... then sighs.

&quot;You seem to be in high spirits, despite it all.&quot; She sits at the foot of your bed, hands folded in her lap, but you take a little longer to savor towering over her.

&quot;Despite the game? Well, I try to take things in stride. I assume you&#39;re struggling with that.&quot; She nods.

&quot;That&#39;s why I came, actually...&quot; She stares at her hands. &quot;My friend, Nadia, recommended you to me, said you were ex-WS. Special Forces training should make you untouchable here.&quot;

At that, you sit beside her, and she looks you in the eye, shifting just imperceptibly closer. You sigh.

&quot;I&#39;ll admit that much. I can&#39;t say I&#39;m a fair piece for the gamemasters to include. Still...&quot; You lean in close enough to see a slight birthmark on her cheek, stippling up a tiny circle of concealer.

&quot;I don&#39;t see what I get out of this. Indulge me.&quot; She doesn&#39;t back down, sighing and leaning on her hand.

&quot;Four million złoty is a lot to you, but it&#39;s nothing compared to what my father could give for my return.&quot; For a moment, an unfittingly cold sneer crosses her face. &quot;Too shaky? There&#39;s a life insurance policy on me worth double that. Fake my death and cash it if you must.&quot;

When you don&#39;t respond, she moves even closer, practically on top of you, her breath directly mixing with yours. &quot;Fuck it, are you some kind of freak who wants ‘upfront rewards&#39;? Take //me//, for all I care. You&#39;re my only ticket out of this, so whatever you ask, I&#39;ll–&quot; You push her back to an arm&#39;s length, with a rare color in your cheeks. Whatever this strange, intense side of her is, it&#39;s too much for you.

&quot;I get the idea. Please stop talking.&quot; She gives you a weak nod before staring back down at her feet.

&quot;Right... Sorry about that. Would you believe I&#39;d had an off day?&quot; You slip her a water bottle from your pack and sigh.

...

After a few minutes of silent contemplation, your eyes meet again, and you give her a halfhearted nod.

&quot;We can work out the details later, but if you won&#39;t just be getting in my way... I&#39;ll be your partner, miss.&quot; At this, she finally smiles again, before starting to sniffle. You politely avert your gaze, but she slides over to rest against your shoulder.

&quot;Thank you. And, please just call me Kalina.&quot;

&quot;Alright. Then, we should start with some basic ground rules, //Kalina//...&quot;

[[...|3Hike]]</tw-passagedata><tw-passagedata pid="66" name="3Hike" tags="BloodlikeEarth" position="725,850" size="100,100">The hike out of the barracks heading north is harsh, scaring off most of the weaker contestants. That&#39;s why you&#39;re both surprised to pass your old neighbor, Cyryl, making his way alone. You stick to the shadows, but Kalina doesn&#39;t have your training, getting spotted in an instant. Cyryl waves her down.

&quot;Wow, Kalina! I thought you left ages before me. It&#39;s so crazy seeing you here.&quot; She panics, looking instinctively towards you and almost giving away your position in the brush. Thankfully, Cyryl doesn&#39;t seem to notice, and he attributes her worry to something else. &quot;Right... Sorry. You must be uncomfortable talking with just the two of us. It&#39;s weird not having Emil here.&quot;

This seems to get to Kalina, who starts sniffling again. You can&#39;t help but feel a little disappointed in her. Cyryl, meanwhile, tries to comfort her. The two hug. You contemplate reneging on your deal and creeping off to one of your backup camps. That is, until you see a flash of steel.

You throw yourself out from your hiding spot and towards Cyryl, cursing yourself for not intervening sooner... but then he falls to the ground. When he does, you notice the broad head of one of *your* survival knives sticking awkwardly from his neck. Your eyes meet.

&quot;Noemi...? I don&#39;t understand. Why–&quot; on pure instinct, you bring your boot down onto his throat, silencing him and... a few moments later... killing him.

When you look up towards Kalina, she&#39;s in a daze, with Cyryl&#39;s blood coating her cheek. She responds to your horrified look with a laugh and a small smile.

&quot;What&#39;s wrong, Miss Lis? Aren&#39;t you going to congratulate me?&quot; 

&quot;I scored us a &#39;&#39;point&#39;&#39;.&quot; When you don&#39;t respond, she bends down to retrieve the knife you lent her, slurring her words to nobody in particular, &quot;I don&#39;t get what the big deal is,&quot; and &quot;That was so easy,&quot; as she wipes her cheek against the collar of her blouse.

[[(Return Home)|30Days]] &lt;&lt;set $Finished_3 to true&gt;&gt;</tw-passagedata><tw-passagedata pid="67" name="3CW" tags="OOC" position="850,850" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Graphic Violence
* Sexual Coercion (Discussed)
* Blood
[[I consent.|3Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="68" name="30Start" tags="BloodlikeEarth" position="975,850" size="100,100">Safa pulls you into an unused back room, giggling.

&quot;C&#39;mon, it&#39;s not much further!&quot; When she stops, you keep going and trip over her feet, only staying upright because she catches you by the waist.

&quot;Alright... Open your eyes, now. You&#39;ll love it.&quot; You do as she says... and you&#39;re met with a strange sight.

...

There&#39;s a chair in the center of the room... and you&#39;re sitting on it. More specifically, you //see yourself// sitting on it. Instinctively, you look yourself over from your hands to your feet. Once you&#39;re sure nothing&#39;s happened to you... or &#39;yourself&#39;... or... &#39;the body you inhabit&#39;... you look over to Safa.

&quot;W-what is this? Why does it look so much like me?&quot; She snickers, which you roll your eyes at.

&quot;Well, y&#39;know how I was getting samples of your hair and the like?&quot; You grimace. &quot;That was all to make //this//.&quot; When you only look more horrified, she continues.

&quot;You told me you get lonely when I work overtime, didn&#39;t you? So... I snatched some prototypes from the biopolymers division and put together a second Yawen who could keep you company...&quot;

You don&#39;t respond, which seems to worry Safa. Without thinking, you&#39;ve inched closer to //it//, and she steps forward to follow you with her tail between her legs.

&quot;Is it no good...?&quot; You whirl around to bite back at her.

&quot;Are you serious?! In what world would anyone want something creepy like this?&quot; She shrinks. You feel a bit of pity for her... but you can&#39;t keep back the disgust rising into your throat. &quot;This is unethical on so many levels! You didn&#39;t even ask me how I felt before thrusting something like this on me! I hate it!!&quot; But, rather than looking at you, Safa is looking at the room&#39;s center in horror. You follow her gaze and see...

//It// is moving. When it looks your way, your heart starts beating like crazy. Then, //it// speaks, mimicking you in a soft, melodic voice.

&quot;@@font-variant:small-caps;I&#39;m sorry, ma&#39;am... If that&#39;s how you truly feel, Miss Safa can disassemble me.@@&quot; Something in your chest plummets into the earth. When you look at Safa, she only shrugs, and before you notice it, you&#39;re at //its// side.

&quot;N-no! That wouldn&#39;t make anything better. Don&#39;t say that...&quot; //It// looks up at you, and you&#39;re struck by an angle of yourself that you&#39;ve never seen before...

//She// looks so cute and helpless like this... Without thinking, you clutch her to your chest and glare back at Safa.

&quot;Don&#39;t put ideas like that in her head!&quot; She cocks her head at you.

&quot;So &#39;//it//&#39; is a &#39;//she//&#39; now...?&quot; You gulp, and she continues. &quot;If you like it, that&#39;s fine, but it &#39;&#39;is&#39;&#39; just a doll. You don&#39;t have to pretend to like it for anyone&#39;s sake.&quot;

Unbidden hot tears start to roll down your cheeks. At the same moment you notice yourself trembling, the doll wraps her cold hands around your own and smiles up at you.

&quot;@@font-variant:small-caps;It&#39;s okay... Just let it out. There&#39;s nothing wrong with you for feeling this way, Big Sister...@@&quot; You smile... then blush. Then when you look to Safa, she stammers.

&quot;R-right... about that... I might have made a few tweaks in testing. If you want me to change it, I could—&quot; You glower and squeeze the doll tighter.

&quot;Don&#39;t touch her!&quot; Safa gulps, but the doll just laughs and brushes her cheek against yours. Her synthetic skin is just as soft as the real thing... You shiver.

&quot;@@font-variant:small-caps;It&#39;s alright, Big Sis! Miss Safa just wants you to be comfortable, same as me.@@&quot; She stands and offers you her seat. When you take it, she sits across your lap and leans against you. Her hair smells faintly of your shampoo. No matter what&#39;s in your brain, your body can&#39;t accept her as anything but another human being.

She leans in, stroking your cheek as she goes, and whispers to you.

&quot;@@font-variant:small-caps;But... to be honest... it feels good to hear that you like me as I am.@@&quot; The doll shifts around in your lap, and you&#39;re suddenly aware of the warmth radiating out from her and into you. Your arms wrap instinctively around her waist. &quot;@@font-variant:small-caps;I want to become a sister you can rely on, Yawen...@@&quot; She leans in closer, and her soft breath brushes against your neck. Your heart starts to race... 

Safa steps to your side and sighs.

&quot;M-maybe we should call it a night, now...&quot; You tense up and squeeze the doll closer to you, causing her to whimper. Safa raises her hands in a sign of surrender, and you settle back down. &quot;I didn&#39;t expect this to affect you so much...&quot;

You sigh and cast your eyes to the floor.

&quot;Sorry, but... I can&#39;t let you hurt her. We&#39;re the only ones who can protect her...&quot; Safa watches you... then sighs.

&quot;I wasn&#39;t planning on it!&quot; You look up towards her, and she&#39;s pouting. &quot;Geez, Yawen... I don&#39;t know where this sudden change of heart is coming from, but it&#39;s not like I //wanted// to scrap her. Have &#39;&#39;some&#39;&#39; faith in me...&quot; You smile... but you&#39;re still reluctant to let the doll go. Then, she whispers to you.

&quot;@@font-variant:small-caps;It&#39;s okay, sis... I trust Miss Safa. Nothing is going to happen to me.@@&quot; Then, she stands. You try to hold on for a second longer, but she insists. &quot;@@font-variant:small-caps;You have work tomorrow, don&#39;t you? If you power me on when you get up, we can chat until you have to go!@@&quot; The doll turns towards Safa.

&quot;@@font-variant:small-caps;You&#39;ll show her how, won&#39;t you?@@&quot; She nods, and the doll smiles down at you. When you stand, you realize that your doll actually comes out a few inches shorter than you, rather than a perfect match.

Then, she leans up and kisses you.

&quot;@@font-variant:small-caps;I&#39;ll see you both in the morning!@@&quot; And she steps off, bowing her head to Safa as she goes. You blush. [[When Safa steps forward and takes your hand, you cling to her all the way into bed.|30Days]] &lt;&lt;set $Finished_28 to true&gt;&gt;</tw-passagedata><tw-passagedata pid="69" name="30CW" tags="OOC" position="1100,850" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Incest (It&#39;s complicated)
[[I consent.|30Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="70" name="31Start" tags="Blood" position="1225,850" size="100,100">\ &lt;&lt;set $v31_Day to 0&gt;&gt; &lt;&lt;set $v31_Attune to 0&gt;&gt; &lt;&lt;set $v31_LastSession to &quot;&quot;&gt;&gt;
\ &lt;&lt;set $v31_didLust to false&gt;&gt; &lt;&lt;set $v31_didGlut to false&gt;&gt; &lt;&lt;set $v31_didGree to false&gt;&gt; &lt;&lt;set $v31_didSlot to false&gt;&gt;
\ &lt;&lt;set $v31_didWrat to false&gt;&gt; &lt;&lt;set $v31_didEnvy to false&gt;&gt; &lt;&lt;set $v31_didPrid to false&gt;&gt; &lt;!-- Curse you, thorough rereadability standards --&gt;
\ &lt;&lt;if ndef $Finished_31&gt;&gt; &lt;&lt;set $Finished_31 to 0&gt;&gt; &lt;&lt;set $v31_5_faked to false&gt;&gt; &lt;&lt;/if&gt;&gt;

Sweat drips down your brow as you sprint through the barren halls of the witch&#39;s lair.

You cry out to her over and over, but even as your voice goes hoarse, Lily is nowhere to be seen. Minions of the witch spot you easily, but the most you spare them is a croaked-out incantation and a quick glare. You run out of breath as you reach the innermost sanctum, where your allies first beat the retreat that barely saved your lives. Your lungs burn, and the adrenaline propelling you forward has all but run out. You slink down against the nearest wall.

Then, you hear a familiar voice, and tears rush straight to your eyes.

&quot;Iris?!&quot; From a hidden alcove just around the corner, Lily emerges and charges to your side. &quot;Are you hurt?&quot; She kneels beside you, and you&#39;re tempted to slap her. Instead, you shake your head.

&quot;Just exhausted. What the hell were you thinking running back in here?&quot; She sinks and stares at the floor, before finally stammering out.

&quot;I-I lost something... I knew if I left without it, we&#39;d be in serious trouble.&quot; When you only glare her way, she continues. &quot;Fine! I dropped my Holy Symbol in the struggle and came back for it.&quot; You curse.

Then, you take her hand in yours and squeeze it tight.

&quot;That thing isn&#39;t worth your life. We&#39;re getting out of here now!&quot; You try to push yourself up to your feet, only for your legs to buckle at the knees. Lily supports you at the shoulder and guides you to a standing position, but pushing yourself forward proves a colossal task.

With horrific timing, you hear a familiar cackling echo through the halls, and you start to panic. Lily doesn&#39;t seem to share your worry. You stagger towards the exit, but she just stays put and frowns. You yank on her arm.

&quot;Come on! We don&#39;t have much time...&quot; Your legs give out again, and it&#39;s all you can do to lean against the wall and pull yourself forward. Lily, on the other hand, strides forwards and stands in front of you, where she takes both of your hands between hers. She smiles at you.

&quot;You worry too much, Iris. It&#39;s all going to be okay soon.&quot; Your eyes go wide. You start to yell when she squeezes your hands tight... and you hear a sharp, metallic click.

Lily steps back, and you realize she&#39;s bound your wrists together in a tight pair of manacles. Instinct takes over, and you reach to your side, clutching at your Arcane Focus. Your hands slap against the bare metal of your breastplate. Only then do you see the awful grin across Lily&#39;s face as she twirls your focus between her fingers. You charge towards her, making it all of a few feet before you collapse face-first onto the grimy floor.

She crouches at your side and casually flings your last hope to the side, where it shatters against the far wall.

&quot;Honestly... you need to be more careful, Iris. Lady Agares will be here soon, and she&#39;ll be upset if you&#39;ve managed to hurt yourself.&quot; Lily carefully dotes over you, tidying your hair and wiping mud from your face as you desperately fight against your restraints.

Deep down, you&#39;ve already realized it&#39;s hopeless. As she circles around to lock your ankles in another set of manacles, you start to cry. She watches you with a believable sense of pity, but you&#39;re not sure what you can believe anymore. It&#39;s the most you can do to whimper out one question.

&quot;What did she do to you...?&quot;

Lily frowns down at you... then shakes her head.

&quot;Nothing at all. Lady Agares only had to show me the light, and then I knew.&quot; She sighs and crouches down beside you.

&quot;It was for the best. I&#39;m free now! And... with her help... you can be, too.&quot;

That awful cackling only grows louder and louder, while Lily sits contented at your side and brushes your hair.

[[And then...|31Captured]]</tw-passagedata><tw-passagedata pid="71" name="31Captured" tags="Blood" position="100,975" size="100,100">You awake, still manacled, in an unfamiliar, dimly lit room.

With a quick glance you can see the totality of the filthy room, and you realize that your side of it is encased in a large, metal cage. The other side is strewn with papers and ritual implements which you shudder to see. Then, a figure steps in through the door, and you glower, hackles raised. The witch cackles.

&quot;It seems that no introductions are needed, my pet. But, feel free to address me as &#39;Lady Agares&#39;, &#39;my queen&#39;, &#39;mistress&#39;... whatever calls to you.&quot; Her smug expression sets you off immediately, and a growl rises up in your throat.

&quot;I don&#39;t give a fuck who you are. If I have to break out of here and wring your neck to save Lily, I&#39;ll make it happen.&quot; This only sets her laughing again.

&quot;Oh... I love the willful ones so much. I&#39;m glad that girl recommended you.&quot; You raise an eyebrow her way, but she waves it off. &quot;Well... we might as well get started while we wait for her.&quot;

She surveys the room around her then gets to work righting the ritual components around the room&#39;s edge, directing them all back towards your cage. You can&#39;t make heads or tails of their purpose, but they set you on edge. The witch casually chats with you while she works.

&quot;Whoever sent you after my head must have told you that I worship Osmodai. Am I right to assume that?&quot; You grunt, which she takes as an affirmative and continues. &quot;Well, it&#39;s been a busy season for the archfiend who brokers my connection, and it falls to me to dig up new recruits.&quot; She turns and fixes you with an awful sneer.

&quot;As I give nothing but my best to the All-Mother, I&#39;ve developed the perfect method for turning this world&#39;s creatures to Her embrace. But, I hardly need to explain it, seeing as you&#39;ve already witnessed my latest work in action.&quot; A chill runs down your spine, and she sets off cackling again.

You grind your teeth as you watch her. Part of you wants to charge helplessly at the bars of your cage, but you hold it back. Right now, bound and disarmed, you&#39;re totally at her mercy, and if anything happens to you... you can only imagine what would become of Lily.

The witch levels a perverse grin your way.

&quot;Still... a natural-born sorcerer... it&#39;s been years since I&#39;ve received such an interesting toy.&quot; She steps closer to examine you, and you bare your teeth at her to no avail. &quot;You might last a little longer than the others, but...&quot; Then, with only a moment&#39;s consideration, she stands tall and nods.

&quot;Four days. By the next full moon, I&#39;ll have you mewling like a kitten for me.&quot; In spite of yourself, you blush. No matter how hard you try to hide from her, your new cage leaves you pitifully exposed from all angles.

Agares sets off again with that mocking laugh, only to be cut off by a sound at the door. When the witch goes quiet, you turn back around and... you see her.

Lily stands in the doorway, having swapped her armor for a cropped gown, covered top-to-bottom in black lace couture. In all your years together, you&#39;ve never seen her in something so daring. The witch seems to share your impression of her, but rather than hide her face, she openly licks her lips.

&quot;Sweet //Seire//... you clean up nicer than I expected. Are you here to see the new pet?&quot; She steps to the side, giving the two of you a clear view of one another. Lily flushes when she sees you, but she shakes it off and faces the witch.

&quot;Yes, Lady Agares. I have the garments you requested.&quot; The witch nods, then Lily adds on. &quot;I&#39;ve also been told to inform you of a commotion on the second level&#39;s west wing. Your lieutenant requests your judgement as soon as possible.&quot;

The witch groans, then turns to study you a moment longer. She sighs.

&quot;It seems playtime will have to wait until the morning, pet.&quot; When you roll your eyes, she adds. &quot;Don&#39;t look too eager. I&#39;m sure Seire here would be all too happy to start you off with a trial of Lust.&quot; Lily stammers something at her, but you tune it out. Then, it&#39;s just you and Lily in the room.

She crosses over towards your cage, where she watches you silently. You&#39;re glad she&#39;s okay... but looking at her right now isn&#39;t easy. While you&#39;re busy pouting, she opens the door to your cage and tucks the key back under her dress. Lily crouches at your side and whispers down to you.

&quot;Iris...&quot; She reaches out and touches your shoulder, and you jump. She wilts before starting again. &quot;I know this will be hard on you. I&#39;m sorry for that... but—&quot; You whirl around towards her, and you swell and...

You turn away and sigh. Lily inches closer, and your instincts scream for you to dive straight into her chest and cry your heart out. Instead, you hold all that energy inside you and grind your teeth. The most you can manage is a whisper.

&quot;I don&#39;t know what the witch did to you, but... the Lily I know would never do any of this.&quot;

&quot;Please, just... go.&quot;

She hovers a hand over you for a moment... then pulls it back and sighs.

&quot;Okay. I want to get through to you, Iris, but... but I can wait.&quot; Something soft falls onto the ground behind you as Lily steps out through your cage door. &quot;Sweet dreams. We&#39;ll talk tomorrow.&quot;

The door shuts behind her... and you&#39;re alone.

When you splay out to try and rest, you notice a neat bundle of fabric by the door. It unfolds into a simple, modest nightdress, still leagues beyond the rags Agares&#39;s minions left you with. Stripping in such an exposed space makes you uncomfortable, but you push through it to change. That night, in the least filthy corner of the cell, [[your sleep is fitful and dreamless.|31Hub][$v31_Day += 1]]</tw-passagedata><tw-passagedata pid="72" name="31Hub" tags="Blood" position="225,975" size="100,100">&lt;&lt;if $v31_Day % 2 == 1&gt;&gt;&lt;&lt;set $v31_today to &quot;today&quot;&gt;&gt;&lt;&lt;set $v31_yesterday to &quot;last night&quot;&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;set $v31_today to &quot;tonight&quot;&gt;&gt;&lt;&lt;set $v31_yesterday to &quot;this morning&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;if $v31_Attune&gt;75 and $v31_Day &gt;= 3&gt;&gt;&lt;&lt;set $v31_Name to &quot;Seire&quot;&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;set $v31_Name to &quot;Lily&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;\
&lt;&lt;ctp &quot;times&quot; persist&gt;&gt;&lt;&lt;ctpNext clear&gt;&gt;
It&#39;s the first morning of your new life here, locked in this filthy cage. &#39;Agares&#39; says she has a plan for you. Even if you don&#39;t believe a word of it, you&#39;ll need to make it through her games if you want a chance at saving Lily from whatever has come over her. For the first time in a long time, your head is clear, and you feel a sense of purpose.

The witch approaches, and she slides a sheet of yellowed paper just beyond your cage&#39;s bars. On it are neat, academic notes, terminating in a chart with seven steps. She starts.

&quot;Good morning, my pet. Are you excited to start testing?&quot; You roll your eyes, and she titters. &quot;Well, it&#39;s the only way you&#39;ll be getting supper, so I think you&#39;ll come to like it soon.&quot; Your stomach rumbles in response. The thought of a hunger strike has come to you, but you&#39;ll need your full fighting strength to stand a chance at escape. You peruse the options laid out before you, more to soothe yourself than to glean any deeper understanding.

Without giving it too much thought, you make your first choice and slide the paper back to Agares.
\&lt;&lt;ctpNext clear&gt;&gt;\
It&#39;s your first evening in the cage. Lily comes around to bring you some bread crusts and warm soup. The two of you are able to chat for a bit through the bars of your cage, but she spends the whole time insisting that all of this is what she wanted and that she thinks you should want it too. You can&#39;t bear to hear her like that, so you tune it all out...

When she leaves, Lily smiles back at you, and Agares enters sneering in her wake.

&quot;Looks like you enjoyed the food. Well, no better time to keep training, is there?&quot; You groan and throw your bowl against the cage&#39;s wall.

&quot;I&#39;m already sick of this. Whatever spell you put on Lily, she&#39;ll break it soon, and we&#39;ll cut your throat before we leave this place.&quot;

The witch laughs.

&quot;Oh please, it hardly takes magic to turn a girl like my //Seire//. Hells, I didn&#39;t even have to put her through my program.&quot; You turn away, but she steps in closer to gloat.

&quot;All it took was one whisper, and she was ready to renounce it all. I&#39;d tell you what I told her, but... I think you already know, don&#39;t you?&quot; She pulls in close and grins at you, then she jumps back and curses when you kick at the bars of your cage. A dull ache spreads up from your foot, and you grit your teeth to deny her the satisfaction of your pain.

&quot;I swear, I&#39;ve never seen such a disobedient mutt in my life. It&#39;ll be so satisfying to finally break you...&quot;

With that, she slips you the same notes from this morning and watches in perverse excitement as you weigh your options.
\&lt;&lt;ctpNext clear&gt;&gt;\
You hardly believe it without sight of the sun, but you&#39;ve reached your second morning in the cage.

Lily comes by again, this time with a thin, diluted salt pork stew to hold you over. You&#39;re tempted to throw the food back in her face, strike her, anything to provoke a reaction that might bring her back to her senses... instead, you quietly eat, and she holds your hand through your meal slot. She rubs small circles into your palm and watches you.

&quot;This would all be over if you just listened to Lady Agares, you know...?&quot; Her gaze is soft, genuine, and it makes you shudder. When you were kids, you always got into fights over the dumbest things, and she&#39;d give you that exact look. Sweet... consoling... pure... you can&#39;t believe that girl could ever be tainted like this.

You shake your head.

&quot;Not happening. Someone needs to punish her for what she&#39;s done to you.&quot; Lily groans and pulls her hand away.

&quot;Am I not allowed to change? Or are you more invested in some stupid, dead dragon than what I want?!&quot; She turns away from your cage and pouts. You reach out to her through the bars, but she ignores you.

The two of you sit in silence. You wolf down what&#39;s left of your food, then you sigh.

&quot;I&#39;m sorry... but I can&#39;t forgive her.&quot; Lily hugs her legs, and you continue.

&quot;Even if Agares hasn&#39;t brainwashed you, she&#39;s manipulating you to her ends! She only //wants// the version of you that obeys her!&quot; She stands then turns to you, glowering and teary-eyed. You fall silent.

Then, she whispers to you, her voice weak but full of vitriol.

&quot;I know.&quot; She takes in a deep breath, clearly holding back a sob... then she sighs. &quot;She&#39;s not that different from you, in that regard...&quot;

Then, Lily walks out of view. 

Agares comes in soon after, but she stays quiet. For a witch, she has a strange sense of social propriety. She doesn&#39;t have to remind you of your options at this point, so she waits quietly while you decide.

The bitter silence gives you too much space to think about Lily&#39;s words, so you spit at Agares and throw barbs her way until she goes back to her normal, cocky self. You feel much more at ease making your choice with her sneering your way.
\&lt;&lt;ctpNext clear&gt;&gt;\
Lily doesn&#39;t come this evening, instead Agares has a stout, skeletal minion bring you your supper. It&#39;s not very talkative, which gives you some time to think.

If what the witch told you was right, this evening is the halfway point between your arrival and your total transformation. You steel yourself and take stock of your surroundings. Not much has changed in the sleek stone room, but... you spot &#39;&#39;one&#39;&#39; thing.

Atop a hanging scroll on a nearby table, you can make out the weathered edges of an arcane focus, presumably left there by the witch. If you reach out with your cuffed hands, you should be able to yank the scroll down and drop the focus within reach of your cage. Still... It could be a trap.

You&#39;ll have to decide for yourself when the right time for an escape is. You could go right to it and risk getting caught... but playing along with Agares&#39;s games could provide you with a better opportunity...

When the witch comes by to hear your choice, you do what you think is right.
\&lt;&lt;ctpNext clear&gt;&gt;\
As soon as you hear her footsteps, you shoot up. &lt;&lt;done&gt;&gt;&lt;&lt;addclass &quot;#tortOptions&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;/done&gt;&gt;

There, in the room&#39;s center, is $v31_Name. When your eyes meet, she gives you a shy smile, before sliding a meal into your cage. You ignore it to watch her as she crouches down and sits across from you.

&quot;It&#39;ll be a while before Agares comes. Shall we talk?&quot; You nod, and she settles in. &quot;You probably have a lot of questions... go ahead and ask.&quot;

Without a second of thought, you go straight to your main concern.

&quot;Why? Why do all of this?&quot; $v31_Name shuffles around where she sits. Rather than wait for an answer you know will be evasive, you shift tactics.

&quot;Is Agares threatening you?&quot; She shakes her head. &quot;Is she offering you something in exchange for this?&quot; Another no. &quot;Then, did I do something to hurt you?&quot; She sits still for a moment... then she whispers.

&quot;No. Never. Or... nothing I could blame you for, at least...&quot; $v31_Name meets your gaze... then she sighs.

&quot;I&#39;m sorry... Osmodai says we&#39;re supposed to be honest about our wants, but...&quot; She reaches through the bars and takes your cuffed hand in hers. Then she squeezes it softly, almost imperceptibly so. &quot;I&#39;m having a hard time unlearning what they taught me in seminary.&quot;

You massage $v31_Name&#39;s hand between yours. Once the initial frustration washes over you... it leaves something else behind... and you realize you can accept this part of her. Something sets in place within your heart... and you smile at her.

&quot;Alright. I can live with that.&quot; $v31_Name&#39;s eyes widen... then she leans against your cage and grins. While she&#39;s off-guard, you pull in and kiss her on the cheek. You both giggle... and a thought comes into your head.

&quot;Then... if we understand one another... What are we going to do about Agares?&quot;

She sighs.

&quot;I&#39;m conflicted. She&#39;s helped me break away from Nekheziel&#39;s dogma, but... Well, it&#39;s not my place to judge her for what she&#39;s done to you.&quot; $v31_Name grinds her teeth, and you get a feeling how she //would// judge Agares given the chance.

&quot;If you wanted to stay for some reason, I&#39;d stay beside you. If you choose to leave, I&#39;ll fight at your side as well as I can in this state.&quot; She rests on her hands and watches you.

&quot;What do you think? What is it that you want, Iris?&quot;

You swallow. Even with all the alone time in your cell between tests and meals, you haven&#39;t put much thought into it. You&#39;ve been working under the assumption your only option is to grab $v31_Name and run. Still... it might be worth some consideration.
&lt;span id=&quot;5_fakechoice&quot;&gt;
&lt;&lt;linkappend &quot;\&quot;None of her tests have been too harsh. Maybe she&#39;ll let us go if they all fail?\&quot;&quot;&gt;&gt; $v31_Name laughs.

&lt;&lt;if $v31_Attune &lt; 100&gt;&gt;&quot;Sorry... but I don&#39;t think we should rely on that. Agares has a terrifying dedication to this project. If you disprove her hypothesis, that&#39;ll only make her want to test you more.&quot; You groan.&lt;&lt;else&gt;&gt;&quot;Sorry... but I think they&#39;ve already done their job. The second she realizes that, she&#39;ll never let you go.&quot;&lt;&lt;/if&gt;&gt;

&quot;Then...&quot; &lt;&lt;set $v31_5_faked to true&gt;&gt;
&lt;&lt;/linkappend&gt;&gt;&lt;/span&gt;
&lt;span id = &quot;5_realchoices&quot;&gt;\
&lt;&lt;link &quot;\&quot;Maybe there&#39;s something to her whole dogma... If it did so much for you, maybe I need to hear her out.\&quot;&quot;&gt;&gt; &lt;&lt;replace &quot;#5_realchoices&quot;&gt;&gt;\
&quot;Maybe there&#39;s something to her whole dogma... If it did so much for you, maybe I need to hear her out.&quot; $v31_Name smiles. &lt;&lt;if not $v31_5_faked&gt;&gt;&lt;&lt;replace &quot;#5_fakechoice&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/if&gt;&gt;

&quot;You don&#39;t have to go through all that for me, but if you really want to...&quot; She coughs. &quot;Just... signal for me if you change your mind, and I&#39;ll come running. Understood?&quot; You nod, and not long after, Agares steps in to see the two of you chatting idly. &lt;&lt;removeclass &quot;#tortOptions&quot; &quot;hide&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;\&quot;She&#39;s dangerous. We need to plot out the right time and escape.\&quot;&quot;&gt;&gt; &lt;&lt;replace &quot;#5_realchoices&quot;&gt;&gt;\
&quot;She&#39;s dangerous. We need to plot out the right time and escape.&quot; $v31_Name nods. &lt;&lt;if not $v31_5_faked&gt;&gt;&lt;&lt;replace &quot;#5_fakechoice&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/if&gt;&gt;

&quot;Understood. I doubt we&#39;ll get out without a fight, so I&#39;ll do what I can to prepare. Whenever you&#39;re ready, give me our old signal.&quot;

You snicker.

&quot;You still remember that?&quot; She blushes... then nods again. And... not long after, Agares enters the room. &lt;&lt;removeclass &quot;#tortOptions&quot; &quot;hide&quot;&gt;&gt;
&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;if $v31_Attune &lt; 100&gt;&gt;&lt;&lt;link &quot;\&quot;Our chances will only get worse over time. We need to get moving now.\&quot;&quot;&gt;&gt; &lt;&lt;replace &quot;#5_realchoices&quot;&gt;&gt;\
&quot;Our chances will only get worse over time. We need to get moving now.&quot; $v31_Name jumps to her feet and nods as she pulls the cage&#39;s key from her dress and throws open the door. Right as she does, the door swings open, and the witch barges in.

You take one look towards the Arcane Focus you spotted, and you lunge towards it.

[[And...|31Escape]]
&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;/span&gt;
\&lt;&lt;ctpNext clear&gt;&gt;\ &lt;&lt;done&gt;&gt;&lt;&lt;removeclass &quot;#tortOptions&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;/done&gt;&gt;
On your final night in the cell, you and $v31_Name just chat.

You talk of your old adventures, memories from your childhood together, and your goals once you leave this wretched place. Even once Agares comes to deliver your final trial, your spirits stay high.
\&lt;&lt;ctpNext clear&gt;&gt;\
In the morning, $v31_Name and Agares arrive together. The witch stands proud in front of your cage, sneering over you.

&quot;Well then, pet... this is it.&quot;

&quot;Are you ready to accept our dark lady Osmodai into your heart?&quot;

You know what you have to do.
\&lt;&lt;/ctp&gt;&gt;&lt;&lt;if $v31_PurgeCTP&gt;&gt;&lt;&lt;ctpBack &quot;times&quot;&gt;&gt;&lt;&lt;ctpBack &quot;times&quot;&gt;&gt;&lt;&lt;ctpBack &quot;times&quot;&gt;&gt;&lt;&lt;ctpBack &quot;times&quot;&gt;&gt;&lt;&lt;ctpBack &quot;times&quot;&gt;&gt;&lt;&lt;ctpBack &quot;times&quot;&gt;&gt;&lt;&lt;ctpBack &quot;times&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;ctpAdvance &quot;times&quot;&gt;&gt;

&lt;span id = &quot;tortOptions&quot;&gt;
Your attunement is &lt;&lt;if $v31_Attune &gt;= 100 &gt;&gt;awakened&lt;&lt;elseif $v31_Attune &gt; 75 &gt;&gt;potent&lt;&lt;elseif $v31_Attune &gt; 50&gt;&gt;viable&lt;&lt;elseif $v31_Attune &gt; 0&gt;&gt;stirring&lt;&lt;else&gt;&gt;nonexistant&lt;&lt;/if&gt;&gt;...
&lt;div id=&quot;hzhealthbarbkg&quot; class=&quot;hzbarbkg&quot;&gt;&lt;div id=&quot;hzhealthbar&quot; class=&quot;hzbar&quot;&gt;&lt;/div&gt;&lt;/div&gt;
\&lt;&lt;script&gt;&gt;$(document).one(&#39;:passageend&#39;, function (ev) {
	Health2(State.variables.v31_Attune, 100, &quot;hzhealthbar&quot;, true, ev.content);
});&lt;&lt;/script&gt;&gt;\
&lt;&lt;if not $v31_didLust&gt;&gt;&lt;&lt;if $v31_Day &gt;= 4&gt;&gt;&lt;&lt;link &quot;Lust&quot;&gt;&gt;&lt;&lt;replace &quot;#tortOptions&quot;&gt;&gt;
&quot;Fine. A trial of L...&quot; You cough. &quot;A trial of Lust... Let&#39;s do that.&quot;&lt;&lt;/replace&gt;&gt; &lt;&lt;removeclass &quot;#proceed&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;removeclass &quot;#resignLust&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;else&gt;&gt;@@color:#bf3144;==Lust==@@ (Not happening.)&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;if not $v31_didGlut&gt;&gt;
&lt;&lt;link &quot;Gluttony&quot;&gt;&gt;&lt;&lt;replace &quot;#tortOptions&quot;&gt;&gt;&quot;Gluttony. I at least get to eat something nice, right?&quot;&lt;&lt;/replace&gt;&gt; &lt;&lt;removeclass &quot;#proceed&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;removeclass &quot;#resignGlut&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;if (not $v31_didGree) and false&gt;&gt;&lt;&lt;link &quot;Greed&quot;&gt;&gt;&lt;&lt;replace &quot;#tortOptions&quot;&gt;&gt;
&quot;Do your worst with Greed. If you think you can bribe me into your cult, prepare to be shocked.&quot;&lt;&lt;/replace&gt;&gt; &lt;&lt;removeclass &quot;#proceed&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;removeclass &quot;#resignGree&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;else&gt;&gt;
@@color:#bf3144;==Greed==@@ (Crossed out... seems the witch&#39;s method isn&#39;t perfect.)&lt;&lt;/if&gt;&gt;&lt;&lt;if not $v31_didSlot&gt;&gt;&lt;&lt;if $v31_Day % 2 == 1 and $v31_Day != 4 and $v31_Day != 3&gt;&gt;
&lt;&lt;link &quot;Sloth&quot;&gt;&gt;&lt;&lt;replace &quot;#tortOptions&quot;&gt;&gt;&quot;If I pick Sloth, can I stop thinking about this?&quot; Agares watches you for a moment... then nods slowly. &quot;Fine. Do that.&quot;&lt;&lt;/replace&gt;&gt;&lt;&lt;removeclass &quot;#proceed&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;removeclass &quot;#resignSlot&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;else&gt;&gt;
@@color:#bf3144;==Sloth==@@ (Too tense for that right now...)&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;if not $v31_didWrat&gt;&gt;
&lt;&lt;link &quot;Wrath&quot;&gt;&gt;&lt;&lt;replace &quot;#tortOptions&quot;&gt;&gt;&quot;Does a trial of wrath mean I get to take out my anger on you?&quot; Agares rolls her eyes. &quot;Actually... don&#39;t answer. I want it to be a surprise.&quot;&lt;&lt;/replace&gt;&gt; &lt;&lt;removeclass &quot;#proceed&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;removeclass &quot;#resignWrat&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;if not $v31_didEnvy&gt;&gt;
&lt;&lt;if $v31_Day &lt; 3 &gt;&gt;&lt;&lt;link &quot;Envy&quot;&gt;&gt;&lt;&lt;replace &quot;#tortOptions&quot;&gt;&gt;&quot;Can&#39;t say I&#39;ve ever Envied anyone before.&quot; You shrug. &quot;Let&#39;s see what that one entails.&quot;&lt;&lt;/replace&gt;&gt;&lt;&lt;removeclass &quot;#proceed&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;removeclass &quot;#resignEnvy&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;elseif $v31_Day &gt;= 5&gt;&gt;
@@color:#bf3144;==Envy==@@ ($v31_Name has advised against this one...)&lt;&lt;else&gt;&gt;
@@color:#bf3144;==Envy==@@ (Not in the mood...)&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;if not $v31_didPrid&gt;&gt;
&lt;&lt;link &quot;Pride&quot;&gt;&gt;&lt;&lt;replace &quot;#tortOptions&quot;&gt;&gt;&quot;A trial of Pride.&quot; You smirk at Agares. &quot;If you&#39;ll be bowing before me and grovelling, I&#39;m excited to see it.&quot;&lt;&lt;/replace&gt;&gt; &lt;&lt;removeclass &quot;#proceed&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;removeclass &quot;#resignPrid&quot; &quot;hide&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;if $v31_Day &gt;= 4&gt;&gt;
An arcane focus sits on a table just within reach of your cage, if you play your cards right... &lt;&lt;if $v31_Attune &gt;= 100&gt;&gt;

[[Grab it and offer your services to Agares and her cause...|31Submit]]
&lt;&lt;elseif $v31_Day &gt;= 5&gt;&gt;

&lt;&lt;if $v31_Attune&gt;75&gt;&gt;[[Grab it and signal to Seire.|31Escape]]&lt;&lt;else&gt;&gt;[[Grab it and signal to Lily.|31Escape]]&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt; But you&#39;re not sure you could get $v31_Name to come with you right now. You can&#39;t leave without her.
\&lt;&lt;/if&gt;&gt;
\&lt;&lt;/if&gt;&gt;&lt;/span&gt;&lt;span id=&quot;proceed&quot; class = &quot;hide&quot;&gt;

She &lt;&lt;print [&quot;cackles&quot;, &quot;titters&quot;, &quot;grins&quot;, &quot;smirks&quot;, &quot;laughs&quot;, &quot;smiles down at you&quot;, &quot;licks her lips&quot;, &quot;bites her lip&quot;, &quot;murmurs to herself&quot;, &quot;convulses in ecstasy&quot;, &quot;reaches through the bars and pets your head&quot;, &quot;sighs&quot;, &quot;seems unsure until you repeat yourself several times, leaving you red in the face&quot;, &quot;pretends not to hear you until you bow your head&quot;, &quot;dresses you down with her eyes and seems satisfied&quot;].pluck()&gt;&gt;...

&lt;&lt;print [&quot;\&quot;If that is your wish, my pet.\&quot;&quot;, &quot;\&quot;Do you even hear yourself right now? Sooooo pathetic...\&quot;&quot;, &quot;\&quot;Sweet Seire was so wise to recommend you. I really should reward her.\&quot;&quot;, &quot;\&quot;You sound so defeated, pet. Don&#39;t worry, I&#39;m sure someone is coming to save you... some day.\&quot;&quot;, &quot;\&quot;In Her Name... it&#39;s such a shame we couldn&#39;t bring your friends along to watch you change like this...\&quot;&quot;, &quot;\&quot;I can&#39;t believe my Seire resisted you for so long when your begging is &#39;&#39;this&#39;&#39; cute...\&quot;&quot;, &quot;\&quot;You&#39;re going to do beautifully, my pet.\&quot;&quot;, &quot;\&quot;You want it that bad, do you? Are you sure you can&#39;t beg for me a little longer?\&quot; You pout. \&quot;No...? Very well.\&quot;&quot;, &quot;\&quot;Oh, it won&#39;t be long until you&#39;re singing for me, little pet. My method has succeeded against stronger wills than yours...\&quot;&quot;].pluck()&gt;&gt; Then, Agares steps off to prepare.&lt;/span&gt;

&lt;span id = &quot;resignLust&quot; class = &quot;hide&quot;&gt;[[...|31Lust]]&lt;/span&gt;&lt;span id = &quot;resignGlut&quot; class = &quot;hide&quot;&gt;[[...|31Gluttony]]&lt;/span&gt;&lt;span id = &quot;resignGree&quot; class = &quot;hide&quot;&gt;[[...|31Greed]]&lt;/span&gt;&lt;span id = &quot;resignSlot&quot; class = &quot;hide&quot;&gt;[[...|31Sloth]]&lt;/span&gt;&lt;span id = &quot;resignWrat&quot; class = &quot;hide&quot;&gt;[[...|31Wrath]]&lt;/span&gt;&lt;span id = &quot;resignEnvy&quot; class = &quot;hide&quot;&gt;[[...|31Envy]]&lt;/span&gt;&lt;span id = &quot;resignPrid&quot; class = &quot;hide&quot;&gt;[[...|31Pride]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="73" name="31Lust" tags="Blood" position="350,975" size="100,100">&lt;&lt;set $v31_didLust to true&gt;&gt;\
$v31_Name steps into the room, face flushed and wearing a new, quite short, dress. 

You avert your eyes, trying desperately to avoid leering at her. &lt;&lt;if $v31_Day == 3&gt;&gt; But... something more important weighs on your mind.

&lt;&lt;include [[31IncludePart3]]&gt;&gt; Agares watches from the edge of the room, and she nods.\
&lt;&lt;elseif $v31_Day == 4&gt;&gt; But... she pushes back her embarrassment and addresses you dead-on.

&lt;&lt;include [[31IncludePart4]]&gt;&gt; Agares insists that it must.\
&lt;&lt;else&gt;&gt;Agares arrives behind her, and you grit your teeth in hopes she won&#39;t sense your embarrassment. From the way she smirks at you, you&#39;re sure she knows.&lt;&lt;/if&gt;&gt;

Then, the witch steps up to the bars of your cage and begins.

&quot;For $v31_today&#39;s research, you&#39;ll be undertaking a trial of Lust, my pet.&quot; She smirks. &quot;I could explain it... but something tells me you chose this because you already knew what it entailed...&quot; You want to snarl back and deny her right now... but you can&#39;t bear to look her in the eye. When you don&#39;t respond, $v31_Name shifts around where she stands.

The witch sneers&lt;&lt;if not $v31_didEnvy&gt;&gt; in faux-adoration.

&quot;How cute... Two sweethearts from childhood finally progressing their relationship, all under Osmodai&#39;s guiding light? I might have to stay and watch...&quot; You blush and look to $v31_Name, who seems just as embarrassed as you. Agares looks intent to follow through, until $v31_Name huffs and pushes her out the door, slamming it shut as she goes.
\&lt;&lt;else&gt;&gt;.

&quot;What a shame, though... I thought this could be a nice, romantic first time for you both.&quot; You grind your teeth, and another burst of awful, selfish envy comes over you. Agares delights in it. &lt;&lt;set $v31_Attune += 10&gt;&gt;

&quot;Well, I&#39;d love to stick around and give you some pointers, puppy... but I have work to do.&quot; With that, she steps out and shuts the door.&lt;&lt;/if&gt;&gt;

Once it&#39;s just the two of you, the room goes quiet. A flustered $v31_Name inches across the room before kneeling your cage door. She swiftly unlocks your cage and slips inside, only to freeze up and stare at her feet. You can&#39;t move to her side while you&#39;re restrained like this, so you just whisper her way.

&quot;$v31_Name... We don&#39;t have to do anything, if you&#39;re worried about that. Agares isn&#39;t here to pressure you into anything.&quot; She looks your way, then blushes. You&#39;re immediately tempted to tease her, but... even you&#39;re not that cruel. You open your arms at the elbows, and she leaps straight into your embrace, hiding her cute, embarrassed face in your neck.

$v31_Name is still perfectly soft, and she melts where your bound hands touch her waist. There&#39;s a scent of pine around her, masked by several layers of flowery perfume. Logically, it means Agares is letting her move around outside... but instead your mind goes to the woods around your hometown, where the two of you would sneak into one another&#39;s tents as kids.

Then, she drops down and leans against your chest. You blush and sit perfectly still... even the rising and falling of your chest with your breathing feels lewd under these circumstances. When $v31_Name looks up at you with a shy smile... you shudder. She laughs at that.

&quot;Somehow... I was worried I wouldn&#39;t get your heart racing, Iris...&quot; She nestles into the curve of your shoulder with the biggest, dumbest grin. &quot;We&#39;re really the same, aren&#39;t we?&quot; You try to hide your blushing face, to no avail. Backed into a corner, you stammer out.

&quot;W-well how couldn&#39;t it be?!&quot; This seems to shock her, but you can only continue. &quot;I&#39;ve been holding back for so many years, and now Agares wants us to—&quot; You stop. $v31_Name&#39;s eyes light up, and she levels out with you, inches from your face. You try to walk it back, or defend yourself, but it all comes out as useless blubbering. Then, she leans in and presses a gentle, giggling kiss to your lips.

She steals another and a third, then she looks at you with a gutwrenching, desperate expression, and &lt;&lt;if $v31_LastSession == &quot;Greed&quot;&gt;&gt;you&#39;re not sure if it&#39;s $v31_yesterday&#39;s wine at work, but &lt;&lt;set $v31_Attune += 5&gt;&gt;&lt;&lt;/if&gt;&gt;you know you&#39;ll do something unforgivable if she doesn&#39;t stop you. $v31_Name only manages a tiny, shaking whisper your way.

&quot;I need you, Iris... Please don&#39;t deny me that...&quot;

&lt;span id=&quot;options&quot;&gt;\
&lt;&lt;link &quot;\&quot;I feel the same... but I can&#39;t help you throw away your oath like that...\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#options&quot;&gt;&gt;&lt;&lt;set $v31_Attune += 5&gt;&gt;\
&quot;I feel the same... but I can&#39;t help you throw away your oath like that...&quot; She leans in to kiss you anyway, and it takes everything in you to pull back. She freezes up... then seems to realize herself, falling back and slipping out from your arms.

The two of you sit in strained silence, until $v31_Name looks back your way with tears in her eyes. Her voice is broken and weak.

&quot;Why...?&quot; You sigh, and she advances towards you, on shaky hands and knees. &quot;You have no loyalty to anyone in that cult, you claim to want me, but still...&quot;

Hot tears run down her cheeks. In the moment, you&#39;re sure it would kill you to hide anything from her. So... you tell her the truth.

&quot;I&#39;ve been waiting for you since our reunion. Secretly, I always hoped you&#39;d give up on the faith, and I&#39;d be able to hold you, honestly and openly...&quot;

&quot;But now... that moment is finally here, and I can&#39;t trust it...&quot; $v31_Name reaches you. She holds your face in her hands and rubs at your tears. &quot;What am I supposed to do?!&quot;

You sob into $v31_Name&#39;s neck, and she holds you tight. She gently kisses the top of your head while you let it all out... Then, when you fall quiet, she kisses you and sighs against you.

&quot;Fine.&quot; You blink up to her, and she blushes as she continues. &quot;I&#39;ll convince you. Whatever it takes, I&#39;ll show you I&#39;m serious.&quot; You relax into her embrace and grin.

&quot;I&#39;d like that... Please do that.&quot; Then, as she watches over you and smiles, you feel yourself blushing just like her. You take refuge, hiding your face in her shoulder. &quot;I&#39;m not sure when you got so cool, anyway...&quot;

&quot;Not that I hate it, or anything...&quot;

$v31_Name laughs, and she kisses you. The two of you get quite comfortable in the minimal furnishings of your cage. [[She clutches you tight against her chest until long after you fall asleep|31Hub][$v31_Day += 1]]. 
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;\&quot;I&#39;m afraid the depth of what I want will be too much... Can you swear you&#39;ll tell me if it is?\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#options&quot;&gt;&gt;&lt;&lt;set $v31_Attune += 25&gt;&gt;\
&quot;I&#39;m afraid the depth of what I want will be too much... Can you swear you&#39;ll tell me if it is?&quot; She presses more frantic kisses, trailing from your lips to your cheek as she grins and nods. When she needs a breather, $v31_Name leans against you and whispers.

&quot;I got some coaching from Agares on that one...&quot; You sulk at the idea, but she appeases you with a quick smooch. &quot;If it&#39;s truly too much for me... I&#39;ll tell you... &#39;cardamom&#39;.&quot;

You look her over for a moment... Then you snicker. This time she pouts, and you&#39;re all too happy to appease her.

&quot;That woman has put some strange things in your head... but it&#39;ll work.&quot;

Then, you lean forwards and topple $v31_Name to the floor beneath you. She shudders and leans in when you kiss her neck, but with your wrists still bound, you have to ask her so-sweetly to pull her gown over her head. When you see what&#39;s underneath, you laugh.

&quot;How in the hells did you source such frilly, precious underwear out of a hole in the middle of the forest?&quot; She blushes and evades your gaze.

You tease her lower in response, creeping down, kissing her chest and stomach before biting down around a tiny, satin ribbon on her bra and pulling gently. $v31_Name whimpers your name and squirms under you. When you curl your fingers to stroke the small of her back, she whines and blurts out.

&quot;I-I brought it with me!&quot; Even she seems shocked that she&#39;s said it. You nestle yourself into her chest. Any time she clams up, you scrape your teeth along the curve of her breast and make her shiver beneath you.

&quot;I always do!&quot; You cinch your arms around her hips and squeeze. She cries out, and you can&#39;t stop yourself from laughing. Without any prompting, she starts pathetically thrusting her hip against nothing, and she blubbers out more.

&quot;Every time we leave town, I pack some of this stuff, just in case you might see it...&quot; Her arms flail around looking for purpose, so you bring your face back up to hers. She plays with your cheeks, runs her fingers through your hair, then clutches desperately at your shoulders. Between bouts of slow, messy kisses, you goad her on.

&quot;Wow... so if I ever turned around when we were changing together, I&#39;d have seen you just like this?&quot; $v31_Name shudders, then nods furiously, pulling a hand over her eyes. You lean in and give her ring finger a sharp bite, forcing her to jerk the hand away and look you in the eyes. &quot;I was worried that witch had changed you, but... you&#39;ve been this slutty all along, haven&#39;t you?&quot;

Tears form in $v31_Name&#39;s eyes, and she nods and whimpers and unconsolably apologizes as her whole body shudders. You can&#39;t give her a hand, so you wedge your knee between her legs. She wastes no time grinding against you, finding the perfect angle to strike her clit against it. All you do then is sit back and enjoy the adorable moans she makes into your mouth as she rubs herself silly on you.

It doesn&#39;t take long before her breath hitches and the full length of her body trembles underneath you. Her arms and legs both spasm, and she wraps them tight around your back. With what little motion you can control, you grind your knee into her, giving her a slow, gentle comedown from that high.

Her cries taper off slowly... then stop, leaving her panting and weak beneath you. $v31_Name pulls you tight against her, and you roll to her side, so she can lean on you. The two of you embrace there, on the floor of your cage. She gazes up into your eyes and mouths some hoarse and breathless words your way.

You think you hear $v31_Name whispering: &quot;Do you understand me now... Iris?&quot;

Her breathing goes slow and rhythmic. You brush her hair from her forehead and lean down to kiss her sleeping face.

&quot;Gods, I hope I do...&quot; [[And you hold her tight to you, joining her in sleep soon after.|31Hub][$v31_Day += 1]]
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
\&lt;/span&gt;

&lt;&lt;set $v31_LastSession to &quot;Lust&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="74" name="31Gluttony" tags="Blood" position="475,975" size="100,100">&lt;&lt;set $v31_didGlut to true&gt;&gt;\
You&#39;re woken from your boredom by heavy footfalls in the hallway outside your room. 

$v31_Name enters, and a stream of minions follow in her wake, skeletons and slimes hoisting heavy pots, pans, and even a whole table.

She settles down out of their way and wipes sweat from her forehead, sighing. Then, her gaze meets yours.&lt;&lt;if $v31_Day == 3&gt;&gt; She frowns... and you speak first.

&lt;&lt;include [[31IncludePart3]]&gt;&gt; $v31_Name nods politely and leads a skeleton towards your cage, which she opens.
&lt;&lt;elseif $v31_Day == 4&gt;&gt;.. then drops to her feet.

&lt;&lt;include [[31IncludePart4]]&gt;&gt; At a signal from Agares, $v31_Name opens your cage to make way for her helpers.
&lt;&lt;else&gt;&gt; She smiles.

Agares follows soon after, pulling aside a slime to bark some additional orders its way. $v31_Name opens your cage and directs the crew inside.&lt;&lt;/if&gt;&gt;

The minions get to work, preparing a table with two settings, a large stockpot, and a heavy, lacquered keg. A polite slime ushers you to your seat across from $v31_Name, and you&#39;re relieved to finally get off the floor. Agares smirks at the two of you, with her usual self-important air strong as ever.

&quot;I hope you know I&#39;ve put a lot of work into this trial, my pet...&quot; She turns towards $v31_Name and bows her head slightly. &quot;As has Seire.&quot; You look her way, and she blushes.

&quot;For this trial, I&#39;ve put peerless research towards determining the meal most apt to tempt you into Her embrace.&quot; At her cue, a halfpint moraxite hops onto your table. He pulls the lid off the stockpot and hangs it off his horn with a bow.

Inside, you spot a familiar reddish broth, and you&#39;re struck by a pang of nostalgia. Once that subsides, you glare out towards Agares. She cackles.

&quot;It&#39;s safe, I swear it. But, I&#39;m getting ahead of myself, check the drink as well.&quot; You take a flagon and pull it towards the keg, only to be interrupted by your ever-polite maître d&#39;emon, who fills it in your stead and returns it. From your first sip, you can recognize the watered-down, smoky ale served down the street from your childhood home. A serving slime inches a dainty ramekin of candied juniper berries towards you, but you pop a single one below your tongue before waving it away.

All the familiar scents and flavors overwhelm you and leave you off kilter. $v31_Name tries to serve herself despite the minion&#39;s pleas, and Agares watches you, tittering and wagging her tail like she&#39;s &#39;&#39;so&#39;&#39; damn pleased with herself. You snarl her way.

&quot;Y&#39;want me to scream every time you know something about me? I&#39;ve never met such a needy witch in all my days...&quot; She titters, and you continue.

&quot;So what? You hit a caravan and stole their foodstocks. Is that supposed to give me a crisis of faith?&quot; Agares and $v31_Name both stare at you... then the witch shakes her head.

&quot;That&#39;s where you&#39;re mistaken, my pet. That drink was a gift from a benefactor.&quot; She smirks. &quot;As for the meal...&quot; The witch turns to $v31_Name, and you follow her gaze. $v31_Name&#39;s eyes go wide, then she blushes and nods.

Agares titters at this, before leaning back with a sigh.

&quot;I&#39;ll say, mutt, she&#39;s quite the skilled hand at it. She&#39;d have made quite the good wife... if I hadn&#39;t intervened, at least.&quot;

$v31_Name stands and marches out of the cage, pushing the witch towards the entrance. Agares quickly shouts back your way.

&quot;You can thank me for that later! Make sure to indulge, pup!&quot; And the door slams behind her.

$v31_Name crosses back into the cage and sits across from you, flushed and quiet. Then, she coughs and mutters out.

&quot;Sorry for her... She finds a way to ruin everything, huh?&quot; You snort as you stick your bowl out towards your demonic attendant. He happily deposits a few ladles of soup within it, and you drop a clump of minced garlic into it.

&quot;Oh don&#39;t give her the satisfaction. We can at least enjoy a nice meal.&quot; She watches you for a moment... then she smiles and nods.

$v31_Name rearranges a decadent number of bowls around the table, scooping heaping spoons of caramelized onions, cream, ginger, dried valafeto, lamb, and pickled mushroom into her bowl. Your stomach hurts a bit just watching her... Then, without making any note of it, she slides you two bowls, with halved quail eggs and raw mushroom. When you don&#39;t immediately take them, she looks up and cocks her head at you.

&quot;You take your //renkash// with eggs but never pickled mushrooms, right?&quot;

Her innocent gaze catches you off guard, and you blush, quickly thanking her and scooping in a reasonable portion. What you &#39;&#39;don&#39;t&#39;&#39; tell her is that you acquired a taste for pickled mushrooms when she was away in Seminary. Instead, you stir up your bowl and take one, divine mouthful with a bit of everything.

As expected, it&#39;s the best renkash of your adult life. You catch $v31_Name staring at you as you savor it, but any time you catch her in the act, she only blushes and takes a tiny sip of her drink. By the time you finish your first helping, she&#39;s managed to put away about half her bowl of sensory overload.

While the army of evil fixes your second, you stretch and watch $v31_Name as she takes measured attacks at her food, always pairing together different ingredients and reacting differently each time. Seeing all her varied, cute faces, you feel a pang of jealousy... as little sense as it makes... and you get a strange idea, for which you bark some requests at the nearest skeleton.

You circle over to $v31_Name&#39;s side of the table as gracefully as possible in your restraints, and she watches you with interest as you do. An attendant steps in to lay a mortar of those candied juniper berries on the table for you, with a heavy wooden spoon. You gesture towards $v31_Name&#39;s drained tankard, and she passes it to you. You refill it and set it down. With the wooden spoon, you crush down the berries into a sugary, vibrant slush, of which you scoop a small portion into her drink. The beer fizzes up in rage, and you stir it around into a dull blue homogeny.

You slide it towards $v31_Name, and she peers into the cup before turning back to eye you suspiciously. You laugh and wave her off.

&quot;It&#39;s... well...&quot; Thinking back, it never got a proper name. &quot;It&#39;s like an &#39;Aliki&#39;s Handshake&#39;, but without all the expensive liquors and tonics.&quot; 

&quot;Basically, back when the harpy job left you and Nerses wounded, we had to cut back. So, Ruomila was looking for ways to make some of their favorite drinks on a budget. They showed me a bunch of them, but this is the only one that stuck.&quot;

$v31_Name wafts the scent of the drink into her nose and appears to analyze it. She looks back to you.

&quot;Is it good?&quot; You laugh and nod. With that, she lifts her tankard and takes a small, apprehensive sip, holding the drink in her mouth to savor it. Then, she smiles.

&quot;It&#39;s incredible. They might be a genius after all...&quot; The two of you laugh, but you can&#39;t help feeling a little let down. You don&#39;t necessarily //try// to pout, but you can feel yourself frowning as you stare out over the remaining spread.

Then, $v31_Name&#39;s fingers brush over your scalp, and she whispers up to you.

&quot;Y-you&#39;re incredible too, Iris... So good...&quot; You don&#39;t dare to move... so she continues. &quot;You&#39;re so sweet to me... I just need you to keep looking at me or I might die...&quot; Your whole body shudders. Then, you notice something strange about her words...

&quot;Wait, did you think I was getting jealous of &#39;&#39;the drink&#39;&#39;, or—&quot; And when you look back, you notice that $v31_Name has already drained the cup, and her entire face is flushed. She whispers an apology up towards you.

&quot;It was really sweet, s-so... I could drink it easier.&quot; When you sigh, she leans hard against you and stammers out an apology. &quot;S-sorry... I&#39;m a bad girl... You can punish me, if that&#39;d help...&quot; And you shudder.

You call for the serving staff, but they&#39;ve chosen //now// to give the two of you some privacy, probably in expectation of an act of Lust. Instead, you pull $v31_Name into your chest and pet her head to calm her down. She&#39;s all too happy to accept this.

&quot;Idiot... You didn&#39;t do anything wrong. I&#39;ll get those freaks to bring you some water, but... you need to be more careful in the future...&quot; She starts to shake against you, and, fearing that you&#39;ve hurt her feelings, you coo over her and stroke her hair. She sighs and leans into your touch. Then, a glassy-eyed $v31_Name stares up at you and whispers.

&quot;Iris...&quot; You smile down at her. &quot;You...&quot; She blinks a few times. &quot;You... really shouldn&#39;t wear armor over such a beautiful, pillowy chest... it&#39;s a w-waste...&quot;

You groan, and one of Agares&#39;s lanky skeletons finally notices you. It bows to you, and you lead $v31_Name over by the hand before barking an order.

&quot;&lt;&lt;if $attunement &gt; 75&gt;&gt;In Her name...&lt;&lt;else&gt;&gt;Thank the gods...&lt;&lt;/if&gt;&gt; Please, take her back to the witch before I do something immoral.&quot; And it leads her off, holding her up by the shoulder. $v31_Name grins back at you as she steps out, [[and you blush.|31Hub][$v31_Day += 1]] &lt;&lt;set $v31_Attune += 15&gt;&gt;

&lt;&lt;set $v31_LastSession to &quot;Gluttony&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="75" name="31Greed" tags="Blood, Unreachable" position="600,975" size="100,100"></tw-passagedata><tw-passagedata pid="76" name="31Sloth" tags="Blood" position="725,975" size="100,100">&lt;&lt;set $v31_didSlot to true&gt;&gt;\
$v31_Name steps through your door late into the evening, with a fashionable nightdress on and a hefty bag in tow.

She crosses to your side immediately, crouching down with a smile.

&quot;So, for $v31_today&#39;s trial of Sloth, it&#39;ll only be me. Agares said her presence would be too stimulating, and you&#39;d never relax...&quot; You nod, and she lets herself into your cage, where she retrieves and lays out a plush blanket and pillow. After so long in the dirt, you don&#39;t complain when she asks you to lay on them. 

Pleasant warmth and a relaxing, floral perfume radiate out from them both. As you get comfortable, $v31_Name flits around your cell, tidying bits of debris, leftover food scraps, and remnants from the witch&#39;s experiments. Even trapped in a windowless dungeon, it&#39;s embarrassing having her clean up after you... so you try to wave her away.

&quot;There&#39;s really no need for you to do that.&quot; She turns and cocks her head your way, and you continue. &quot;If you really want this place clean, at least let me help. You&#39;d be here for years, otherwise.&quot;

$v31_Name giggles, and she crouches down at your side.

&quot;If you don&#39;t like it, I can stop, but I can&#39;t permit you to help me.&quot; You scoff, but $v31_Name only smiles back.

&quot;After all... $v31_today is all about me spoiling you. That means any time you feel yourself drifting off, you&#39;re free to &lt;&lt;if $v31_Day % 2 == 1&gt;&gt;nap as long as you like&lt;&lt;else&gt;&gt;turn in for the night&lt;&lt;/if&gt;&gt; without any judgement.&quot;

She reaches down and strokes your head. Without intending to, you make an embarrassing noise. $v31_Name doesn&#39;t acknowledge it, but she pets you more aggressively. You pout.

&lt;span id=&quot;options&quot;&gt;\
&lt;&lt;link &quot;Pull her down to your side.&quot;&gt;&gt;&lt;&lt;replace &quot;#options&quot;&gt;&gt;&lt;&lt;set $v31_Attune += 5&gt;&gt;\
You grab $v31_Name by the wrist, and she falls forward onto you, where you loop your cuffed arms around her. She blubbers and resists, but you just squeeze her tight.

&quot;If you want me to relax, isn&#39;t this the most obvious way?&quot; Her eyes go wide, and slowly, certainly, she relaxes into your arms, nestling into the curve of your shoulder. Her breath tickles your neck as she whispers.

&quot;I had other ideas, but, if this is all you want... I&#39;ll allow it.&quot; She holds you tight, and you giggle. The two of you have to snuggle in close together to fit under your only blanket, not that either of you mind. 

You&#39;re perfectly content to lay with $v31_Name, listening to the cute, sleepy noises she makes as she drifts off ahead of you. Her slow, soft snores bring back memories, and you can&#39;t help but lean in to kiss her on the forehead.

&quot;You did good today, $v31_Name. &lt;&lt;if $v31_Day % 2 == 1&gt;&gt;Go easy on me tonight, okay?&lt;&lt;else&gt;&gt;Let&#39;s both do our best tomorrow, too.&lt;&lt;/if&gt;&gt;&quot;

[[And not long after, you follow her.|31Hub][$v31_Day += 1]]
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;Lean into her touch.&quot;&gt;&gt;&lt;&lt;replace &quot;#options&quot;&gt;&gt;&lt;&lt;set $v31_Attune += 25&gt;&gt;\
Her touch is so soothing that you can&#39;t help but lean into it. She notices instantly and reaches in with her free hand to scratch under your chin. As embarrassed as you are, you can&#39;t deny the warm, tingly feelings dripping down from your head.

$v31_Name leans down and kisses your flushed cheek.

&quot;You&#39;re a pearl, Iris...&quot; You try to hide your embarrassed face, but she only has to massage your scalp for a moment to melt you back into her hands. You&#39;re caught in a daze, quiet save for whimpers and shivering under her touch. She knows it, and she delights in it.

Then, right as you&#39;re getting used to this sort of touch, $v31_Name settles down beside you and, in one swift motion, lifts your head into her lap. The sudden rush of bodily warmth sends a shudder down your spine. You want to complain or resist, but all the thoughts melt into warm putty any time her skin brushes against your own.

Any adjustment to your position comes with its own issues. Laying still means watching her cute, doting faces as she plays with you and showing your own embarrassing expression in turn. Turning towards her hides your face, but it does so by squishing it directly into her soft, welcoming stomach, an act which makes $v31_Name sigh and rub her legs together. It feels clever to turn away from her, but that only lasts until she strokes the back of your neck, and you let out a shameful, surprised yelp.

No matter what you do, you&#39;re totally enveloped in her affection. You can pinpoint the moment when you start letting her take control, but before long, you&#39;re totally at her mercy.

$v31_Name caresses you, and you relax into her, letting the soft warmth of her touch wash over you and lull you into sleep. [[The last thing you remember is her shy expression as she leans down to kiss you.|31Hub][$v31_Day += 1]]
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
\&lt;/span&gt;

&lt;&lt;set $v31_LastSession to &quot;Sloth&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="77" name="31Wrath" tags="Blood" position="850,975" size="100,100">&lt;&lt;set $v31_didWrat to true&gt;&gt;\

$v31_Name steps into the room, clutching the familiar scabbard of one of Agares&#39;s ritual knives. &lt;&lt;if $v31_Day == 3&gt;&gt;You&#39;re apprehensive at first, but you steel yourself.

&lt;&lt;include [[31IncludePart3]]&gt;&gt;&lt;&lt;elseif $v31_Day == 4&gt;&gt; When you catch her eye, she blushes and tucks it behind her back and out of your view... There&#39;s an awkward air between the two of you.

&lt;&lt;include [[31IncludePart4]]&gt;&gt;&lt;&lt;else&gt;&gt; The witch follows behind her, and the two take the center of the room, an awkward arm&#39;s-length apart. For once, &#39;&#39;you&#39;&#39; break the silence.

&quot;So... what&#39;s $v31_today&#39;s trial about...?&quot; Agares suddenly glares your way... before regaining her composure and sighing.&lt;&lt;/if&gt;&gt;

&quot;For this trial of Wrath... I intend to bring out your latent sadism, sweet pet.&quot; The witch watches your mortified face and licks her lips. &quot;I want you to paint me with your hatred and bring out the killer within.&quot;

You scoff.

&quot;Fine by me. Take these cuffs off, and I&#39;ll let you see it up close.&quot; She watches... seems to ponder... then titters and shakes her head.

&quot;Tempting... but no.&quot; Agares extends an arm and brushes her fingertips over $v31_Name&#39;s chin. &quot;Instead, sweet little Seire will be your surrogate. I can trust her not to take things too far.&quot;

She gives Agares a curt bow, but underneath it, $v31_Name seems irritated.

Then, the witch grabs the hem of her dress and tugs it to the floor. You avert your eyes, but when you look back, she&#39;s wearing a black body-tight suit with dotted white lines looping around her curves. You study it for a moment... then its purpose dawns on you.

&quot;Now you&#39;re getting it, pet...&quot; She turns to $v31_Name and traces a finger over the twists of fabric across her skin, &quot;These spots are safe to play with, dear Seire... and these aren&#39;t. As long as you stick to the safe zones, I&#39;ll easily be able to heal myself once we finish. Understood?&quot; $v31_Name nods, then stammers out.

&quot;Y-yes, Lady Agares...&quot;

The witch smiles, then both she and $v31_Name look over to you.

&quot;Well? What will it be, sweet pet?&quot;

&lt;span id=&quot;options&quot;&gt;\
&lt;&lt;link &quot;Advise her to go easy on Agares&quot;&gt;&gt;&lt;&lt;replace &quot;#options&quot;&gt;&gt;&lt;&lt;set $v31_Attune += 5&gt;&gt;\
&quot;I&#39;m not here to play your games, witch.&quot; Then, you turn to $v31_Name. &quot;Just... smack some sense into her and be done with it.&quot; 

$v31_Name nods. Agares opens her mouth to complain, but before she can...

The witch hits the ground hard, and she sits stunned with her mouth hanging open. $v31_Name grumbles and rubs at her bruised knuckles, until Agares shrieks.

&quot;Seire?!&quot; She rocks and clutches at her cheek. &quot;The face is NOT a safe zone! What&#39;s gotten into you?&quot; $v31_Name pouts and turns away, muttering.

&quot;I &#39;&#39;told you&#39;&#39; Iris doesn&#39;t like this kind of stuff...&quot; The witch&#39;s face contorts... then she remembers herself, stands, and dusts off. She turns to you with a plastered-on smile and a swollen red spot still on her cheek,

&quot;Ahem... Thank you for that //splendid// violence, pet.&quot; She turns and glares at $v31_Name&#39;s sulking expression. &quot;Please excuse me... I fear I&#39;ll have a most unsightly bruise if I don&#39;t treat this soon.&quot; Then she slinks off.

Once $v31_Name and yourself are alone, your eyes meet, and you both laugh. Then, she looks deep in thought for a moment, before thinking aloud.

&quot;It&#39;s almost a shame... She&#39;d look nicer with a few bruises.&quot; &lt;&lt;if $v31_Attune &lt; 50&gt;&gt;You cock your head, and $v31_Name suddenly blushes. &quot;No... actually, please ignore that.&quot;&lt;&lt;else&gt;&gt; You both blush.&lt;&lt;/if&gt;&gt; She shakes the thought off and heads out, [[and you snicker.|31Hub][$v31_Day += 1]]
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;Advise her to give Agares what she deserves.&quot;&gt;&gt;&lt;&lt;replace &quot;#options&quot;&gt;&gt;&lt;&lt;set $v31_Attune += 25&gt;&gt;&lt;&lt;ctp &quot;stabby&quot;&gt;&gt;\
&quot;Fine. Give her what she wants.&quot; You peer over the marked zones on Agares&#39;s suit. &lt;&lt;linkreplace &quot;\&quot;Start with the exterior left thigh.\&quot;&quot;&gt;&gt;&lt;&lt;ctpAdvance &quot;stabby&quot;&gt;&gt;&lt;&lt;/linkreplace&gt;&gt;&lt;&lt;ctpNext&gt;&gt;&quot;Start with the exterior left thigh.&quot; $v31_Name&#39;s eyes widen, but you reassure her.

She squares up with the witch and positions the ritual dagger above her leg. Their eyes meet, and Agares tenses. Then, you hear an awful, wet squelching sound, all too familiar in your line of work. Agares gasps, dropping her cool facade and whimpering.

She and $v31_Name are close now, with their faces inches apart. You watch the tiny shifts in expression as $v31_Name studies the witch, as well as the solitary tears Agares tries to hide. Then, there&#39;s another horrible, slick noise, and the dagger slides out. The witch groans and clutches at the wound, with thick, dark blood drooling out past her hand.

She spits and mutters a curse under her breath, then she fixes her glare your way, urging you onwards. A strange shiver goes down your spine.

&lt;&lt;linkreplace &quot;Right flank, next.&quot;&gt;&gt;&lt;&lt;ctpAdvance &quot;stabby&quot;&gt;&gt;&lt;&lt;/linkreplace&gt;&gt;&lt;&lt;ctpNext&gt;&gt;&quot;T-then...! Right flank!&quot; 

$v31_Name&#39;s dagger slides in smoothly, ripping through fabric, skin, and muscle with perverse efficiency. Agares convulses in sobs like a slit lamb. Her cool facade totally shatters and she whimpers pathetically.

&quot;Nononononono... fuck... why...?&quot;

When the blade retracts, she cries out again, but $v31_Name just quietly looks your way. Now, your voice shakes just like the witch&#39;s.

&quot;That&#39;s enough...&quot; She doesn&#39;t respond. &quot;Seriously, stop! Don&#39;t make me do this...&quot; You watch the slow //drip//, //drip//, //drip// of Agares&#39;s blood, and you shout out the first thing to come to your head.

&lt;&lt;linkreplace &quot;Stab Agares in the right shoulder.&quot;&gt;&gt;&lt;&lt;ctpAdvance &quot;stabby&quot;&gt;&gt;&lt;&lt;/linkreplace&gt;&gt;&lt;&lt;ctpNext&gt;&gt;&quot;Fine! R-right shoulder!&quot;

$v31_Name thrusts her blade into the witch at your command, rattling as it strikes bone. You fall to your knees and wretch, but the sound keeps ringing in your ears.

Then... the dagger falls away and clatters towards your cage. Your eyes lock onto it, and the edges of your vision go dark...

&lt;&lt;linkreplace &quot;...&quot;&gt;&gt;&lt;&lt;ctpAdvance &quot;stabby&quot;&gt;&gt;&lt;&lt;/linkreplace&gt;&gt;&lt;&lt;ctpNext&gt;&gt;...

A hand reaches out to touch your shoulder, and your whole body spasms. You hear a sigh... then a low voice.

&quot;Pet...&quot;

You turn, and Agares is there. Her suit is haphazardly torn and caked with dry blood, but she seems calm, if a little sullen. When your eyes meet, she whispers to you.

&quot;Check for yourself. I&#39;m fine.&quot; She reaches out again, and you take her hand, still trembling yourself. The wounds you made on her have closed up and left behind light scars. Up close, you can see a constellation of scars branching out from the light ones you&#39;ve made $v31_today. When you look up to her, the witch snickers.

&quot;What? Did you seriously think I let you do all that without healing magic prepared?&quot; She arches up, as if prepared to humiliate you... then sinks back down. Agares hovers her free hand over one of the scars and incants, and you watch it lighten and fade away.

With that, the awful thrumming in your chest starts to slow down, and you squeeze the witch&#39;s hand between yours. Meanwhile, $v31_Name circles around and slips into your cage, where she sits beside you.

&quot;You did a good job, Iris...&quot; She inches closer and wraps her arms around your waist. You lean into her embrace and let her support your weight. &quot;I&#39;m sorry for going so hard on you. To tell you the truth, I didn&#39;t think you had it in you.&quot;

She leans in and kisses your cheek.

&quot;We&#39;ll stay with you until someone comes to clean up, okay?&quot; Agares shoots an indignant look down at the two of you, then caves immediately when you look up at her.

&quot;Y-yes... that seems... appropriate.&quot;

You cling to $v31_Name, and Agares strokes your hair. Bit by bit, you start to feel human again.

When a trio of skeletons come in with mops, you try to peek through to the room beyond. All you see is red. But, $v31_Name pulls you hard to clutch you against her chest, and &lt;&lt;if $v31_Day % 2 == 1&gt;&gt;[[you let her spoil you there for the rest of the afternoon.|31Hub][$v31_Day += 1]]&lt;&lt;else&gt;&gt;[[you let her spoil you there for the rest of the night.|31Hub][$v31_Day += 1]]&lt;&lt;/if&gt;&gt;
&lt;&lt;/ctp&gt;&gt;
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
\&lt;/span&gt;

&lt;&lt;set $v31_LastSession to &quot;Wrath&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="78" name="31Envy" tags="Blood" position="975,975" size="100,100">&lt;&lt;set $v31_didEnvy to true&gt;&gt;\
@@color:#e2766580;@@
The time your &lt;&lt;if $v31_Day == 1&gt;&gt;&#39;trial&#39;&lt;&lt;else&gt;&gt;trial&lt;&lt;/if&gt;&gt; is set to start comes and goes, or... at least, it feels like it has. When you&#39;re alone in your cell, it&#39;s impossible to tell, and the occasional minions that pass through are far from talkative.

But, just as you decide to lay back down, you hear slight, muffled voices from the room. You inch closer and strain to hear them.

@@color:#e2766580;&quot;N-no... I&#39;m not scared, my lady. It&#39;s just— Mnnmnmn?!&quot;@@ A loud moan rings out through the walls, followed by wet, sucking sounds which start slow then speed up, only to be punctuated with a gasp, and...

@@color:#e2766580;&quot;You&#39;ve been so good for me, my Seire... Was that all a lie? Do you not want this?&quot;@@ There&#39;s a sharp cry... from Seire. Descending one, after another, then she whimpers.

@@color:#e2766580;&quot;I dooooo... I really do...&quot;@@ She gasps for air... then you can just make out the faintest whisper from her. 

@@color:#e2766580;&quot;I want it so bad... I&#39;m the worst.&quot;@@ And like that, they&#39;re on each other again. There&#39;s a rustling of fabric, then a thick, squelching sound, then Seire cries out again.

Your hands shake. Everything in you compels you to run, to hide as far away as you can get, but they&#39;ve grown loud enough that their voices cross the width of your cage. Every attempt you make to blot out the sound only makes the entire experience more embarrassing...

&lt;span id=&quot;options&quot;&gt;\
&lt;&lt;link &quot;Reach down under your dress...&quot;&gt;&gt;&lt;&lt;replace &quot;#options&quot;&gt;&gt;&lt;&lt;set $v31_Attune += 35&gt;&gt;\
Cold, awful shame floods over you as you desperately lift your dress, only to find yourself already hard and leaking. Still.... every time you hear $v31_Name cry out beyond that wall, something in your blood goes electric and urges you on.

You wrap a loose hand around your base, and the tremors in your hips alone give you the friction you&#39;re looking for. On the other side, $v31_Name begs and whimpers in a voice you&#39;ve never heard from her. Tears start to form in your eyes, but you flood them out with more pleasure.

Beyond, Agares has begun to lose herself, too. Her saccharine, condescending remarks have stopped, being replaced with weak, girlish moans and desperate panting. She gasps out, much too loud to be directed only at $v31_Name.

@@color:#e2766580;&quot;Sweet Unity... you&#39;re clenching so tight around my fingers, Seire. I just want your first time to feel good...&quot;@@ That horrid squelching sound reaches a fever pitch, and it starts to ring in your ears. Your own careless panting should drown it out, but you keep imagining it, imagining her.

You lift a hand to your chest and make broad passes at each of your nipples, picturing $v31_Name straddling you and losing herself in them. &lt;&lt;if $v31_didPrid or $v31_didGlut&gt;&gt;They do seem to be her preference, after all... &lt;&lt;/if&gt;&gt;This time, when you moan, you&#39;re sure they can hear you. $v31_Name cries out, but it sounds different to all the other times.

Reaching the edge is only a matter of time, but these hideous feelings welling up within keep you from going further. You push and tremble and beg, but you can&#39;t quite reach it, which only darkens the cloud over you. Then, she cries out again, clearly in tears this time.

@@color:#e2766580;&quot;Iris... Iris...! I&#39;m so sorry...&quot;@@

And... 

And...... 

And.........

You sink into a puddle of self-loathing, splayed out on the cell floor. The noises beyond the wall go quiet, and you feel... numb. When it&#39;s all over, you don&#39;t even cry...

Then, the door to your room bursts open, and you barely have time to pull your dress back down before Agares struts in, perfectly neat and tidy. $v31_Name behind her is flushed, with puffy eyes, but otherwise untouched.

&quot;Well, pet, how&#39;d you like the sh—&quot; Your eyes meet, then the witch looks you up and down. Her face goes bright red.

&quot;Wait... y-you... you actually...?!&quot; It doesn&#39;t help your case when you push your thighs together and look away. She shivers.

Somewhere in the awkward pause, you put together all the pieces and realize you&#39;ve been had. The pair&#39;s stilted tropes, $v31_Name&#39;s sudden shock, and the pair&#39;s strange demeanor now. Rather selfishly, you add on &#39;Could $v31_Name ever be satisfied with someone ==other than you== like //that//...?&#39;.

You feel the same amount of shame, but all of its source is redirected inwards. For believing it for even a moment, you kick yourself. At the very least, Agares seems similarly pitiful, as she stammers and yells out.

&quot;I&#39;ll h-have a tailor fit you for a new dress tomorrow!&quot;

Then she bolts off, leaving only you and $v31_Name. She stares at the ground.

&quot;I&#39;m s-sorry, Iris...&quot; She staggers off as well... and you&#39;re alone again.

[[You sigh.|31Hub][$v31_Day += 1]]
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;What?? No??? Under no circumstances are you doing that!&quot;&gt;&gt;&lt;&lt;replace &quot;#options&quot;&gt;&gt;&lt;&lt;set $v31_Attune += 5&gt;&gt;\

You roll to your side and groan. 

Once the sounds beyond the wall fade into the background, they seem much less believable as actual human noises. You passively listen to the two of them, keeping track of all Agares&#39;s uncharacteristic, saccharine flirting to pass the time.

As soon as you notice how strange it all is, you kick yourself for being so quickly seduced by $v31_Name&#39;s voice. You almost let yourself think &#39;Surely $v31_Name would never do that with someone ==other than me== like //her//...&#39; but it proves too embarrassing to consider. 

It&#39;s a mercy when the two of them wrap it up, but you&#39;re caught unaware when Agares bursts through your door with $v31_Name in tow.

&quot;So... how&#39;d you like the show, sweet pet?&quot;

&quot;It was terrible. You&#39;re both bad people.&quot; The witch snickers at that, so you add on. 

&quot;Also... if you want to fake sex noises, you should get some tips from a non-virgin first.&quot; As you expect, $v31_Name blushes at that, but Agares also goes red, only to wave it away and go back to smug right after.

&quot;W-well, sounds to me like someone&#39;s upset that they—&quot; $v31_Name strikes her with an elbow, causing the witch to double over and cough.

&quot;Enough.&quot; Then, she turns to face you. &quot;Sorry, Iris...&quot; You shrug and she goes on.

&quot;Let&#39;s... let&#39;s just agree to call this one a wash, okay?&quot; She shifts around where she stands. &quot;I already felt weird enough reading all those lines... I&#39;d rather not dwell on it.&quot; You smirk and give your assent. She takes Agares by the wrist and pulls her out the door, giving you a small, shy wave as she goes.

[[And you laugh.|31Hub][$v31_Day += 1]]
\&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
\&lt;/span&gt;

&lt;&lt;set $v31_LastSession to &quot;Envy&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="79" name="31Pride" tags="Blood" position="1100,975" size="100,100">&lt;&lt;set $v31_didPrid to true&gt;&gt;\

$v31_Name enters, hiding her face when her eyes meet yours. &lt;&lt;set $v31_Attune += 15&gt;&gt;

You watch her&lt;&lt;if $v31_Day == 3&gt;&gt;... and, when she doesn&#39;t seem to notice your gaze, you clear your throat and make her jump.

&lt;&lt;include [[31IncludePart3]]&gt;&gt;&lt;&lt;elseif $v31_Day == 4&gt;&gt;... and she sinks.

&lt;&lt;include [[31IncludePart4]]&gt;&gt;
&lt;&lt;else&gt;&gt; as she builds up her courage. Agares walks in on her trail and claps a hand on her back. The two of them share a look, and the witch nods.
&lt;&lt;/if&gt;&gt;

$v31_Name steels herself with a slap to her cheek. Then, without another word, the two of them open your cage door and step inside with you. They draw in close, and your heart starts to race, anticipating something terrible. Then... they come to a stop, with Agares at your back and $v31_Name sitting in front of you. Right before you speak up, $v31_Name gets in first and shouts.

&quot;YOU&#39;RE REALLY CUTE!&quot; On instinct, you stare at the floor and inch backwards, but Agares blocks your way. $v31_Name continues. &quot;A-and I really like the soft way you speak when it&#39;s just the two of us...&quot; You blush, but she doesn&#39;t let up, even as she wilt and hides her face in her hands.

&quot;You give really great hugs, too! I always feel calm when you&#39;re holding me, Iris...&quot; $v31_Name pauses... then her face goes red and she starts blubbering. &quot;N-not to imply anything about your chest — or... that&#39;s to say... I-I hardly even notice them— I mean...! S-Sorry!&quot;

Before you can even question her, $v31_Name melts into a puddle on the floor. You pet her head instinctively, which seems to cool her down, then you turn to Agares, who sighs.

&quot;This girl... She was originally supposed to come here solo to amp up your ego, but every test run we did, she could hardly make it through five lines without collapsing.&quot; She sneers down towards $v31_Name. &quot;And even with me to support her on the real thing, she loses control after three.&quot;

The witch pulls a long scroll free from $v31_Name&#39;s hands with her boot, then she plops down beside you.

&quot;Let&#39;s see...&quot; Her eyes flit down the scroll, widening at points before she stops and snorts. &quot;Poor little Seire... If only you knew.&quot; You do try to peer over, but she smacks you on the forehead and pulls the scroll away.

&quot;She liked when you cooked for her any time she got sick. She likes how serious you get about silly competitions. She thinks it was ‘~really cute~&#39; that you didn&#39;t know dragons were real until you were fourteen.&quot; You blush, and Agares cackles at that. As she starts reading off more, you roll your eyes.

&quot;What&#39;s the point of this trial, anyway? Are you gonna embarrass me nonstop until I swear to convert?&quot; At that, the witch sighs.

&quot;Typically, this one&#39;s easy. Most people get very selfish if you puff up their ego enough... but YOU.&quot; She brandishes an accusing finger your way, nearly poking you in the tight space. &quot;Your singleminded devotion has totally redirected your ego response! Any time the girl you like clings to you and whispers sweet nothings, you get more attached to her instead of feeling proud... It pisses me off.&quot;

You blush and stammer out your usual token denials, but, once they&#39;re done, you can&#39;t help but laugh. That only seems to irritate Agares further.

&quot;It&#39;s just that... You say that like it&#39;s so strange, but I can&#39;t imagine it any other way. Is there anyone out there who can take those sorts of feelings and only think about themself?&quot; Without any delay, the witch nods.

&quot;Absolutely one hundred percent, yes.&quot; Then she looks to the ceiling for a moment and comes back down with more. &quot;To be more precise... eighty-seven percent yes for men, sixty-four percent yes for women. For everyone else, and specifically elves... I&#39;ll need more test subjects.&quot;

Despite yourself, you snicker.

&quot;Y&#39;know, I originally thought you were ‘evil-weird&#39;, and I still mostly stand by that, maybe leaning a bit towards ‘weird&#39; more than ‘evil&#39;. That being said... I can&#39;t say I&#39;ve ever met anyone quite like you, Agares.&quot;

The witch huffs. For the slightest moment, you swear you see her blushing, then she buries her face in the scroll, angrily searching for the perfect passage.

&quot;Yeah? Well at least I don&#39;t have a girl telling me I...&quot; She unrolls further and seems more exasperated as she goes. &quot;Sweet Unity beyond, Seire...&quot; And she quickly snaps the scroll shut.

&quot;WAY too many of these mention your tits... You need to put that girl on a leash, pet.&quot;

[[You roll your eyes.|31Hub][$v31_Day += 1]] &lt;&lt;set $v31_Affinity += 15&gt;&gt;
&lt;&lt;set $v31_LastSession to &quot;Pride&quot;&gt;&gt;</tw-passagedata><tw-passagedata pid="80" name="31Escape" tags="Blood" position="1225,975" size="100,100">&lt;&lt;set $v31_PurgeCTP to true&gt;&gt;\
&lt;&lt;if ndef $v31_Escape&gt;&gt; &lt;&lt;set $v31_Escape to true&gt;&gt; &lt;&lt;set $Finished_31 += 1&gt;&gt; &lt;&lt;/if&gt;&gt;
With a flash of light and an incantation, you shatter your restraints and face Agares head on. She scoffs.

&quot;It seems no matter how willing the pet, they always misbehave eventually... What a shame.&quot; And she charges towards you.

$v31_Name intercepts, clotheslining the witch and coming down after her. There&#39;s a glint in the dim light as $v31_Name brings down a ritual dagger, stashed underneath her dress. It connects to Agares&#39;s abdomen, leaving a horrible gash where she pulls it out.

&quot;You won&#39;t lay a finger on her.&quot; She raises the blade again. &quot;Do what you like to me, but I won&#39;t let you harm...&quot; She freezes up for a moment, then her expression hardens. &quot;I won&#39;t let you hold the one I hold most dear!&quot; She thrusts down, but her moment of hesitation costs her everything.

Agares dissolves into a swarm of moths, causing $v31_Name to tumble to the floor and drop her knife. When the witch reappears, she&#39;s at your side, with a clawed hand around your throat. Between sputters and gasps for air, she laughs.

&quot;Seriously? &#39;The one you hold dear&#39;? In Her name...&quot; She incessantly giggles as she hoists you into the air, pressing down hard on your windpipe. You try to force out the words, but even the simple incantations you&#39;d need to free yourself are beyond you like this. &quot;At least now I can see why Her teachings were wasted on you, //Seire//.&quot;

$v31_Name coughs and pulls herself to her feet, leaning on the wall for support. The witch continues berating her.

&quot;This is what I get for taking a charity case. Honestly...&quot; She eyes you, and you writhe and kick at her, to no avail. &quot;This one... she&#39;s not much of a looker, but she makes a perfectly suitable mutt. What does she see in a frigid robot like you?&quot;

The edges of your vision are going dark, but you see her, see $v31_Name launching at Agares and being beat down over and over again. Now that the witch is setting the tempo, she&#39;s powerless, and you don&#39;t have long until you lose consciousness.

You can&#39;t cast anything, your abuse here has left you too frail to fight back, and $v31_Name won&#39;t last much longer. Then... when she wipes a streak of blood from her cut forehead... you remember a technique you learned long ago, and you&#39;re struck by an incredibly cruel plan, the only type you can count on at the moment.

$v31_Name stands and brandishes her knife, and you turn to face her. You mouth three words you&#39;ve never been able to say to her, and you can tell the instant she reads them properly.

&lt;svg width=&quot;25%&quot; viewBox=&quot;0 0 160 28&quot;&gt;&lt;text x=0 y=20 font-size=12pt fill=none stroke=&quot;#071952&quot; stroke-width=0.50&gt;I... love... you.&lt;/text&gt;&lt;/svg&gt;

She wails and charges forward with an awful expression. In this moment, $v31_Name is totally blinded by rage, so you extend your hand... and she slashes it wide open...

The spraying blood speckles Agares&#39;s face. In the next instant, she blinks it away while you pour every drop of power you can muster into your focus. Then, you pass it to your wounded hand, and you weakly thrust it into the witch&#39;s face. She flinches... but when nothing happens, she settles down and smirks at you.

&quot;Nice try, mutt, but—&quot; Then, the crystal at the center of your focus lets off a faint glow. That light refracts through your sorcerous blood, and it amplifies thousands and thousands of times over. Blinding, multicolored light fills every corner of the room. 

Agares drops you, clutching at her face, and you land hard with your focus clattering to the floor inches away. You sweep your arm until you can find it and raise it aloft. By the time you can fill your lungs again, the witch has realized your trick. She spots you in an instant and leaps towards you, and...

You incant.

Darts of lightning manifest behind your head, and they rain down upon Agares. After the first volley stuns her, you go again. Then again. Then again. Then again until long after she stops moving, when your voice goes hoarse and you sink back to the floor.

A dazed $v31_Name pushes herself up and crawls to your side, where she cradles your head in her hands and whimpers.

&quot;Iris!&quot; Her tears run freely now, and they drip down onto your cheeks.

With significant effort, you&#39;re able to croak out a &quot;Sorry...&quot; as you fumble around to take her hand.

She bends down and weeps into your neck, and you wrap an arm around her. Once you&#39;ve finally regained your voice, you whisper.

&quot;Are you okay?&quot; $v31_Name pulls away and nods, with her eyes already swollen and red. You bring her back down against your chest, where she happily hides her face, and you stroke the back of her head with a sigh. &lt;&lt;if $v31_Attune &lt; 75&gt;&gt;&quot;Thank the gods. Thank the gods...&quot;&lt;&lt;else&gt;&gt;&quot;In Her name. In Her name...&quot;&lt;&lt;/if&gt;&gt; She glances up at you, then she winces when your eyes meet.

&quot;B-but... this is all my fault... I brought you here, and...&quot; She tries to push herself off of you, but you cling on tighter. &quot;Iris, I&#39;m serious!&quot;

You lean down and kiss the crown of her head.

&quot;So am I. I told you I forgave you, didn&#39;t I?&quot; She gives in and sulks, resting on your chest. &quot;Besides... even if it was your fault, I&#39;d still want to be with you. I meant what I told you...&quot;

&quot;I love you, $v31_Name.&quot; She blushes and tries to hide her troubled face, which you don&#39;t allow. You wait while she stammers and blushes, trying to get out a response... Then you lean in and kiss her. She responds to //that// easily, relaxing into you and sighing.

When you pull back, she&#39;s got a shaky, blissed-out grin across her flushed face. You can&#39;t help but snicker to yourself.

&quot;You know, $v31_Name... You&#39;re really honest, in your own ways.&quot;

And she lets you kiss her again. And a few times after that. Eventually, though, you realize you have better places to flirt than the muddy dungeon floor of a dead witch, so you lean against her, [[and she leads you out into the woods|30Days]].</tw-passagedata><tw-passagedata pid="81" name="31Submit" tags="Blood" position="100,1100" size="100,100">&lt;&lt;set $v31_PurgeCTP to true&gt;&gt;
With a flash of light and an incantation, you shatter your restraints and face Agares head on. She watches you quietly.

You approach, step by slow step, and arrive at her side where you kneel. &lt;&lt;if $v31_Day &gt;=5&gt;&gt;Seire stares on in shock, then she settles down and grins at the two of you.&lt;&lt;else&gt;&gt;Seire steps in after hearing the commotion, and she grins when she sees the two of you.&lt;&lt;/if&gt;&gt; You bow your head and whisper up to the witch.

&quot;I&#39;m ready, Lady Agares.&quot;

The witch grins, and she lifts your chin with a finger. You don&#39;t even think to resist.

&quot;Do you pledge to serve the All-Mother, to hold Her above all and spread Her teachings to the world?&quot; A smile creeps across your face at the thought.

&lt;span id=&quot;yes&quot;&gt;
&lt;&lt;link &quot;\&quot;Yes, Lady Agares\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#yes&quot;&gt;&gt;&quot;Yes, Lady Agares&quot;&lt;&lt;ctpAdvance &quot;proceed&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;\&quot;Yes, Mistress\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#yes&quot;&gt;&gt;&quot;Yes, Mistress&quot;&lt;&lt;ctpAdvance &quot;proceed&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;\&quot;Yes, my Queen\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#yes&quot;&gt;&gt;&quot;Yes, my Queen&quot;&lt;&lt;ctpAdvance &quot;proceed&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;/span&gt;

&lt;&lt;ctp &quot;proceed&quot;&gt;&gt;&lt;&lt;ctpNext&gt;&gt;She stoops down and kisses you. For just a moment, her tongue slips past your lips, and you shudder. Then, when she pulls away, Agares smiles.

&quot;Then it is done. Henceforth, you will be known as...&quot; She ponders for a moment, then chuckles. &quot;Kimaris. A noble name for a noble creature such as yourself.&quot;

Tears start dripping down your cheek, and Seire sprints to your side, wrapping you in a sudden embrace. She squeezes you tight... and your witch pets your head as she looks on at the two of you. Seire cries with you, and she sniffles as she whispers to you.

&quot;Kimaris... Kimarisssssss...!&quot; She buries her face in your neck. &quot;I&#39;m so happy I could die...&quot; You squeeze her tight and sway with her.

&quot;Kimaris... I love you. I love you so much...&quot; She chants it like a mantra. Each time she does, she kisses you, and you melt deeper and deeper into her embrace.

The three of you celebrate your ascension, long into the night hours. In the morning, Seire and yourself will depart to bring aid to an Osmodaist courtier in Sh&#39;enceriday, so the two of you make the most of what time you have, drinking, indulging, and savoring the witch who brought you together, as well as one another.

For the first time, you feel... [[fulfilled.|30Days]] &lt;&lt;if ndef $v31_Submit&gt;&gt; &lt;&lt;set $v31_Submit to true&gt;&gt; &lt;&lt;set $Finished_31 += 1&gt;&gt; &lt;&lt;/if&gt;&gt;&lt;&lt;/ctp&gt;&gt;</tw-passagedata><tw-passagedata pid="82" name="31CW" tags="OOC" position="225,1100" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Graphic Sexual Content
* Graphic Violence
* Intimate Partner Violence
* Extreme Blood
* Mutilation
* Self Inflicted Injury (It&#39;s complicatead)
* Vomiting
* Cuckolding
* Religious Trauma
* Discussions of Child Abuse (Implied)
[[I consent.|31Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="83" name="31IncludePart3" tags="" position="350,1100" size="100,100">&quot;Listen, $v31_Name, about earlier...&quot; She stares you down as you struggle with your words... Then she shakes her head.

&quot;I know. I&#39;m being childish and pushing my feelings onto you.&quot; She crouches down to level with you. &quot;Still... I can&#39;t help but want to share this revelation with you.&quot; You gulp. She tries a &#39;reassuring&#39; smile, but it doesn&#39;t help your nerves.

&quot;I know you have every reason to despise me. All I ask is that you understand: Everything I&#39;ve done here has been of my own volition.&quot;

You sigh.

&quot;That still doesn&#39;t make sense to me. All these years, you&#39;ve told me the church gave you peace, a purpose, everything... and I&#39;m supposed to believe that all of that changed when you were captured by a witch?&quot;

She takes a few moments to pace the room. While she does, Agares enters behind her, and you flinch. You expect her to lash out at you, punish you, or, worse, punish $v31_Name... but she doesn&#39;t. The witch just walks around the edge of the room, gathering her implements. 

$v31_Name sighs.

&quot;I get that it sounds strange, but you don&#39;t know what they &#39;&#39;did to me&#39;&#39;, Iris. Please, don&#39;t think I&#39;ve made this decision lightly, okay?&quot; You nod, and $v31_Name draws in close. She whispers to you, just low enough that the witch might not hear.

&quot;Agares and I may not agree on everything, but... if her methods can really bring those feelings out from within you... maybe then you&#39;ll understand.&quot; You shiver... and $v31_Name steps back.

&quot;Now... I believe it&#39;s about time we get started.&quot;</tw-passagedata><tw-passagedata pid="84" name="31IncludePart4" tags="" position="475,1100" size="100,100">&quot;Sorry... You probably don&#39;t want to see me right now...&quot; She eyes you tentatively then sighs and adds, &quot;Or maybe you&#39;d be mad if I didn&#39;t show...&quot;

$v31_Name crosses to the room&#39;s center, but she doesn&#39;t step any closer nor look at you after that.

&quot;The distance between us used to be so clear... but now I don&#39;t know how to act around you. I&#39;m trying to stay upset with you, but this morning... &lt;&lt;if $v31_LastSession == &quot;Lust&quot;&gt;&gt;You kissed me, like it was nothing.&lt;&lt;elseif $v31_LastSession == &quot;Gluttony&quot;&gt;&gt;You were so excited to eat my cooking again.&lt;&lt;elseif $v31_LastSession == &quot;Greed&quot;&gt;&gt;We drank together... and it all felt so normal.&lt;&lt;elseif $v31_LastSession == &quot;Sloth&quot;&gt;&gt;You laid beside me, just like we used to.&lt;&lt;elseif $v31_LastSession == &quot;Wrath&quot;&gt;&gt;You went along with my wishes, just because I was the one asking.&lt;&lt;elseif $v31_LastSession == &quot;Envy&quot;&gt;&gt;You tied my ribbon back on and calmed me down, as if I hadn&#39;t just done something awful to you.&lt;&lt;elseif $v31_LastSession == &quot;Pride&quot;&gt;&gt; Well... Agares read you my notes, didn&#39;t she?&lt;&lt;/if&gt;&gt;&quot; You stare up to watch her conflicted face, and you feel yourself sighing as well.

&quot;I understand.&quot; Her shoulders droop. &quot;That&#39;s a normal reaction, I think...&quot; $v31_Name groans and crouches to the floor, perching with her elbows atop her knees.

&quot;Don&#39;t console me from within that cage. It feels wrong.&quot; You laugh, and she finally shoots you a brief, pouty look.

&quot;Sorry, I wasn&#39;t trying to do that. I just meant that I feel the same.&quot; She sighs. Her cute, thoughtful expression draws your eye without trying. From it alone, you&#39;re sure some of the old Lily is still within her. You continue. &quot;I was &#39;&#39;furious&#39;&#39; then, when I thought the witch was controlling you. But now... I&#39;m not sure what I believe.&quot; $v31_Name frowns.

Then, without either of you noticing her arrival, Agares steps forward and gives $v31_Name a light slap on the back, which sends her toppling forward in shock. Agares looks down at her and laughs.

&quot;Honestly, Seire... Weren&#39;t you supposed to be moving past all these dreadful feelings?&quot; She rights herself but doesn&#39;t meet the witch&#39;s gaze. &quot;The All-Mother tells us to enjoy the fruits of life she gave us. She&#39;ll get mad if you waste all your time sulking.&quot;

$v31_Name sits up straight and bows her head towards Agares, who scoffs.

&quot;I&#39;m not the one you should be talking to.&quot; She looks your way, and you instinctively turn away. She sighs. &quot;Go. Kiss and make up so we can get to our work&quot; 

Your eyes meet $v31_Name&#39;s, and you look away. While you do, she stands and crosses the room to sit in front of you. She reaches through the bars of your cage to take your hand in hers.

&quot;She&#39;s right.&quot; $v31_Name sighs... then squeezes your hand. &quot;I&#39;m sorry, Iris.&quot;

&quot;You were worried for me, and I just projected my struggles onto you instead of genuinely hearing you out.&quot; She smiles softly your way.

&quot;I know things can&#39;t be the same again... but I don&#39;t want to lose you. Can we settle this?&quot;

$v31_Name has a determined look about her, more than you&#39;ve ever seen from her in your thirty-some years at her side. She really has changed.

There&#39;s no need to give it any more thought than that. You squeeze her hand and nod.

&quot;I think I&#39;ve already forgiven you... but... I&#39;d still like to talk.&quot; At the corner of the room, Agares taps her foot and waits with all her tools.

&quot;But... maybe we&#39;ll have to save that for the morning.&quot; $v31_Name whirls around, spots the witch, and sighs. She turns back your way and nods.

&quot;Guess so... You&#39;re sure you&#39;re still up for this?&quot; You nod, and her expression towards you softens. She leans down, hovering her face near your cage, and you mirror her without a thought. Then, she darts forward into a quick, shy kiss, before quickly fleeing back across the room..

While you&#39;re in shock, she bows in a brief apology to Agares, and not long after, the experiment proceeds as planned.</tw-passagedata><tw-passagedata pid="85" name="32Start" tags="DarkFuture" position="600,1100" size="100,100">When you throw open your door, Osmodai is sprawled out in front of it, with a pathetic expression and tears in her eyes. She whimpers up to you.

&quot;Inistrae... you actually came.&quot; You take her hand and pull her up to your side, groaning.

&quot;Of course I did, idiot! It&#39;s not safe for you to be here right now...&quot; She just giggles and leans against your shoulder. You scan up and down the hall, but none of your neighbors seem to have noticed the commotion. Osmodai wraps her one good arm around your waist and sways.

&quot;It&#39;s fine, it&#39;s fine. By the time the ceasefire lifts, I&#39;ll be gone anyway.&quot; You scoff.

&quot;Even if you keep saying that, I still have no idea what you mean.&quot; And you pout. &quot;I busted my ass protecting you today, for all the thanks it got me. You&#39;re not seriously planning on giving up, are you?&quot;

She snickers.

&quot;Never. I&#39;ve just... realized a new path forward.&quot; When you don&#39;t respond, she pushes slightly on your back and hobbles forward. &quot;Walk with me?&quot;

...

You sigh.

&quot;If this is a trick, I&#39;m going back to my realm and locking the door.&quot; Osmodai laughs, and the two of you start a slow, quiet procession around the orbital station.

The two of you are the only souls out and about at this hour. With each door you pass, you imagine its master behind it, slavering for the impending return of hostilities. Your stroll is silent, until Osmodai pulls you over to a window and sighs.

&quot;Lachrymis looks so small from up here, doesn&#39;t it? The fruits of all our labours, and yet...&quot; You watch with her. Watching from this vantage point with your normal, mortal eyes, the planet seems tiny. If you squint, you can easily make out larger structures like The Stake and the Old Pharyngean Palace, but they&#39;re dwarfed by the scars you and your kin have left on the landscape.

Osmodai circles her finger around a scorched forest, still smouldering after the full length of the ceasefire.

&quot;I think we kissed there, once. Maybe in the Second Conflict?&quot; You search your memories... then sigh.

&quot;They all blur together, I guess.&quot; Looking at her soft, wilted expression hurts your heart, so you add on. &quot;Maybe once this is all over, we can restore it and see it again. That&#39;d be nice, wouldn&#39;t it?&quot;

Osmodai groans.

&quot;It&#39;ll never end, Inistrae. Even you know that.&quot; You sink. Then, after a moment of quiet, she speaks up again.

&quot;Do you think they&#39;re happy, down there?&quot; She watches you, and, when you try to answer offhand, horrific memories crawl up your throat. You remember zealots slitting their throats for your approval, families scrambling through their shelled homes looking for lost relatives, and entire cities reduced to watery graveyards in an instant.

You choke.

&lt;span id = &quot;nukingcivillians&quot;&gt;\
&lt;&lt;link &quot;\&quot;They must be... This is all any of them have ever known.\&quot;&quot;&gt;&gt; &lt;&lt;replace &quot;#nukingcivillians&quot;&gt;&gt;&quot;They must be... This is all any of them have ever known.&quot; She sighs.

&quot;At some point, I might have agreed... now, I&#39;m not sure.&quot;&lt;&lt;ctpAdvance &quot;core&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;\&quot;Maybe in little moments, but those seem rarer each day.\&quot;&quot;&gt;&gt; &lt;&lt;replace &quot;#nukingcivillians&quot;&gt;&gt;&quot;Maybe in little moments, but those seem rarer each day.&quot; She nods.&lt;&lt;ctpAdvance &quot;core&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;\&quot;Never. We&#39;ve left them nothing but blood and dust...\&quot;&quot;&gt;&gt; &lt;&lt;replace &quot;#nukingcivillians&quot;&gt;&gt;&quot;Never. We&#39;ve left them nothing but blood and dust...&quot; She frowns.

&quot;I&#39;d like to believe that&#39;s not the case...&quot;&lt;&lt;ctpAdvance &quot;core&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;\&quot;I don&#39;t know, and I don&#39;t think I have the right to speculate...\&quot;&quot;&gt;&gt; &lt;&lt;replace &quot;#nukingcivillians&quot;&gt;&gt;&quot;I don&#39;t know, and I don&#39;t think I have the right to speculate...&quot; She nods.&lt;&lt;ctpAdvance &quot;core&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;/span&gt;&lt;&lt;ctp &quot;core&quot;&gt;&gt;&lt;&lt;ctpNext&gt;&gt;

&quot;I think they have some moments of happiness, but we&#39;ve tainted those, too.&quot; She pulses the muscles in her shattered arm.

&quot;Our people, our soldiers... they&#39;ve become exactly what we made them to be. This cycle of predation and destruction is normal to them now.&quot;

You shudder at the thought, not that your experience has been far from the same. Then, Osmodai quickly shifts topics.

&quot;What about The Flowering, then? You were one of the deciding votes against it, after all.&quot; When you tense up, she adds on with a small smile, &quot;I still agree with you. I&#39;m just curious how you square that position with what&#39;s going on planetside.&quot;

Your mind goes back to the summit. The factions there shifted and split more times than you could track. Even after a few under-the-table offers, you stayed insistently on the &#39;Against&#39; side from beginning to end, attracting the ire of a few of your contemporaries in the process. The decision was far from easy, but there was one factor that weighed on your mind above all others.

&lt;span id = &quot;councilvote&quot;&gt;\
&lt;&lt;link &quot;\&quot;We might have &#39;&#39;made&#39;&#39; the people of Lachrymis, but we don&#39;t &#39;&#39;own&#39;&#39; them. We have no right to treat them like cattle.\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#councilvote&quot;&gt;&gt;&quot;We might have &#39;&#39;made&#39;&#39; the people of Lachrymis, but we don&#39;t &#39;&#39;own&#39;&#39; them. We have no right to treat them like cattle.&quot; She smiles.

&quot;I don&#39;t think many of our kin could agree on that. As for me...&quot;&lt;&lt;ctpAdvance &quot;core&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;The last time I trusted one of those backstabbers at their word, I lost an eye. I can&#39;t go through that again.&quot;&gt;&gt;&lt;&lt;replace &quot;#councilvote&quot;&gt;&gt;&quot;The last time I trusted one of those backstabbers at their word, I lost an eye. I can&#39;t go through that again.&quot; She looks you over and sighs.

&quot;Honestly... I&#39;ll never forgive Elegos after that. I understand why you&#39;d be reluctant to trust them again...&quot;&lt;&lt;ctpAdvance &quot;core&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;\&quot;I&#39;m not confident it would work. Even after reading Nekheziel&#39;s notes, I think the Projected Reality Hypothesis is pseudoscientific fantasy.\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#councilvote&quot;&gt;&gt;&quot;I&#39;m not confident it would work. Even after reading Nekheziel&#39;s notes, I think the Projected Reality Hypothesis is pseudoscientific fantasy.&quot; She smirks.

&quot;Really? What do you think happens if someone enters The Unity, then?&quot; And you bite back instantly.

&quot;You die. Painfully.&quot; Osmodai titters, then her expression softens towards you.

&quot;Perhaps... but my research has turned up something different. Either way...&quot;&lt;&lt;ctpAdvance &quot;core&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;\&quot;Our kin are monsters. Even if we gave them a fresh start, they&#39;d keep squabbling over this place until the end of time.\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#councilvote&quot;&gt;&gt;&quot;Our kin are monsters. Even if we gave them a fresh start, they&#39;d keep squabbling over this place until the end of time.&quot; She nods.

&quot;I&#39;m inclined to agree.&quot;&lt;&lt;ctpAdvance &quot;core&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;To be honest... I knew you were against it, and I couldn&#39;t go forward with it if you didn&#39;t agree.&quot;&gt;&gt;&lt;&lt;replace &quot;#councilvote&quot;&gt;&gt;&quot;To be honest... I knew you were against it, and I couldn&#39;t go forward with it if you didn&#39;t agree.&quot; Her eyes go wide for a moment... then she laughs.

&quot;Honestly... how naughty of you, Divine One...&quot; She squeezes your hand. &quot;You judged me right, at least.&quot;&lt;&lt;ctpAdvance &quot;core&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;/span&gt;&lt;&lt;ctpNext&gt;&gt;

&quot;I could never accept the summit&#39;s version of The Flowering. The people down on Lachrymis are fighting and dying every day because they believe we&#39;re guiding them to something better.&quot; Osmodai leans against the window and grimaces... then turns to you with a determined look on her face. 

&quot;I won&#39;t allow anyone to betray that trust, even if it&#39;s founded on a lie.&quot;

She locks her arm into yours.

&quot;Walk with me?&quot; And you do, quietly rounding half the station before coming to a stop in front of an emergency bay. She rests against an escape pod frame and watches you.

The orbital station lurches and chimes out. Morning is coming planetside, as is the end of the ceasefire. Even now, Osmodai doesn&#39;t seem bothered by it. Instead, she asks another question.

&quot;What if there was another way?&quot; You scoff, but she continues. &quot;What if it didn&#39;t take everyone on the planet?&quot;

You wait for the reveal that she&#39;s teasing you... but it doesn&#39;t come.

&quot;Then... who?&quot;

Osmodai droops. You squeeze her hand, and she sighs.

&quot;Just two subjects...&quot; Then, she meets your gaze with a somber expression.

&quot;Us.&quot;

Your heart drops. You try to wrench your arm from hers, but she grips it with surprising strength and stammers towards you.

&quot;I-I&#39;ve done the calculations! Our combined void potential is enough to create a weak but stable //one-way// gate into The Unity!&quot; You finally pull free from her and rub at your arm. She topples over and breaks into a coughing fit.

You turn away.

&quot;Go back to your realm. It&#39;s late.&quot;

Then, when you start to walk away, something wraps around your ankle. You whirl around to look, and Osmodai has extended a long hand of realized void energy from her shattered arm, desperately grasping at you. You twitch, then beads of starlight fall from your fingertips, shredding the hand.  crouch down to level with her.

&quot;Let me make one thing clear: Whatever happens to me, I can take it, but I&#39;ll fight in a thousand Great Wars before I let you sacrifice yourself for those beasts&#39; sake. Don&#39;t even joke about that.&quot; She flounders trying to pull herself to her feet, and you offer her a guilty hand, which she takes. As Osmodai dusts herself off, you whisper to her.

&quot;We promised we&#39;d find a way through this and build a world just for the two of us. Please... I just need more time...&quot;

She sighs... then shakes her head.

&quot;I&#39;m sorry... That&#39;s the one thing I can&#39;t give you.&quot; Your eyes go wide, and Osmodai sheepishly pulls down the neckline on her robe.

There, just above her sternum, sits a crack in her pristine flesh, snaking out and coiling across her breast. Sickly green light oozes from it, as well as the horrible stench of brimstone and the void. On instinct, you reach out to touch it, but she takes your hand in hers and whispers.

&quot;A foul piece of work from Gemyemos in the Fourth Conflict. It sat dormant for a long time, but now...&quot;

She traces both of your fingers across it and trembles.

&quot;I&#39;m rotting from the inside. It&#39;d be a miracle if I make it another month.&quot;

At first, you don&#39;t believe her... then, as the words sink deeper, you wrap yourself around her and begin to weep. Osmodai rubs small circles into your back, and you grip the back of her robes with white knuckles, as if she might drift away at any moment.

The two of you pass some time like this, until the morning sun rises over Lachrymis, and the orbital starts to wake for the day. You haven&#39;t budged an inch from Osmodai&#39;s chest when she whispers to you.

&quot;Inistrae...?&quot; You sigh, which she takes as a response. &quot;We don&#39;t have long now, so... I wanted to make something clear.&quot;

She pulls back and your eyes meet. Despite her impending death, despite the war, despite it all, Osmodai is blushing. She darts in with a quick peck at your lips, before retreating and whispering to you.

&quot;There&#39;s not a &#39;god&#39; on this hunk of metal I care about other than you.&quot; Despite your efforts, you blush with her, and she smiles. &quot;I&#39;m not doing any of this for our kin... instead, it&#39;s for the sake of everyone planetside, suffering in these endless wars.&quot;

You consider the matter, and your heart aches. More than anything, you want to believe in her.

&quot;I trust your work, and I feel the same. Still... appeasement? No matter how much land you can offer our kin, they have no reason to give up on Lachrymis after you&#39;re... we&#39;re... gone. Why would we trust them?&quot; Osmodai sinks and mutters something to herself. You inch closer to listen, but she&#39;s still incoherent. Then, when you&#39;re right beside her face, she yells at full volume.

&quot;Because it&#39;s &#39;&#39;not&#39;&#39; appeasement, idiot!&quot; You jump, and she collects herself before continuing. &quot; Are you not listening? What I&#39;m offering is revenge! //The gate we form will only be one-way!//&quot;

With that, everything finally starts to click in your head. When you consider her plan in its totality, you feel an almost childlike giddyness. Osmodai sees the light in your eyes, and she grins.

&quot;We&#39;ll lure them in with promises of new conquest, then The Unity slams the door behind them.&quot; You laugh and finish her train of thought.

&quot;And once they&#39;re through, they lose their connection to their followers, meaning no powers, and no more war for either side.&quot; She grins. &quot;The planet will be free, and they&#39;ll be trapped in whatever reality we concoct for them.&quot;

Osmodai giggles and nods. 

&quot;Yes! We&#39;ll finally build a world all our own... a gilded cage for the gods of Lachrymis!&quot;

The atmosphere around the two of you is electric. You wrap Osmodai in your arms, and you kiss her. She leans into it, and you both laugh. A peal of gunfire rips through the far hallway, and, with practiced elegance, she opens an escape pod and yanks you inside, [[where you land on top of her|32Flowering]].&lt;&lt;/ctp&gt;&gt;</tw-passagedata><tw-passagedata pid="86" name="32Flowering" tags="Unity" position="725,1100" size="100,100">As the two of you hurtle towards Lachrymis, Osmodai nearly gets cold feet, and you have to urge her on. Without enough time to explain the full ritual, she hands over the individual steps she thinks you can handle. The two of you inscribe sigils copied from her notebook around the pod&#39;s perimeter, and she hangs charms over all the portholes.

Once your preparations are complete and the planet&#39;s surface comes into focus, Osmodai takes your hand and chants. You join in, and color starts to fade from the world around you. Then, with one final incantation, the two of you, together with your vessel, are dragged into The Void.

There, you see the all-consuming power of The Unity up close. A single point at the center of Lachrymis where Void-space tangles and contorts. Even from so far away, its immense gravity pulls at the threads of your mind. Right as you start to panic, you feel a squeeze at your hand, and when you turn, Osmodai is there. Her true and material selves overlap, and you have to grip her tight to ensure her tentacles don&#39;t slip away from you.

Your pod floats closer and closer to that point, passing far beyond where Lachrymis&#39;s surface sits in Real-space. Once you reach close enough, it locks in place. With a quick look between you, the two of you lash out, ripping the escape pod, with all your wards, to slag. As that scrap metal whips around the gravity well, you face the terrifying pressure around you, unprotected. Osmodai watches your vessel fly away with a smile.

&quot;This is it...&quot; You nod, and, when she turns to you, you&#39;re grinning alongside her.

With the ritual primed inside your escape pod, there&#39;s only one step left. You pool all your psychic energy, condensing it down into a single point. She follows suit... and then the two of you relax. Your interwoven fingers keep the two of you together as you drift towards The Unity. The closer you get, the more distorted and noisy your vision gets, until you touch it...

[[And &#39;Inistrae&#39; is no more...|32ThanksForBeingBorn]] &lt;&lt;set $Finished_30 to true&gt;&gt;</tw-passagedata><tw-passagedata pid="87" name="32ThanksForBeingBorn" tags="OOC" position="850,1100" size="100,100">Hey, all. Thanks for reading The Unity!

If you haven&#39;t finished all the excerpts you&#39;d like, this note will be available on your main menu whenever you need it.

This one has had a bit of a turbulent development cycle, shifting form and function a few times, but it&#39;s come out to be longer than The Prince is Dead, and, I think, a bit more interesting. There&#39;s definitely a lot of differences with the anthology style, but I hope it was a nice change of pace for you.

It&#39;s been exactly five years since I completed a real, full project, so I&#39;m really happy that this one turned out. I might have pushed myself a bit too far with this structure, but I definitely want to try something similar (but less masochistic) soon.

As always, all your support in comments, donations, and word-of-mouth recommendations (especially important in the ongoing situation on Itch) mean the world. I&#39;m glad I was able to deliver something extra for supporters, this time, so, if you haven&#39;t checked out the bonus chapters, I highly recommend them. If you don&#39;t have the $3.33, share with a friend. I&#39;m not a cop.

I hope everyone reading this found at least one thing to love in The Unity. Wherever this one ends up being hosted, I&#39;ll be working on a second batch of bonuses, with some maybe coming to the core set as well. Stay tuned for that!

Trans Rights, Free Palestine, and fuck these Christofascist Censorship Lobbyists.

-HN

[[(Return Home)|30Days]]</tw-passagedata><tw-passagedata pid="88" name="32CW" tags="OOC" position="975,1100" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt; &lt;&lt;set $ShowCredits to true&gt;&gt;
* Suicide Depiction (Up to scholarly debate)
* Horrific Imagery of the following:
* Cults
* Suicide
* War
* Natural Disasters
[[I consent.|32Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="89" name="4Start" tags="Blood" position="700,0" size="100,100">You flip idly through a homebound book of poems. It&#39;s been a few weeks since you&#39;ve had to scare any invaders away from your lover&#39;s cabin, and you&#39;re on edge. An old Moraxite rival of yours, Atarakis had been the last to come after rumors of The Huntress, hoping to claim the legendary bounty on her head for mass daemocide.

That moniker has followed you around for some time. You&#39;d delight in it, if it didn&#39;t bring misfortune to all those around you. Not least of all your sweetheart Maeve, who you can hear humming to herself in the kitchen. The two of you have only lived together for a few weeks, so you&#39;ve yet to find the time to explain your sordid second life to her. Each night you make the trip back to her place, she insists on treating your wounds, always chiding with the same forlorn look. &quot;You let those city men work you too hard, Clara.&quot; Sometimes, she&#39;ll massage your bruised, calloused hands with hers, pouting the whole time. There was a time when you&#39;d try to sneak in after a particularly brutal encounter, but it&#39;s hard to explain more than two or three stitched up füresinos bites.

You perk up when you hear her voice from the kitchen. &quot;My dove? A little help?&quot; When you step into the kitchen, she raises up a hand, sticky with dough. &quot;I forgot some herbs for tonight&#39;s supper, could you grab them for me?&quot;

At her instruction, you take powdered rose hips, ginger, and fennel from the spice cabinet, tipping a little of each into a bubbling pot of stew. Maeve thanks you with a hands-off kiss on the cheek, but, before you can return it, there&#39;s a knock at the door.

The two of you share a quick look of apprehension, before you step off to investigate. Your nearest neighbors are very private people living miles out, and no traders have ever bothered you this late in the evening. And, when you open the door, your worst fears are confirmed.

&quot;Oh, good evening ma&#39;am... I was told there was a lady of the cloth here. As you can guess, my health has taken quite poorly to come so far.&quot; A scraggly man in rags greets you, absolutely reeking of ash and saltpeter. You grimace.

&quot;Sorry sir, we can&#39;t offer you any help tonight. Our healer is out for the next month.&quot; He begins to protest, when Maeve, through with her baking, comes to investigate. She beckons to the man from past you, chiding you as she does.

&quot;Oh don&#39;t pout, little dove. He at least needs a warm meal if you&#39;re sending him out on that road.&quot; The man smiles at that. Against your better judgement, you step aside, and the posessed stranger enters your home.

[[...|4Dinner]]</tw-passagedata><tw-passagedata pid="90" name="4Dinner" tags="Blood" position="800,0" size="100,100">You spend the wait staring daggers into your ‘guest&#39;, before Maeve comes to set the table. When she slides a bowl your way, you take one of her hands in yours and lay a gentle kiss on it, all without looking away from him. Maeve returns and sits with the two of you, where she recites a prayer. If it torments the beast as you&#39;d hoped, he hides it well. Smelling the feast laid out before him, the beggar appears to grow anxious, bowing his head before his hostess with faux-modesty.

&quot;This is all too generous, sister. I cannot possibly accept all this. Perhaps some bread crusts would suit me better...&quot; Maeve waves this off.

&quot;Nonsense. If you really must know, I was told in my morning prayers that one would need my help today. So, I&#39;ve prepared more than the two of us could eat alone.&quot; This is the first you&#39;ve heard of that. Still, she beams at the beggar, cowing him into eating, at which point he coughs rather abruptly.

&quot;Then, I suppose I must thank you, sis– ACK.&quot; He quickly covers his mouth and apologizes to her. &quot;S-sorry ma&#39;am... I just hadn&#39;t expected it to be so bitter.&quot; The two laugh this off, although his sounds strained. 

You&#39;ve just been spitefully turning your portion around with a spoon, but when you finally taste it, you&#39;re confused. It&#39;s a delicious, aromatic stew, clearly made with great care. You snicker to yourself.

&quot;I can see why you might think it so with your palate, sir. There&#39;s hardly any human food to be had on the road from town.&quot; At this, Maeve gives you a curious look, and the beggar blubbers for a moment before falling silent. With a few more bites, he apologizes for the inconvenience and stumbles towards the door. You follow him.

&quot;Then, I should escort you off, good sir. Maybe I could call up a carriage to bring you back to town.&quot; He clutches at his side, and Maeve rushes over towards the two of you.

&quot;W-wait, now. It appears the man is injured. Maybe he should stay the night. We have some spare beds.&quot; You stand between the two of them.

&quot;Oh, you worry too much, love. He&#39;s had a lovely meal on an empty stomach. A little walking will clear those cramps right up.&quot;

&quot;Right you might be, but perhaps I could prepare him some tonics to reduce the pain on his way off!&quot;

&quot;Now, let&#39;s be sensible! Look at how our delightful guest glows now. It seems your warmth and hospitality has done him. Well. Enough. Already.&quot;

At this, the beggar throws open the door and breaks into a sprint away from the house. Maeve curses and charges past you. Before you can complain, you hear her muttering under her breath, and a bolt of radiant light flies from her open hand, colliding with the man&#39;s back and sending him to the ground. She can only shoot you a quick apologetic glance before landing over him, pulling a dagger from under her dress, and driving it into his heart.

...

As the ‘beggar&#39; melts to ash, the two of you share a long, wordless gaze of confusion.

...

&quot;I feel like we have a lot to discuss, dear.&quot; She nods in agreement, and the two of you head back inside.

[[(Return Home)|30Days]] &lt;&lt;set $Finished_4 to true&gt;&gt;</tw-passagedata><tw-passagedata pid="91" name="4CW" tags="OOC" position="100,1225" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Fantasy Violence
[[I consent.|4Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="92" name="5Start" tags="BloodlikeEarth" position="800,375" size="100,100">&quot;Hello?&quot;

&quot;Ah, Auntie. Yes, I&#39;m well. Yeah, I&#39;m out with Nicoletta again. We should be home soon. Got it, love you too. Bye.&quot; You answer in the same way you always have, then hang up. The menu on your phone flashes for a second before you snap it shut, showing 15:35, February 7th, 1996.

&quot;What&#39;s she pestering you about now? She need gambling money again?&quot; Nicoletta exhales before stamping her cigarette out on the roadside.

&quot;The usual. I take a walk after class and she figures BNG is ransoming me off to passing tourists.&quot; You laugh, expecting the same from her, but Nicoletta gives you a shameful look before she half-whispers.

&quot;Shit, Amihan, that actually happens to some people... You never know.&quot;

The two of you laugh it off, but you&#39;re not sure how genuine she&#39;s being about that. She sticks out like a sore thumb on any street in Manila, but it&#39;s hard to judge Nicoletta&#39;s true feelings on anything. The fact that you&#39;re this close is an achievement on its own.

Four blocks down, she tugs on your sleeve and points towards a hardware store. &quot;Gotta swing by my guy. Coming in?&quot; You shrug, and she heads in alone. While you wait, you try to recall what it is you were so busy to do when you got home. You flip through some of the books you&#39;re carrying, expecting it to jog your memory, but nothing comes to you. Still, you&#39;re sure there was something.

Nicoletta finally walks back out, with a look of what you interpret to be distress. She&#39;s got a carton of cigarettes bagged up, and she doesn&#39;t stop for any pleasantries. You naturally fall into her rhythm, half-jogging down the street without even knowing why.

&quot;C&#39;mon. let&#39;s take a shortcut.&quot; You groan.

&quot;Do we have to? I&#39;m not sure that&#39;s a good idea.&quot;

&quot;Really? You&#39;re scared?&quot; She snorts at the idea without her pace faltering at all, meanwhile you&#39;re gasping for air just from walking around in the heat.

&quot;Fuck, a little! Maybe you should be, too...&quot; At this, she takes a second to stop, staring quite too close at your face. You blush, then she takes your hand tightly in her free one.

&quot;You&#39;ve got nothing to worry about, Ami. I&#39;ll protect you.&quot; You try to stammer out some complaint, but she starts pulling you towards an alleyway.

[[...|5Alley]]</tw-passagedata><tw-passagedata pid="93" name="5Alley" tags="BloodlikeEarth" position="800,475" size="100,100">The cutthrough is barren most of the way, but, when you pass a pair of foreigners, they call out to your companion.

&quot;Hey, you. You&#39;re de Lupo&#39;s girl, aren&#39;t you?&quot; Nicoletta moves to pull you right past them, but the gruffer one stands past you, chiding her.

&quot;Sister, you&#39;ve got nothing to fear from us. We&#39;re old friends of your dad.&quot; The other stands behind you, yawning.

&quot;Yeah... It&#39;s great we&#39;ve seen you, too. We&#39;ve been trying to meet up with him, but we&#39;re not sure what his new number is. Maybe you could help us out?&quot; She squeezes your hand tight, then she moves, dropping her bags before launching herself at the man in front of her.

The alley around you explodes into action. You land a single flimsy punch on the taller assailant behind you before he slams you into a wall and drops you to the ground. Nicoletta grapples with the other man, snarling and suffocating him as she bears down with her full weight. Your attacker grabs at her, and it&#39;s the most you can do to kick his legs out from under him. You take two solid hits to the face trying to distract him from Nicoletta. This continues for thirty seconds that stretch out to eternity, all until you hear it... a soft, squelching sound, followed by Nicoletta&#39;s screams.

She falls backwards off her target, and you finally give up on yours. When you reach out towards her hand, you see the stain spreading across her blouse. You try to cry out, to grab onto her, but your body is giving out. Your attackers stand, leaning against the wall, and they share looks between each other, you, and Nicoletta.

&quot;Fuck, Marco...&quot; The tall one leans over towards her and groans. &quot;That&#39;s too far, even for you.&quot;

The other– ‘Marco&#39; –  stutters, wiping blood onto the brick wall at his side. &quot;S-she was trying to kill me! What was I supposed to do?&quot; You make a weak sound, and the two panic, bolting off the way you came and slowly leaving your view.

When you finally regain some strength, you crawl to Nicoletta&#39;s side. She meets your gaze with dull eyes and puts a hand to your cheek.

&quot;Ami...&quot; She tries to smile. &quot;Please, tell me you&#39;ll be okay....&quot; A sob catches in your throat. You squeeze her hand and shake your head.

&quot;I won&#39;t. I won&#39;t ever, unless you make it through this...&quot; You think she&#39;s trying to laugh. You pull in closer, cradling her in your arms.

At 16:05 on February 7th 1986, Nicoletta de Lupo&#39;s body goes cold, never to wake again.

...

You sigh.

&quot;RIPITI. Get in here.&quot;

And it slithers in, an oversized, misproportioned cobra with black dot eyes. Then it speaks.

&quot;You Called, Ma&#39;Am?&quot; Your voice has broken down to a hoarse choke, but it seems to hear you just fine.

&quot;Do you think this bitch will run out of enemies before the heat death of our original universe? It feels like nothing I&#39;ve done has improved things at all.&quot; RIPITI coils up on your chest.

&quot;I Could&#39;Nt Say, Ma&#39;Am. Does That Mean You&#39;Ve Reconsidered Going Home?&quot; You laugh.

&quot;Nope. Get 15:35 warmed up for me again.&quot; It sighs.

&quot;You Can&#39;T Be Serious...&quot;

Crowds are starting to gather around the alley, and there&#39;s still a chance you might pass out from exhaustions. You push yourself to stand and flip open your phone.

&quot;There&#39;S A Chance This Never Works, Amiham. Are You Sure?&quot; It arches up to look you in the eye, and you nod.

&quot;Do it. If there&#39;s even the slightest chance... I can&#39;t leave her behind.&quot;

You hear the dialtone, and then...

[[&quot;Hello?&quot;|30Days]] &lt;&lt;set $Finished_5 to true&gt;&gt;</tw-passagedata><tw-passagedata pid="94" name="5CW" tags="OOC" position="475,1225" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Graphic Violence
* Death of a Child
* Blood
[[I consent.|5Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="95" name="7Start" tags="Blood" position="1025,275" size="100,100">A maid passes you on the way back to your rooms, whispering as she does. &quot;She awaits you in your chambers, Lady Eir.&quot; You color and respond with only a short nod. The walk from there is long and quiet, and you spend the whole time thinking about her. When you reach the door, you freeze up.

Is it proper to knock at your own door? This is nothing like your other... conquests. You settle for something in the middle, calling out through the doorway.

&quot;Itxaro...? It&#39;s me. I&#39;m coming inside.&quot;

You steel yourself, step in, and see her there, sitting at your bedside in her nightgown. Your eyes meet, then she flushes and looks into her lap. A great warmth washes over you as you step towards the bed. The princess has set the hearth blazing. You step to her side and rest a hand on hers, dwarfing it. She trembles at your touch.

&quot;I hope I didn&#39;t keep you waiting, your highness.&quot; You step aside as you strip off your top layers. Itxaro peeks over, always turning away when you catch her looking. You find it impossible not to tease her. &quot;I hope you understand that I&#39;ve slept nude my entire life.&quot; She jumps, hiding her face and stammering.

&quot;T-that won&#39;t be a problem, of course. It&#39;s hardly strange between husband and wife...&quot; While she panics, you slink around the bed, sliding in beside her. She looks over to see you, wrapped in thin, silken blankets, and she flicks her gaze up and down your form. You take her hand.

&quot;Shall we turn in, then?&quot; Her gaze meets yours, and you notice a flicker of disappointment, which quickly fades. She nods, sliding in beside you. The two of you lay just slightly apart, close enough that you can feel her breath brush past your neck. The feeling makes your heart flutter. You decide to be a bit more bold, wrapping an arm around Itxaro&#39;s waist and pulling her into an embrace. She whimpers at this, before eventually clinging to you in turn.

&lt;&lt;linkreplace &quot;Kiss her.&quot;&gt;&gt;...
    
You kiss her forehead.

&quot;I hope that all of this has been more... at your pace.&quot; You hold her, rubbing small circles into her back. &quot;Last night was a mess. I don&#39;t want it to ruin the relationship between us.&quot; She nestles in closer, leaving a kiss on your cheek. Content with this, you shut your eyes. You struggle to fall asleep with your bride clinging so tight to you. Itxaro mumbles something into your chest.

&quot;..re...&quot;

&quot;More...&quot; Your pulse quickens. You pull back to look her in the eye, but she just colors and turns away.

...

You stroke the princess&#39;s cheek, and she sighs under your touch. The two of you inch unsurely out of your embrace.

&quot;I want more, Eir. It&#39;s just hard for me to ask for it...&quot; She sighs again, and her voice falters.

&quot;Maybe it&#39;s weird of me to say, but... I want what&#39;s between us to be real. I know I ran away before, but...&quot; She trails off, giving you a pleading, determined look that you haven&#39;t seen since the two of you were so suddenly engaged.

You&#39;ve worked through your fair share of royal weddings and their bloody aftereffects. The relationship between yourself and Itxaro has always been pleasant. You&#39;ve adored her from afar. Still, the gulf between the queensguard and even a low-ranking princess seemed insurmountable.

That is, of course, until here and now, where she lays across from you, in your own bed, asking you for more. There&#39;s a type of sense, or politeness, that&#39;s been guiding you through this strange affair, and she seems determined to break it all down. You&#39;re not sure you could stop her if you tried.

&quot;Are you sure that&#39;s wise, princess?&quot; Ixtaros groans, taking your hand in hers and placing it over her chest. She&#39;s warm, real, shivering at your touch, and... in what you assume was her intended message... her heart is racing just as fast as yours. She stares you down, forcing you to feel her heartbeat, even as the act clearly flusters her.

&quot;I don&#39;t want to be some delicate, distant flower you keep, Eir. I&#39;m your wife now. There shouldn&#39;t be any division between us.&quot;

&quot;S-so, if you wish to deny me... do it for a real reason. ‘Station&#39;, ‘Propriety&#39;, ‘Experience&#39;... I&#39;ll accept none of them...&quot;

&quot;I want you.&quot;

She lets go of your hand, peeling back the blankets to draw your attention down the length of her nightgown. In the small pocket of it you can see her through, she&#39;s dripping with sweat. You shudder.

Your response comes with barely another thought.

&quot;May I start by kissing you, my love?&quot; She nods, pulling her flushed face towards yours.

At first //you// kiss //her//, then she finds her footing and //the two of you kiss//. Ixtaro is awkward and breathy, constantly separating only to pull right back in. You do your best to start slow, but she keeps increasing the pace, throwing herself into you as if she&#39;s spent her whole life waiting for tonight. Your hands wander unbidden, and she whimpers each time you brush over her bare skin.

There&#39;s a pause where you each come up for air, truly seeing one another for once. You smile, and she giggles to herself. Then, the princess takes your hand in hers, creeping it up her arm and to the strap of her nightgown. Her gaze meets yours, pleading and desperate.

&quot;You&#39;re sure?&quot; She nods frantically, barely able to whisper out.

&quot;Please...&quot; before adding &quot;It&#39;s too hot in here, anyway.&quot;

You laugh as you take a strap in each hand, gently pulling them above her head. Ixtaros moans from the sensation of it, as you slowly reveal her.

The princess looks just as you&#39;ve fantasized, but more. Her soft, pampered skin glitters from the sheen of sweat on it. And, when you pull her close, you can feel the full advantage of your height difference as she rests her head comfortably at your breast. With her warmth pressed against you and her breath on your neck, you lose any sense of restraint you might have left.

Without any hesitation, you dive back into her kisses, this time pulling yourself on top as you do. Her hands wander up and down your body, the roughness of her unskilled play making you shudder and moan into her. You guide her to your waist, where she is all too happy to settle. Then, you trace your way up her, towards her chest. Her whimpering gets more and more frantic, until you circle her nipple and she cries out. Her whole body shudders, her hips buck against you, and you taste a hint of iron in your kiss.

You pull back to a spacey, panting Ixtaro staring up at you, glassy-eyed. There&#39;s a small trickle of blood from where she bit down on your tongue. The two of you giggle, until your wife realizes what&#39;s happened and pouts.

&quot;They&#39;ve always been really sensitive... That&#39;s hardly my fault.&quot; Then, she adds, avoiding your gaze, &quot;Besides, your hands feel good... //really// good...&quot; You laugh, then you cut off her next complaint with a kiss.

&quot;Don&#39;t worry, don&#39;t worry... It&#39;s adorable.&quot;

&quot;Besides... now that I know, I plan to exploit it to my heart&#39;s content.&quot; Itxaro gulps, finally getting a clear view of what she&#39;s unleashed.

&quot;W-well, then I&#39;ll have to do my best to keep quiet.&quot;

The two of you laugh, and you hold her face in your hand. She leans into it, placing a little kiss of her own on your thumb. A wicked thought pops into your head.

&quot;Why bother? Is anyone in this court brave enough to reproach you, my lady?&quot; And to that, she has no answer.

[[(Return Home)|30Days]] &lt;&lt;set $Finished_7 to true&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;</tw-passagedata><tw-passagedata pid="96" name="7CW" tags="OOC" position="725,1225" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Graphic Sexual Content
[[I consent.|7Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="97" name="8Start" tags="BloodlikeEarth" position="850,1225" size="100,100">You groan and lay your head on your desk. It&#39;s currently eleven, an hour to lunch, and you&#39;ve yet to add anything to what&#39;s shaping up to be your final project at this job. The standards at this company are brutal, and you&#39;re struggling to find a single unturned stone in all of Eugene.

Normally, you&#39;d find a way to slip by, but you pulled an all-nighter festering about your breakup. You&#39;re not particularly sad about missing out on him, but you wasted a lot of time on your two dates with him, and it&#39;s eating you up. Even after all that, it took an entire extra week for it to become clear he was ghosting you! You groan just from remembering that much.

An extension could save you, but you already used two of those when you were excited to improve the spots you&#39;d already picked out. Your last delay of this scale led to one reader filing a missing person report, so you know better than to ask again. It&#39;s under these pressures that you resign yourself totally to fate, and, not long after, a coworker stops by your cubicle.

&quot;Mitra?&quot; You shoot up, blinking a few times to readjust to the light. The director&#39;s assistant has stepped in with a spread in his hand. You preen back into presentability while you greet him.

&quot;What&#39;s up? Need a review?&quot; You reach out for the spread. He lets you take it, but he shakes his head.

&quot;Much weirder. The boss said your messages were getting gloomy again, and she thought this might give you the inspiration you need.&quot; You gulp. If the boss has noticed that much, she probably knows you&#39;re way behind. That woman always seems to know exactly what you&#39;re going through...

&quot;I&#39;ll check it out. Send Katja my thanks, I guess.&quot; He shrugs and walks out without another word.

The spread is covered in garish, occult markings. There&#39;s no byline, but there is a title, decreeing &quot;YOUR DESTINED SPOT COULD EXIST HERE IN EUGENE. IGNORE IT AT YOUR OWN PERIL.&quot; You snort at the very idea. None of the formatting matches anything your department would approve, and by combining that with all the recommended shops that went out of business years ago, you figure this must be a pretty old snipping. Still... you figure it can&#39;t hurt to humor it.

According to the article, the Mystic&#39;s Method&#39; relies on a set of two numbers which connect into a grid of local attractions. As you flip through, though, the steps of this magic process get further and further from what you&#39;d expect of a fortune teller. You start with your birth month in the ‘penumbra&#39; (on the left), and your birth day in the ‘antumbra&#39; (on the right). Then, add the first two and last two digits of your birth year, followed by subtracting the number of partners and dates in the past three years. For some reason, you then add, split across the pools: your home number (divided by seven until it&#39;s an even number of digits), the middle two digits of your Social Security Number, and the death months (or birth months if they&#39;re still alive) of your parents. (Morbid.) Finally, you divide each number by five, take the remainder, and map it to the grid.

The process tests your patience, but your outcome is a relatively popular local cafe called ‘Fabricación&#39;. You walk past it every day, but you&#39;ve never seen anything past the bland exterior. According to the blurb given, it&#39;s ‘Industrial Cleaning&#39; themed, which makes you laugh out loud. Maybe that was Katja&#39;s goal all along.

As if on cue, the clock strikes noon and your coworkers start shuffling out of the office for lunch. You typically meal prep for work to save money, but in your stupor this morning you forgot to pack anything. Your emotional brain is still hung up on the creepy questionnaire, but you figure a little industry research couldn&#39;t hurt. [[So, you pack up you laptop and hit the street.|8Fab]]</tw-passagedata><tw-passagedata pid="98" name="8Fab" tags="BloodlikeEarth" position="975,1225" size="100,100">When you first step foot into ‘Fabricación&#39;, you&#39;re shocked by a few things:

	First, the entire cafe is made up in metallic facades, high-traction rubber floors, and proper caution signage, with ambient industrial sound completing the picture of a real factory floor.
	Second, several waitresses are buzzing around the floor at all times, wearing hi-visibility vests, goggles, and hard hats over full-length maid dresses.
	Third, one such hostess greets you at the door, offering you the same PPE and giving you a verbal warning for wearing unsafe footwear. You almost feel real shame for that, somehow.

You&#39;re shocked that such a strange place has been here, right under your nose this entire time. Before you can linger on that too much, you walk right up to your fourth shock.

&quot;Mitra? You&#39;re on my line?&quot; When you can&#39;t form an intelligible response, she clarifies, &quot;Ah, excuse me. I mean... I&#39;ve never seen you around here. What brings you to a place like this?&quot; You put aside a few of your base-level questions and slide into the booth beside Katja.

&quot;Well... weirdly enough, I found it in that questionnaire you sent over to me.&quot; She gives you a look of disbelief, then giggles.

&quot;What are the odds of that?&quot; Then, she adds, &quot;Well, if you believe any of that occult stuff, I guess it was guaranteed.&quot;

The two of you laugh, and you settle in, looking over the menu. Still, even without any belief in the occult, some part of you is put off by this whole affair. After a few minutes, a line-boss maid swings by, dropping off two perfectly cubical cakes, each iced in shiny, metallic colors. You give her your coffee order, but you decide to wait a bit before ordering food.

Katja slides the copper-cube cake over towards you.

&quot;Here. I can usually go through two, but I&#39;ve been meaning to start a diet some time soon.&quot; When you move to refuse her offer, she slides a fork your way, goading you to try at least one bite. You give in and discover that copper seems to correspond to a mild, quite satisfying carrot cake.

&quot;Fine, it&#39;s delicious. Thanks.&quot; She gives you a self-satisfied grin. &quot;I&#39;m still not entirely sold on the cubes, though.&quot; At that, Katja just shrugs.

&quot;Isn&#39;t it more fun to rip something apart when it&#39;s simple and pure like that? Like it might be wrong to eat it, or that it might have some higher purpose that you&#39;re denying it?&quot; You take the chance to shrug this time, at which she laughs. &quot;Who&#39;s to say? I think it&#39;s fun.&quot;

Your coffee arrives a few moments later, as well as a to-go box for Katja, who stands and stretches.

&quot;Well, sorry to run, but I have a meeting on the road. See you back at the office, Mitra.&quot; She grins as you wave her off, then she steps back for a moment and whispers. &quot;Also, if you&#39;re still on your egg salad sandwich kick, Eike makes a killer one. It&#39;s off-menu, though. Don&#39;t tell anyone I told you or I could lose my status.&quot; Then, she steps off, returning her PPE and disappearing from view.

...

You shiver, and that strange feeling returns.

While it&#39;s true you&#39;ve been trying to perfect an egg salad recipe you found online, you&#39;ve never brought it up in the office, and you&#39;ve definitely never discussed it in front of Katja.

[[You take your coffee to-go.|30Days]] &lt;&lt;set $Finished_8 to true&gt;&gt;</tw-passagedata><tw-passagedata pid="99" name="8CW" tags="OOC" position="1100,1225" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Stalking
* Maid Cafes
[[I consent.|8Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="100" name="9Start" tags="BloodlikeEarth" position="925,325" size="100,100">Today, you&#39;ve succeeded at a strategic play that will be written in history books across the planet. Your rival, Aniceta Viteri, has walked straight into your trap without a clue what&#39;s in store for her. She paces around the entryway to your apartment, seeming to remark only on total banalities.

&quot;This place has gotten way neater since I was here, Haoran. I&#39;m a little envious&quot; You shrug, rather than give her more information. Instead, she&#39;s drawn over to a shelf covered in awards and honors. &quot;And our challenge cup! I&#39;m honored you&#39;d keep it somewhere so prominent...&quot; She laughs, and you have no choice but to defuse the slight.

&quot;Well, degrees and accolades are one thing, but it&#39;s just as important that I remember the teams my career has introduced to me.&quot; Your perfectly virtuous statement appears to have the intended effect, and a stunned Aniceta steps out into your kitchen, rifling through your fridge as if it were her own.

&quot;What&#39;s tonight&#39;s plan? Paint me a picture.&quot; You follow close behind.

&quot;Bottom shelf. Black box with a GLB logo.&quot; She pulls out the box you specify, then opens it and takes out two delicate, amber-colored bottles. &quot;From a collab in Shanghai. They come with local black teas mixed in the bottle, paired to match specific local yeast. Shipping them in was a racket, but they&#39;re supposedly worth it.&quot;

She turns a bottle around between her hands, before looking up at you with a strange expression.

&quot;Have I ever told you how much I love you, Haoran?&quot;

...

When you don&#39;t respond, she pushes one bottle your way, before reaching into her back pocket for her bottle opener. Just as you planned, it&#39;s missing. 

When she looks to you for help, you produce your magnum opus. She hands you her bottle, and you lever it open. As you do, a payload of three small, pink pills spills out, perfectly concealed by the opening of the bottle. The beer inside fizzes and churns from the medicine as you slide it back towards her. You quickly open your bottle and raise it up.

&quot;Ganbei, Aniceta.&quot; She takes a moment, swirling the drink around, testing its scent. For a moment, you think she might have caught on, but, if she does, she doesn&#39;t say. Then, she clinks her bottle off yours.

&quot;Ganbei.&quot;

And the two of you drink.

It has a deep, chocolate-like flavor, uplifted by the complex floral tea. As you enjoy your first taste, Aniceta&#39;s eyes are trained on you with soft, slow blinks. She goes in for another sip and sighs.

&quot;Shall we sit? I&#39;m already feeling a little shaky.&quot; The two of you circle around into the living room, and you bring the case with you when you go. She eventually reaches the couch, plopping down a touch too close and brushing your legs against one another. 

&quot;S-sorry. Not sure what&#39;s up with me today...&quot; She moves back a few inches, hardly enough to give you any personal space. You stare, proud to see your months of work finally coming together. Aniceta colors bright red, turning away and taking another deep sip. You, on the other hand, can keep her pace and be totally unaffected.

When she looks back and you&#39;re still watching her, she stammers at you, &quot;What? What are you so transfixed over..?&quot; You smirk.

&quot;You have interesting reactions. That&#39;s all.&quot; She pouts, but she moves closer as she does, taking back a piece of that distance she just created.

&quot;You&#39;re so unfair, Haoran...&quot; She slurs her words and waves a finger your way. &quot;Every time we drink, I get wasted and you feel nothing...&quot; You can&#39;t actually take credit for those. This drug of yours is new and cutting edge, but Aniceta has been a super-lightweight since the two of you stole your first drinks from her parents.

She inches even closer, sipping and resting her head on your shoulder. When you wrap a consolatory arm around her, she jumps at your touch and whimpers. You expect her to pull away or show some sort of shame, but, if anything, she snuggles in closer. This sort of humiliating control was exactly what you&#39;d hoped to see from your experiment, but it&#39;s made you more nervous than anything.

&quot;Unfaaaaaair... Unfair......&quot; She whispers, incredibly close to your face, now. &quot;It&#39;s so unfair... How come you never let me kiss you anymore, Haoran...&quot; At this, it&#39;s your turn to blush. You try to pull away from her grasp, but she clings to you with her full weight.

&quot;What are you–&quot; She shushes you, pulling herself into your lap and straddling you.

&quot;Haorannnnnnnn~ Do you want to hear a secret?&quot; You gulp and try in vain to hide your face, only provoking Aniceta to grab you and play with your cheeks. &quot;But first... you&#39;re behind.&quot; She holds up her bottle, which she apparently downed while you were distracted. You half-heartedly lift yours to your lips, then Aniceta takes it in her hand, tipping it higher up. You gag and choke on the last of your beer, and she giggles.

&quot;Good girl... good girl...! You drank it all for me... Eheheh...&quot; She takes another two bottles out the pack, clinking them open against one another, and making a foamy mess all over your chest and the couch. &quot;I love you soooooo much, Haoran~&quot; And you both drink again.

By the time Aniceta&#39;s energy runs out, the two of you finish the entire box in this position, [[and you end the night on a deeply humiliating note, cradling your rival in your arms.|30Days]] &lt;&lt;set $Finished_9 to true&gt;&gt;</tw-passagedata><tw-passagedata pid="101" name="9CW" tags="OOC" position="100,1350" size="100,100">&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;CONTENT WARNINGS:&lt;/h3&gt;
* Sexual Coercion
* Drugging (Aphrodesiacs)
* Intimate Acts while Intoxicated (Alcohol, Aphrodesiacs)
[[I consent.|9Start]]
[[Take me back.|30Days]]</tw-passagedata><tw-passagedata pid="102" name="29StartX" tags="" position="225,1350" size="100,100">Roxanne squirms in the passenger seat and whispers to you.

&quot;I-I don&#39;t know if this is a good idea. Maybe we should wait a little longer, Mom...&quot;

You snicker.

&quot;It&#39;ll be fine. Just... you&#39;ll remember to call me by my name, right?&quot; She blushes, then turns to hide her face.

&quot;Right... Sorry, Eileen.&quot; You pet her head, and she lifts a cooler up into her lap. &quot;Shall we head in?&quot; And you nod.

You step out, then circle around the truck to open Roxanne&#39;s door. She smiles, then hops out and takes your hand. The two of you walk quietly up the driveway and a curling set of stairs, coming to stop at a flimsy front door, decorated with a tacky, several-months-outdated holly wreath. She steps forward and knocks. The two of you wait for a few moments.

Then, the door creaks open, and an older woman steps out, pulling Roxanne straight into a hug.

&quot;Roxy! I&#39;m so glad you could make it, sweet girl...&quot; She casts her gaze towards you and smirks. &quot;Then, you must be...&quot; She tapers off for a bit, until Roxanne steps in.

&quot;This is Eileen, Mom.&quot;</tw-passagedata><tw-passagedata pid="103" name="B1Start" tags="OOC" position="350,1350" size="100,100">&lt;h3 style = &quot;margin-bottom: -20px&quot;&gt;Secret Bonus 1: Explain Your Reasoning&lt;/h3&gt;

I&#39;ve read a couple of those &#39;Fill-In-The-Blank&#39; yuri anthologies, and I always find the blanks for explaining your entry very compelling. So, consider this the blank below each entry within The Unity. Hopefully, you&#39;ll find something in here enlightening.

And, because this section will likely be littered with shoutouts and references, so they&#39;ll be pooled under the relevant entries as a pseudo-bibliography. Think of it as required reading, if you&#39;re into that.

(Stories will appear below as you finish them.)

&lt;&lt;if $Finished_1&gt;&gt;\
&lt;&lt;linkappend &quot;1. Repairs&quot;&gt;&gt;

This is a little embarrassing to say as a formally trained roboticist, but I&#39;m really into robots, especially of the inexplicably lesbian kind. We were supposed to have the year of robot sex in 2025, but it seems that instead we just got a bunch of people &#39;dating&#39; chatbots. Both as a person who cares about the future, AND as someone who finds robotic arms erotic, this is depressing.

If we were to have ethical, sentient robots, I really think the dynamic between the (unnamed) protagonists here is the best. I love the sort of relationship where it&#39;s impossible to tell who&#39;s really in charge, and I think the disparity between a mechanic, with the power to shape and control a robot, and their robot, capable of incredible apocalyptic violence but bound by rules, is... inadvisable... but VERY fun to toy with.

Bibl.: //Portal Series (2007-2011)//, for corrupting me into liking mean, lesbian robots from a young age. 
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_2&gt;&gt;\
&lt;&lt;linkappend &quot;2. Feeding&quot;&gt;&gt;

Vampires, obsessive partners, maids, size differences, reversal, intox, these are the most important tools to a lesbian. I&#39;m also obsessed with the strange relationship between immortals and mortals, where someone can adopt you a vaguely maternal role, take care of you in a vaguely older-sister role, then be the object of your affection in a lovey-dovey relationship. It&#39;s a little gross, a little uncomfortable, and I think that&#39;s important.

Vampirism-as-alcoholism is also quite nice. It&#39;s fun to see someone corrupt their partner into doing something ultimately bad for them out of selfish desire. The concept that Eleanor becomes a totally different person when she&#39;s feeding, that this strange maternalistic relationship becomes totally flipped on its head, is the pinnacle to me.

Bibl.: //Malcatra&#39;s Maiden by Nadia Nova//, any context would be a spoiler; //The Hundred Line: Last Defense Academy//, for putting &#39;bloodfeeding as breastfeeding&#39; into my head and making me unable to ever be normal again.
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_3&gt;&gt;\
&lt;&lt;linkappend &quot;3. Brutale&quot;&gt;&gt;

For a story as absurd as a Killing Game, I thought it&#39;d be best to ground it in a believable location, so this one ended up being set in a (fictional) abandoned military ourpost in the (real) forests near Medzev in modern Czechia. All the military ranks and jargon are from the modern Czech armed forces, so the only overtly-fictional element is the presence of some extra secret military bases, which would probably make sense in a setting where the fall of the USSR didn&#39;t happen. (Although, that addition comes a few weeks later and isn&#39;t directly mentioned here.)

There&#39;s a lot of background work into this situation with &#39;Emil&#39; and the barracks unifying together, and I thought this was an instance where just missing the money shot makes things much more interesting. The important part isn&#39;t the mechanics of the game, nor the masterminds, nor the brave sacrifice of a leader figure. All that matters is the peace created between the barracks member, specifically so Kalina can shatter it to demonstrate her perverse dedication to her own survival. The knock-on effect of Noemi being implicated with her and likely being alienated from the rest of the group is only a bonus. There&#39;s something delightful about the conflict between a fake emotionally numb killer and a REAL murder-enjoyer.

I think the future for these two is very ambiguous. Is it romantic? Don&#39;t ask me. Erotic? Unbelievably. Will they win? Probably. Will they make it back out to their normal life? The very concept is impossible. If anything, this is the sort of relationship with the vibe that things would be better if they died together in the scenario and didn&#39;t have to cope with the consequences of their actions. This does mean, inevitably, that I wouldn&#39;t allow them something so simple and peaceful. My apologies to the not-so-happy couple. &lt;3

Bibl.: Really hate that I&#39;m citing //The Hundred Line: Last Defense Academy// twice in a row, but I was never sold on &#39;Killing Game&#39; as a genre before it.
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_4&gt;&gt;\
&lt;&lt;linkappend &quot;4. Same Secret&quot;&gt;&gt;

It&#39;s very rare that I go for soft, fluffy cottagecore these days, but the relationship between Clara and Maeve is just weird enough to keep my interest. I love relationships with secret lives, so why not go for secret life X secret life? I also really like the idea who do similar work, but whose different methods make them totally inscrutable to one another. This stealthily comes up again in 8, but it&#39;s the forefront here.

It was also quite fun researching period-accurate things for this. Specifically, Maeve is making a period-accurate (yknow, to the period where demons are real) honey and date cake. The presence of kneaded dough was originally a stealthed red-herring so I could catch someone out on misunderstanding the history of baking pre–baking powder. Obviously, that&#39;s delusional.

Bibl.: Yes, I really have to cite //Hildegard von Bingen&#39;s Causae et Curae (Tr. 2016)// from the 12th century, because Maeve&#39;s anti-demon stew uses ingredients based on curatives from the book. The assumption is that things that help people must hurt demons, which is a fun shorthand.
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_5&gt;&gt;\
&lt;&lt;linkappend &quot;5. Redo&quot;&gt;&gt;

This one was about 90% research by mass, and a huge chunk of it never got used. Still, I think over-researching really helps set the tone for a historical narrative like this. On the surface, this is the story of two girls growing up in Manila. The full truth, however, ties into the political struggles of a 1970s Italy still grappling with the downfall of overt fascism... as well as the People Power Revolution in The Philipines of the 1980s... as well as a little bit of the Vietnam War and the global effects of American fascism.

Also, Amihan watches her girlfriend die for like twenty years straight before we even get to the sequel... AND I didn&#39;t even get to use RIPITI that much despite how cute I&#39;ve pictured him in my head... this one&#39;s a real downer, huh? (For those of you math-heads, that means Amihan watched Nicoletta die around 7300 times between here and Story 21.)

Bibl.: You probably shouldn&#39;t play //Stein&#39;s Gate//, but I can&#39;t pretend that this 90s–00s technology based timeloop story didn&#39;t get the idea from there.
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_7&gt;&gt;\
&lt;&lt;linkappend &quot;6. Holding Back&quot;&gt;&gt;

The first of many Mandatory Fucking Fridays... Three, there were three of them before things got too changed up.

For this one, I really wanted to capture that wolf-sheep dynamic I love so much. The doglike womanizer varangian bodyguard type of Eir really grew on me, to the point that this one had to get a sequel (See Story 24.), but I&#39;m also into Itxaro. Her &#39;deal&#39; is mostly offscreen baggage, but I really delight in the idea of a young, disempowered princess who countercultures //into// a more chivalrous, lovey-dovey marriage. There&#39;s also an intriguing offscreen dynamic at play between Itxaro, her sister, and Eir that becomes a core focus in the sequel.

I had planned for a lot more sex, then I had to cut back a bit to stay on track. In the end, I think the level of that we ended up with is perfect. My original notes say &quot;Itxaro learns she can cum entirely from her nipples&quot;, and it happens, big checkbox for me.
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_8&gt;&gt;\
&lt;&lt;linkappend &quot;7. &#39;Coincidence&#39;&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_9&gt;&gt;\
&lt;&lt;linkappend &quot;8. Buried Feelings&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_10&gt;&gt;\
&lt;&lt;linkappend &quot;9. Lady of Faith&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_11&gt;&gt;\
&lt;&lt;linkappend &quot;10. Brave Disciple&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_12&gt;&gt;\
&lt;&lt;linkappend &quot;11. Rivalry&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_13&gt;&gt;\
&lt;&lt;linkappend &quot;12. Reasons to Fight&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_15&gt;&gt;\
&lt;&lt;linkappend &quot;13. Infestation&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_16_A and $Finished_16_B&gt;&gt;\
&lt;&lt;linkappend &quot;14. Authority&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_17&gt;&gt;\
&lt;&lt;linkappend &quot;15. Quiet Life&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_18&gt;&gt;\
&lt;&lt;linkappend &quot;16. Betrothal&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_20&gt;&gt;\
&lt;&lt;linkappend &quot;17. Legion&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_19&gt;&gt;\
&lt;&lt;linkappend &quot;18. By Blood&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_21&gt;&gt;\
&lt;&lt;linkappend &quot;19. Envoy&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_14&gt;&gt;\
&lt;&lt;linkappend &quot;20. Sunrise&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_6 == 4&gt;&gt;\
&lt;&lt;linkappend &quot;21. Plasticity&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_22&gt;&gt;\
&lt;&lt;linkappend &quot;22. Fair Trade&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_23&gt;&gt;\
&lt;&lt;linkappend &quot;23. Reliance&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_24&gt;&gt;\
&lt;&lt;linkappend &quot;24. Shield&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_25&gt;&gt;\
&lt;&lt;linkappend &quot;25. Competition&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_26&gt;&gt;\
&lt;&lt;linkappend &quot;26. Service&quot;&gt;&gt;

(Note: This prompt WAS part of poly week, but in its procession, it managed to LOSE an entire love interest. They still exist, in fact, they&#39;re literally downstairs while these two are going about their hijinks. If you learned how often things like this simply disappeared, you would be horrified.)
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_27&gt;&gt;\
&lt;&lt;linkappend &quot;27. ...&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_28&gt;&gt;\
&lt;&lt;linkappend &quot;28. Reflection&quot;&gt;&gt;

Short question: When will we invent the first robot with Borderline Personality Disorder?

Long discussion: I think &#39;selfcest&#39; is looked on as a very tropey, absurdist concept, but I find the idea kind of rich. If we were to live in a world with synthetic or biological cloning (of the sci-fi kind), how much would it fuck someone up to be in a romantic relationship with their clone? Personally, I think it&#39;s almost doomed to be toxic, in a way. That sort of echo-chamber environment seems like it would ruin a lot of people&#39;s brains, which is where I got the idea to do it to someone already incredibly emotionally volatile in Yawen Lu.

There&#39;s a strange disjoint between Yawen&#39;s initial view of the doll and where it ends up, and I based a lot of that in studies I&#39;ve read about robotic personification. Movement and the ability to communicate are a big part of what makes humans packbond with inanimate objects. The only one of the key personifiers missing from the doll is a name. It&#39;s probably obvious from the title, but I think Yawen&#39;s emotional reaction to the doll comes from a displaced relationship she has with another version of herself. Humans personify things because we feel they reflect parts of ourselves, and I think exposure to such an accurate reflection of yourself is a sort of cognitohazard.

I also think the sickening dynamic between Yawen and her doll is a two-way street, which I love. It all came relatively naturally from the setup, but once I landed on the idea that she would immediately &#39;trauma anchor&#39; onto the doll, I knew I&#39;d struck psychological yuri gold. The idea that a doll, freshly born and fearing for her life, would immediately fawn over this stranger and manipulate her into forming an emotional attachment gives me lesbian goosebumps, I love it. I want them to ruin each other...

Where&#39;d the sister thing come from? Easy. I&#39;m a vile, vile woman with incest constantly on the brain. I&#39;ve had younger-sister types floating around my head this week, so I had to project the same onto my fellow robo-pervert Safa. 

Emotionally manipulative little sister robot in a polycule in Shenzhen? That&#39;s a Hypatia Nil bingo.
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_29&gt;&gt;\
&lt;&lt;linkappend &quot;29. ...&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_30&gt;&gt;\
&lt;&lt;linkappend &quot;30. The Unity&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="104" name="BBlueprint" tags="" position="475,1350" size="100,100">Blurb

&lt;&lt;if $Finished_1&gt;&gt;\
&lt;&lt;linkappend &quot;1. Repairs&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_2&gt;&gt;\
&lt;&lt;linkappend &quot;2. Feeding&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_3&gt;&gt;\
&lt;&lt;linkappend &quot;3. Brutale&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_4&gt;&gt;\
&lt;&lt;linkappend &quot;4. Same Secret&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_5&gt;&gt;\
&lt;&lt;linkappend &quot;5. Redo&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_7&gt;&gt;\
&lt;&lt;linkappend &quot;6. Holding Back&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_8&gt;&gt;\
&lt;&lt;linkappend &quot;7. &#39;Coincidence&#39;&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_9&gt;&gt;\
&lt;&lt;linkappend &quot;8. Buried Feelings&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_10&gt;&gt;\
&lt;&lt;linkappend &quot;9. Lady of Faith&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_11&gt;&gt;\
&lt;&lt;linkappend &quot;10. Brave Disciple&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_12&gt;&gt;\
&lt;&lt;linkappend &quot;11. Rivalry&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_13&gt;&gt;\
&lt;&lt;linkappend &quot;12. Reasons to Fight&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_15&gt;&gt;\
&lt;&lt;linkappend &quot;13. Infestation&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_16_A and $Finished_16_B&gt;&gt;\
&lt;&lt;linkappend &quot;14. Authority&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_17&gt;&gt;\
&lt;&lt;linkappend &quot;15. Quiet Life&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_18&gt;&gt;\
&lt;&lt;linkappend &quot;16. Betrothal&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_20&gt;&gt;\
&lt;&lt;linkappend &quot;17. Legion&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_19&gt;&gt;\
&lt;&lt;linkappend &quot;18. By Blood&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_21&gt;&gt;\
&lt;&lt;linkappend &quot;19. Envoy&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_14&gt;&gt;\
&lt;&lt;linkappend &quot;20. Sunrise&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_6 == 4&gt;&gt;\
&lt;&lt;linkappend &quot;21. Plasticity&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_22&gt;&gt;\
&lt;&lt;linkappend &quot;22. Fair Trade&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_23&gt;&gt;\
&lt;&lt;linkappend &quot;23. Reliance&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_24&gt;&gt;\
&lt;&lt;linkappend &quot;24. Shield&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_25&gt;&gt;\
&lt;&lt;linkappend &quot;25. ...&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_26&gt;&gt;\
&lt;&lt;linkappend &quot;26. ...&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_27&gt;&gt;\
&lt;&lt;linkappend &quot;27. ...&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_28&gt;&gt;\
&lt;&lt;linkappend &quot;28. ...&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_29&gt;&gt;\
&lt;&lt;linkappend &quot;29. ...&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_30&gt;&gt;\
&lt;&lt;linkappend &quot;30. The Unity&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="105" name="B2Start" tags="" position="600,1350" size="100,100">&lt;h3 style = &quot;margin-bottom: -20px&quot;&gt;Secret Bonus 2: Cutting Room Floor&lt;/h3&gt;

A huge chunk of time spent writing any one of these stories was into research and setting specifics, with the exact balance changing across genres. So, just to get some of these things out there, I&#39;ve bundled them up here. If I&#39;ve done my job properly, you&#39;ll have been able to intuit a lot of these ideas from context, but I&#39;ve laid them out here in hopes everyone will find something &#39;neat&#39;.

(Stories will appear below as you finish them.)

&lt;&lt;if $Finished_1&gt;&gt;\
&lt;&lt;linkappend &quot;1. Repairs&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_2&gt;&gt;\
&lt;&lt;linkappend &quot;2. Feeding&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_3&gt;&gt;\
&lt;&lt;linkappend &quot;3. Brutale&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_4&gt;&gt;\
&lt;&lt;linkappend &quot;4. Same Secret&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_5&gt;&gt;\
&lt;&lt;linkappend &quot;5. Redo&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_7&gt;&gt;\
&lt;&lt;linkappend &quot;6. Holding Back&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_8&gt;&gt;\
&lt;&lt;linkappend &quot;7. &#39;Coincidence&#39;&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_9&gt;&gt;\
&lt;&lt;linkappend &quot;8. Buried Feelings&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_10&gt;&gt;\
&lt;&lt;linkappend &quot;9. Lady of Faith&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_11&gt;&gt;\
&lt;&lt;linkappend &quot;10. Brave Disciple&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_12&gt;&gt;\
&lt;&lt;linkappend &quot;11. Rivalry&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_13&gt;&gt;\
&lt;&lt;linkappend &quot;12. Reasons to Fight&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_15&gt;&gt;\
&lt;&lt;linkappend &quot;13. Infestation&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_16_A and $Finished_16_B&gt;&gt;\
&lt;&lt;linkappend &quot;14. Authority&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_17&gt;&gt;\
&lt;&lt;linkappend &quot;15. Quiet Life&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_18&gt;&gt;\
&lt;&lt;linkappend &quot;16. Betrothal&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_20&gt;&gt;\
&lt;&lt;linkappend &quot;17. Legion&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_19&gt;&gt;\
&lt;&lt;linkappend &quot;18. By Blood&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_21&gt;&gt;\
&lt;&lt;linkappend &quot;19. Envoy&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_14&gt;&gt;\
&lt;&lt;linkappend &quot;20. Sunrise&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_6 == 4&gt;&gt;\
&lt;&lt;linkappend &quot;21. Plasticity&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_22&gt;&gt;\
&lt;&lt;linkappend &quot;22. Fair Trade&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_23&gt;&gt;\
&lt;&lt;linkappend &quot;23. Reliance&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_24&gt;&gt;\
&lt;&lt;linkappend &quot;24. Shield&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_25&gt;&gt;\
&lt;&lt;linkappend &quot;25. Competition&quot;&gt;&gt;

Most of this one made it in, but mostly in one, specific, randomized section. A shocking amount of these details come from the specifics of Carina&#39;s stupid gacha game, Goldstar Rising. 

One response mentions her &quot;Revolution of the Heavenly Bodies&quot; tier subscription. This is actually a premium second tier to the game&#39;s obligatory Battle Pass Progression. The lower tier, &quot;Exalted Rebirth&quot; is much more affordable, and Carina originally joked that Ruby&#39;s kid brother must be an ER player based on how she described him. She&#39;s the worst.

Two currencies also get shouted out, which are &#39;Avaricious Fragments&#39; and &#39;Twisted Genesis&#39;, of which the prior are used to buy the former to make pulls. If this sounds convoluted, please know I modeled this after my actual gacha addiction of ~5 years ago.

Also, Ruby&#39;s real name is Marike, and (there is no serious-sounding way to put this) the &#39;mayor&#39; that Sema meets with is, in fact, NYC mayor (at time of writing) Eric Adams. Whether this comes before or after his other alleged backroom dealings with other Turkish moguls, I leave as an exercise to the reader. As the preeminent scholar said, all my haters become my waiters at the table of success.
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_26&gt;&gt;\
&lt;&lt;linkappend &quot;26. Service&quot;&gt;&gt;

As mentioned in the previous bonus, this story originally had an entire extra love interest for poly week. The story just wrapped itself into too cute a little bow to add anything extraneous.

In the original brief, Radia&#39;s suitor, Cruz, was present. They had a planned sort of &#39;helpful political marriage&#39; vibe with Radia, where the two bonded over both being really into Eun. While Radia cared for Eun from all their time together, Cruz comes from nobility under a Materials Engineering megacorp, PolyC Ltd. (Kinda like //PolyC//arbonate : //Policy// : //Poly//-C) and has a fixation on androids. They&#39;d also serve as a vector to get a little deeper Eun&#39;s whole deal.

On that:

Eun is a repurposed &#39;&#39;E&#39;&#39;xtinction &#39;&#39;Un&#39;&#39;it, fit with an Enforcer to wrest Anima from the user&#39;s enemies. It ended up in a scrapyard, where Radia found and saved it with her previous maid. Since then, she&#39;s added a series of modifications to it (including the bit of squishable chest depicted in the story, and all sorts of sensory gizmos). Over the years, Radia has tried to dress it up in all sorts of fancy outfits, but it prefers the original, quite modest maid outfit. Also, it&#39;s name is written with the hanja for &#39;mercy&#39; (恩).

Radia is another blueblood, as the second in lines to the WINGS media corp, but she&#39;s been ill since her birth, requiring daily Anima injections. The effects can be... volatile... and she&#39;s still quite weak otherwise. Eun tries to keep her exercising and going out, but it&#39;s never easy. When she doesn&#39;t have the energy for much else, she&#39;s got a natural talent for technical painting, which is why she originally found Eun.
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_27&gt;&gt;\
&lt;&lt;linkappend &quot;27. Regicide&quot;&gt;&gt;

There&#39;s so much excess background here that the two main character&#39;s &#39;&#39;names&#39;&#39; are cut content.

&#39;The Black Knight&#39; is one Eranuhi of Leloxiti, an orcish paladin of Gemyemos, The Eternal Tyrant. She doesn&#39;t get to use most of her fire-tricks in this one, partially because she&#39;s holding herself back and partially because she&#39;s put herself into a bit of an Attunement hole, so she&#39;s rationing her magic use. As for her connections with the princess, she and Rosana met as kids, where the two of them plotted a very romantic hostile takeover of the kingdom together.

Rosana&#39;s knight, of course, is Vaso, a Lizardfolk paladin of Velpharin, The Liberator (Much more on the nose than originally intended...). She was taken in by the royal family from a flotilla on the northern sea. She was one of the few people raised in the Eastern Palace, where Rosana was kept for most of her life. The two had a close, sisterly relationship when they were young (Rosana being the elder), but from childhood to Eranuhi&#39;s return, they ended up being each other&#39;s only real love prospects. Their relationship is strained by Vaso being a true believer in the king, but they remain close through the kingdom&#39;s collapse. All of this leads, of course, to Eranuhi and Rosana ambushing and kidnapping Vaso to spirit her away. 
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_28&gt;&gt;\
&lt;&lt;linkappend &quot;28. ...&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_29&gt;&gt;\
&lt;&lt;linkappend &quot;29. ...&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_30&gt;&gt;\
&lt;&lt;linkappend &quot;30. The Unity&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="106" name="B3" tags="" position="725,1350" size="100,100">&lt;h3 style = &quot;margin-bottom: -20px&quot;&gt;Secret Bonus 3: Connections&lt;/h3&gt;
Blurb

&lt;&lt;if $Finished_1&gt;&gt;\
&lt;&lt;linkappend &quot;1. Repairs&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_2&gt;&gt;\
&lt;&lt;linkappend &quot;2. Feeding&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_3&gt;&gt;\
&lt;&lt;linkappend &quot;3. Brutale&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_4&gt;&gt;\
&lt;&lt;linkappend &quot;4. Same Secret&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_5&gt;&gt;\
&lt;&lt;linkappend &quot;5. Redo&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_7&gt;&gt;\
&lt;&lt;linkappend &quot;6. Holding Back&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_8&gt;&gt;\
&lt;&lt;linkappend &quot;7. &#39;Coincidence&#39;&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_9&gt;&gt;\
&lt;&lt;linkappend &quot;8. Buried Feelings&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_10&gt;&gt;\
&lt;&lt;linkappend &quot;9. Lady of Faith&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_11&gt;&gt;\
&lt;&lt;linkappend &quot;10. Brave Disciple&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_12&gt;&gt;\
&lt;&lt;linkappend &quot;11. Rivalry&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_13&gt;&gt;\
&lt;&lt;linkappend &quot;12. Reasons to Fight&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_15&gt;&gt;\
&lt;&lt;linkappend &quot;13. Infestation&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_16_A and $Finished_16_B&gt;&gt;\
&lt;&lt;linkappend &quot;14. Authority&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_17&gt;&gt;\
&lt;&lt;linkappend &quot;15. Quiet Life&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_18&gt;&gt;\
&lt;&lt;linkappend &quot;16. Betrothal&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_20&gt;&gt;\
&lt;&lt;linkappend &quot;17. Legion&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_19&gt;&gt;\
&lt;&lt;linkappend &quot;18. By Blood&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_21&gt;&gt;\
&lt;&lt;linkappend &quot;19. Envoy&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_14&gt;&gt;\
&lt;&lt;linkappend &quot;20. Sunrise&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_6 == 4&gt;&gt;\
&lt;&lt;linkappend &quot;21. Plasticity&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_22&gt;&gt;\
&lt;&lt;linkappend &quot;22. Fair Trade&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_23&gt;&gt;\
&lt;&lt;linkappend &quot;23. Reliance&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_24&gt;&gt;\
&lt;&lt;linkappend &quot;24. Shield&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_25&gt;&gt;\
&lt;&lt;linkappend &quot;25. ...&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_26&gt;&gt;\
&lt;&lt;linkappend &quot;26. ...&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_27&gt;&gt;\
&lt;&lt;linkappend &quot;27. ...&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_28&gt;&gt;\
&lt;&lt;linkappend &quot;28. ...&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_29&gt;&gt;\
&lt;&lt;linkappend &quot;29. ...&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $Finished_30&gt;&gt;\
&lt;&lt;linkappend &quot;30. The Unity&quot;&gt;&gt;

Content
&lt;&lt;/linkappend&gt;&gt;\
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="107" name="StoryDisplayTitle" tags="" position="850,1350" size="100,100">The Unity
(30 X 30 X 30)</tw-passagedata><tw-passagedata pid="108" name="StorySubtitle" tags="" position="975,1350" size="100,100">@@opacity:0.7;Rev. 1.0@@</tw-passagedata><tw-passagedata pid="109" name="30Days" tags="autosave" position="1100,1350" size="100,100">\ &lt;&lt;set $checks to 0&gt;&gt;
\ &lt;!--  SEX PINK: #ff75fa;  VIOLENCE ORANGE: #ffbf75;  BOTH GREEN: #75ff7a --&gt;
&lt;table id=&quot;calendar&quot; style = &quot;width:100%;text-align:left;vertical-align:top&quot;&gt;
    &lt;tr&gt; &lt;!-- Week of the 1st --&gt;
        &lt;td&gt;1: &lt;&lt;if $Finished_2&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;
        [[Feeding|2CW]]&lt;/td&gt;
        &lt;td&gt;2: &lt;&lt;if $Finished_1&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;
        [[Repairs|1CW]]&lt;/td&gt;
        &lt;td&gt;@@color:#ffbf75;3: &lt;&lt;if $Finished_3&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;@@
        [[Brutale|3CW]]&lt;/td&gt;
        &lt;td&gt;4: &lt;&lt;if $Finished_4&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;
        [[Same Secret|4CW]]&lt;/td&gt;
        &lt;td&gt;@@color:#ffbf75;5: &lt;&lt;if $Finished_5&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;@@
        [[Redo|5CW]]&lt;/td&gt;
        &lt;td&gt;@@color:#ff75fa;6: &lt;&lt;if $Finished_7&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;@@
        [[Holding Back|7CW]]&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt; &lt;!-- Week of the 8th --&gt;
        &lt;td&gt;7: &lt;&lt;if $Finished_8&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;
        [[&#39;Coincidence&#39; |8CW]]&lt;/td&gt;
        &lt;td&gt;8: &lt;&lt;if $Finished_9&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;
        [[Buried Feelings|9CW]]&lt;/td&gt;
        &lt;td&gt;@@color:#ff75fa;9: &lt;&lt;if $Finished_10&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;@@
        [[Lady of Faith|10CW]]&lt;/td&gt;
        &lt;td&gt;@@color:#ffbf75;10: &lt;&lt;if $Finished_11&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;@@
        [[Brave Disciple|11CW]]&lt;/td&gt;
        &lt;td&gt;11: &lt;&lt;if $Finished_12&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;
        [[ &#39;Rivalry&#39; |12CW]]&lt;/td&gt;
        &lt;td&gt;@@color:#75ff7a;12: &lt;&lt;if $Finished_13&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;@@
        [[Reasons to Fight|13CW]]&lt;/td&gt;

    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;13: &lt;&lt;if $Finished_15&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;
        [[Infestation|15CW]]&lt;/td&gt;
        &lt;td&gt;@@color:#75ff7a;14: &lt;&lt;if $Finished_16_A and $Finished_16_B&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;elseif $Finished_16_A or $Finished_16_B&gt;&gt;1/2&lt;&lt;/if&gt;&gt;@@
        [[Authority|16CW]]&lt;/td&gt;
        &lt;td&gt;@@color:#ffbf75;15: &lt;&lt;if $Finished_17&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;@@
        [[Quiet Life|17CW]]&lt;/td&gt;
        &lt;td&gt;16: &lt;&lt;if $Finished_18&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;
        [[Betrothal|18CW]]&lt;/td&gt;
        &lt;td&gt;@@color:#ffbf75;17: &lt;&lt;if $Finished_20&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;@@
        [[Legion|20CW]]&lt;/td&gt;
        &lt;td&gt;@@color:#ff75fa;18: &lt;&lt;if $Finished_19&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;@@
        [[By Blood|19CW]]&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;19: &lt;&lt;if $Finished_21&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;
        [[Envoy|21CW]]&lt;/td&gt;
        &lt;td&gt;@@color:#ffbf75;20: &lt;&lt;if $Finished_14&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;@@
        [[Sunrise|14CW]]&lt;/td&gt;
        &lt;td&gt;@@color:#ff75fa;21: &lt;&lt;if $Finished_6 == 4&gt;&gt;✓&lt;&lt;elseif $Finished_6 &gt; 0&gt;&gt;&lt;&lt;print $Finished_6&gt;&gt;/4&lt;&lt;/if&gt;&gt;@@
        [[Plasticity|6CW]]&lt;/td&gt;
        &lt;td&gt;22: &lt;&lt;if $Finished_22&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;
        [[Fair Trade|26CW]]&lt;/td&gt;
        &lt;td&gt;23: &lt;&lt;if $Finished_23&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;
        [[Reliance|24CW]]&lt;/td&gt;
        &lt;td&gt;@@color:#ffbf75;24: &lt;&lt;if $Finished_24&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;@@
        [[Shield|25CW]]&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;25: &lt;&lt;if $Finished_25&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;
        [[Competition|27CW]]&lt;/td&gt;
        &lt;td&gt;@@color:#ff75fa;26: &lt;&lt;if $Finished_26&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;@@
        [[Service|28CW]]&lt;/td&gt;
        &lt;td&gt;@@color:#ffbf75;27: &lt;&lt;if $Finished_27&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;@@
        [[Regicide|29CW]]&lt;/td&gt;
        &lt;td&gt;28: &lt;&lt;if $Finished_28&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;
        [[Reflection|30CW]]&lt;/td&gt;
        &lt;td&gt;@@color:#75ff7a;29: &lt;&lt;if $Finished_31 == 2&gt;&gt;✓&lt;&lt;elseif $Finished_31 &gt; 0&gt;&gt;&lt;&lt;print $Finished_31&gt;&gt;/2&lt;&lt;/if&gt;&gt;@@
        [[Corruption|31CW]]&lt;/td&gt;
        &lt;td&gt;30: &lt;&lt;if $Finished_30&gt;&gt;✓&lt;&lt;set $checks += 1&gt;&gt;&lt;&lt;/if&gt;&gt;
        [[The Unity|32CW]]&lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;

&lt;h3 style=&quot;margin-bottom: -20px&quot;&gt;Tag Legend:&lt;/h3&gt;
@@color:#ff75fa;Graphic Sexual Content@@
@@color:#ffbf75;Graphic Violence@@
@@color:#75ff7a;Both@@

&lt;&lt;if $ShowCredits&gt;&gt;[[Afterword|32ThanksForBeingBorn]]&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="110" name="CoreDisclaimer" tags="OOC" position="1225,1350" size="100,100">Quick, important disclaimer:

This work contains a wide variety of adult and sensitive content. It is not suitable for anyone under the age of 18. Viewer discretion is advised.

If you&#39;re still here, note that there are Content Warnings at the top of every story. They&#39;ve not been applied liberally, so pay attention to them and take them seriously. You&#39;re responsible for your own safety. Love you.

[[Send me in.|30Days]]</tw-passagedata></tw-storydata>
	<script id="script-sugarcube" type="text/javascript">
	/*! SugarCube JS */
	if(document.documentElement.getAttribute("data-init")==="loading"){(function(window,document,jQuery,undefined){"use strict";var _excluded=["bubbles","cancelable","composed","detail"],_excluded2=["bubbles","cancelable"],_excluded3=["state"];function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray(r)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==_typeof(i)?i:i+""}function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)o=s[r],t.includes(o)||{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.includes(n))continue;t[n]=r[n]}return t}function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_unsupportedIterableToArray(r,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}function _arrayWithHoles(r){if(Array.isArray(r))return r}function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}var errorPrologRegExp=/^(?:(?:uncaught\s+(?:exception:\s+)?)?\w*(?:error|exception|_err):\s+)+/i,Alert=function(){function mesg(where,error,isFatal,isUncaught){var mesg="Error",nice="A".concat(isFatal?" fatal":"n"," error has occurred.");nice+=isFatal?" Aborting.":" You may be able to continue, but some parts may not work properly.";var isObject=null!==error&&"object"===_typeof(error),what=(isObject&&"message"in error?String(error.message).replace(errorPrologRegExp,""):String(error)).trim()||"unknown error";null!=where&&(mesg+=" [".concat(where,"]")),mesg+=": ".concat(what,"."),isObject&&"stack"in error&&(mesg+="\n\nStack Trace:\n".concat(error.stack)),mesg&&(nice+="\n\n".concat(mesg)),isUncaught||console[isFatal?"error":"warn"](mesg),window.alert(nice)}var origOnError;return origOnError=window.onerror,window.onerror=function(what,source,lineNum,colNum,error){"complete"===document.readyState?mesg(null,null!=error?error:what,!1,!0):(mesg(null,null!=error?error:what,!0,!0),window.onerror=origOnError,"function"==typeof window.onerror&&window.onerror.apply(this,arguments))},Object.preventExtensions(Object.create(null,{error:{value:function(where,error){mesg(where,error)}},fatal:{value:function(where,error){mesg(where,error,!0)}}}))}(),Patterns=(wsMap=new Map([[" ","\\u0020"],["\f","\\f"],["\n","\\n"],["\r","\\r"],["\t","\\t"],["\v","\\v"],[" ","\\u00a0"],[" ","\\u1680"],["᠎","\\u180e"],[" ","\\u2000"],[" ","\\u2001"],[" ","\\u2002"],[" ","\\u2003"],[" ","\\u2004"],[" ","\\u2005"],[" ","\\u2006"],[" ","\\u2007"],[" ","\\u2008"],[" ","\\u2009"],[" ","\\u200a"],["\u2028","\\u2028"],["\u2029","\\u2029"],[" ","\\u202f"],[" ","\\u205f"],["　","\\u3000"],["\ufeff","\\ufeff"]]),wsRe=/^\s$/,missing="",wsMap.forEach((function(pat,char){wsRe.test(char)||(missing+=pat)})),space=missing?"[\\s".concat(missing,"]"):"\\s",spaceNoTerminator="[\\u0020\\f\\t\\v\\u00a0\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]",notSpace="\\s"===space?"\\S":space.replace(/^\[/,"[^"),anyChar="(?:.|".concat("[\\n\\r\\u2028\\u2029]",")"),anyLetter="[0-9A-Z_a-z\\-\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u00ff\\u0150\\u0170\\u0151\\u0171]",anyLetterStrict=anyLetter.replace("\\-",""),identifier="".concat("[$A-Z_a-z]").concat("[$0-9A-Z_a-z]","*"),variable="[$_]"+identifier,htmlTagName="[A-Za-z](?:".concat(cENChar="(?:[\\x2D.0-9A-Z_a-z\\xB7\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u203F\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])","*-").concat(cENChar,"*|[0-9A-Za-z]*)"),twStyle="(".concat(anyLetter,"+)\\(([^\\)\\|\\n]+)\\):"),cssStyle="".concat(spaceNoTerminator,"*(").concat(anyLetter,"+)").concat(spaceNoTerminator,"*:([^;\\|\\n]+);"),idOrClass="".concat(spaceNoTerminator,"*((?:").concat("[#.]").concat(anyLetter,"+").concat(spaceNoTerminator,"*)+);"),inlineCss="".concat(twStyle,"|").concat(cssStyle,"|").concat(idOrClass),url="(?:file|https?|mailto|ftp|javascript|irc|news|data):[^\\s'\"]+",externalUrl=url.replace(/\|javascript|\|data/g,""),Object.freeze(Object.assign(Object.create(null),{space:space,spaceNoTerminator:spaceNoTerminator,lineTerminator:"[\\n\\r\\u2028\\u2029]",notSpace:notSpace,anyChar:anyChar,anyLetter:anyLetter,anyLetterStrict:anyLetterStrict,identifierFirstChar:"[$A-Z_a-z]",identifierNextChar:"[$0-9A-Z_a-z]",identifier:identifier,variableSigil:"[$_]",variable:variable,macroName:"[A-Za-z][\\w-]*|[=-]",templateName:"[A-Za-z][\\w-]*",htmlTagName:htmlTagName,cssIdOrClassSigil:"[#.]",cssImage:"\\[[<>]?[Ii][Mm][Gg]\\[(?:\\s|\\S)*?\\]\\]+",inlineCss:inlineCss,url:url,externalUrl:externalUrl}))),wsMap,wsRe,missing,cENChar,twStyle,cssStyle,idOrClass,space,spaceNoTerminator,notSpace,anyChar,anyLetter,anyLetterStrict,identifier,variable,htmlTagName,inlineCss,url,externalUrl;!function(){var startWSRe,endWSRe,_trimString=(startWSRe=new RegExp("^".concat(Patterns.space).concat(Patterns.space,"*")),endWSRe=new RegExp("".concat(Patterns.space).concat(Patterns.space,"*$")),function(str,where){var val=String(str);if(!val)return val;switch(where){case"start":return startWSRe.test(val)?val.replace(startWSRe,""):val;case"end":return endWSRe.test(val)?val.replace(endWSRe,""):val;default:throw new Error('_trimString called with incorrect where parameter value: "'.concat(where,'"'))}});function _createPadString(length,padding){var targetLength=Number.parseInt(length,10)||0;if(targetLength<1)return"";var padString=void 0===padding?"":String(padding);for(""===padString&&(padString=" ");padString.length<targetLength;){var curPadLength=padString.length,remainingLength=targetLength-curPadLength;padString+=curPadLength>remainingLength?padString.slice(0,remainingLength):padString}return padString.length>targetLength&&(padString=padString.slice(0,targetLength)),padString}if(Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,writable:!0,value:function flat(){if(null==this)throw new TypeError("Array.prototype.flat called on null or undefined");var depth=0===arguments.length?1:Number(arguments[0])||0;if(depth<1)return Array.prototype.slice.call(this);var push=Array.prototype.push;return Array.prototype.reduce.call(this,(function(acc,cur){return cur instanceof Array?push.apply(acc,flat.call(cur,depth-1)):acc.push(cur),acc}),[])}}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatMap called on null or undefined");return Array.prototype.map.apply(this,arguments).flat()}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");if(0===arguments.length)return!1;var length=this.length>>>0;if(0===length)return!1;var needle=arguments[0],i=Number(arguments[1])||0;for(i<0&&(i=Math.max(0,length+i));i<length;++i){var value=this[i];if(value===needle||value!=value&&needle!=needle)return!0}return!1}}),Object.entries||Object.defineProperty(Object,"entries",{configurable:!0,writable:!0,value:function(obj){if("object"!==_typeof(obj)||null===obj)throw new TypeError("Object.entries object parameter must be an object");return Object.keys(obj).map((function(key){return[key,obj[key]]}))}}),Object.fromEntries||Object.defineProperty(Object,"fromEntries",{configurable:!0,writable:!0,value:function(iter){return Array.from(iter).reduce((function(acc,pair){if(Object(pair)!==pair)throw new TypeError("Object.fromEntries iterable parameter must yield objects");return pair[0]in acc?Object.defineProperty(acc,pair[0],{configurable:!0,enumerable:!0,writable:!0,value:pair[1]}):acc[pair[0]]=pair[1],acc}),{})}}),Object.getOwnPropertyDescriptors||Object.defineProperty(Object,"getOwnPropertyDescriptors",{configurable:!0,writable:!0,value:function(obj){if(null==obj)throw new TypeError("Object.getOwnPropertyDescriptors object parameter is null or undefined");var O=Object(obj);return Reflect.ownKeys(O).reduce((function(acc,key){var desc=Object.getOwnPropertyDescriptor(O,key);return void 0!==desc&&(key in acc?Object.defineProperty(acc,key,{configurable:!0,enumerable:!0,writable:!0,value:desc}):acc[key]=desc),acc}),{})}}),!Object.hasOwn){var _hasOwnProperty=Object.prototype.hasOwnProperty;Object.defineProperty(Object,"hasOwn",{configurable:!0,writable:!0,value:function(O,P){return _hasOwnProperty.call(Object(O),P)}})}Object.values||Object.defineProperty(Object,"values",{configurable:!0,writable:!0,value:function(obj){if("object"!==_typeof(obj)||null===obj)throw new TypeError("Object.values object parameter must be an object");return Object.keys(obj).map((function(key){return obj[key]}))}}),String.prototype.padStart||Object.defineProperty(String.prototype,"padStart",{configurable:!0,writable:!0,value:function(length,padding){if(null==this)throw new TypeError("String.prototype.padStart called on null or undefined");var baseString=String(this),baseLength=baseString.length,targetLength=Number.parseInt(length,10);return targetLength<=baseLength?baseString:_createPadString(targetLength-baseLength,padding)+baseString}}),String.prototype.padEnd||Object.defineProperty(String.prototype,"padEnd",{configurable:!0,writable:!0,value:function(length,padding){if(null==this)throw new TypeError("String.prototype.padEnd called on null or undefined");var baseString=String(this),baseLength=baseString.length,targetLength=Number.parseInt(length,10);return targetLength<=baseLength?baseString:baseString+_createPadString(targetLength-baseLength,padding)}}),String.prototype.trimStart||Object.defineProperty(String.prototype,"trimStart",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimStart called on null or undefined");return _trimString(this,"start")}}),String.prototype.trimLeft||Object.defineProperty(String.prototype,"trimLeft",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimLeft called on null or undefined");return _trimString(this,"start")}}),String.prototype.trimEnd||Object.defineProperty(String.prototype,"trimEnd",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimEnd called on null or undefined");return _trimString(this,"end")}}),String.prototype.trimRight||Object.defineProperty(String.prototype,"trimRight",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimRight called on null or undefined");return _trimString(this,"end")}})}(),function(){var _regExpMetaCharsRe,_hasRegExpMetaCharsRe,_formatRegExp,_hasFormatRegExp,_nativeMathRandom=Math.random;function _random(){var min,max;switch(arguments.length){case 0:throw new Error("_random called with insufficient parameters");case 1:min=0,max=arguments[0];break;default:min=arguments[0],max=arguments[1]}if(min>max){var _ref=[max,min];min=_ref[0],max=_ref[1]}return Math.floor(_nativeMathRandom()*(max-min+1))+min}function _randomIndex(length,boundsArgs){var min,max;switch(boundsArgs.length){case 1:min=0,max=length-1;break;case 2:min=0,max=Math.trunc(boundsArgs[1]);break;default:min=Math.trunc(boundsArgs[1]),max=Math.trunc(boundsArgs[2])}return Number.isNaN(min)?min=0:!Number.isFinite(min)||min>=length?min=length-1:min<0&&(min=length+min)<0&&(min=0),Number.isNaN(max)?max=0:(!Number.isFinite(max)||max>=length||max<0&&(max=length+max)<0)&&(max=length-1),_random(min,max)}function _getCodePointStartAndEnd(str,pos){var code=str.charCodeAt(pos);if(Number.isNaN(code))return{char:"",start:-1,end:-1};if(code<55296||code>57343)return{char:str.charAt(pos),start:pos,end:pos};if(code>=55296&&code<=56319){var nextPos=pos+1;if(nextPos>=str.length)throw new Error("high surrogate without trailing low surrogate");var nextCode=str.charCodeAt(nextPos);if(nextCode<56320||nextCode>57343)throw new Error("high surrogate without trailing low surrogate");return{char:str.charAt(pos)+str.charAt(nextPos),start:pos,end:nextPos}}if(0===pos)throw new Error("low surrogate without leading high surrogate");var prevPos=pos-1,prevCode=str.charCodeAt(prevPos);if(prevCode<55296||prevCode>56319)throw new Error("low surrogate without leading high surrogate");return{char:str.charAt(prevPos)+str.charAt(pos),start:prevPos,end:pos}}Object.defineProperty(Array.prototype,"concatUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.concatUnique called on null or undefined");var result=Array.from(this);if(0===arguments.length)return result;var items=Array.prototype.reduce.call(arguments,(function(prev,cur){return prev.concat(cur)}),[]),addSize=items.length;if(0===addSize)return result;for(var indexOf=Array.prototype.indexOf,push=Array.prototype.push,i=0;i<addSize;++i){var value=items[i];-1===indexOf.call(result,value)&&push.call(result,value)}return result}}),Object.defineProperty(Array.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.count called on null or undefined");for(var indexOf=Array.prototype.indexOf,needle=arguments[0],pos=Number(arguments[1])||0,count=0;-1!==(pos=indexOf.call(this,needle,pos));)++count,++pos;return count}}),Object.defineProperty(Array.prototype,"countWith",{configurable:!0,writable:!0,value:function(predicate,thisArg){if(null==this)throw new TypeError("Array.prototype.countWith called on null or undefined");if("function"!=typeof predicate)throw new Error("Array.prototype.countWith predicate parameter must be a function");var length=this.length>>>0;if(0===length)return 0;for(var count=0,i=0;i<length;++i)predicate.call(thisArg,this[i],i,this)&&++count;return count}}),Object.defineProperty(Array.prototype,"deleteAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteAll called on null or undefined");if(0===arguments.length)return[];var length=this.length>>>0;if(0===length)return[];for(var needles=Array.prototype.concat.apply([],arguments),needlesLength=needles.length,indices=[],i=0;i<length;++i)for(var value=this[i],j=0;j<needlesLength;++j){var needle=needles[j];if(value===needle||value!=value&&needle!=needle){indices.push(i);break}}for(var result=[],_i=0,iend=indices.length;_i<iend;++_i)result[_i]=this[indices[_i]];for(var splice=Array.prototype.splice,_i2=indices.length-1;_i2>=0;--_i2)splice.call(this,indices[_i2],1);return result}}),Object.defineProperty(Array.prototype,"deleteAt",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteAt called on null or undefined");if(0===arguments.length)return[];var length=this.length>>>0;if(0===length)return[];for(var splice=Array.prototype.splice,cpyIndices=Array.from(new Set(Array.from(arguments).map((function(x){return x<0?Math.max(0,length+x):x}))).values()),delIndices=Array.from(cpyIndices).sort((function(a,b){return b-a})),result=[],i=0,iend=cpyIndices.length;i<iend;++i)result[i]=this[cpyIndices[i]];for(var _i3=0,_iend=delIndices.length;_i3<_iend;++_i3)splice.call(this,delIndices[_i3],1);return result}}),Object.defineProperty(Array.prototype,"deleteFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteFirst called on null or undefined");if(0!==arguments.length){var length=this.length>>>0;if(0!==length){for(var splice=Array.prototype.splice,needles=Array.prototype.concat.apply([],arguments),result=[],i=0;i<length&&needles.length>0;++i)for(var value=this[i],j=0;j<needles.length;++j){var needle=needles[j];if(value===needle||value!=value&&needle!=needle){result.push(value),splice.call(this,i--,1),needles.splice(j--,1);break}}return result}}}}),Object.defineProperty(Array.prototype,"deleteLast",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteLast called on null or undefined");if(0!==arguments.length){var length=this.length>>>0;if(0!==length){for(var splice=Array.prototype.splice,needles=Array.prototype.concat.apply([],arguments),result=[],i=length-1;i>=0&&needles.length>0;--i)for(var value=this[i],j=0;j<needles.length;++j){var needle=needles[j];if(value===needle||value!=value&&needle!=needle){result.push(value),splice.call(this,i++,1),needles.splice(j--,1);break}}return result}}}}),Object.defineProperty(Array.prototype,"deleteWith",{configurable:!0,writable:!0,value:function(predicate,thisArg){if(null==this)throw new TypeError("Array.prototype.deleteWith called on null or undefined");if("function"!=typeof predicate)throw new Error("Array.prototype.deleteWith predicate parameter must be a function");var length=this.length>>>0;if(0===length)return[];for(var splice=Array.prototype.splice,indices=[],result=[],i=0;i<length;++i)predicate.call(thisArg,this[i],i,this)&&(result.push(this[i]),indices.push(i));for(var _i4=indices.length-1;_i4>=0;--_i4)splice.call(this,indices[_i4],1);return result}}),Object.defineProperty(Array.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.first called on null or undefined");if(0!==this.length>>>0)return this[0]}}),Object.defineProperty(Array.prototype,"includesAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAll called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAll.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var i=0,iend=arguments.length;i<iend;++i)if(!Array.prototype.some.call(this,(function(val){return val===this.val||val!=val&&this.val!=this.val}),{val:arguments[i]}))return!1;return!0}}),Object.defineProperty(Array.prototype,"includesAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAny called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAny.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var i=0,iend=arguments.length;i<iend;++i)if(Array.prototype.some.call(this,(function(val){return val===this.val||val!=val&&this.val!=this.val}),{val:arguments[i]}))return!0;return!1}}),Object.defineProperty(Array.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.last called on null or undefined");var length=this.length>>>0;if(0!==length)return this[length-1]}}),Object.defineProperty(Array.prototype,"pluck",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pluck called on null or undefined");var length=this.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.from(arguments));return Array.prototype.splice.call(this,index,1)[0]}}}),Object.defineProperty(Array.prototype,"pluckMany",{configurable:!0,writable:!0,value:function(wantSize){if(null==this)throw new TypeError("Array.prototype.pluckMany called on null or undefined");var length=this.length>>>0;if(0===length)return[];var want=Math.trunc(wantSize);if(!Number.isInteger(want))throw new Error("Array.prototype.pluckMany want parameter must be an integer");if(want<1)return[];want>length&&(want=length);var splice=Array.prototype.splice,result=[],max=length-1;do{result.push(splice.call(this,_random(0,max--),1)[0])}while(result.length<want);return result}}),Object.defineProperty(Array.prototype,"pushUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pushUnique called on null or undefined");var addSize=arguments.length;if(0===addSize)return this.length>>>0;for(var indexOf=Array.prototype.indexOf,push=Array.prototype.push,i=0;i<addSize;++i){var value=arguments[i];-1===indexOf.call(this,value)&&push.call(this,value)}return this.length>>>0}}),Object.defineProperty(Array.prototype,"random",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.random called on null or undefined");var length=this.length>>>0;if(0!==length)return this[0===arguments.length?_random(0,length-1):_randomIndex(length,Array.from(arguments))]}}),Object.defineProperty(Array.prototype,"randomMany",{configurable:!0,writable:!0,value:function(wantSize){if(null==this)throw new TypeError("Array.prototype.randomMany called on null or undefined");var length=this.length>>>0;if(0===length)return[];var want=Math.trunc(wantSize);if(!Number.isInteger(want))throw new Error("Array.prototype.randomMany want parameter must be an integer");if(want<1)return[];want>length&&(want=length);var picked=new Map,result=[],max=length-1;do{var i=void 0;do{i=_random(0,max)}while(picked.has(i));picked.set(i,!0),result.push(this[i])}while(result.length<want);return result}}),Object.defineProperty(Array.prototype,"shuffle",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.shuffle called on null or undefined");var length=this.length>>>0;if(0===length)return this;for(var i=length-1;i>0;--i){var j=Math.floor(_nativeMathRandom()*(i+1));if(i!==j){var swap=this[i];this[i]=this[j],this[j]=swap}}return this}}),Object.defineProperty(Array.prototype,"toShuffled",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.toShuffled called on null or undefined");return Array.from(this).shuffle()}}),Object.defineProperty(Array.prototype,"toUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.toUnique called on null or undefined");return Array.from(new Set(this))}}),Object.defineProperty(Array.prototype,"unshiftUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.unshiftUnique called on null or undefined");var addSize=arguments.length;if(0===addSize)return this.length>>>0;for(var indexOf=Array.prototype.indexOf,unshift=Array.prototype.unshift,i=0;i<addSize;++i){var value=arguments[i];-1===indexOf.call(this,value)&&unshift.call(this,value)}return this.length>>>0}}),Object.defineProperty(Function.prototype,"partial",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Function.prototype.partial called on null or undefined");var slice=Array.prototype.slice,fn=this,bound=slice.call(arguments,0);return function(){for(var applied=[],argc=0,i=0;i<bound.length;++i)applied.push(bound[i]===undefined?arguments[argc++]:bound[i]);return fn.apply(this,applied.concat(slice.call(arguments,argc)))}}}),Object.defineProperty(Math,"clamp",{configurable:!0,writable:!0,value:function(num,min,max){if(3!==arguments.length)throw new Error("Math.clamp called with an incorrect number of parameters (want: 3, received: ".concat(arguments.length,")"));var value=Number(num),minVal=Number(min),maxVal=Number(max);if(minVal>maxVal){var _ref2=[maxVal,minVal];minVal=_ref2[0],maxVal=_ref2[1]}return Math.min(Math.max(value,minVal),maxVal)}}),RegExp.escape||(_regExpMetaCharsRe=/[\\^$*+?.()|[\]{}]/g,_hasRegExpMetaCharsRe=new RegExp(_regExpMetaCharsRe.source),Object.defineProperty(RegExp,"escape",{configurable:!0,writable:!0,value:function(str){var val=String(str);return val&&_hasRegExpMetaCharsRe.test(val)?val.replace(_regExpMetaCharsRe,"\\$&"):val}})),_formatRegExp=/{(\d+)(?:,([+-]?\d+))?}/g,_hasFormatRegExp=new RegExp(_formatRegExp.source),Object.defineProperty(String,"format",{configurable:!0,writable:!0,value:function(format){if(arguments.length<2)return 0===arguments.length?"":format;var args=2===arguments.length&&Array.isArray(arguments[1])?Array.from(arguments[1]):Array.prototype.slice.call(arguments,1);return 0===args.length?format:_hasFormatRegExp.test(format)?(_formatRegExp.lastIndex=0,format.replace(_formatRegExp,(function(match,index,align){var retval=args[index];if(null==retval)return"";for(;"function"==typeof retval;)retval=retval();switch(_typeof(retval)){case"string":break;case"object":retval=JSON.stringify(retval);break;default:retval=String(retval)}return function(str,align,pad){if(!align)return str;var plen=Math.abs(align)-str.length;if(plen<1)return str;var padding=String(pad).repeat(plen);return align<0?str+padding:padding+str}(retval,align?Number.parseInt(align,10):0," ")}))):format}}),Object.defineProperty(String.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.count called on null or undefined");var needle=String(arguments[0]||"");if(""===needle)return 0;for(var indexOf=String.prototype.indexOf,step=needle.length,pos=Number(arguments[1])||0,count=0;-1!==(pos=indexOf.call(this,needle,pos));)++count,pos+=step;return count}}),Object.defineProperty(String.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.first called on null or undefined");return _getCodePointStartAndEnd(String(this),0).char}}),Object.defineProperty(String.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.last called on null or undefined");var str=String(this);return _getCodePointStartAndEnd(str,str.length-1).char}}),Object.defineProperty(String.prototype,"splice",{configurable:!0,writable:!0,value:function(startAt,delCount,replacement){if(null==this)throw new TypeError("String.prototype.splice called on null or undefined");var length=this.length>>>0;if(0===length)return"";var start=Number(startAt);Number.isSafeInteger(start)?start<0&&(start+=length)<0&&(start=0):start=0,start>length&&(start=length);var count=Number(delCount);(!Number.isSafeInteger(count)||count<0)&&(count=0);var res=this.slice(0,start);return void 0!==replacement&&(res+=replacement),start+count<length&&(res+=this.slice(start+count)),res}}),Object.defineProperty(String.prototype,"splitOrEmpty",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.splitOrEmpty called on null or undefined");return""===String(this)?[]:String.prototype.split.apply(this,arguments)}}),Object.defineProperty(String.prototype,"toLocaleUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toLocaleUpperFirst called on null or undefined");var str=String(this),_getCodePointStartAnd3=_getCodePointStartAndEnd(str,0),char=_getCodePointStartAnd3.char,end=_getCodePointStartAnd3.end;return-1===end?"":char.toLocaleUpperCase()+str.slice(end+1)}}),Object.defineProperty(String.prototype,"toUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toUpperFirst called on null or undefined");var str=String(this),_getCodePointStartAnd4=_getCodePointStartAndEnd(str,0),char=_getCodePointStartAnd4.char,end=_getCodePointStartAnd4.end;return-1===end?"":char.toUpperCase()+str.slice(end+1)}}),Object.defineProperty(Array.prototype,"delete",{configurable:!0,writable:!0,value:function(){if(console.warn("[DEPRECATED] <Array>.delete() is deprecated."),null==this)throw new TypeError("Array.prototype.delete called on null or undefined");return Array.prototype.deleteAll.apply(this,arguments)}}),Object.defineProperty(JSON,"reviveWrapper",{configurable:!0,writable:!0,value:function(code,data){if(console.warn("[DEPRECATED] JSON.reviveWrapper() is deprecated."),"string"!=typeof code)throw new TypeError("JSON.reviveWrapper code parameter must be a string");return Serial.createReviver(code,data)}}),Object.defineProperty(Math,"easeInOut",{configurable:!0,writable:!0,value:function(num){return console.warn("[DEPRECATED] Math.easeInOut() is deprecated."),1-(Math.cos(Number(num)*Math.PI)+1)/2}}),Object.defineProperty(Number.prototype,"clamp",{configurable:!0,writable:!0,value:function(){if(console.warn("[DEPRECATED] <Number>.clamp() is deprecated."),null==this)throw new TypeError("Number.prototype.clamp called on null or undefined");if(2!==arguments.length)throw new Error("Number.prototype.clamp called with an incorrect number of parameters (want: 2, received: ".concat(arguments.length,")"));return Math.clamp(this,arguments[0],arguments[1])}})}(),function(){function onKeypressFn(ev){13!==ev.which&&32!==ev.which||(ev.preventDefault(),triggerEvent("click",getActiveElement()||this))}function onClickFnWrapper(fn){return function(){var $this=jQuery(this);$this.ariaIsDisabled()||($this.is("[aria-pressed]")&&$this.attr("aria-pressed","true"===$this.attr("aria-pressed")?"false":"true"),fn.apply(this,arguments))}}function disableTabindex(el){if(!el.hasAttribute("data-last-tabindex")){var tabindex=el.getAttribute("tabindex");el.setAttribute("data-last-tabindex",null!==tabindex?tabindex.trim():"")}el.setAttribute("tabindex",-1)}function restoreTabindex(el){var lastTabindex=el.getAttribute("data-last-tabindex");null!==lastTabindex&&(el.removeAttribute("data-last-tabindex"),""===lastTabindex?el.removeAttribute("tabindex"):el.setAttribute("tabindex",lastTabindex))}jQuery.fn.extend({ariaClick:function(options,handler){if(0===this.length||0===arguments.length)return this;var opts=options,fn=handler;return null==fn&&(fn=opts,opts=undefined),"string"!=typeof(opts=jQuery.extend({namespace:undefined,one:!1,selector:undefined,data:undefined,role:undefined,tabindex:0,controls:undefined,pressed:undefined,label:undefined},opts)).namespace?opts.namespace="":"."!==opts.namespace[0]&&(opts.namespace=".".concat(opts.namespace)),"boolean"==typeof opts.pressed&&(opts.pressed=opts.pressed?"true":"false"),this.filter("button").prop("type","button"),null!=opts.role?this.attr("role",opts.role):this.not("[role]").filter("a,[data-passage]").attr("role","link").end().not("a").not("[data-passage]").attr("role","button").end().end().end(),this.attr("tabindex",opts.tabindex),null!=opts.controls&&this.attr("aria-controls",opts.controls),null!=opts.pressed&&this.attr("aria-pressed",opts.pressed),null!=opts.label&&this.attr({"aria-label":opts.label,title:opts.label}),this.not("button").on("keypress.aria-clickable".concat(opts.namespace),opts.selector,onKeypressFn),this.on("click.aria-clickable".concat(opts.namespace),opts.selector,opts.data,opts.one?function(fn){return onClickFnWrapper((function(){jQuery(this).off(".aria-clickable").removeAttr("role tabindex aria-controls aria-pressed").filter("button").prop("disabled",!0),fn.apply(this,arguments)}))}(fn):onClickFnWrapper(fn)),this},ariaDisabled:function(disable){if(0===this.length||0===arguments.length)return this;var $nonDisableable=this.not("button,fieldset,input,menuitem,optgroup,option,select,textarea"),$disableable=this.filter("button,fieldset,input,menuitem,optgroup,option,select,textarea");return disable?($nonDisableable.each((function(){this.setAttribute("disabled","disabled"),this.setAttribute("aria-disabled","true"),disableTabindex(this)})),$disableable.each((function(){this.disabled=!0,this.setAttribute("aria-disabled","true"),disableTabindex(this)}))):($nonDisableable.each((function(){this.removeAttribute("disabled"),this.removeAttribute("aria-disabled"),restoreTabindex(this)})),$disableable.each((function(){this.disabled=!1,this.removeAttribute("aria-disabled"),restoreTabindex(this)}))),this},ariaIsDisabled:function(){return this.is("[disabled]")}})}(),jQuery.fn.extend({getForbiddenInteractiveContentTagNames:function(){if(0===this.length)return[];var forbidden=new Set;return this.find("a,button,fieldset,form,input,menuitem,optgroup,option,select,textarea").each((function(_,el){return forbidden.add(el.nodeName.toLowerCase())})),Array.from(forbidden)}}),jQuery.extend({wikiWithOptions:function(options){for(var _len=arguments.length,sources=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)sources[_key-1]=arguments[_key];if(0!==sources.length){var frag=document.createDocumentFragment();sources.forEach((function(content){return new Wikifier(frag,content,options)}));var errors=Array.from(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent.replace(errorPrologRegExp,"")}));if(errors.length>0)throw new Error(errors.join("; "))}},wiki:function(){for(var _len2=arguments.length,sources=new Array(_len2),_key2=0;_key2<_len2;_key2++)sources[_key2]=arguments[_key2];this.wikiWithOptions.apply(this,[undefined].concat(sources))},wikiPassage:function(name){this.wikiWithOptions(undefined,Story.get(name).processText())}}),jQuery.fn.extend({wikiWithOptions:function(options){for(var _len3=arguments.length,sources=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)sources[_key3-1]=arguments[_key3];if(0===this.length||0===sources.length)return this;var frag=document.createDocumentFragment();return sources.forEach((function(content){return new Wikifier(frag,content,options)})),this.append(frag),this},wiki:function(){for(var _len4=arguments.length,sources=new Array(_len4),_key4=0;_key4<_len4;_key4++)sources[_key4]=arguments[_key4];return this.wikiWithOptions.apply(this,[undefined].concat(sources))},wikiPassage:function(name){return this.wikiWithOptions(undefined,Story.get(name).processText())}});var Browser=(userAgent=navigator.userAgent.toLowerCase(),winPhone=userAgent.includes("windows phone"),isMobile=Object.freeze({Android:!winPhone&&userAgent.includes("android"),BlackBerry:/blackberry|bb10/.test(userAgent),iOS:!winPhone&&/ip(?:hone|ad|od)/.test(userAgent),Opera:!winPhone&&("object"===_typeof(window.operamini)||userAgent.includes("opera mini")),Windows:winPhone||/iemobile|wpdesktop/.test(userAgent),any:function(){return isMobile.Android||isMobile.BlackBerry||isMobile.iOS||isMobile.Opera||isMobile.Windows}}),isGecko=!isMobile.Windows&&!/khtml|trident|edge/.test(userAgent)&&userAgent.includes("gecko"),isIE=!userAgent.includes("opera")&&/msie|trident/.test(userAgent),ieVersion=isIE?(ver=/(?:msie\s+|rv:)(\d+\.\d)/.exec(userAgent))?Number(ver[1]):0:null,isOpera=userAgent.includes("opera")||userAgent.includes(" opr/"),operaVersion=isOpera?function(){var ver=new RegExp("".concat(/khtml|chrome/.test(userAgent)?"opr":"version","\\/(\\d+\\.\\d+)")).exec(userAgent);return ver?Number(ver[1]):0}():null,isVivaldi=userAgent.includes("vivaldi"),Object.freeze(Object.assign(Object.create(null),{userAgent:userAgent,isMobile:isMobile,isGecko:isGecko,isIE:isIE,ieVersion:ieVersion,isOpera:isOpera,operaVersion:operaVersion,isVivaldi:isVivaldi}))),ver,userAgent,winPhone,isMobile,isGecko,isIE,ieVersion,isOpera,operaVersion,isVivaldi,Has=(hasAudioElement=function(){try{return"function"==typeof document.createElement("audio").canPlayType}catch(ex){}return!1}(),hasFile=function(){try{return"Blob"in window&&"File"in window&&"FileList"in window&&"FileReader"in window&&(!Browser.isOpera||Browser.operaVersion>=15)}catch(ex){}return!1}(),hasGeolocation=function(){try{return"geolocation"in navigator&&"function"==typeof navigator.geolocation.getCurrentPosition&&"function"==typeof navigator.geolocation.watchPosition}catch(ex){}return!1}(),hasMutationObserver=function(){try{return"MutationObserver"in window&&"function"==typeof window.MutationObserver}catch(ex){}return!1}(),hasPerformance=function(){try{return"performance"in window&&"function"==typeof window.performance.now}catch(ex){}return!1}(),hasTouch=function(){try{return"ontouchstart"in window||!!window.DocumentTouch&&document instanceof window.DocumentTouch||!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints}catch(ex){}return!1}(),hasTransitionEndEvent=function(){try{for(var teMap=new Map([["transition","transitionend"],["MSTransition","msTransitionEnd"],["WebkitTransition","webkitTransitionEnd"],["MozTransition","transitionend"]]),teKeys=Array.from(teMap.keys()),el=document.createElement("div"),i=0;i<teKeys.length;++i)if(el.style[teKeys[i]]!==undefined)return teMap.get(teKeys[i])}catch(ex){}return!1}(),Object.freeze(Object.assign(Object.create(null),{audio:hasAudioElement,fileAPI:hasFile,geolocation:hasGeolocation,mutationObserver:hasMutationObserver,performance:hasPerformance,touch:hasTouch,transitionEndEvent:hasTransitionEndEvent}))),hasAudioElement,hasFile,hasGeolocation,hasMutationObserver,hasPerformance,hasTouch,hasTransitionEndEvent,Fullscreen=function(){var _hasPromise,vendor=function(){try{return Object.freeze([{isEnabled:"fullscreenEnabled",element:"fullscreenElement",requestFn:"requestFullscreen",exitFn:"exitFullscreen",changeEvent:"fullscreenchange",errorEvent:"fullscreenerror"},{isEnabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",requestFn:"webkitRequestFullscreen",exitFn:"webkitExitFullscreen",changeEvent:"webkitfullscreenchange",errorEvent:"webkitfullscreenerror"},{isEnabled:"mozFullScreenEnabled",element:"mozFullScreenElement",requestFn:"mozRequestFullScreen",exitFn:"mozCancelFullScreen",changeEvent:"mozfullscreenchange",errorEvent:"mozfullscreenerror"},{isEnabled:"msFullscreenEnabled",element:"msFullscreenElement",requestFn:"msRequestFullscreen",exitFn:"msExitFullscreen",changeEvent:"MSFullscreenChange",errorEvent:"MSFullscreenError"}].find((function(vnd){return vnd.isEnabled in document})))}catch(ex){}return undefined}(),_returnsPromise=(_hasPromise=null,function(){if(null!==_hasPromise)return _hasPromise;if(_hasPromise=!1,vendor)try{var value=document.exitFullscreen();value.catch((function(){})),_hasPromise=value instanceof Promise}catch(ex){}return _hasPromise});function _selectElement(requestedEl){var selectedEl=requestedEl||document.documentElement;return selectedEl===document.documentElement&&("msRequestFullscreen"===vendor.requestFn||Browser.isOpera&&Browser.operaVersion<15)&&(selectedEl=document.body),selectedEl}function isFullscreen(){return Boolean(vendor&&document[vendor.element])}function requestFullscreen(options,requestedEl){if(!vendor)return Promise.reject(new Error("fullscreen not supported"));var element=_selectElement(requestedEl);if("function"!=typeof element[vendor.requestFn])return Promise.reject(new Error("fullscreen not supported"));if(isFullscreen())return Promise.resolve();if(_returnsPromise())return element[vendor.requestFn](options);var namespace=".Fullscreen_requestFullscreen";return new Promise((function(resolve,reject){var $element=jQuery(element);$element.off(namespace).one("".concat(vendor.errorEvent).concat(namespace," ").concat(vendor.changeEvent).concat(namespace),(function(ev){$element.off(namespace),ev.type===vendor.errorEvent?reject(new Error("unknown fullscreen request error")):resolve()})),element[vendor.requestFn](options)}))}function exitFullscreen(){if(!vendor||"function"!=typeof document[vendor.exitFn])return Promise.reject(new TypeError("fullscreen not supported"));if(!isFullscreen())return Promise.reject(new TypeError("fullscreen mode not active"));if(_returnsPromise())return document[vendor.exitFn]();var namespace=".Fullscreen_exitFullscreen";return new Promise((function(resolve,reject){var $document=jQuery(document);$document.off(namespace).one("".concat(vendor.errorEvent).concat(namespace," ").concat(vendor.changeEvent).concat(namespace),(function(ev){$document.off(namespace),ev.type===vendor.errorEvent?reject(new Error("unknown fullscreen exit error")):resolve()})),document[vendor.exitFn]()}))}return Object.preventExtensions(Object.create(null,{vendor:{get:function(){return vendor}},element:{get:function(){return vendor?document[vendor.element]:null}},isEnabled:{value:function(){return Boolean(vendor&&document[vendor.isEnabled])}},isFullscreen:{value:isFullscreen},request:{value:requestFullscreen},exit:{value:exitFullscreen},toggle:{value:function(options,requestedEl){return isFullscreen()?exitFullscreen():requestFullscreen(options,requestedEl)}},onChange:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);jQuery(element).on(vendor.changeEvent,handlerFn)}}},offChange:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);handlerFn?jQuery(element).off(vendor.changeEvent,handlerFn):jQuery(element).off(vendor.changeEvent)}}},onError:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);jQuery(element).on(vendor.errorEvent,handlerFn)}}},offError:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);handlerFn?jQuery(element).off(vendor.errorEvent,handlerFn):jQuery(element).off(vendor.errorEvent)}}}}))}(),Outliner=function(){var lastEvent,styleEl=null;function outlinerHide(){document.documentElement.removeAttribute("data-outlines"),styleEl.styleSheet?styleEl.styleSheet.cssText="*:focus{outline:none;}":styleEl.textContent="*:focus{outline:none;}"}function outlinerShow(){document.documentElement.setAttribute("data-outlines",""),styleEl.styleSheet?styleEl.styleSheet.cssText="":styleEl.textContent=""}return Object.preventExtensions(Object.create(null,{init:{value:function(){styleEl||(styleEl=document.createElement("style"),jQuery(styleEl).attr({id:"style-outliner",type:"text/css"}).appendTo(document.head),jQuery(document).on("mousedown.style-outliner keydown.style-outliner",(function(ev){ev.type!==lastEvent&&(lastEvent=ev.type,"keydown"===ev.type?outlinerShow():outlinerHide())})),lastEvent="mousedown",outlinerHide())}},hide:{value:outlinerHide},show:{value:outlinerShow}}))}(),Serial=function(){var supportedTypes=Object.freeze([{id:"Date",get reference(){return Date.prototype},method:function(){return["(revive:date)",this.toISOString()]}},{id:"Function",get reference(){return Function.prototype},method:function(){return["(revive:)",["(".concat(this.toString(),")")]]}},{id:"Map",get reference(){return Map.prototype},method:function(){return["(revive:map)",Array.from(this)]}},{id:"RegExp",get reference(){return RegExp.prototype},method:function(){return["(revive:)",[this.toString()]]}},{id:"Set",get reference(){return Set.prototype},method:function(){return["(revive:set)",Array.from(this)]}}]);function createReviver(code,data){if("string"!=typeof code)throw new TypeError("Serial.createReviver code parameter must be a string");return["(revive:)",[code,data]]}function parse(text,reviver){return JSON.parse(text,(function(key,val){var value=val;if(value instanceof Array&&2===value.length)switch(value[0]){case"(revive:set)":value=new Set(value[1]);break;case"(revive:map)":value=new Map(value[1]);break;case"(revive:date)":value=new Date(value[1]);break;case"(revive:eval)":case"(revive:)":try{var $ReviveData$=value[1][1];value=eval(value[1][0])}catch(ex){}}if("function"==typeof reviver)try{value=reviver(key,value)}catch(ex){}return value}))}function stringify(value,replacer,space){var origMethodCache=new Map;supportedTypes.forEach((function(_ref3){var id=_ref3.id,reference=_ref3.reference,method=_ref3.method;Object.hasOwn(reference,"toJSON")&&origMethodCache.set(id,reference.toJSON),Object.defineProperty(reference,"toJSON",{configurable:!0,writable:!0,value:method})}));var notation=JSON.stringify(value,(function(key,val){var value=val;if("function"==typeof replacer)try{value=replacer(key,value)}catch(ex){}switch(value){case undefined:value=["(revive:)",["undefined"]];break;case 1/0:value=["(revive:)",["Infinity"]]}return value}),space);return supportedTypes.forEach((function(_ref4){var id=_ref4.id,reference=_ref4.reference;origMethodCache.has(id)?(Object.defineProperty(reference,"toJSON",{configurable:!0,writable:!0,value:origMethodCache.get(id)}),origMethodCache.delete(id)):delete reference.toJSON})),notation}return Object.preventExtensions(Object.create(null,{createReviver:{value:createReviver},parse:{value:parse},stringify:{value:stringify}}))}(),Visibility=(vendor=function(){try{return Object.freeze([{hiddenProperty:"hidden",stateProperty:"visibilityState",changeEvent:"visibilitychange"},{hiddenProperty:"webkitHidden",stateProperty:"webkitVisibilityState",changeEvent:"webkitvisibilitychange"},{hiddenProperty:"mozHidden",stateProperty:"mozVisibilityState",changeEvent:"mozvisibilitychange"},{hiddenProperty:"msHidden",stateProperty:"msVisibilityState",changeEvent:"msvisibilitychange"}].find((function(vnd){return vnd.hiddenProperty in document})))}catch(ex){}return undefined}(),Object.preventExtensions(Object.create(null,{vendor:{get:function(){return vendor}},state:{get:function(){return vendor&&document[vendor.stateProperty]||"visible"}},isEnabled:{value:function(){return Boolean(vendor)}},isHidden:{value:function(){return Boolean(vendor&&document[vendor.hiddenProperty])}},hiddenProperty:{value:vendor&&vendor.hiddenProperty},stateProperty:{value:vendor&&vendor.stateProperty},changeEvent:{value:vendor&&vendor.changeEvent}}))),vendor;function appendError(output,message,source){var $wrapper=jQuery(document.createElement("div")),$toggle=jQuery(document.createElement("button")),$source=jQuery(document.createElement("pre")),mesg="".concat(L10n.get("errorViewTitle"),": ").concat(message||"unknown error");return $toggle.addClass("error-toggle").ariaClick({label:L10n.get("errorViewLabelToggle")},(function(){$toggle.hasClass("enabled")?($toggle.removeClass("enabled"),$source.attr({"aria-hidden":!0,hidden:"hidden"})):($toggle.addClass("enabled"),$source.removeAttr("aria-hidden hidden"))})).appendTo($wrapper),jQuery(document.createElement("span")).addClass("error").text(mesg).appendTo($wrapper),jQuery(document.createElement("code")).text(source).appendTo($source),$source.addClass("error-source").attr({"aria-hidden":!0,hidden:"hidden"}).appendTo($wrapper),$wrapper.addClass("error-view").appendTo(output),console.warn("".concat(mesg,"\n\t").concat(source.replace(/\n/g,"\n\t"))),!1}var throwError=appendError;function charAndPosAt(string,position){var str=String(string),pos=Math.trunc(position),code=str.charCodeAt(pos);if(Number.isNaN(code))return{char:"",start:-1,end:-1};var retval={char:str.charAt(pos),start:pos,end:pos};if(code<55296||code>57343)return retval;if(code>=55296&&code<=56319){var nextPos=pos+1;if(nextPos>=str.length)return retval;var nextCode=str.charCodeAt(nextPos);return nextCode<56320||nextCode>57343||(retval.char=retval.char+str.charAt(nextPos),retval.end=nextPos),retval}if(0===pos)return retval;var prevPos=pos-1,prevCode=str.charCodeAt(prevPos);return prevCode<55296||prevCode>56319||(retval.char=str.charAt(prevPos)+retval.char,retval.start=prevPos),retval}function clone(O){if("object"!==_typeof(O)||null===O)return O;if("function"==typeof O.clone)return O.clone(!0);var copy;if(O instanceof Array)copy=new Array(O.length);else if(O instanceof Date)copy=new Date(O.getTime());else if(O instanceof Map)copy=new Map,O.forEach((function(val,key){return copy.set(clone(key),clone(val))}));else if(O instanceof RegExp)copy=new RegExp(O);else if(O instanceof Set)copy=new Set,O.forEach((function(val){return copy.add(clone(val))}));else{var type=getTypeOf(O);if("Object"!==type)throw new TypeError("attempted to clone unsupported type: ".concat(type));copy=Object.create(Object.getPrototypeOf(O))}return Object.keys(O).forEach((function(P){return copy[P]=clone(O[P])})),copy}var convertBreaks=function(){var isNotSpaceRE=new RegExp(Patterns.notSpace);function isParagraphEmpty(para){if(!para.hasChildNodes())return!0;for(var nodes=para.childNodes,length=nodes.length,i=0;i<length;++i){var node=nodes[i];switch(node.nodeType){case Node.TEXT_NODE:if(isNotSpaceRE.test(node.nodeValue))return!1;break;case Node.COMMENT_NODE:break;default:return!1}}return!0}return function(source){for(var node,output=document.createDocumentFragment(),para=document.createElement("p");null!==(node=source.firstChild);){if(node.nodeType===Node.ELEMENT_NODE)switch(node.nodeName.toUpperCase()){case"BR":if(null!==node.nextSibling&&node.nextSibling.nodeType===Node.ELEMENT_NODE&&"BR"===node.nextSibling.nodeName.toUpperCase()){source.removeChild(node.nextSibling),source.removeChild(node),isParagraphEmpty(para)||output.appendChild(para),para=document.createElement("p");continue}if(isParagraphEmpty(para)){source.removeChild(node);continue}break;case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":isParagraphEmpty(para)||(output.appendChild(para),para=document.createElement("p")),output.appendChild(node);continue}para.appendChild(node)}isParagraphEmpty(para)||output.appendChild(para),source.appendChild(output)}}(),createFilename=(illegalCharsRE=/[\x00-\x1f"#$%&'*+,/:;<=>?\\^`|\x7f-\x9f]+/g,function(str){return String(str).trim().replace(illegalCharsRE,"")}),illegalCharsRE,createSlug=function(){var illegalCharsRE=/[\x00-\x20!-/:-@[-^`{-\x9f]+/g,isInvalidSlugRE=/^-*$/,storySigilRE=/^\$/,tempSigilRE=/^_/;return function(str){var base=String(str).trim(),legacy=base.replace(/[^\w\s\u2013\u2014-]+/g,"").replace(/[_\s\u2013\u2014-]+/g,"-").toLocaleLowerCase();return isInvalidSlugRE.test(legacy)?base.replace(storySigilRE,"").replace(tempSigilRE,"-").replace(illegalCharsRE,""):legacy}}();function cssPropToDOMProp(cssName){if(!cssName.includes("-"))switch(cssName){case"bgcolor":return"backgroundColor";case"float":return"cssFloat";default:return cssName}return("-ms-"===cssName.slice(0,4)?cssName.slice(1):cssName).split("-").map((function(part,i){return 0===i?part:part.toUpperFirst()})).join("")}var cssTimeToMS=(cssTimeRE=/^([+-]?(?:\d*\.)?\d+)([Mm]?[Ss])$/,function(cssTime){var match=cssTimeRE.exec(String(cssTime));if(null===match)throw new SyntaxError('invalid time value syntax: "'.concat(cssTime,'"'));var msec=Number(match[1]);if(1===match[2].length&&(msec*=1e3),Number.isNaN(msec)||!Number.isFinite(msec))throw new RangeError('invalid time value: "'.concat(cssTime,'"'));return msec}),cssTimeRE,decodeEntities=(escapedHtmlRE=/&(?:amp|#38|#x26|lt|#60|#x3c|gt|#62|#x3e|quot|#34|#x22|apos|#39|#x27|#96|#x60);/gi,hasEscapedHtmlRE=new RegExp(escapedHtmlRE.source,"i"),escapedHtmlTable=enumFrom({"&amp;":"&","&#38;":"&","&#x26;":"&","&lt;":"<","&#60;":"<","&#x3c;":"<","&gt;":">","&#62;":">","&#x3e;":">","&quot;":'"',"&#34;":'"',"&#x22;":'"',"&apos;":"'","&#39;":"'","&#x27;":"'","&#96;":"`","&#x60;":"`"}),function(str){if(null==str)return"";var val=String(str);return val&&hasEscapedHtmlRE.test(val)?val.replace(escapedHtmlRE,(function(entity){return escapedHtmlTable[entity.toLowerCase()]})):val}),escapedHtmlRE,hasEscapedHtmlRE,escapedHtmlTable,encodeEntities=(htmlCharsRE=/[&<>"'`]/g,hasHtmlCharsRE=new RegExp(htmlCharsRE.source),htmlCharsTable=enumFrom({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"}),function(str){if(null==str)return"";var val=String(str);return val&&hasHtmlCharsRE.test(val)?val.replace(htmlCharsRE,(function(ch){return htmlCharsTable[ch]})):val}),htmlCharsRE,hasHtmlCharsRE,htmlCharsTable,encodeMarkup=(markupCharsRE=/[!"#$&'*\-/<=>?@[\\\]^_`{|}~]/g,hasMarkupCharsRE=new RegExp(markupCharsRE.source),markupCharsTable=enumFrom({"!":"&#33;",'"':"&quot;","#":"&#35;",$:"&#36;","&":"&amp;","'":"&#39;","*":"&#42;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","?":"&#63;","@":"&#64;","[":"&#91;","\\":"&#92;","]":"&#93;","^":"&#94;",_:"&#95;","`":"&#96;","{":"&#123;","|":"&#124;","}":"&#125;","~":"&#126;"}),function(str){if(null==str)return"";var val=String(str);return val&&hasMarkupCharsRE.test(val)?val.replace(markupCharsRE,(function(ch){return markupCharsTable[ch]})):val}),markupCharsRE,hasMarkupCharsRE,markupCharsTable,enquote=(unescapedDQuoteRE=/(^|[^\\])(")/g,unescapedSQuoteRE=/(^|[^\\])(')/g,function(string){for(var dqCount=0,sqCount=0,i=0;i<string.length;++i)switch(string[i]){case"\\":++i;break;case'"':++dqCount;break;case"'":++sqCount}if(0===dqCount)return'"'.concat(string,'"');if(0===sqCount)return"'".concat(string,"'");var quote=dqCount<=sqCount?'"':"'";return"".concat(quote).concat(string.replace('"'===quote?unescapedDQuoteRE:unescapedSQuoteRE,"$1\\$2")).concat(quote)}),unescapedDQuoteRE,unescapedSQuoteRE;function enumFrom(O){var pEnum=Object.create(null);if(O instanceof Array)O.forEach((function(val,i){return pEnum[String(val)]=i}));else if(O instanceof Set)Array.from(O).forEach((function(val,i){return pEnum[String(val)]=i}));else if(O instanceof Map)O.forEach((function(val,key){return pEnum[String(key)]=val}));else{if(null===O||"object"!==_typeof(O)||Object.getPrototypeOf(O)!==Object.prototype)throw new TypeError("enumFrom object parameter must be an Array, Map, Set, or generic object");Object.assign(pEnum,O)}return Object.freeze(Object.defineProperties(pEnum,{nameFrom:{value:function(needle){var entry=Object.entries(this).find((function(entry){return entry[1]===needle}));return entry?entry[0]:undefined}}}))}var exceptionFrom=(extraProps=Object.freeze(["code","data","result","stack","columnNumber","fileName","lineNumber","description","number"]),function(original,exceptionType,override){if(null===original||"object"!==_typeof(original))throw new Error("exceptionFrom original parameter must be an object");if("function"!=typeof exceptionType)throw new Error("exceptionFrom exceptionType parameter must be an error type constructor");var overrideType=_typeof(override);if("undefined"!==overrideType&&"string"!==overrideType&&"object"!==overrideType)throw new Error("exceptionFrom override parameter must be an object or string");var propValues=new Map;extraProps.forEach((function(name){void 0!==original[name]&&propValues.set(name,original[name])})),"string"===overrideType?propValues.set("message",override):"object"===overrideType&&null!==override&&Object.getOwnPropertyNames(override).forEach((function(name){void 0!==override[name]&&propValues.set(name,override[name])}));var ex=new exceptionType(propValues.get("message"));return propValues.delete("message"),propValues.forEach((function(value,name){void 0===ex[name]?Object.defineProperty(ex,name,{value:value,configurable:!0,writable:!0}):ex[name]=value})),ex}),extraProps;function getActiveElement(){try{return document.activeElement||null}catch(ex){return null}}function getErrorMessage(O){return null==O?"unknown error":"object"===_typeof(O)&&"message"in O?O.message:String(O)}var getToStringTag=(toString=Object.prototype.toString,slice=String.prototype.slice,"[object Object]"===toString.call(new Map)?function(O){return O instanceof Map?"Map":O instanceof Set?"Set":slice.call(toString.call(O),8,-1)}:function(O){return slice.call(toString.call(O),8,-1)}),toString,slice,getTypeOf=function(){var toString=Object.prototype.toString,slice=String.prototype.slice;return function(O){if(null===O)return"null";var baseType=_typeof(O);return"object"===baseType?slice.call(toString.call(O),8,-1):baseType}}(),hasMediaQuery="function"!=typeof window.matchMedia?function(){return!1}:function(mediaQuery){return window.matchMedia(mediaQuery).matches},isExternalLink=(externalUrlRE=new RegExp("^".concat(Patterns.externalUrl),"gim"),fingerprintRE=/[/\\?]/,function(link){return!Story.has(link)&&(externalUrlRE.test(link)||fingerprintRE.test(link))}),externalUrlRE,fingerprintRE;function msToCSSTime(msec){if("number"!=typeof msec||Number.isNaN(msec)||!Number.isFinite(msec)){var what;switch(_typeof(msec)){case"string":what='"'.concat(msec,'"');break;case"number":what=String(msec);break;default:what=getTypeOf(msec)}throw new TypeError("invalid milliseconds value: ".concat(what))}return"".concat(msec,"ms")}var now=(clock=Has.performance?performance:Date,function(){return clock.now()}),clock,onUserActivation=(uaEvents=Object.freeze(["keydown","mousedown","pointerdown","pointerup","touchend"]),function(namespace,callback){jQuery(document).off(namespace).on(uaEvents.map((function(name){return"".concat(name).concat(namespace)})).join(" "),(function(ev){callback(ev).then((function(){return jQuery(document).off(namespace)}),(function(ex){if("NotAllowedError"!==ex.name)throw jQuery(document).off(namespace),ex}))}))}),uaEvents;function parseURL(url){var parser=document.createElement("a"),searchParams=Object.create(null);parser.href=url,parser.search&&parser.search.replace(/^\?/,"").splitOrEmpty(/(?:&(?:amp;)?|;)/).forEach((function(query){var _query$split2=_slicedToArray(query.split("="),2),key=_query$split2[0],value=_query$split2[1];Object.hasOwn(searchParams,key)?searchParams[key].push(value):searchParams[key]=[value]}));var pathname=parser.host&&"/"!==parser.pathname[0]?"/".concat(parser.pathname):parser.pathname;return Object.freeze(Object.assign(Object.create(null),{href:parser.href,protocol:parser.protocol,host:parser.host,hostname:parser.hostname,port:parser.port,path:"".concat(pathname).concat(parser.search),pathname:pathname,search:parser.search,searchParams:Object.freeze(searchParams),hash:parser.hash}))}function sameValueZero(a,b){return a===b||a!=a&&b!=b}var scrubEventKey=function(){var separatorKey,decimalKey;if("undefined"!=typeof Intl&&"function"==typeof Intl.NumberFormat){var match=(new Intl.NumberFormat).format(111111.5).match(/(\D*)\d+(\D*)\d$/);match&&(separatorKey=match[1],decimalKey=match[2])}return separatorKey||decimalKey||(separatorKey=",",decimalKey="."),function(key){switch(key){case"Scroll":return"ScrollLock";case"Spacebar":return" ";case"Left":return"ArrowLeft";case"Right":return"ArrowRight";case"Up":return"ArrowUp";case"Down":return"ArrowDown";case"Del":return"Delete";case"Crsel":return"CrSel";case"Exsel":return"ExSel";case"Esc":return"Escape";case"Apps":return"ContextMenu";case"Nonconvert":return"NonConvert";case"MediaNextTrack":return"MediaTrackNext";case"MediaPreviousTrack":return"MediaTrackPrevious";case"VolumeUp":return"AudioVolumeUp";case"VolumeDown":return"AudioVolumeDown";case"VolumeMute":return"AudioVolumeMute";case"Zoom":return"ZoomToggle";case"SelectMedia":case"MediaSelect":return"LaunchMediaPlayer";case"Add":return"+";case"Divide":return"/";case"Multiply":return"*";case"Subtract":return"-";case"Decimal":return decimalKey;case"Separator":return separatorKey}return key}}(),setDisplayTitle=function(title,isPlainText){if("string"!=typeof title)throw new TypeError("title parameter must be a string (received: ".concat(getTypeOf(title),")"));var render,text;isPlainText?text=render=title.trim():(render=document.createDocumentFragment(),new Wikifier(render,title,{noCleanup:!0}),text=function(source){for(var node,copy=source.cloneNode(!0),frag=document.createDocumentFragment();null!==(node=copy.firstChild);){if(node.nodeType===Node.ELEMENT_NODE)switch(node.nodeName.toUpperCase()){case"BR":case"DIV":case"P":frag.appendChild(document.createTextNode(" "))}frag.appendChild(node)}return frag.textContent}(render).trim()),document.title=Config.passages.displayTitles&&""!==State.passage&&State.passage!==Config.passages.start?"".concat(State.passage," | ").concat(text):text,jQuery("#story-title").empty().append(render)};function setPageElement(idOrElement,titles,defaultText){var el="object"===_typeof(idOrElement)?idOrElement:document.getElementById(idOrElement);if(null==el)return null;var ids=titles instanceof Array?titles:[titles];jQuery(el).empty();for(var i=0;i<ids.length;++i)if(Story.has(ids[i]))return new Wikifier(el,Story.get(ids[i]).processText().trim()),el;if(null!=defaultText){var text=String(defaultText).trim();""!==text&&new Wikifier(el,text)}return el}function stringFrom(value){switch(_typeof(value)){case"function":return"[function]";case"number":if(Number.isNaN(value))return"[number NaN]";break;case"object":if(null===value)return"[null]";if(value instanceof Array)return value.map((function(val){return stringFrom(val)})).join(", ");if(value instanceof Set)return Array.from(value).map((function(val){return stringFrom(val)})).join(", ");if(value instanceof Map){var result=Array.from(value).map((function(_ref5){var _ref6=_slicedToArray(_ref5,2),key=_ref6[0],val=_ref6[1];return"".concat(stringFrom(key)," → ").concat(stringFrom(val))}));return"{ ".concat(result.join(", ")," }")}if(value instanceof Date)return value.toLocaleString();if(value instanceof Element){if(value===document.documentElement||value===document.head||value===document.body)throw new Error("illegal operation; attempting to convert the <html>, <head>, or <body> tags to string is not allowed");return value.outerHTML}if(value instanceof Node)return value.textContent;break;case"symbol":var desc=void 0!==value.description?' "'.concat(value.description,'"'):"";return"[symbol".concat(desc,"]");case"undefined":return"[undefined]"}return String(value)}var triggerEvent=(createEvent=function(){try{return new CustomEvent("click",{bubbles:!0}),function(name,options){for(var _Object$assign=Object.assign({bubbles:!0,cancelable:!0,composed:!1},options),bubbles=_Object$assign.bubbles,cancelable=_Object$assign.cancelable,composed=_Object$assign.composed,detail=_Object$assign.detail,custom=_objectWithoutProperties(_Object$assign,_excluded),event=new CustomEvent(name,{bubbles:bubbles,cancelable:cancelable,composed:composed,detail:detail}),i=0,keys=Object.keys(custom);i<keys.length;++i){var key=keys[i];void 0!==custom[key]&&(event[key]=options[key])}return event}}catch(ex){return function(name,options){for(var _Object$assign2=Object.assign({bubbles:!0,cancelable:!0},options),bubbles=_Object$assign2.bubbles,cancelable=_Object$assign2.cancelable,custom=_objectWithoutProperties(_Object$assign2,_excluded2),event=document.createEvent("Event"),i=0,keys=Object.keys(custom);i<keys.length;++i){var key=keys[i];void 0!==custom[key]&&(event[key]=options[key])}return event.initEvent(name,bubbles,cancelable),event}}}(),function(name,targets,options){var event=createEvent(name,options),elems=[];if(targets)if(targets instanceof jQuery||targets instanceof NodeList||targets instanceof Array)for(var i=0;i<targets.length;++i)elems.push(targets[i]);else elems.push(targets);else elems.push(document);for(var _i5=0;_i5<elems.length;++_i5)elems[_i5].dispatchEvent(event)}),createEvent,SimpleStore=(_adapters=[],_initialized=null,Object.preventExtensions(Object.create(null,{adapters:{value:_adapters},create:{value:function(storageId,persistent){if(_initialized)return _initialized.create(storageId,persistent);for(var i=0;i<_adapters.length;++i)if(_adapters[i].init(storageId,persistent))return(_initialized=_adapters[i]).create(storageId,persistent);throw new Error("No valid storage adapters found")}}}))),_adapters,_initialized,_MAX_EXPIRY,_MIN_EXPIRY,_ok,CookieAdapter;SimpleStore.adapters.push(function(){var _ok=!1,WebStorageAdapter=function(){function WebStorageAdapter(storageId,persistent){_classCallCheck(this,WebStorageAdapter);var prefix="".concat(storageId,"."),engine=null,name=null;persistent?(engine=window.localStorage,name="localStorage"):(engine=window.sessionStorage,name="sessionStorage"),Object.defineProperties(this,{_engine:{value:engine},_prefix:{value:prefix},_prefixRe:{value:new RegExp("^".concat(RegExp.escape(prefix)))},name:{value:name},id:{value:storageId},persistent:{value:Boolean(persistent)}})}return _createClass(WebStorageAdapter,[{key:"size",get:function(){return this.keys().length}},{key:"keys",value:function(){for(var keys=[],i=0;i<this._engine.length;++i){var key=this._engine.key(i);this._prefixRe.test(key)&&keys.push(key.replace(this._prefixRe,""))}return keys}},{key:"has",value:function(key){return!("string"!=typeof key||!key)&&Object.hasOwn(this._engine,this._prefix+key)}},{key:"get",value:function(key){if("string"!=typeof key||!key)return null;var value=this._engine.getItem(this._prefix+key);return null==value?null:WebStorageAdapter._deserialize(value)}},{key:"set",value:function(key,value){if("string"!=typeof key||!key)return!1;try{this._engine.setItem(this._prefix+key,WebStorageAdapter._serialize(value))}catch(ex){if(isQuotaDOMException(ex))throw exceptionFrom(ex,Error,{cause:{origin:ex},message:"".concat(this.name," quota exceeded")});throw ex}return!0}},{key:"delete",value:function(key){return!("string"!=typeof key||!key)&&(this._engine.removeItem(this._prefix+key),!0)}},{key:"clear",value:function(){for(var keys=this.keys(),i=0,length=keys.length;i<length;++i)this.delete(keys[i]);return!0}}],[{key:"_serialize",value:function(obj){return LZString.compressToUTF16(Serial.stringify(obj))}},{key:"_deserialize",value:function(str){return Serial.parse(LZString.decompressFromUTF16(str))}}])}();var isQuotaErrorRE=/quota.?(?:exceeded|reached)/i;function isQuotaDOMException(ex){return ex instanceof DOMException&&(22===ex.code||1014===ex.code||isQuotaErrorRE.test(ex.name)||isQuotaErrorRE.test(ex.message))}return Object.preventExtensions(Object.create(null,{init:{value:function(){function hasWebStorage(storeId){var store;try{store=window[storeId];var val="_sc_".concat(String(Date.now()));store.setItem(val,val);var result=store.getItem(val)===val;return store.removeItem(val),result}catch(ex){return store&&0!==store.length&&isQuotaDOMException(ex)}}return _ok=hasWebStorage("localStorage")&&hasWebStorage("sessionStorage")}},create:{value:function(storageId,persistent){if(!_ok)throw new Error("adapter not initialized");return new WebStorageAdapter(storageId,persistent)}}}))}()),SimpleStore.adapters.push((_MAX_EXPIRY="Tue, 19 Jan 2038 03:14:07 GMT",_MIN_EXPIRY="Thu, 01 Jan 1970 00:00:00 GMT",_ok=!1,CookieAdapter=function(){function CookieAdapter(storageId,persistent){_classCallCheck(this,CookieAdapter);var prefix="".concat(storageId).concat(persistent?"!":"*",".");Object.defineProperties(this,{_prefix:{value:prefix},_prefixRe:{value:new RegExp("^".concat(RegExp.escape(prefix)))},name:{value:"cookie"},id:{value:storageId},persistent:{value:Boolean(persistent)}})}return _createClass(CookieAdapter,[{key:"size",get:function(){return this.keys().length}},{key:"keys",value:function(){if(""===document.cookie)return[];for(var cookies=document.cookie.split(/;\s*/),keys=[],i=0;i<cookies.length;++i){var kvPair=cookies[i].split("="),key=decodeURIComponent(kvPair[0]);this._prefixRe.test(key)&&""!==decodeURIComponent(kvPair[1])&&keys.push(key.replace(this._prefixRe,""))}return keys}},{key:"has",value:function(key){return!("string"!=typeof key||!key)&&null!==CookieAdapter._getCookie(this._prefix+key)}},{key:"get",value:function(key){if("string"!=typeof key||!key)return null;var value=CookieAdapter._getCookie(this._prefix+key);return null===value?null:CookieAdapter._deserialize(value)}},{key:"set",value:function(key,value){if("string"!=typeof key||!key)return!1;try{if(CookieAdapter._setCookie(this._prefix+key,CookieAdapter._serialize(value),this.persistent?_MAX_EXPIRY:undefined),!this.has(key))throw new Error("unknown validation error during set")}catch(ex){throw exceptionFrom(ex,Error,{cause:{origin:ex},message:"cookie error: ".concat(ex.message)})}return!0}},{key:"delete",value:function(key){if("string"!=typeof key||!key||!this.has(key))return!1;try{if(CookieAdapter._setCookie(this._prefix+key,undefined,_MIN_EXPIRY),this.has(key))throw new Error("unknown validation error during delete")}catch(ex){throw exceptionFrom(ex,Error,{cause:{origin:ex},message:"cookie error: ".concat(ex.message)})}return!0}},{key:"clear",value:function(){for(var keys=this.keys(),i=0,length=keys.length;i<length;++i)this.delete(keys[i]);return!0}}],[{key:"_getCookie",value:function(prefixedKey){if(!prefixedKey||""===document.cookie)return null;for(var cookies=document.cookie.split(/;\s*/),i=0;i<cookies.length;++i){var kvPair=cookies[i].split("=");if(prefixedKey===decodeURIComponent(kvPair[0]))return decodeURIComponent(kvPair[1])||null}return null}},{key:"_setCookie",value:function(prefixedKey,value,expiry){if(prefixedKey){var payload="".concat(encodeURIComponent(prefixedKey),"=");null!=value&&(payload+=encodeURIComponent(value)),null!=expiry&&(payload+="; expires=".concat(expiry)),payload+="; path=/",document.cookie=payload}}},{key:"_serialize",value:function(obj){return LZString.compressToBase64(Serial.stringify(obj))}},{key:"_deserialize",value:function(str){return Serial.parse(LZString.decompressFromBase64(str))}}])}(),Object.preventExtensions(Object.create(null,{init:{value:function(storageId){try{var tid="_sc_".concat(String(Date.now()));CookieAdapter._setCookie(tid,CookieAdapter._serialize(tid),undefined),_ok=CookieAdapter._deserialize(CookieAdapter._getCookie(tid))===tid,CookieAdapter._setCookie(tid,undefined,_MIN_EXPIRY)}catch(ex){_ok=!1}return _ok&&function(storageId){if(""!==document.cookie)for(var oldPrefix="".concat(storageId,"."),oldPrefixRe=new RegExp("^".concat(RegExp.escape(oldPrefix))),persistPrefix="".concat(storageId,"!."),sessionPrefix="".concat(storageId,"*."),sessionTestRe=/\.(?:state|rcWarn)$/,cookies=document.cookie.split(/;\s*/),_loop=function(){var kvPair=cookies[i].split("="),key=decodeURIComponent(kvPair[0]);if(oldPrefixRe.test(key)){var value=decodeURIComponent(kvPair[1]);if(""!==value){var persist=!sessionTestRe.test(key);CookieAdapter._setCookie(key,undefined,_MIN_EXPIRY),CookieAdapter._setCookie(key.replace(oldPrefixRe,(function(){return persist?persistPrefix:sessionPrefix})),value,persist?_MAX_EXPIRY:undefined)}}},i=0;i<cookies.length;++i)_loop()}(storageId),_ok}},create:{value:function(storageId,persistent){if(!_ok)throw new Error("adapter not initialized");return new CookieAdapter(storageId,persistent)}}}))));var DebugView=function(){function DebugView(parent,type,name,title){_classCallCheck(this,DebugView),Object.defineProperties(this,{parent:{value:parent},view:{value:document.createElement("span")},break:{value:document.createElement("wbr")}}),jQuery(this.view).attr({title:title,"aria-label":title,"data-type":null!=type?type:"","data-name":null!=name?name:""}).addClass("debug"),jQuery(this.break).addClass("debug hidden"),this.parent.appendChild(this.view),this.parent.appendChild(this.break)}return _createClass(DebugView,[{key:"output",get:function(){return this.view}},{key:"type",get:function(){return this.view.getAttribute("data-type")},set:function(type){this.view.setAttribute("data-type",null!=type?type:"")}},{key:"name",get:function(){return this.view.getAttribute("data-name")},set:function(name){this.view.setAttribute("data-name",null!=name?name:"")}},{key:"title",get:function(){return this.view.title},set:function(title){this.view.title=title}},{key:"append",value:function(el){return jQuery(this.view).append(el),this}},{key:"modes",value:function(options){if(null==options){var current={};return this.view.className.splitOrEmpty(/\s+/).forEach((function(name){"debug"!==name&&(current[name]=!0)})),current}if("object"===_typeof(options))return Object.keys(options).forEach((function(name){this[options[name]?"addClass":"removeClass"](name)}),jQuery(this.view)),this;throw new Error("DebugView.prototype.modes options parameter must be an object or null/undefined")}},{key:"remove",value:function(){var $view=jQuery(this.view);this.view.hasChildNodes()&&$view.contents().appendTo(this.parent),$view.remove(),jQuery(this.break).remove()}}],[{key:"isEnabled",value:function(){return"enabled"===jQuery(document.documentElement).attr("data-debug-view")}},{key:"enable",value:function(){jQuery(document.documentElement).attr("data-debug-view","enabled"),triggerEvent(":debugviewupdate")}},{key:"disable",value:function(){jQuery(document.documentElement).removeAttr("data-debug-view"),triggerEvent(":debugviewupdate")}},{key:"toggle",value:function(){DebugView.isEnabled()?DebugView.disable():DebugView.enable()}}])}(),NodeTyper=function(){return _createClass((function NodeTyper(config){if(_classCallCheck(this,NodeTyper),"object"!==_typeof(config)||null===config)throw new Error("config parameter must be an object (received: ".concat(getTypeOf(config),")"));if(!(Object.hasOwn(config,"targetNode")&&config.targetNode instanceof Node))throw new Error('config parameter object "targetNode" property must be a node');Object.defineProperties(this,{node:{value:config.targetNode},childNodes:{value:[]},nodeValue:{writable:!0,value:""},appendTo:{writable:!0,value:config.parentNode||null},classNames:{writable:!0,value:config.classNames||null},finished:{writable:!0,value:!1}});var childNode,node=this.node;for(node.nodeValue&&(this.nodeValue=node.nodeValue,node.nodeValue="");null!==(childNode=node.firstChild);)this.childNodes.push(new NodeTyper({targetNode:childNode,parentNode:node,classNames:this.classNames})),node.removeChild(childNode)}),[{key:"finish",value:function(){for(;this.type(!0););return!1}},{key:"type",value:function(flush){if(this.finished)return!1;if(this.appendTo){if(this.appendTo.appendChild(this.node),this.appendTo=null,this.node.nodeType!==Node.ELEMENT_NODE&&this.node.nodeType!==Node.TEXT_NODE||"none"===jQuery(this.node.parentNode).css("display"))return this.finish();this.node.parentNode&&this.classNames&&jQuery(this.node.parentNode).addClass(this.classNames)}if(this.nodeValue){if(flush)this.node.nodeValue+=this.nodeValue,this.nodeValue="";else{var _charAndPosAt=charAndPosAt(this.nodeValue,0),char=_charAndPosAt.char,start=_charAndPosAt.start,end=_charAndPosAt.end;this.node.nodeValue+=char,this.nodeValue=this.nodeValue.slice(1+end-start)}return!0}this.classNames&&(jQuery(this.node.parentNode).removeClass(this.classNames),this.classNames=null);for(var childNodes=this.childNodes;childNodes.length>0;){if(childNodes[0].type())return!0;childNodes.shift()}return this.finished=!0,!1}}])}(),StyleWrapper=(_imageMarkupRe=new RegExp(Patterns.cssImage,"g"),_hasImageMarkupRe=new RegExp(Patterns.cssImage),function(){return _createClass((function StyleWrapper(style){if(_classCallCheck(this,StyleWrapper),null==style)throw new TypeError("StyleWrapper style parameter must be an HTMLStyleElement object");Object.defineProperties(this,{style:{value:style}})}),[{key:"isEmpty",value:function(){return 0===this.style.cssRules.length}},{key:"set",value:function(rawCss){this.clear(),this.add(rawCss)}},{key:"add",value:function(rawCss){var css=rawCss;_hasImageMarkupRe.test(css)&&(_imageMarkupRe.lastIndex=0,css=css.replace(_imageMarkupRe,(function(wikiImage){var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:wikiImage,matchStart:0});if(Object.hasOwn(markup,"error")||markup.pos<wikiImage.length)return wikiImage;var source=markup.source;if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(source=passage.text.trim())}return'url("'.concat(source.replace(/"/g,"%22"),'")')}))),this.style.styleSheet?this.style.styleSheet.cssText+=css:this.style.appendChild(document.createTextNode(css))}},{key:"clear",value:function(){this.style.styleSheet?this.style.styleSheet.cssText="":jQuery(this.style).empty()}}])}()),_imageMarkupRe,_hasImageMarkupRe,Diff=function(){var Op=enumFrom({Delete:0,SpliceArray:1,Copy:2,CopyDate:3});function isNumeric(O){var num;switch(_typeof(O)){case"number":num=O;break;case"string":num=Number(O);break;default:return!1}return!Number.isNaN(num)&&Number.isFinite(num)}return Object.preventExtensions(Object.create(null,{Op:{value:Op},diff:{value:function diff(a,b){for(var aOpKey,toString=Object.prototype.toString,aIsArray=a instanceof Array,delta=Object.create(null),keys=[].concat(_toConsumableArray(Object.keys(a)),_toConsumableArray(Object.keys(b))).sort().filter((function(val,i,arr){return 0===i||arr[i-1]!==val})),isAOpKey=function(key){return key===aOpKey},i=0,klen=keys.length;i<klen;++i){var key=keys[i],aVal=a[key],bVal=b[key];if(Object.hasOwn(a,key))if(Object.hasOwn(b,key)){if(aVal===bVal)continue;if(_typeof(aVal)===_typeof(bVal))if("function"==typeof aVal)aVal.toString()!==bVal.toString()&&(delta[key]=[Op.Copy,bVal]);else if("object"!==_typeof(aVal)||null===aVal)delta[key]=[Op.Copy,bVal];else{var aValType=toString.call(aVal);if(aValType===toString.call(bVal))if(aVal instanceof Date)aVal.getTime()!==bVal.getTime()&&(delta[key]=[Op.Copy,clone(bVal)]);else if(aVal instanceof Map)delta[key]=[Op.Copy,clone(bVal)];else if(aVal instanceof RegExp)aVal.toString()!==bVal.toString()&&(delta[key]=[Op.Copy,clone(bVal)]);else if(aVal instanceof Set)delta[key]=[Op.Copy,clone(bVal)];else if(aVal instanceof Array||"[object Object]"===aValType){var subDelta=diff(aVal,bVal);null!==subDelta&&(delta[key]=subDelta)}else delta[key]=[Op.Copy,clone(bVal)];else delta[key]=[Op.Copy,clone(bVal)]}else delta[key]=[Op.Copy,"object"!==_typeof(bVal)||null===bVal?bVal:clone(bVal)]}else if(aIsArray&&isNumeric(key)){var index=Number(key);if(!aOpKey){aOpKey="";do{aOpKey+="~"}while(keys.some(isAOpKey));delta[aOpKey]=[Op.SpliceArray,index,index]}index<delta[aOpKey][1]&&(delta[aOpKey][1]=index),index>delta[aOpKey][2]&&(delta[aOpKey][2]=index)}else delta[key]=Op.Delete;else delta[key]=[Op.Copy,"object"!==_typeof(bVal)||null===bVal?bVal:clone(bVal)]}return Object.keys(delta).length>0?delta:null}},patch:{value:function patch(orig,delta){for(var keys=delta?Object.keys(delta):[],patched=clone(orig),i=0,klen=keys.length;i<klen;++i){var key=keys[i],value=delta[key];if(value===Op.Delete)delete patched[key];else if(value instanceof Array)switch(value[0]){case Op.SpliceArray:patched.splice(value[1],value[2]-value[1]+1);break;case Op.Copy:patched[key]=clone(value[1]);break;case Op.CopyDate:patched[key]=new Date(value[1])}else patched[key]=patch(patched[key],value)}return patched}}}))}(),L10n=(replaceRE=/\{\w+\}/g,hasReplaceRE=new RegExp(replaceRE.source),Object.preventExtensions(Object.create(null,{init:{value:function(){}},get:{value:function(ids,overrides){if(!ids)return"";var id=(Array.isArray(ids)?ids:[ids]).find((function(id){return Object.hasOwn(l10nStrings,id)}));if(!id)return"";for(var value=l10nStrings[id],i=0;hasReplaceRE.test(value);){if(++i>50)throw new Error("L10n.get exceeded maximum replacement depth, probable infinite loop");replaceRE.lastIndex=0,value=value.replace(replaceRE,(function(replacement){var rid=replacement.slice(1,-1);return overrides&&Object.hasOwn(overrides,rid)?overrides[rid]:Object.hasOwn(l10nStrings,rid)?l10nStrings[rid]:void 0}))}return value}}}))),replaceRE,hasReplaceRE,l10nStrings={textAbort:"Abort",textAborting:"Aborting",textCancel:"Cancel",textClear:"Clear",textClose:"Close",textDelete:"Delete",textExport:"Export",textIdentity:"game",textImport:"Import",textLoad:"Load",textOff:"Off",textOk:"OK",textOn:"On",textSave:"Save",textTurn:"Turn",errorNonexistentPassage:'the passage "{passage}" does not exist',warningNoStorage:"All usable storage APIs are missing. Possible causes are a disabled third-party cookie setting, which also affects Web Storage, or a private browsing mode.",warningNoWebStorage:"The Web Storage API is missing, so this {textIdentity} is running in a degraded mode. You may be able to continue, however, some parts may not work properly.",warningDegraded:"Some capabilities required to support this {textIdentity} are missing, so it is running in a degraded mode. You may be able to continue, however, some parts may not work properly.",warningNoSaves:"Some capabilities required to support saves are missing, so saves have been disabled for this session.",saveErrorDisallowed:"Saving is currently disallowed.",saveErrorDecodeFail:"unable to decode save, likely due to corruption",saveErrorDiskLoadFail:"failed to load save file from disk",saveErrorIdMismatch:"save is from the wrong {textIdentity}",saveErrorInvalidData:"save is missing required data, likely due to corruption",saveErrorLoadTooEarly:"cannot load save this early",saveErrorNonexistent:"save does not exist",uiBarLabelToggle:"Toggle the UI bar",uiBarLabelBackward:"Go backward within the {textIdentity} history",uiBarLabelForward:"Go forward within the {textIdentity} history",uiBarLabelJumpto:"Jump to a specific point within the {textIdentity} history",alertTitle:"Alert",restartTitle:"Restart",restartMesgPrompt:"All unsaved progress will be lost. Are you sure that you want to restart?",continueTitle:"Continue",savesTitle:"Saves",savesHeaderBrowser:"In Browser",savesHeaderDisk:"On Disk",savesLabelBrowserClear:"Clear all browser saves",savesLabelBrowserExport:"Export browser saves to bundle",savesLabelBrowserImport:"Import browser saves from bundle",savesLabelDiskLoad:"Load from disk",savesLabelDiskSave:"Save to disk",savesTextBrowserAuto:"Auto",savesTextBrowserSlot:"Slot",savesTextNoDate:"unknown date",settingsTitle:"Settings",settingsTextReset:"Reset to Defaults",errorViewTitle:"Error",errorViewLabelToggle:"Toggle the error view",debugBarLabelToggle:"Toggle the debug bar",debugBarLabelViewsToggle:"Toggle the debug views",debugBarLabelWatchAdd:"Add a new watch",debugBarLabelWatchAll:"Watch all",debugBarLabelWatchClear:"Clear all watches",debugBarLabelWatchDelete:"Delete this watch",debugBarLabelWatchPlaceholder:"variable name",debugBarLabelPassagePlaceholder:"passage name",debugBarLabelPassagePlay:"Play passage",debugBarLabelWatchToggle:"Toggle the watch panel",debugBarMesgNoWatches:"No watches set",debugBarTextAdd:"Add",debugBarTextPassage:"Passage",debugBarTextViews:"Views",debugBarTextWatch:"Watch",macroBackText:"Back",macroReturnText:"Return",autoloadTitle:"Autoload",autoloadMesgPrompt:"An autosave exists. Load it now or go to the start?",autoloadTextCancel:"Go to start",autoloadTextOk:"Load autosave",jumptoTitle:"Jump To",jumptoMesgUnavailable:"No jump points currently available…",shareTitle:"Share"},Config=(_addVisitedLinkClass=!1,_cleanupWikifierOutput=!1,_debug=!1,_enableOptionalDebugging=!1,_loadDelay=0,_audioPauseOnFadeToZero=!0,_audioPreloadMetadata=!0,_historyControls=!0,_historyMaxStates=40,_macrosMaxLoopIterations=1e3,_macrosTypeSkipKey=" ",_macrosTypeVisitedPassages=!0,_passagesDisplayTitles=!1,_passagesNobr=!1,_savesMaxAuto=0,_savesMaxSlot=8,_uiStowBarInitially=800,_uiUpdateStoryElements=!0,errPassagesDescriptionsDeprecated="[DEPRECATED] Config.passages.descriptions has been deprecated, see Config.saves.descriptions instead",errSavesAutoloadDeprecated="[DEPRECATED] Config.saves.autoload has been deprecated, see the Save.browser.continue API instead",_baseSavesAutosaveDeprecated="[DEPRECATED] Config.saves.autosave has been deprecated",errSavesOnLoadDeprecated="[DEPRECATED] Config.saves.onLoad has been deprecated, see the Save.onLoad API instead",errSavesOnSaveDeprecated="[DEPRECATED] Config.saves.onSave has been deprecated, see the Save.onSave API instead",errSavesSlotsDeprecated="[DEPRECATED] Config.saves.slots has been deprecated, see Config.saves.maxSlotSaves instead",Object.freeze({get addVisitedLinkClass(){return _addVisitedLinkClass},set addVisitedLinkClass(value){_addVisitedLinkClass=Boolean(value)},get cleanupWikifierOutput(){return _cleanupWikifierOutput},set cleanupWikifierOutput(value){_cleanupWikifierOutput=Boolean(value)},get debug(){return _debug},set debug(value){_debug=Boolean(value)},get enableOptionalDebugging(){return _enableOptionalDebugging},set enableOptionalDebugging(value){_enableOptionalDebugging=Boolean(value)},get loadDelay(){return _loadDelay},set loadDelay(value){if(!Number.isSafeInteger(value)||value<0)throw new RangeError("Config.loadDelay must be a non-negative integer");_loadDelay=value},audio:Object.freeze({get pauseOnFadeToZero(){return _audioPauseOnFadeToZero},set pauseOnFadeToZero(value){_audioPauseOnFadeToZero=Boolean(value)},get preloadMetadata(){return _audioPreloadMetadata},set preloadMetadata(value){_audioPreloadMetadata=Boolean(value)}}),history:Object.freeze({get controls(){return _historyControls},set controls(value){var controls=Boolean(value);if(1===_historyMaxStates&&controls)throw new Error("Config.history.controls must be false when Config.history.maxStates is 1");_historyControls=controls},get maxStates(){return _historyMaxStates},set maxStates(value){if(!Number.isSafeInteger(value)||value<1)throw new RangeError("Config.history.maxStates must be a positive integer");_historyMaxStates=value,_historyControls&&1===value&&(_historyControls=!1)}}),macros:Object.freeze({get maxLoopIterations(){return _macrosMaxLoopIterations},set maxLoopIterations(value){if(!Number.isSafeInteger(value)||value<1)throw new RangeError("Config.macros.maxLoopIterations must be a positive integer");_macrosMaxLoopIterations=value},get typeSkipKey(){return _macrosTypeSkipKey},set typeSkipKey(value){_macrosTypeSkipKey=String(value)},get typeVisitedPassages(){return _macrosTypeVisitedPassages},set typeVisitedPassages(value){_macrosTypeVisitedPassages=Boolean(value)},get ifAssignmentError(){throw new Error("[DEPRECATED] Config.macros.ifAssignmentError has been deprecated, see Config.enableOptionalDebugging instead")},set ifAssignmentError(value){console.warn("[DEPRECATED] Config.macros.ifAssignmentError has been deprecated, see Config.enableOptionalDebugging instead"),Config.enableOptionalDebugging=value}}),navigation:Object.freeze({get override(){return _navigationOverride},set override(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.navigation.override must be a function or null/undefined (received: ".concat(getTypeOf(value),")"));_navigationOverride=value}}),passages:Object.freeze({get displayTitles(){return _passagesDisplayTitles},set displayTitles(value){_passagesDisplayTitles=Boolean(value)},get nobr(){return _passagesNobr},set nobr(value){_passagesNobr=Boolean(value)},get onProcess(){return _passagesOnProcess},set onProcess(value){if(null!=value){var valueType=getTypeOf(value);if("function"!==valueType)throw new TypeError("Config.passages.onProcess must be a function or null/undefined (received: ".concat(valueType,")"))}_passagesOnProcess=value},get start(){return _passagesStart},set start(value){if(null!=value){var valueType=getTypeOf(value);if("string"!==valueType)throw new TypeError("Config.passages.start must be a string or null/undefined (received: ".concat(valueType,")"))}_passagesStart=value},get transitionOut(){return _passagesTransitionOut},set transitionOut(value){if(null!=value){var valueType=getTypeOf(value);if("string"!==valueType&&("number"!==valueType||!Number.isSafeInteger(value)||value<0))throw new TypeError("Config.passages.transitionOut must be a string, non-negative integer, or null/undefined (received: ".concat(valueType,")"))}_passagesTransitionOut=value},get descriptions(){throw new Error(errPassagesDescriptionsDeprecated)},set descriptions(value){switch(console.warn(errPassagesDescriptionsDeprecated),_typeof(value)){case"boolean":value&&!Config.saves.descriptions&&(Config.saves.descriptions=function(){return State.passage});break;case"function":Config.saves.descriptions||(Config.saves.descriptions=value);break;case"undefined":case"object":if(value&&!Config.saves.descriptions){var dict=value;Config.saves.descriptions=function(){return Object.hasOwn(dict,State.passage)&&dict[State.passage]}}break;default:throw new TypeError("Config.passages.descriptions must be a boolean, object, function, or null/undefined (received: ".concat(getTypeOf(value),")"))}}}),saves:Object.freeze({get descriptions(){return _savesDescriptions},set descriptions(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.saves.descriptions must be a function or null/undefined (received: ".concat(getTypeOf(value),")"));_savesDescriptions=value},get id(){return _savesId},set id(value){if("string"!=typeof value||""===value)throw new TypeError("Config.saves.id must be a non-empty string (received: ".concat(getTypeOf(value),")"));_savesId=value},get isAllowed(){return _savesIsAllowed},set isAllowed(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.saves.isAllowed must be a function or null/undefined (received: ".concat(getTypeOf(value),")"));_savesIsAllowed=value},get maxAutoSaves(){return _savesMaxAuto},set maxAutoSaves(value){if(!Number.isInteger(value))throw new TypeError("Config.saves.maxAutoSaves must be an integer");if(value<0||value>Save.MAX_INDEX+1)throw new RangeError("Config.saves.maxAutoSaves out of bounds (range: 0–".concat(Save.MAX_INDEX+1,"; received: ").concat(value,")"));_savesMaxAuto=value},get maxSlotSaves(){return _savesMaxSlot},set maxSlotSaves(value){if(!Number.isInteger(value))throw new TypeError("Config.saves.maxSlotSaves must be an integer");if(value<0||value>Save.MAX_INDEX+1)throw new RangeError("Config.saves.maxSlotSaves out of bounds (range: 0–".concat(Save.MAX_INDEX+1,"; received: ").concat(value,")"));_savesMaxSlot=value},get metadata(){return _savesMetadata},set metadata(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.saves.metadata must be a function or null/undefined (received: ".concat(getTypeOf(value),")"));_savesMetadata=value},get version(){return _savesVersion},set version(value){_savesVersion=value},get _internal_autoload_(){return _savesAutoload},get autoload(){return console.warn(errSavesAutoloadDeprecated),_savesAutoload},set autoload(value){if(console.warn(errSavesAutoloadDeprecated),null!=value){var valueType=getTypeOf(value);if("boolean"!==valueType&&("string"!==valueType||"prompt"!==value)&&"function"!==valueType)throw new TypeError("Config.saves.autoload must be a boolean, string ('prompt'), function, or null/undefined (received: ".concat(valueType,")"))}_savesAutoload=value},get autosave(){throw new Error("".concat(_baseSavesAutosaveDeprecated,", see Config.saves.maxAutoSaves and Config.saves.isAllowed instead"))},set autosave(value){switch(_typeof(value)){case"boolean":console.warn("".concat(_baseSavesAutosaveDeprecated,", for boolean usage see Config.saves.maxAutoSaves instead"));break;case"function":if(console.warn("".concat(_baseSavesAutosaveDeprecated,", for function usage see Config.saves.isAllowed instead")),!Config.saves.isAllowed){var callback=value;Config.saves.isAllowed=function(saveType){return saveType!==Save.Type.Auto||callback(saveType)}}break;default:if(console.warn("".concat(_baseSavesAutosaveDeprecated,", for tag usage see Config.saves.isAllowed instead")),!(value instanceof Array)||0===value.length||value.some((function(tag){return"string"!=typeof tag}))){var valueType=getTypeOf(value);throw new TypeError("Config.saves.autosave must be a boolean, Array<string>, function, or null/undefined (received: ".concat(valueType).concat("Array"===valueType?"<any>":"",")"))}if(!Config.saves.isAllowed){var userTags=value;Config.saves.isAllowed=function(saveType){return saveType!==Save.Type.Auto||userTags.includesAny(Story.get(State.passage).tags)}}}0===Config.saves.maxAutoSaves&&(Config.saves.maxAutoSaves=1)},get onLoad(){throw new Error(errSavesOnLoadDeprecated)},set onLoad(value){console.warn(errSavesOnLoadDeprecated),Save.onLoad.add(value)},get onSave(){throw new Error(errSavesOnSaveDeprecated)},set onSave(value){console.warn(errSavesOnSaveDeprecated),Save.onSave.add(value)},get slots(){throw new Error(errSavesSlotsDeprecated)},set slots(value){console.warn(errSavesSlotsDeprecated),Config.saves.maxSlotSaves=value},get tryDiskOnMobile(){return console.warn("[DEPRECATED] Config.saves.tryDiskOnMobile has been deprecated"),!0},set tryDiskOnMobile(value){console.warn("[DEPRECATED] Config.saves.tryDiskOnMobile has been deprecated")}}),ui:Object.freeze({get stowBarInitially(){return _uiStowBarInitially},set stowBarInitially(value){var valueType=getTypeOf(value);if("boolean"!==valueType&&("number"!==valueType||!Number.isSafeInteger(value)||value<0))throw new TypeError("Config.ui.stowBarInitially must be a boolean or non-negative integer (received: ".concat(valueType,")"));_uiStowBarInitially=value},get updateStoryElements(){return _uiUpdateStoryElements},set updateStoryElements(value){_uiUpdateStoryElements=Boolean(value)}})})),_navigationOverride,_passagesStart,_passagesOnProcess,_passagesTransitionOut,_savesDescriptions,_savesId,_savesIsAllowed,_savesMetadata,_savesVersion,_savesAutoload,_addVisitedLinkClass,_cleanupWikifierOutput,_debug,_enableOptionalDebugging,_loadDelay,_audioPauseOnFadeToZero,_audioPreloadMetadata,_historyControls,_historyMaxStates,_macrosMaxLoopIterations,_macrosTypeSkipKey,_macrosTypeVisitedPassages,_passagesDisplayTitles,_passagesNobr,_savesMaxAuto,_savesMaxSlot,_uiStowBarInitially,_uiUpdateStoryElements,errPassagesDescriptionsDeprecated,errSavesAutoloadDeprecated,_baseSavesAutosaveDeprecated,errSavesOnLoadDeprecated,errSavesOnSaveDeprecated,errSavesSlotsDeprecated,SimpleAudio=function(){var _hasPromise,_specialIds=Object.freeze([":not",":all",":looped",":muted",":paused",":playing",":stopped"]),_formatSpecRe=/^([\w-]+)\s*\|\s*(\S.*)$/,_badIdRe=/[:\s]/,_tracks=new Map,_groups=new Map,_lists=new Map,_subscribers=new Map,_masterRate=1,_masterVolume=1,_masterMute=!1,_masterMuteOnHidden=!1,_playReturnsPromise=(_hasPromise=null,function(){if(null!==_hasPromise)return _hasPromise;if(_hasPromise=!1,Has.audio)try{var audio=document.createElement("audio");audio.muted=!0;var value=audio.play();value.catch((function(){})),_hasPromise=value instanceof Promise}catch(ex){}return _hasPromise}),AudioTrack=function(){function AudioTrack(obj){if(_classCallCheck(this,AudioTrack),obj instanceof Array)this._create(obj);else{if(!(obj instanceof AudioTrack))throw new Error("sources parameter must be either an array, of URIs or source objects, or an AudioTrack instance");this._copy(obj)}}return _createClass(AudioTrack,[{key:"_create",value:function(sourceList){var dataUriRe=/^data:\s*audio\/(?:x-)?([^;,]+)\s*[;,]/i,extRe=/\.([^./\\]+)$/,formats=AudioTrack.formats,usedSources=[],audio=document.createElement("audio");audio.preload="none",sourceList.forEach((function(src){var srcUri=null;switch(_typeof(src)){case"string":var match;if("data:"===src.slice(0,5)){if(null===(match=dataUriRe.exec(src)))throw new Error("source data URI missing media type")}else if(null===(match=extRe.exec(parseURL(src).pathname)))throw new Error("source URL missing file extension");formats[match[1]]&&(srcUri=src);break;case"object":if(null===src)throw new Error("source object cannot be null");if(!Object.hasOwn(src,"src"))throw new Error('source object missing required "src" property');if(!Object.hasOwn(src,"format"))throw new Error('source object missing required "format" property');formats[src.format]&&(srcUri=src.src);break;default:throw new Error("invalid source value (type: ".concat(_typeof(src),")"))}if(null!==srcUri){var source=document.createElement("source");source.src=srcUri,audio.appendChild(source),usedSources.push(srcUri)}})),audio.hasChildNodes()&&Config.audio.preloadMetadata&&(audio.preload="metadata"),this._finalize(audio,usedSources,clone(sourceList))}},{key:"_copy",value:function(obj){this._finalize(obj.audio.cloneNode(!0),clone(obj.sources),clone(obj.originals))}},{key:"_finalize",value:function(audio,sources,originals){var _this=this;Object.defineProperties(this,{audio:{configurable:!0,value:audio},sources:{value:Object.freeze(sources)},originals:{value:Object.freeze(originals)},_error:{writable:!0,value:!1},_faderId:{writable:!0,value:null},_mute:{writable:!0,value:!1},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1}}),jQuery(this.audio).on("loadstart.AudioTrack",(function(){return _this._error=!1})).on("error.AudioTrack",(function(){return _this._error=!0})).find("source:last-of-type").on("error.AudioTrack",(function(){return _this._trigger("error")})),function(id,callback){if("function"!=typeof callback)throw new Error("callback parameter must be a function");_subscribers.set(id,callback)}(this,(function(mesg){if(_this.audio)switch(mesg){case"loadwithscreen":if(_this.hasSource()){var lockId=LoadScreen.lock();_this.off(".AudioTrack_loadwithscreen").one("canplaythrough.AudioTrack_loadwithscreen error.AudioTrack_loadwithscreen",(function(){jQuery(this).off(".AudioTrack_loadwithscreen"),LoadScreen.unlock(lockId)})).load()}break;case"load":_this.load();break;case"mute":_this._updateAudioMute();break;case"rate":_this._updateAudioRate();break;case"stop":_this.stop();break;case"volume":_this._updateAudioVolume();break;case"unload":_this.unload()}else unsubscribe(_this)})),this._updateAudioMute(),this._updateAudioRate(),this._updateAudioVolume()}},{key:"_trigger",value:function(eventName){triggerEvent(eventName,this.audio,{bubbles:!1})}},{key:"_destroy",value:function(){unsubscribe(this),this.audio&&(jQuery(this.audio).off(),this.unload(),this._error=!0,delete this.audio)}},{key:"clone",value:function(){return new AudioTrack(this)}},{key:"load",value:function(){var _this2=this;if(this.fadeStop(),this.audio.pause(),!this.audio.hasChildNodes()){if(0===this.sources.length)return;this.sources.forEach((function(srcUri){var source=document.createElement("source");source.src=srcUri,_this2.audio.appendChild(source)}))}"auto"!==this.audio.preload&&(this.audio.preload="auto"),this.isLoading()||this.audio.load()}},{key:"unload",value:function(){this.fadeStop(),this.stop();var audio=this.audio;for(audio.preload="none";audio.hasChildNodes();)audio.removeChild(audio.firstChild);audio.load()}},{key:"play",value:function(){var _this3=this;if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));"auto"!==this.audio.preload&&(this.audio.preload="auto");var namespace=".AudioTrack_play";return _playReturnsPromise()?this.audio.play():new Promise((function(resolve,reject){_this3.isPlaying()?resolve():(jQuery(_this3.audio).off(namespace).one("error".concat(namespace," playing").concat(namespace," timeupdate").concat(namespace),(function(ev){jQuery(_this3.audio).off(namespace),"error"===ev.type?reject(new Error("unknown audio play error")):resolve()})),_this3.audio.play())}))}},{key:"playWhenAllowed",value:function(){var _this4=this;return this.play().catch((function(ex){if("NotAllowedError"!==ex.name)throw ex;onUserActivation(".AudioTrack_playWhenAllowed",(function(){return _this4.audio.play()}))}))}},{key:"pause",value:function(){this.audio.pause()}},{key:"stop",value:function(){this.audio.pause(),this.time(0),this._trigger(":stopped")}},{key:"fade",value:function(duration,toVol,fromVol){var _this5=this;if("number"!=typeof duration)throw new TypeError("duration parameter must be a number");if("number"!=typeof toVol)throw new TypeError("toVolume parameter must be a number");if(null!=fromVol&&"number"!=typeof fromVol)throw new TypeError("fromVolume parameter must be a number");if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));this.fadeStop();var from=Math.clamp(null==fromVol?this.volume():fromVol,0,1),to=Math.clamp(toVol,0,1);return from!==to?(this.volume(from),jQuery(this.audio).off("timeupdate.AudioTrack_fade").one("timeupdate.AudioTrack_fade",(function(){var min,max;from<to?(min=from,max=to):(min=to,max=from);var time=Math.max(duration,1),delta=(to-from)/(time/.025);_this5._trigger(":fading"),_this5._faderId=setInterval((function(){_this5.isPlaying()?(_this5.volume(Math.clamp(_this5.volume()+delta,min,max)),Config.audio.pauseOnFadeToZero&&0===_this5.volume()&&_this5.pause(),_this5.volume()===to&&(_this5.fadeStop(),_this5._trigger(":faded"))):_this5.fadeStop()}),25)})),this.play()):void 0}},{key:"fadeIn",value:function(duration,fromVol){return this.fade(duration,1,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){return this.fade(duration,0,fromVol)}},{key:"fadeStop",value:function(){null!==this._faderId&&(clearInterval(this._faderId),this._faderId=null)}},{key:"loop",value:function(_loop2){return null==_loop2?this.audio.loop:(this.audio.loop=!!_loop2,this)}},{key:"mute",value:function(_mute){return null==_mute?this._mute:(this._mute=!!_mute,this._updateAudioMute(),this)}},{key:"_updateAudioMute",value:function(){this.audio.muted=this._mute||_masterMute}},{key:"rate",value:function(_rate){if(null==_rate)return this._rate;if("number"!=typeof _rate)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(_rate,.2,5),this._updateAudioRate(),this}},{key:"_updateAudioRate",value:function(){this.audio.playbackRate=Math.clamp(this._rate*_masterRate,.2,5)}},{key:"time",value:function(_time){var _this6=this;if(null==_time)return this.audio.currentTime;if("number"!=typeof _time)throw new TypeError("time parameter must be a number");return this.hasMetadata()?this.audio.currentTime=_time:jQuery(this.audio).off("loadedmetadata.AudioTrack_time").one("loadedmetadata.AudioTrack_time",(function(){return _this6.audio.currentTime=_time})),this}},{key:"volume",value:function(_volume){if(null==_volume)return this._volume;if("number"!=typeof _volume)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(_volume,0,1),this._updateAudioVolume(),this}},{key:"_updateAudioVolume",value:function(){this.audio.volume=Math.clamp(this._volume*_masterVolume,0,1)}},{key:"duration",value:function(){return this.audio.duration}},{key:"remaining",value:function(){return this.audio.duration-this.audio.currentTime}},{key:"isFailed",value:function(){return this._error}},{key:"isLoading",value:function(){return this.audio.networkState===HTMLMediaElement.NETWORK_LOADING}},{key:"isUnloaded",value:function(){return!this.audio.hasChildNodes()}},{key:"isUnavailable",value:function(){return!this.hasSource()||this.isUnloaded()||this.isFailed()}},{key:"isPlaying",value:function(){return!this.audio.paused&&this.hasSomeData()}},{key:"isPaused",value:function(){return this.audio.paused&&(this.audio.duration===1/0||this.audio.currentTime>0)&&!this.audio.ended}},{key:"isStopped",value:function(){return this.audio.paused&&0===this.audio.currentTime}},{key:"isEnded",value:function(){return this.audio.ended}},{key:"isFading",value:function(){return null!==this._faderId}},{key:"isSeeking",value:function(){return this.audio.seeking}},{key:"hasSource",value:function(){return this.sources.length>0}},{key:"hasNoData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_NOTHING}},{key:"hasMetadata",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_METADATA}},{key:"hasSomeData",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA}},{key:"hasData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA}},{key:"on",value:function(){for(var _len5=arguments.length,args=new Array(_len5),_key5=0;_key5<_len5;_key5++)args[_key5]=arguments[_key5];return jQuery.fn.on.apply(jQuery(this.audio),args),this}},{key:"one",value:function(){for(var _len6=arguments.length,args=new Array(_len6),_key6=0;_key6<_len6;_key6++)args[_key6]=arguments[_key6];return jQuery.fn.one.apply(jQuery(this.audio),args),this}},{key:"off",value:function(){for(var _len7=arguments.length,args=new Array(_len7),_key7=0;_key7<_len7;_key7++)args[_key7]=arguments[_key7];return jQuery.fn.off.apply(jQuery(this.audio),args),this}}])}();Object.defineProperties(AudioTrack,{formats:{value:function(){var audio=document.createElement("audio"),types=new Map;function canPlay(mimeType){return types.has(mimeType)||types.set(mimeType,""!==audio.canPlayType(mimeType).replace(/^no$/i,"")),types.get(mimeType)}return Object.assign(Object.create(null),{aac:canPlay("audio/aac"),caf:canPlay("audio/x-caf")||canPlay("audio/caf"),flac:canPlay("audio/x-flac")||canPlay("audio/flac"),mp3:canPlay('audio/mpeg; codecs="mp3"')||canPlay("audio/mpeg")||canPlay("audio/mp3")||canPlay("audio/mpa"),mpeg:canPlay("audio/mpeg"),m4a:canPlay("audio/x-m4a")||canPlay("audio/m4a")||canPlay("audio/aac"),mp4:canPlay("audio/x-mp4")||canPlay("audio/mp4")||canPlay("audio/aac"),ogg:canPlay("audio/ogg"),oga:canPlay("audio/ogg"),opus:canPlay('audio/ogg; codecs="opus"')||canPlay("audio/opus"),wav:canPlay('audio/wave; codecs="1"')||canPlay('audio/wav; codecs="1"')||canPlay("audio/wave")||canPlay("audio/wav"),wave:canPlay('audio/wave; codecs="1"')||canPlay('audio/wav; codecs="1"')||canPlay("audio/wave")||canPlay("audio/wav"),weba:canPlay("audio/webm"),webm:canPlay("audio/webm")})}()}});var AudioList=function(){return _createClass((function AudioList(obj){if(_classCallCheck(this,AudioList),obj instanceof Array)this._create(obj);else{if(!(obj instanceof AudioList))throw new Error("tracks parameter must be either an array, of track objects, or an AudioTrack instance");this._copy(obj)}}),[{key:"_create",value:function(trackList){var _this7=this;this._finalize(trackList.map((function(trackObj){if("object"!==_typeof(trackObj))throw new Error("tracks parameter array members must be objects");var own,rate,track,volume;if(trackObj instanceof AudioTrack)own=!0,rate=trackObj.rate(),track=trackObj.clone(),volume=trackObj.volume();else{if(!Object.hasOwn(trackObj,"track"))throw new Error('track object missing required "track" property');if(!(trackObj.track instanceof AudioTrack))throw new Error('track object\'s "track" property must be an AudioTrack object');own=Object.hasOwn(trackObj,"own")&&trackObj.own,rate=Object.hasOwn(trackObj,"rate")?trackObj.rate:trackObj.track.rate(),track=trackObj.track,volume=Object.hasOwn(trackObj,"volume")?trackObj.volume:trackObj.track.volume()}return track.stop(),track.loop(!1),track.mute(!1),track.rate(rate),track.volume(volume),track.on("ended.AudioList",(function(){return _this7._onEnd()})),{own:own,track:track,volume:volume,rate:rate}})))}},{key:"_copy",value:function(obj){this._finalize(clone(obj.tracks))}},{key:"_finalize",value:function(tracks){Object.defineProperties(this,{tracks:{configurable:!0,value:Object.freeze(tracks)},queue:{configurable:!0,value:[]},current:{writable:!0,value:null},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1},_mute:{writable:!0,value:!1},_loop:{writable:!0,value:!1},_shuffle:{writable:!0,value:!1}})}},{key:"_destroy",value:function(){this.stop(),this.tracks.filter((function(trackObj){return trackObj.own})).forEach((function(trackObj){return trackObj.track._destroy()})),delete this.tracks,delete this.queue}},{key:"load",value:function(){this.tracks.forEach((function(trackObj){return trackObj.track.load()}))}},{key:"unload",value:function(){this.stop(),this.tracks.forEach((function(trackObj){return trackObj.track.unload()}))}},{key:"play",value:function(){return null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||(0===this.queue.length&&this._fillQueue(),this._next())?this.current.track.play():Promise.reject(new Error("no tracks were available"))}},{key:"playWhenAllowed",value:function(){var _this8=this;return this.play().catch((function(ex){if("NotAllowedError"!==ex.name)throw ex;onUserActivation(".AudioList_playWhenAllowed",(function(){return _this8.play()}))}))}},{key:"pause",value:function(){null!==this.current&&this.current.track.pause()}},{key:"stop",value:function(){null!==this.current&&(this.current.track.stop(),this.current=null),this._drainQueue()}},{key:"skip",value:function(){this._next()?this.current.track.play():this._loop&&this.play()}},{key:"fade",value:function(duration,toVol,fromVol){if("number"!=typeof duration)throw new TypeError("duration parameter must be a number");if("number"!=typeof toVol)throw new TypeError("toVolume parameter must be a number");if(null!=fromVol&&"number"!=typeof fromVol)throw new TypeError("fromVolume parameter must be a number");if(0===this.queue.length&&this._fillQueue(),null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||this._next()){var adjFromVol,adjToVol=Math.clamp(toVol,0,1)*this.current.volume;return null!=fromVol&&(adjFromVol=Math.clamp(fromVol,0,1)*this.current.volume),this._volume=toVol,this.current.track.fade(duration,adjToVol,adjFromVol)}}},{key:"fadeIn",value:function(duration,fromVol){return this.fade(duration,1,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){return this.fade(duration,0,fromVol)}},{key:"fadeStop",value:function(){null!==this.current&&this.current.track.fadeStop()}},{key:"loop",value:function(_loop3){return null==_loop3?this._loop:(this._loop=!!_loop3,this)}},{key:"mute",value:function(_mute2){return null==_mute2?this._mute:(this._mute=!!_mute2,null!==this.current&&this.current.track.mute(this._mute),this)}},{key:"rate",value:function(_rate2){if(null==_rate2)return this._rate;if("number"!=typeof _rate2)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(_rate2,.2,5),null!==this.current&&this.current.track.rate(this._rate*this.current.rate),this}},{key:"shuffle",value:function(_shuffle){var _this9=this;if(null==_shuffle)return this._shuffle;if(this._shuffle=!!_shuffle,this.queue.length>0&&(this._fillQueue(),!this._shuffle&&null!==this.current&&this.queue.length>1)){var _this$queue,firstIndex=this.queue.findIndex((function(trackObj){return trackObj===_this9.current}));if(-1!==firstIndex)(_this$queue=this.queue).push.apply(_this$queue,_toConsumableArray(this.queue.splice(0,firstIndex+1)))}return this}},{key:"volume",value:function(_volume2){if(null==_volume2)return this._volume;if("number"!=typeof _volume2)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(_volume2,0,1),null!==this.current&&this.current.track.volume(this._volume*this.current.volume),this}},{key:"duration",value:function(){if(arguments.length>0)throw new Error("duration takes no parameters");return this.tracks.map((function(trackObj){return trackObj.track.duration()})).reduce((function(prev,cur){return prev+cur}),0)}},{key:"remaining",value:function(){if(arguments.length>0)throw new Error("remaining takes no parameters");var remainingTime=this.queue.map((function(trackObj){return trackObj.track.duration()})).reduce((function(prev,cur){return prev+cur}),0);return null!==this.current&&(remainingTime+=this.current.track.remaining()),remainingTime}},{key:"time",value:function(){if(arguments.length>0)throw new Error("time takes no parameters");return this.duration()-this.remaining()}},{key:"isPlaying",value:function(){return null!==this.current&&this.current.track.isPlaying()}},{key:"isPaused",value:function(){return null===this.current||this.current.track.isPaused()}},{key:"isStopped",value:function(){return 0===this.queue.length&&null===this.current}},{key:"isEnded",value:function(){return 0===this.queue.length&&(null===this.current||this.current.track.isEnded())}},{key:"isFading",value:function(){return null!==this.current&&this.current.track.isFading()}},{key:"_next",value:function(){var nextTrack;for(null!==this.current&&(this.current.track.stop(),this.current=null);nextTrack=this.queue.shift();)if(!nextTrack.track.isUnavailable()){this.current=nextTrack;break}return null!==this.current&&(this.current.track.mute(this._mute),this.current.track.rate(this._rate*this.current.rate),this.current.track.volume(this._volume*this.current.volume),this.current.track.loop(!1),!0)}},{key:"_onEnd",value:function(){if(0===this.queue.length){if(!this._loop)return;this._fillQueue()}this._next()&&this.current.track.play()}},{key:"_drainQueue",value:function(){this.queue.splice(0)}},{key:"_fillQueue",value:function(){var _this$queue2;this._drainQueue(),(_this$queue2=this.queue).push.apply(_this$queue2,_toConsumableArray(this.tracks.filter((function(trackObj){return!trackObj.track.isUnavailable()})))),0!==this.queue.length&&this._shuffle&&(this.queue.shuffle(),this.queue.length>1&&this.queue[0]===this.current&&this.queue.push(this.queue.shift()))}}])}(),AudioRunner=function(){function AudioRunner(list){if(_classCallCheck(this,AudioRunner),!(list instanceof Set||list instanceof AudioRunner))throw new TypeError("list parameter must be a Set or a AudioRunner instance");Object.defineProperties(this,{trackIds:{value:new Set(list instanceof AudioRunner?list.trackIds:list)}})}return _createClass(AudioRunner,[{key:"load",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.load)}},{key:"unload",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.unload)}},{key:"play",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.play)}},{key:"playWhenAllowed",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.playWhenAllowed)}},{key:"pause",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.pause)}},{key:"stop",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.stop)}},{key:"fade",value:function(duration,toVol,fromVol){if(null==duration||null==toVol)throw new Error("fade requires parameters");AudioRunner._run(this.trackIds,AudioTrack.prototype.fade,duration,toVol,fromVol)}},{key:"fadeIn",value:function(duration,fromVol){if(null==duration)throw new Error("fadeIn requires a parameter");AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeIn,duration,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){if(null==duration)throw new Error("fadeOut requires a parameter");AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeOut,duration,fromVol)}},{key:"fadeStop",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeStop)}},{key:"loop",value:function(_loop4){if(null==_loop4)throw new Error("loop requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.loop,_loop4),this}},{key:"mute",value:function(_mute3){if(null==_mute3)throw new Error("mute requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.mute,_mute3),this}},{key:"rate",value:function(_rate3){if(null==_rate3)throw new Error("rate requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.rate,_rate3),this}},{key:"time",value:function(_time2){if(null==_time2)throw new Error("time requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.time,_time2),this}},{key:"volume",value:function(_volume3){if(null==_volume3)throw new Error("volume requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.volume,_volume3),this}},{key:"on",value:function(){for(var _len8=arguments.length,args=new Array(_len8),_key8=0;_key8<_len8;_key8++)args[_key8]=arguments[_key8];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.on].concat(args)),this}},{key:"one",value:function(){for(var _len9=arguments.length,args=new Array(_len9),_key9=0;_key9<_len9;_key9++)args[_key9]=arguments[_key9];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.one].concat(args)),this}},{key:"off",value:function(){for(var _len10=arguments.length,args=new Array(_len10),_key10=0;_key10<_len10;_key10++)args[_key10]=arguments[_key10];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.off].concat(args)),this}}],[{key:"_run",value:function(ids,fn){for(var _len11=arguments.length,args=new Array(_len11>2?_len11-2:0),_key11=2;_key11<_len11;_key11++)args[_key11-2]=arguments[_key11];ids.forEach((function(id){var track=_tracks.get(id);track&&fn.apply(track,args)}))}}])}();var _runnerParseSelector=function(){var notWsRe=/\S/g,parenRe=/[()]/g;function processNegation(str,startPos){var match;if(notWsRe.lastIndex=startPos,null===(match=notWsRe.exec(str))||"("!==match[0])throw new Error('invalid ":not()" syntax: missing parenthesis');parenRe.lastIndex=notWsRe.lastIndex;for(var start=notWsRe.lastIndex,result={str:"",nextMatch:-1},depth=1;null!==(match=parenRe.exec(str));)if("("===match[0]?++depth:--depth,depth<1){result.nextMatch=parenRe.lastIndex,result.str=str.slice(start,result.nextMatch-1);break}return result}return function parseSelector(idArg){for(var match,ids=[],idRe=/:?[^\s:()]+/g;null!==(match=idRe.exec(idArg));){var id=match[0];if(":not"===id){if(0===ids.length)throw new Error('invalid negation: no group ID preceded ":not()"');var parent=ids[ids.length-1];if(!parent.id.startsWith(":"))throw new Error('invalid negation of track "'.concat(parent.id,'": only groups may be negated with ":not()"'));var negation=processNegation(idArg,idRe.lastIndex);if(-1===negation.nextMatch)throw new Error('unknown error parsing ":not()"');idRe.lastIndex=negation.nextMatch,parent.not=parseSelector(negation.str)}else ids.push({id:id})}return ids}}();function masterMute(mute){if(null==mute)return _masterMute;publish("mute",_masterMute=!!mute)}function unsubscribe(id){_subscribers.delete(id)}function publish(mesg,data){_subscribers.forEach((function(fn){return fn(mesg,data)}))}function _newTrack(sources){return new AudioTrack(sources.map((function(source){if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);if(passage.tags.includes("Twine.audio"))return passage.text.trim()}var match=_formatSpecRe.exec(source);return null===match?source:{format:match[1],src:match[2]}})))}return Object.preventExtensions(Object.create(null,{tracks:{value:Object.preventExtensions(Object.create(null,{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("track ID"),arguments.length<2&&errors.push("sources"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='track ID "'.concat(id,'"');if(_badIdRe.test(id))throw new Error("invalid ".concat(what,": track IDs must not contain colons or whitespace"));var track,sources=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{track=_newTrack(sources)}catch(ex){throw new Error("".concat(what,": error during track initialization: ").concat(ex.message))}if(Config.debug&&!track.hasSource())throw new Error("".concat(what,": no supported audio sources found"));_tracks.has(id)&&_tracks.get(id)._destroy(),_tracks.set(id,track)}},delete:{value:function(id){return _tracks.has(id)&&_tracks.get(id)._destroy(),_tracks.delete(id)}},clear:{value:function(){_tracks.forEach((function(track){return track._destroy()})),_tracks.clear()}},has:{value:function(id){return _tracks.has(id)}},get:{value:function(id){return _tracks.get(id)||null}}}))},groups:{value:Object.preventExtensions(Object.create(null,{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("group ID"),arguments.length<2&&errors.push("track IDs"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='group ID "'.concat(id,'"');if(!id.startsWith(":")||_badIdRe.test(id.slice(1)))throw new Error("invalid ".concat(what,": group IDs must start with a colon and must not contain colons or whitespace"));if(_specialIds.includes(id))throw new Error("cannot clobber special ".concat(what));var group,trackIds=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{group=new Set(trackIds.map((function(trackId){if(!_tracks.has(trackId))throw new Error('track "'.concat(trackId,'" does not exist'));return trackId})))}catch(ex){throw new Error("".concat(what,": error during group initialization: ").concat(ex.message))}_groups.set(id,Object.freeze(Array.from(group)))}},delete:{value:function(id){return _groups.delete(id)}},clear:{value:function(){_groups.clear()}},has:{value:function(id){return _groups.has(id)}},get:{value:function(id){return _groups.get(id)||null}}}))},lists:{value:Object.preventExtensions(Object.create(null,{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("list ID"),arguments.length<2&&errors.push("track IDs"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='list ID "'.concat(id,'"');if(_badIdRe.test(id))return this.error("invalid ".concat(what,": list IDs must not contain colons or whitespace"));var list,descriptors=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{list=new AudioList(descriptors.map((function(desc){if(null===desc)throw new Error("track descriptor must be a string or object (type: null)");switch(_typeof(desc)){case"string":desc={id:desc};break;case"object":if(!Object.hasOwn(desc,"id")&&!Object.hasOwn(desc,"sources"))throw new Error('track descriptor must contain one of either an "id" or a "sources" property');if(Object.hasOwn(desc,"id")&&Object.hasOwn(desc,"sources"))throw new Error('track descriptor must contain either an "id" or a "sources" property, not both');break;default:throw new Error("track descriptor must be a string or object (type: ".concat(_typeof(desc),")"))}var own,track,volume;if(Object.hasOwn(desc,"id")){if("string"!=typeof desc.id)throw new Error('"id" property must be a string');if(!_tracks.has(desc.id))throw new Error('track "'.concat(desc.id,'" does not exist'));track=_tracks.get(desc.id)}else if(Object.hasOwn(desc,"sources")){if(!Array.isArray(desc.sources)||0===desc.sources.length)throw new Error('"sources" property must be a non-empty array');if(Object.hasOwn(desc,"own"))throw new Error('"own" property is not allowed with the "sources" property');try{track=_newTrack(desc.sources),own=!0}catch(ex){throw new Error("error during track initialization: ".concat(ex.message))}if(Config.debug&&!track.hasSource())throw new Error("no supported audio sources found")}if(Object.hasOwn(desc,"own")){if("boolean"!=typeof desc.own)throw new Error('"own" property must be a boolean');(own=desc.own)&&(track=track.clone())}if(Object.hasOwn(desc,"volume")){if("number"!=typeof desc.volume||Number.isNaN(desc.volume)||!Number.isFinite(desc.volume)||desc.volume<0)throw new Error('"volume" property must be a non-negative finite number');volume=desc.volume}return{own:null!=own&&own,track:track,volume:null!=volume?volume:track.volume()}})))}catch(ex){throw new Error("".concat(what,": error during playlist initialization: ").concat(ex.message))}_lists.has(id)&&_lists.get(id)._destroy(),_lists.set(id,list)}},delete:{value:function(id){return _lists.has(id)&&_lists.get(id)._destroy(),_lists.delete(id)}},clear:{value:function(){_lists.forEach((function(list){return list._destroy()})),_lists.clear()}},has:{value:function(id){return _lists.has(id)}},get:{value:function(id){return _lists.get(id)||null}}}))},select:{value:function(){if(0===arguments.length)throw new Error("no track selector specified");var selector=String(arguments[0]).trim(),trackIds=new Set;try{var renderIds=function renderIds(idObj){var ids,id=idObj.id;switch(id){case":all":ids=allIds;break;case":looped":ids=allIds.filter((function(id){return _tracks.get(id).loop()}));break;case":muted":ids=allIds.filter((function(id){return _tracks.get(id).mute()}));break;case":paused":ids=allIds.filter((function(id){return _tracks.get(id).isPaused()}));break;case":playing":ids=allIds.filter((function(id){return _tracks.get(id).isPlaying()}));break;case":stopped":ids=allIds.filter((function(id){return _tracks.get(id).isStopped()}));break;default:if(id.startsWith(":")){var group=_groups.get(id);if(!group)throw new Error('group "'.concat(id,'" does not exist'));ids=group}else ids=[id]}if(Object.hasOwn(idObj,"not")){var negated=idObj.not.map((function(idObj){return renderIds(idObj)})).flat(1/0);ids=ids.filter((function(id){return!negated.includes(id)}))}return ids},allIds=Array.from(_tracks.keys());_runnerParseSelector(selector).forEach((function(idObj){return renderIds(idObj).forEach((function(id){if(!_tracks.has(id))throw new Error('track "'.concat(id,'" does not exist'));trackIds.add(id)}))}))}catch(ex){throw new Error("error during runner initialization: ".concat(ex.message))}return new AudioRunner(trackIds)}},load:{value:function(){publish("load")}},loadWithScreen:{value:function(){publish("loadwithscreen")}},mute:{value:masterMute},muteOnHidden:{value:function(mute){if(!Visibility.isEnabled())return!1;if(null==mute)return _masterMuteOnHidden;var namespace=".SimpleAudio_masterMuteOnHidden";if(_masterMuteOnHidden=!!mute){var visibilityChange="".concat(Visibility.changeEvent).concat(namespace);jQuery(document).off(namespace).on(visibilityChange,(function(){return masterMute(Visibility.isHidden())})),Visibility.isHidden()&&masterMute(!0)}else jQuery(document).off(namespace)}},rate:{value:function(rate){if(null==rate)return _masterRate;if("number"!=typeof rate||Number.isNaN(rate)||!Number.isFinite(rate))throw new Error("rate must be a finite number");publish("rate",_masterRate=Math.clamp(rate,.2,5))}},stop:{value:function(){publish("stop")}},unload:{value:function(){publish("unload")}},volume:{value:function(volume){if(null==volume)return _masterVolume;if("number"!=typeof volume||Number.isNaN(volume)||!Number.isFinite(volume))throw new Error("volume must be a finite number");publish("volume",_masterVolume=Math.clamp(volume,0,1))}}}))}(),State=function(){var _history=[],_active=momentCreate(),_activeIndex=-1,_expired=[],_prng=null,_temporary=Object.create(null);function stateMarshal(noDelta){var state={index:_activeIndex};return noDelta?state.history=clone(_history):state.delta=historyDeltaEncode(_history),_expired.length>0&&(state.expired=Array.from(_expired)),null!==_prng&&(state.seed=_prng.seed),state}function stateUnmarshal(state,noDelta){if(null==state)throw new Error("state object is null or undefined");if(!Object.hasOwn(state,noDelta?"history":"delta")||0===state[noDelta?"history":"delta"].length)throw new Error("state object has no history or history is empty");if(!Object.hasOwn(state,"index"))throw new Error("state object has no index");if(null!==_prng&&!Object.hasOwn(state,"seed"))throw new Error("state object has no seed, but PRNG is enabled");if(null===_prng&&Object.hasOwn(state,"seed"))throw new Error("state object has seed, but PRNG is disabled");_history=noDelta?clone(state.history):historyDeltaDecode(state.delta),_activeIndex=state.index,_expired=Object.hasOwn(state,"expired")?Array.from(state.expired):[],Object.hasOwn(state,"seed")&&(_prng.seed=state.seed),momentActivate(_activeIndex)}function momentCreate(title,variables){return{title:null==title?"":String(title),variables:null==variables?{}:clone(variables)}}function momentActivate(moment){if(null==moment)throw new Error("moment activation attempted with null or undefined");switch(_typeof(moment)){case"object":_active=clone(moment);break;case"number":if(historyIsEmpty())throw new Error("moment activation attempted with index on empty history");if(moment<0||moment>=historySize())throw new RangeError("moment activation attempted with out-of-bounds index; need [0, ".concat(historySize()-1,"], got ").concat(moment));_active=clone(_history[moment]);break;default:throw new TypeError('moment activation attempted with a "'.concat(_typeof(moment),'"; must be an object or valid history stack index'))}return null!==_prng&&(_prng=function(state){for(var prng=prngCreate(state.seed),i=state.pull;i>0;--i)prng.random();return prng}({seed:_prng.seed,pull:_active.pull})),session.set("state",stateMarshal()),triggerEvent(":historyupdate"),_active}function historyLength(){return _activeIndex+1}function historySize(){return _history.length}function historyIsEmpty(){return 0===_history.length}function historyTop(){return _history.length>0?_history[_history.length-1]:null}function historyGoTo(index){return!(null==index||index<0||index>=historySize()||index===_activeIndex)&&(momentActivate(_activeIndex=index),!0)}function historyDeltaEncode(historyArr){if(!Array.isArray(historyArr))return null;if(0===historyArr.length)return[];for(var delta=[historyArr[0]],i=1,iend=historyArr.length;i<iend;++i)delta.push(Diff.diff(historyArr[i-1],historyArr[i]));return delta}function historyDeltaDecode(delta){if(!Array.isArray(delta))return null;if(0===delta.length)return[];for(var historyArr=[clone(delta[0])],i=1,iend=delta.length;i<iend;++i)historyArr.push(Diff.patch(historyArr[i-1],delta[i]));return historyArr}function prngCreate(seedBase,mixEntropy){return new Math.seedrandom(seedBase,{entropy:Boolean(mixEntropy),pass:function(prng,seed){return Object.create(null,{prng:{value:prng},seed:{writable:!0,value:seed},pull:{writable:!0,value:0},random:{value:function(){return++this.pull,this.prng()}}})}})}function tempVariablesClear(){_temporary=Object.create(null)}var _METADATA_STORE="metadata";function metadataDelete(key){if("string"!=typeof key)throw new TypeError("State.metadata.delete key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get(_METADATA_STORE);store&&Object.hasOwn(store,key)&&(1===Object.keys(store).length?storage.delete(_METADATA_STORE):(delete store[key],storage.set(_METADATA_STORE,store)))}return Object.preventExtensions(Object.create(null,{reset:{value:function(){session.delete("state"),_history=[],_active=momentCreate(),_activeIndex=-1,_expired=[],_prng=null===_prng?null:prngCreate(_prng.seed),tempVariablesClear()}},restore:{value:function(){var state=session.get("state");return null!=state&&(stateUnmarshal(state),!0)}},marshalForSave:{value:function(){return stateMarshal(!0)}},unmarshalForSave:{value:function(state){return stateUnmarshal(state,!0)}},expired:{get:function(){return _expired}},turns:{get:function(){return _expired.length+historyLength()}},passages:{get:function(){return _expired.concat(_history.slice(0,historyLength()).map((function(moment){return moment.title})))}},hasPlayed:{value:function(title){return null!=title&&""!==title&&(!!_expired.includes(title)||!!_history.slice(0,historyLength()).some((function(moment){return moment.title===title})))}},active:{get:function(){return _active}},activeIndex:{get:function(){return _activeIndex}},passage:{get:function(){return _active.title}},variables:{get:function(){return _active.variables}},history:{get:function(){return _history}},length:{get:historyLength},size:{get:historySize},isEmpty:{value:historyIsEmpty},current:{get:function(){return _history.length>0?_history[_activeIndex]:null}},top:{get:historyTop},bottom:{get:function(){return _history.length>0?_history[0]:null}},index:{value:function(index){return historyIsEmpty()||index<0||index>_activeIndex?null:_history[index]}},peek:{value:function(offset){if(historyIsEmpty())return null;var lengthOffset=1+(offset?Math.abs(offset):0);return lengthOffset>historyLength()?null:_history[historyLength()-lengthOffset]}},has:{value:function(title){if(historyIsEmpty()||null==title||""===title)return!1;for(var i=_activeIndex;i>=0;--i)if(_history[i].title===title)return!0;return!1}},create:{value:function(title){for(0,historyLength()<historySize()&&_history.splice(historyLength(),historySize()-historyLength()),_history.push(momentCreate(title,_active.variables)),_prng&&(historyTop().pull=_prng.pull);historySize()>Config.history.maxStates;)_expired.push(_history.shift().title);return momentActivate(_activeIndex=historySize()-1),historyLength()}},goTo:{value:historyGoTo},go:{value:function(offset){return null!=offset&&0!==offset&&historyGoTo(_activeIndex+offset)}},deltaEncode:{value:historyDeltaEncode},deltaDecode:{value:historyDeltaDecode},prng:{value:Object.preventExtensions(Object.create(null,{init:{value:function(seedBase,mixEntropy){var what;if(!historyIsEmpty())throw what="the story JavaScript section",new Error("State.prng.init must be called during initialization, within either ".concat(what," or the StoryInit special passage"));_prng=prngCreate(seedBase,Boolean(mixEntropy)),_active.pull=_prng.pull}},isEnabled:{value:function(){return null!==_prng}},pull:{get:function(){return null!==_prng?_prng.pull:NaN}},seed:{get:function(){return null!==_prng?_prng.seed:null}}}))},random:{value:function(){return null!==_prng?_prng.random():Math.random()}},clearTemporary:{value:tempVariablesClear},temporary:{get:function(){return _temporary}},getVar:{value:function(varExpression){try{return Scripting.evalTwineScript(varExpression)}catch(ex){}}},setVar:{value:function(varExpression,value){try{return Scripting.evalTwineScript("".concat(varExpression," = SCRIPT$DATA$"),null,value),!0}catch(ex){}return!1}},metadata:{value:Object.preventExtensions(Object.create(null,{clear:{value:function(){storage.delete(_METADATA_STORE)}},delete:{value:metadataDelete},entries:{value:function(){var store=storage.get(_METADATA_STORE);return store&&Object.entries(store)}},get:{value:function(key){if("string"!=typeof key)throw new TypeError("State.metadata.get key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get(_METADATA_STORE);return store&&Object.hasOwn(store,key)?store[key]:undefined}},has:{value:function(key){if("string"!=typeof key)throw new TypeError("State.metadata.has key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get(_METADATA_STORE);return store&&Object.hasOwn(store,key)}},keys:{value:function(){var store=storage.get(_METADATA_STORE);return store&&Object.keys(store)}},set:{value:function(key,value){if("string"!=typeof key)throw new TypeError("State.metadata.set key parameter must be a string (received: ".concat(_typeof(key),")"));if(void 0===value)metadataDelete(key);else{var store=storage.get(_METADATA_STORE)||{};store[key]=value,storage.set(_METADATA_STORE,store)}}},size:{get:function(){var store=storage.get(_METADATA_STORE);return store?Object.keys(store).length:0}}}))}}))}(),Scripting=function(){function toStringOrDefault(value){return console.warn("[DEPRECATED] toStringOrDefault() is deprecated."),stringFrom(value)}function either(){if(0!==arguments.length)return Array.prototype.concat.apply([],arguments).random()}function forget(key){if("string"!=typeof key)throw new TypeError("forget key parameter must be a string (received: ".concat(getTypeOf(key),")"));State.metadata.delete(key)}function hasVisited(){if(0===arguments.length)throw new Error("hasVisited called with insufficient parameters");if(State.isEmpty())return!1;for(var needles=Array.prototype.concat.apply([],arguments),played=State.passages,i=0;i<needles.length;++i)if(!played.includes(needles[i]))return!1;return!0}function lastVisited(){if(0===arguments.length)throw new Error("lastVisited called with insufficient parameters");if(State.isEmpty())return-1;for(var needles=Array.prototype.concat.apply([],arguments),played=State.passages,uBound=played.length-1,turns=State.turns,i=0;i<needles.length&&turns>-1;++i){var lastIndex=played.lastIndexOf(needles[i]);turns=Math.min(turns,-1===lastIndex?-1:uBound-lastIndex)}return turns}function memorize(key,value){if("string"!=typeof key)throw new TypeError("memorize key parameter must be a string (received: ".concat(getTypeOf(key),")"));State.metadata.set(key,value)}function passage(){return State.passage}function previous(){var passages=State.passages;if(arguments.length>0){var offset=Number(arguments[0]);if(!Number.isSafeInteger(offset)||offset<1)throw new RangeError("previous offset parameter must be a positive integer greater than zero");return passages.length>offset?passages[passages.length-1-offset]:""}for(var i=passages.length-2;i>=0;--i)if(passages[i]!==State.passage)return passages[i];return""}function random(){var min,max;switch(arguments.length){case 0:throw new Error("random called with insufficient parameters");case 1:min=0,max=Math.trunc(arguments[0]);break;default:min=Math.trunc(arguments[0]),max=Math.trunc(arguments[1])}if(!Number.isInteger(min))throw new TypeError("random min parameter must be an integer");if(!Number.isInteger(max))throw new TypeError("random max parameter must be an integer");if(min>max){var _ref7=[max,min];min=_ref7[0],max=_ref7[1]}return Math.floor(State.random()*(max-min+1))+min}function randomFloat(){var min,max;switch(arguments.length){case 0:throw new Error("randomFloat called with insufficient parameters");case 1:min=0,max=Number(arguments[0]);break;default:min=Number(arguments[0]),max=Number(arguments[1])}if(Number.isNaN(min)||!Number.isFinite(min))throw new TypeError("randomFloat min parameter must be a number");if(Number.isNaN(max)||!Number.isFinite(max))throw new TypeError("randomFloat max parameter must be a number");if(min>max){var _ref8=[max,min];min=_ref8[0],max=_ref8[1]}return State.random()*(max-min)+min}function recall(key,defaultValue){if("string"!=typeof key)throw new TypeError("recall key parameter must be a string (received: ".concat(getTypeOf(key),")"));return State.metadata.has(key)?State.metadata.get(key):defaultValue}function tags(){if(0===arguments.length)return Story.get(State.passage).tags;for(var passages=Array.prototype.concat.apply([],arguments),tags=[],i=0;i<passages.length;++i)tags=tags.concat(Story.get(passages[i]).tags);return tags}function temporary(){return State.temporary}function time(){return null===Engine.lastPlay?0:now()-Engine.lastPlay}function turns(){return State.turns}function variables(){return State.variables}function visited(){if(State.isEmpty())return 0;for(var needles=Array.prototype.concat.apply([],0===arguments.length?[State.passage]:arguments),played=State.passages,count=State.turns,i=0;i<needles.length&&count>0;++i)count=Math.min(count,played.count(needles[i]));return count}function visitedTags(){if(0===arguments.length)throw new Error("visitedTags called with insufficient parameters");if(State.isEmpty())return 0;for(var needles=Array.prototype.concat.apply([],arguments),nLength=needles.length,played=State.passages,seen=new Map,count=0,i=0;i<played.length;++i){var title=played[i];if(seen.has(title))seen.get(title)&&++count;else{var _tags2=Story.get(title).tags;if(_tags2.length>0){for(var found=0,j=0;j<nLength;++j)_tags2.includes(needles[j])&&++found;found===nLength?(++count,seen.set(title,!0)):seen.set(title,!1)}}}return count}var _ref9=function(){function slugifyUrl(url){return parseURL(url).path.replace(/^[^\w]+|[^\w]+$/g,"").replace(/[^\w]+/g,"-").toLocaleLowerCase()}function addScript(url){return new Promise((function(resolve,reject){var kind,src;if("string"==typeof url)kind=url.trim().toLowerCase().endsWith(".mjs")?"module":"text/javascript",src=url;else{if("object"!==_typeof(url))throw new Error("importScripts url parameter must be a string or object");kind=url.type,src=url.src}jQuery(document.createElement("script")).one("load abort error",(function(ev){jQuery(ev.target).off(),"load"===ev.type?resolve(ev.target):reject(new Error('importScripts failed to load the script "'.concat(src,'"')))})).appendTo(document.head).attr({id:"script-imported-".concat(slugifyUrl(src)),type:kind,src:src})}))}function addStyle(url){return new Promise((function(resolve,reject){if("string"!=typeof url)throw new Error("importStyles url parameter must be a string");jQuery(document.createElement("link")).one("load abort error",(function(ev){jQuery(ev.target).off(),"load"===ev.type?resolve(ev.target):reject(new Error('importStyles failed to load the stylesheet "'.concat(url,'"')))})).appendTo(document.head).attr({id:"style-imported-".concat(slugifyUrl(url)),rel:"stylesheet",href:url})}))}function sequence(callbacks){return callbacks.reduce((function(seq,fn){return seq.then(fn)}),Promise.resolve())}return{importScripts:function(){for(var _len12=arguments.length,urls=new Array(_len12),_key12=0;_key12<_len12;_key12++)urls[_key12]=arguments[_key12];return Promise.all(urls.map((function(oneOrSeries){return Array.isArray(oneOrSeries)?sequence(oneOrSeries.map((function(url){return function(){return addScript(url)}}))):addScript(oneOrSeries)})))},importStyles:function(){for(var _len13=arguments.length,urls=new Array(_len13),_key13=0;_key13<_len13;_key13++)urls[_key13]=arguments[_key13];return Promise.all(urls.map((function(oneOrSeries){return Array.isArray(oneOrSeries)?sequence(oneOrSeries.map((function(url){return function(){return addStyle(url)}}))):addStyle(oneOrSeries)})))}}}(),importScripts=_ref9.importScripts,importStyles=_ref9.importStyles,desugar=function(){var tokenTable=enumFrom({$:"State.variables.",_:"State.temporary.",to:"=",eq:"==",neq:"!=",is:"===",isnot:"!==",gt:">",gte:">=",lt:"<",lte:"<=",and:"&&",or:"||",not:"!",def:'"undefined" !== typeof',ndef:'"undefined" === typeof'}),desugarRE=new RegExp(["(?:\"\"|''|``)",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(`(?:\\\\.|[^`\\\\])+`)","(?:[=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}]+)","(?:\\.{3})","([^\"'=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}\\s]+)"].join("|"),"g"),varTest=new RegExp("^".concat(Patterns.variable));function desugar(sugaredCode){desugarRE.lastIndex=0;for(var match,code=sugaredCode;null!==(match=desugarRE.exec(code));)if(match[1]){var sugaredTemplate=match[1],template=desugarTemplate(sugaredTemplate);template!==sugaredTemplate&&(code=code.splice(match.index,sugaredTemplate.length,template),desugarRE.lastIndex+=template.length-sugaredTemplate.length)}else if(match[2]){var token=match[2];if("$"===token||"_"===token)continue;varTest.test(token)&&(token=token[0]),tokenTable[token]&&(code=code.splice(match.index,token.length,tokenTable[token]),desugarRE.lastIndex+=tokenTable[token].length-token.length)}return code}var templateGroupStartRE=/\$\{/g,templateGroupParseRE=new RegExp(["(?:\"\"|'')",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(\\{)","(\\})"].join("|"),"g");function desugarTemplate(sugaredLiteral){templateGroupStartRE.lastIndex=0;for(var startMatch,template=sugaredLiteral;null!==(startMatch=templateGroupStartRE.exec(template));){var startIndex=startMatch.index+2,endIndex=startIndex,depth=1,endMatch=void 0;for(templateGroupParseRE.lastIndex=startIndex;null!==(endMatch=templateGroupParseRE.exec(template));)if(endMatch[1]?++depth:endMatch[2]&&--depth,0===depth){endIndex=endMatch.index;break}if(endIndex>startIndex){var desugarREIndex=desugarRE.lastIndex,sugaredGroup=template.slice(startIndex,endIndex),group=desugar(sugaredGroup);desugarRE.lastIndex=desugarREIndex,template=template.splice(startIndex,sugaredGroup.length,group),templateGroupStartRE.lastIndex+=group.length-sugaredGroup.length}}return template}return desugar}();function evalJavaScript(code,output,data){return function(code,output,SCRIPT$DATA$){return eval(code)}.call(output?{output:output}:null,String(code),output,data)}function evalTwineScript(code,output,data){return function(code,output,SCRIPT$DATA$){return eval(code)}.call(output?{output:output}:null,desugar(String(code)),output,data)}return Object.preventExtensions(Object.create(null,{desugar:{value:desugar},evalJavaScript:{value:evalJavaScript},evalTwineScript:{value:evalTwineScript},parse:{value:desugar}}))}(),_ref10=function(){var Lexer=function(){return _createClass((function Lexer(source,initialState){if(_classCallCheck(this,Lexer),arguments.length<2)throw new Error("Lexer constructor called with too few parameters (source:string , initialState:function)");Object.defineProperties(this,{source:{value:source},initial:{value:initialState},state:{writable:!0,value:initialState},start:{writable:!0,value:0},pos:{writable:!0,value:0},depth:{writable:!0,value:0},items:{writable:!0,value:[]},data:{writable:!0,value:{}}})}),[{key:"reset",value:function(){this.state=this.initial,this.start=0,this.pos=0,this.depth=0,this.items=[],this.data={}}},{key:"run",value:function(){for(;null!==this.state;)this.state=this.state(this);return this.items}},{key:"nextItem",value:function(){for(;0===this.items.length&&null!==this.state;)this.state=this.state(this);return this.items.shift()}},{key:"next",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos++]}},{key:"peek",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos]}},{key:"backup",value:function(num){this.pos-=num||1}},{key:"forward",value:function(num){this.pos+=num||1}},{key:"ignore",value:function(){this.start=this.pos}},{key:"accept",value:function(valid){var ch=this.next();return-1!==ch&&(!!valid.includes(ch)||(this.backup(),!1))}},{key:"acceptRe",value:function(validRe){var ch=this.next();return-1!==ch&&(!!validRe.test(ch)||(this.backup(),!1))}},{key:"acceptRun",value:function(valid){for(;;){var ch=this.next();if(-1===ch)return;if(!valid.includes(ch))break}this.backup()}},{key:"acceptRunRe",value:function(validRe){for(;;){var ch=this.next();if(-1===ch)return;if(!validRe.test(ch))break}this.backup()}},{key:"emit",value:function(type){this.items.push({type:type,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),this.start=this.pos}},{key:"error",value:function(type,message){if(arguments.length<2)throw new Error("Lexer.prototype.error called with too few parameters (type:number , message:string)");return this.items.push({type:type,message:message,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),null}}],[{key:"enumFromNames",value:function(names){var obj=names.reduce((function(obj,name,i){return obj[name]=i,obj}),{});return Object.freeze(Object.assign(Object.create(null),obj))}}])}();return{EOF:-1,Lexer:Lexer}}(),EOF=_ref10.EOF,Lexer=_ref10.Lexer,Wikifier=function(){var _optionsStack,macroParser,lookaheadRe,idOrClassRe,_callDepth=0,Wikifier=function(){function Wikifier(destination,source,options){_classCallCheck(this,Wikifier),Wikifier.Parser.Profile.isEmpty()&&Wikifier.Parser.Profile.compile(),Object.defineProperties(this,{source:{value:String(source)},options:{writable:!0,value:Object.assign({profile:"all"},options)},nextMatch:{writable:!0,value:0},output:{writable:!0,value:null},_rawArgs:{writable:!0,value:""}}),this.output=null==destination?document.createDocumentFragment():destination instanceof jQuery?destination[0]:destination;try{++_callDepth,this.subWikify(this.output),1===_callDepth&&(Object.hasOwn(this.options,"cleanup")&&null!=this.options.cleanup?this.options.cleanup:Config.cleanupWikifierOutput)&&convertBreaks(this.output)}finally{--_callDepth}}return _createClass(Wikifier,[{key:"subWikify",value:function(output,terminator,options){var newOptions,oldOptions,oldOutput=this.output;this.output=output,Wikifier.Option.length>0&&(newOptions=Object.assign(newOptions||{},Wikifier.Option.options)),null!==options&&"object"===_typeof(options)&&(newOptions=Object.assign(newOptions||{},options)),newOptions&&(oldOptions=this.options,this.options=Object.assign({},this.options,newOptions));var terminatorMatch,parserMatch,parsersProfile=Wikifier.Parser.Profile.get(this.options.profile),terminatorRegExp=terminator?new RegExp("(?:".concat(terminator,")"),this.options.ignoreTerminatorCase?"gim":"gm"):null;do{if(parsersProfile.parserRegExp.lastIndex=this.nextMatch,terminatorRegExp&&(terminatorRegExp.lastIndex=this.nextMatch),parserMatch=parsersProfile.parserRegExp.exec(this.source),(terminatorMatch=terminatorRegExp?terminatorRegExp.exec(this.source):null)&&(!parserMatch||terminatorMatch.index<=parserMatch.index))return terminatorMatch.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,terminatorMatch.index),this.matchStart=terminatorMatch.index,this.matchLength=terminatorMatch[0].length,this.matchText=terminatorMatch[0],this.nextMatch=terminatorRegExp.lastIndex,this.output=oldOutput,void(oldOptions&&(this.options=oldOptions));if(parserMatch){parserMatch.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,parserMatch.index),this.matchStart=parserMatch.index,this.matchLength=parserMatch[0].length,this.matchText=parserMatch[0],this.nextMatch=parsersProfile.parserRegExp.lastIndex;for(var matchingParser=void 0,i=1,iend=parserMatch.length;i<iend;++i)if(parserMatch[i]){matchingParser=i-1;break}if(parsersProfile.parsers[matchingParser].handler(this),null!=TempState.break)break}}while(terminatorMatch||parserMatch);null==TempState.break?this.nextMatch<this.source.length&&(this.outputText(this.output,this.nextMatch,this.source.length),this.nextMatch=this.source.length):this.output.lastChild&&this.output.lastChild.nodeType===Node.ELEMENT_NODE&&"BR"===this.output.lastChild.nodeName.toUpperCase()&&jQuery(this.output.lastChild).remove(),this.output=oldOutput,oldOptions&&(this.options=oldOptions)}},{key:"outputText",value:function(destination,startPos,endPos){jQuery(destination).append(document.createTextNode(this.source.substring(startPos,endPos)))}},{key:"rawArgs",value:function(){return console.warn("[DEPRECATED] Wikifier.rawArgs() is deprecated."),this._rawArgs}},{key:"fullArgs",value:function(){return console.warn("[DEPRECATED] Wikifier.fullArgs() is deprecated."),Scripting.desugar(this._rawArgs)}}],[{key:"wikifyEval",value:function(text){var output=document.createDocumentFragment();new Wikifier(output,text);var errors=output.querySelector(".error");if(null!==errors)throw new Error(errors.textContent.replace(errorPrologRegExp,""));return output}},{key:"createInternalLink",value:function(destination,passage,text,callback){var $link=jQuery(document.createElement("a"));return null!=passage&&($link.attr("data-passage",passage),Story.has(passage)?($link.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&$link.addClass("link-visited")):$link.addClass("link-broken"),$link.ariaClick({one:!0},(function(){"function"==typeof callback&&callback(),Engine.play(passage)}))),text&&$link.append(document.createTextNode(text)),destination&&$link.appendTo(destination),$link[0]}},{key:"createExternalLink",value:function(destination,url,text){var $link=jQuery(document.createElement("a")).attr("target","_blank").addClass("link-external").text(text).appendTo(destination);return null!=url&&$link.attr({href:url,tabindex:0}),$link[0]}}])}();return Object.defineProperty(Wikifier,"Option",{value:(_optionsStack=[],Object.preventExtensions(Object.create(null,{length:{get:function(){return _optionsStack.length}},options:{get:function(){return Object.assign.apply(Object,[{}].concat(_toConsumableArray(_optionsStack)))}},clear:{value:function(){_optionsStack=[]}},get:{value:function(index){return _optionsStack[index]}},pop:{value:function(){return _optionsStack.pop()}},push:{value:function(options){if("object"!==_typeof(options)||null===options)throw new TypeError("Wikifier.Option.push options parameter must be an object (received: ".concat(getTypeOf(options),")"));return _optionsStack.push(options)}}})))}),Object.defineProperty(Wikifier,"Parser",{value:function(){var _profiles,_parsers=[];function parsersHas(name){return!!_parsers.find((function(parser){return parser.name===name}))}return Object.preventExtensions(Object.create(null,{parsers:{get:function(){return _parsers}},add:{value:function(parser){if("object"!==_typeof(parser))throw new Error("Wikifier.Parser.add parser parameter must be an object");if(!Object.hasOwn(parser,"name"))throw new Error('parser object missing required "name" property');if("string"!=typeof parser.name)throw new Error('parser object "name" property must be a string');if(!Object.hasOwn(parser,"match"))throw new Error('parser object missing required "match" property');if("string"!=typeof parser.match)throw new Error('parser object "match" property must be a string');if(!Object.hasOwn(parser,"handler"))throw new Error('parser object missing required "handler" property');if("function"!=typeof parser.handler)throw new Error('parser object "handler" property must be a function');if(Object.hasOwn(parser,"profiles")&&!Array.isArray(parser.profiles))throw new Error('parser object "profiles" property must be an array');if(parsersHas(parser.name))throw new Error('cannot clobber existing parser "'.concat(parser.name,'"'));_parsers.push(parser)}},delete:{value:function(name){var parser=_parsers.find((function(parser){return parser.name===name}));parser&&_parsers.delete(parser)}},isEmpty:{value:function(){return 0===_parsers.length}},has:{value:parsersHas},get:{value:function(name){return _parsers.find((function(parser){return parser.name===name}))||null}},Profile:{value:Object.preventExtensions(Object.create(null,{profiles:{get:function(){return _profiles}},compile:{value:function(){var all=_parsers,core=all.filter((function(parser){return!Array.isArray(parser.profiles)||parser.profiles.includes("core")}));return _profiles=Object.freeze({all:{parsers:all,parserRegExp:new RegExp(all.map((function(parser){return"(".concat(parser.match,")")})).join("|"),"gm")},core:{parsers:core,parserRegExp:new RegExp(core.map((function(parser){return"(".concat(parser.match,")")})).join("|"),"gm")}})}},isEmpty:{value:function(){return"object"!==_typeof(_profiles)||0===Object.keys(_profiles).length}},has:{value:function(profile){return"object"===_typeof(_profiles)&&Object.hasOwn(_profiles,profile)}},get:{value:function(profile){if("object"!==_typeof(_profiles)||!Object.hasOwn(_profiles,profile))throw new Error('nonexistent parser profile "'.concat(profile,'"'));return _profiles[profile]}}}))}}))}()}),Object.defineProperties(Wikifier,{helpers:{value:{}},isExternalLink:{value:isExternalLink},getValue:{value:State.getVar},setValue:{value:State.setVar},parse:{value:Scripting.desugar},evalExpression:{value:Scripting.evalTwineScript},evalStatements:{value:Scripting.evalTwineScript},textPrimitives:{value:Patterns}}),Object.defineProperties(Wikifier.helpers,{inlineCss:{value:(lookaheadRe=new RegExp(Patterns.inlineCss,"gm"),idOrClassRe=new RegExp("(".concat(Patterns.cssIdOrClassSigil,")(").concat(Patterns.anyLetter,"+)"),"g"),function(w){var matched,css={classes:[],id:"",styles:{}};do{lookaheadRe.lastIndex=w.nextMatch;var match=lookaheadRe.exec(w.source);if(matched=match&&match.index===w.nextMatch){if(match[1])css.styles[cssPropToDOMProp(match[1])]=match[2].trim();else if(match[3])css.styles[cssPropToDOMProp(match[3])]=match[4].trim();else if(match[5]){var subMatch=void 0;for(idOrClassRe.lastIndex=0;null!==(subMatch=idOrClassRe.exec(match[5]));)"."===subMatch[1]?css.classes.push(subMatch[2]):css.id=subMatch[2]}w.nextMatch=lookaheadRe.lastIndex}}while(matched);return css})},evalText:{value:function(text){var result;try{switch(_typeof(result=Scripting.evalTwineScript(text))){case"string":""===result.trim()&&(result=text);break;case"number":result=String(result);break;default:result=text}}catch(ex){result=text}return result}},evalPassageId:{value:function(passage){return null==passage||Story.has(passage)?passage:Wikifier.helpers.evalText(passage)}},hasBlockContext:{value:function(nodes){for(var hasGCS="function"==typeof window.getComputedStyle,i=nodes.length-1;i>=0;--i){var node=nodes[i];switch(node.nodeType){case Node.ELEMENT_NODE:var tagName=node.nodeName.toUpperCase();if("BR"===tagName)return!0;var styles=hasGCS?window.getComputedStyle(node,null):node.currentStyle;if(styles&&styles.display){if("none"===styles.display)continue;return"block"===styles.display}switch(tagName){case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":return!0}return!1;case Node.COMMENT_NODE:continue;default:return!1}}return!0}},shadowHandler:{value:(macroParser=null,function(code){var shadowStore=Object.create(null);return macroParser||function(){if(!macroParser&&!(macroParser=Wikifier.Parser.get("macro")))throw new Error('cannot find "macro" parser')}(),macroParser.context&&macroParser.context.shadowView.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey]})),function(){var shadowNames=Object.keys(shadowStore),valueCache=shadowNames.length>0?{}:null;try{return shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;Object.hasOwn(store,varKey)&&(valueCache[varKey]=store[varKey]),store[varKey]=shadowStore[varName]})),Scripting.evalJavaScript(code)}finally{shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey],Object.hasOwn(valueCache,varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}})},parseSquareBracketedMarkup:{value:function(){var Item=Lexer.enumFromNames(["Error","DelimLTR","DelimRTL","InnerMeta","ImageMeta","LinkMeta","Link","RightMeta","Setter","Source","Text"]),Delim=Lexer.enumFromNames(["None","LTR","RTL"]);function slurpQuote(lexer,endQuote){loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return EOF;case endQuote:break loop}return lexer.pos}function lexLeftMeta(lexer){if(!lexer.accept("["))return lexer.error(Item.Error,"malformed square-bracketed markup");if(lexer.accept("["))lexer.data.isLink=!0,lexer.emit(Item.LinkMeta);else{if(lexer.accept("<>"),!(lexer.accept("Ii")&&lexer.accept("Mm")&&lexer.accept("Gg")&&lexer.accept("[")))return lexer.error(Item.Error,"malformed square-bracketed markup");lexer.data.isLink=!1,lexer.emit(Item.ImageMeta)}return lexer.depth=2,lexCoreComponents}function lexCoreComponents(lexer){for(var what=lexer.data.isLink?"link":"image",delim=Delim.None;;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup"));break;case"|":delim===Delim.None&&(delim=Delim.LTR,lexer.backup(),lexer.emit(Item.Text),lexer.forward(),lexer.emit(Item.DelimLTR));break;case"-":delim===Delim.None&&">"===lexer.peek()&&(delim=Delim.LTR,lexer.backup(),lexer.emit(Item.Text),lexer.forward(2),lexer.emit(Item.DelimLTR));break;case"<":delim===Delim.None&&"-"===lexer.peek()&&(delim=Delim.RTL,lexer.backup(),lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.DelimRTL));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)switch(lexer.peek()){case"[":return++lexer.depth,lexer.backup(),delim===Delim.RTL?lexer.emit(Item.Text):lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.InnerMeta),lexer.data.isLink?lexSetter:lexImageLink;case"]":return--lexer.depth,lexer.backup(),delim===Delim.RTL?lexer.emit(Item.Text):lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.RightMeta),null;default:return lexer.error(Item.Error,"malformed ".concat(what," markup"))}}}function lexImageLink(lexer){for(var what=lexer.data.isLink?"link":"image";;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup link component"));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)switch(lexer.peek()){case"[":return++lexer.depth,lexer.backup(),lexer.emit(Item.Link),lexer.forward(2),lexer.emit(Item.InnerMeta),lexSetter;case"]":return--lexer.depth,lexer.backup(),lexer.emit(Item.Link),lexer.forward(2),lexer.emit(Item.RightMeta),null;default:return lexer.error(Item.Error,"malformed ".concat(what," markup"))}}}function lexSetter(lexer){for(var what=lexer.data.isLink?"link":"image";;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup setter component"));break;case"'":if(slurpQuote(lexer,"'")===EOF)return lexer.error(Item.Error,"unterminated single quoted string in ".concat(what," markup setter component"));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)return"]"!==lexer.peek()?lexer.error(Item.Error,"malformed ".concat(what," markup")):(--lexer.depth,lexer.backup(),lexer.emit(Item.Setter),lexer.forward(2),lexer.emit(Item.RightMeta),null)}}return function(w){var lexer=new Lexer(w.source,lexLeftMeta);lexer.start=lexer.pos=w.matchStart;var markup={},items=lexer.run(),last=items.last();return last&&last.type===Item.Error?markup.error=last.message:items.forEach((function(item){var text=item.text.trim();switch(item.type){case Item.ImageMeta:markup.isImage=!0,"<"===text[1]?markup.align="left":">"===text[1]&&(markup.align="right");break;case Item.LinkMeta:markup.isLink=!0;break;case Item.Link:"~"===text[0]?(markup.forceInternal=!0,markup.link=text.slice(1)):markup.link=text;break;case Item.Setter:markup.setter=text;break;case Item.Source:markup.source=text;break;case Item.Text:markup.text=text}})),markup.pos=lexer.pos,markup}}()}}),Wikifier}();!function(){function _verbatimTagHandler(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex,jQuery(document.createDocumentFragment()).append(match[1]).appendTo(w.output))}Wikifier.Parser.add({name:"quoteByBlock",profiles:["block"],match:"^<<<\\n",terminator:"^<<<\\n",handler:function(w){Wikifier.helpers.hasBlockContext(w.output.childNodes)?w.subWikify(jQuery(document.createElement("blockquote")).appendTo(w.output).get(0),this.terminator):jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"quoteByLine",profiles:["block"],match:"^>+",lookahead:/^>+/gm,terminator:"\\n",handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){var matched,i,destStack=[w.output],curLevel=0,newLevel=w.matchLength;do{if(newLevel>curLevel)for(i=curLevel;i<newLevel;++i)destStack.push(jQuery(document.createElement("blockquote")).appendTo(destStack[destStack.length-1]).get(0));else if(newLevel<curLevel)for(i=curLevel;i>newLevel;--i)destStack.pop();curLevel=newLevel,w.subWikify(destStack[destStack.length-1],this.terminator),jQuery(document.createElement("br")).appendTo(destStack[destStack.length-1]),this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);(matched=match&&match.index===w.nextMatch)&&(newLevel=match[0].length,w.nextMatch+=match[0].length)}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"macro",profiles:["core"],match:"<<",lookahead:new RegExp("<<(/?".concat(Patterns.macroName,")(?:\\s*)((?:(?:/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/)|(?://.*\\n)|(?:`(?:\\\\.|[^`\\\\])*`)|(?:\"(?:\\\\.|[^\"\\\\])*\")|(?:'(?:\\\\.|[^'\\\\])*')|(?:\\[(?:[<>]?[Ii][Mm][Gg])?\\[[^\\r\\n]*?\\]\\]+)|[^>]|(?:>(?!>)))*)>>"),"gm"),working:{source:"",name:"",arguments:"",index:0},context:null,handler:function(w){var matchStart=this.lookahead.lastIndex=w.matchStart;if(this.parseTag(w)){var macro,nextMatch=w.nextMatch,name=this.working.name,rawArgs=this.working.arguments;try{if(!(macro=Macro.get(name))){if(Macro.tags.has(name)){var tags=Macro.tags.get(name);return appendError(w.output,"child tag <<".concat(name,">> was found outside of a call to its parent macro").concat(1===tags.length?"":"s"," <<").concat(tags.join(">>, <<"),">>"),w.source.slice(matchStart,w.nextMatch))}return appendError(w.output,"macro <<".concat(name,">> does not exist"),w.source.slice(matchStart,w.nextMatch))}var payload=null;if(void 0!==macro.tags&&!(payload=this.parseBody(w,macro)))return w.nextMatch=nextMatch,appendError(w.output,"cannot find a closing tag for macro <<".concat(name,">>"),"".concat(w.source.slice(matchStart,w.nextMatch),"…"));if("function"!=typeof macro.handler)return appendError(w.output,"macro <<".concat(name,">> handler function ").concat(void 0===macro.handler?"does not exist":"is not a function"),w.source.slice(matchStart,w.nextMatch));var args=payload?payload[0].args:this.createArgs(rawArgs,this.skipArgs(macro,macro.name));if(void 0!==macro._MACRO_API){this.context=new MacroContext({macro:macro,name:name,args:args,payload:payload,source:w.source.slice(matchStart,w.nextMatch),parent:this.context,parser:w});try{macro.handler.call(this.context)}finally{this.context=this.context.parent}}else{console.warn("[DEPRECATED] The legacy macro API, used by <<".concat(name,">>, is deprecated."));var prevRawArgs=w._rawArgs;w._rawArgs=rawArgs;try{macro.handler(w.output,name,args,w,payload)}finally{w._rawArgs=prevRawArgs}}}catch(ex){return appendError(w.output,"cannot execute ".concat(macro&&macro.isWidget?"widget":"macro"," <<").concat(name,">>: ").concat(ex.message),w.source.slice(matchStart,w.nextMatch))}finally{this.working.source="",this.working.name="",this.working.arguments="",this.working.index=0}}else w.outputText(w.output,w.matchStart,w.nextMatch)},parseTag:function(w){var match=this.lookahead.exec(w.source);return!(!match||match.index!==w.matchStart||!match[1])&&(w.nextMatch=this.lookahead.lastIndex,this.working.source=w.source.slice(match.index,this.lookahead.lastIndex),this.working.name=match[1],this.working.arguments=match[2],this.working.index=match.index,!0)},parseBody:function(w,macro){for(var openTag=this.working.name,closeTag="/".concat(openTag),closeAlt="end".concat(openTag),bodyTags=!!Array.isArray(macro.tags)&&macro.tags,payload=[],end=-1,opened=1,curSource=this.working.source,curTag=this.working.name,curArgument=this.working.arguments,contentStart=w.nextMatch;-1!==(w.matchStart=w.source.indexOf(this.match,w.nextMatch));)if(this.parseTag(w)){var tagSource=this.working.source,tagName=this.working.name,tagArgs=this.working.arguments,tagBegin=this.working.index,tagEnd=w.nextMatch,hasArgs=""!==tagArgs.trim();switch(tagName){case openTag:++opened;break;case closeAlt:case closeTag:if(hasArgs)throw w.nextMatch=tagBegin+2+tagName.length,new Error('malformed closing tag: "'.concat(tagSource,'"'));--opened;break;default:if(hasArgs&&(tagName.startsWith("/")||tagName.startsWith("end"))){this.lookahead.lastIndex=w.nextMatch=tagBegin+2+tagName.length;continue}if(1===opened&&bodyTags)for(var i=0,iend=bodyTags.length;i<iend;++i)tagName===bodyTags[i]&&(payload.push({source:curSource,name:curTag,arguments:curArgument,args:this.createArgs(curArgument,this.skipArgs(macro,curTag)),contents:w.source.slice(contentStart,tagBegin)}),curSource=tagSource,curTag=tagName,curArgument=tagArgs,contentStart=tagEnd)}if(0===opened){payload.push({source:curSource,name:curTag,arguments:curArgument,args:this.createArgs(curArgument,this.skipArgs(macro,curTag)),contents:w.source.slice(contentStart,tagBegin)}),end=tagEnd;break}}else this.lookahead.lastIndex=w.nextMatch=w.matchStart+this.match.length;return-1!==end?(w.nextMatch=end,payload):null},createArgs:function(rawArgsString,skipArgs){var args=skipArgs?[]:this.parseArgs(rawArgsString);return Object.defineProperties(args,{raw:{value:rawArgsString},full:{value:Scripting.desugar(rawArgsString)}}),args},skipArgs:function(macro,tagName){if(void 0!==macro.skipArgs){var sa=macro.skipArgs;return"boolean"==typeof sa&&sa||Array.isArray(sa)&&sa.includes(tagName)}return void 0!==macro.skipArg0&&(macro.skipArg0&&macro.name===tagName)},parseArgs:function(){var Item=Lexer.enumFromNames(["Error","Bareword","Expression","String","SquareBracket"]),spaceRe=new RegExp(Patterns.space),notSpaceRe=new RegExp(Patterns.notSpace),varTest=new RegExp("^".concat(Patterns.variable));function slurpQuote(lexer,endQuote){loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return EOF;case endQuote:break loop}return lexer.pos}function lexSpace(lexer){var offset=lexer.source.slice(lexer.pos).search(notSpaceRe);if(offset===EOF)return null;switch(0!==offset&&(lexer.pos+=offset,lexer.ignore()),lexer.next()){case"`":return lexExpression;case'"':return lexDoubleQuote;case"'":return lexSingleQuote;case"[":return lexSquareBracket;default:return lexBareword}}function lexExpression(lexer){return slurpQuote(lexer,"`")===EOF?lexer.error(Item.Error,"unterminated backquote expression"):(lexer.emit(Item.Expression),lexSpace)}function lexDoubleQuote(lexer){return slurpQuote(lexer,'"')===EOF?lexer.error(Item.Error,"unterminated double quoted string"):(lexer.emit(Item.String),lexSpace)}function lexSingleQuote(lexer){return slurpQuote(lexer,"'")===EOF?lexer.error(Item.Error,"unterminated single quoted string"):(lexer.emit(Item.String),lexSpace)}function lexSquareBracket(lexer){var what;if(lexer.accept("<>IiMmGg")?(what="image",lexer.acceptRun("<>IiMmGg")):what="link",!lexer.accept("["))return lexer.error(Item.Error,"malformed ".concat(what," markup"));lexer.depth=2;loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case"[":++lexer.depth;break;case"]":if(--lexer.depth,lexer.depth<0)return lexer.error(Item.Error,"unexpected right square bracket ']'");if(1===lexer.depth){if("]"===lexer.next()){--lexer.depth;break loop}lexer.backup()}}return lexer.emit(Item.SquareBracket),lexSpace}function lexBareword(lexer){var offset=lexer.source.slice(lexer.pos).search(spaceRe);return lexer.pos=offset===EOF?lexer.source.length:lexer.pos+offset,lexer.emit(Item.Bareword),offset===EOF?null:lexSpace}return function(rawArgsString){var lexer=new Lexer(rawArgsString,lexSpace),args=[];return lexer.run().forEach((function(item){var arg=item.text;switch(item.type){case Item.Error:throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(item.message));case Item.Bareword:if(varTest.test(arg))arg=State.getVar(arg);else if(/^(?:settings|setup)[.[]/.test(arg))try{arg=Scripting.evalTwineScript(arg)}catch(ex){throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(ex.message))}else if("null"===arg)arg=null;else if("undefined"===arg)arg=undefined;else if("true"===arg)arg=!0;else if("false"===arg)arg=!1;else if("NaN"===arg)arg=NaN;else{var argAsNum=Number(arg);Number.isNaN(argAsNum)||(arg=argAsNum)}break;case Item.Expression:if(""===(arg=arg.slice(1,-1).trim()))arg=undefined;else try{arg=Scripting.evalTwineScript("(".concat(arg,")"))}catch(ex){throw new Error('unable to parse macro argument expression "'.concat(arg,'": ').concat(ex.message))}break;case Item.String:try{arg=Scripting.evalJavaScript(arg)}catch(ex){throw new Error('unable to parse macro argument string "'.concat(arg,'": ').concat(ex.message))}break;case Item.SquareBracket:var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:arg,matchStart:0});if(Object.hasOwn(markup,"error"))throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(markup.error));if(markup.pos<arg.length)throw new Error('unable to parse macro argument "'.concat(arg,'": unexpected character(s) "').concat(arg.slice(markup.pos),'" (pos: ').concat(markup.pos,")"));markup.isLink?((arg={isLink:!0}).count=Object.hasOwn(markup,"text")?2:1,arg.link=Wikifier.helpers.evalPassageId(markup.link),arg.text=Object.hasOwn(markup,"text")?Wikifier.helpers.evalText(markup.text):arg.link,arg.external=!markup.forceInternal&&Wikifier.isExternalLink(arg.link),arg.setFn=Object.hasOwn(markup,"setter")?Wikifier.helpers.shadowHandler(Scripting.desugar(markup.setter)):null):markup.isImage&&(arg=function(source){var imgObj={source:source,isImage:!0};if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(imgObj.source=passage.text,imgObj.passage=passage.name)}return imgObj}(Wikifier.helpers.evalPassageId(markup.source)),Object.hasOwn(markup,"align")&&(arg.align=markup.align),Object.hasOwn(markup,"text")&&(arg.title=Wikifier.helpers.evalText(markup.text)),Object.hasOwn(markup,"link")&&(arg.link=Wikifier.helpers.evalPassageId(markup.link),arg.external=!markup.forceInternal&&Wikifier.isExternalLink(arg.link)),arg.setFn=Object.hasOwn(markup,"setter")?Wikifier.helpers.shadowHandler(Scripting.desugar(markup.setter)):null)}args.push(arg)})),args}}()}),Wikifier.Parser.add({name:"link",profiles:["core"],match:"\\[\\[[^[]",handler:function(w){var markup=Wikifier.helpers.parseSquareBracketedMarkup(w);if(Object.hasOwn(markup,"error"))w.outputText(w.output,w.matchStart,w.nextMatch);else{w.nextMatch=markup.pos;var link=Wikifier.helpers.evalPassageId(markup.link),text=Object.hasOwn(markup,"text")?Wikifier.helpers.evalText(markup.text):link,setFn=Object.hasOwn(markup,"setter")?Wikifier.helpers.shadowHandler(Scripting.desugar(markup.setter)):null,output=(Config.debug?new DebugView(w.output,"link-markup","[[link]]",w.source.slice(w.matchStart,w.nextMatch)):w).output;markup.forceInternal||!Wikifier.isExternalLink(link)?Wikifier.createInternalLink(output,link,text,setFn):Wikifier.createExternalLink(output,link,text)}}}),Wikifier.Parser.add({name:"urlLink",profiles:["core"],match:Patterns.url,handler:function(w){w.outputText(Wikifier.createExternalLink(w.output,w.matchText),w.matchStart,w.nextMatch)}}),Wikifier.Parser.add({name:"image",profiles:["core"],match:"\\[[<>]?[Ii][Mm][Gg]\\[",handler:function(w){var markup=Wikifier.helpers.parseSquareBracketedMarkup(w);if(Object.hasOwn(markup,"error"))w.outputText(w.output,w.matchStart,w.nextMatch);else{var debugView;w.nextMatch=markup.pos,Config.debug&&(debugView=new DebugView(w.output,"image-markup",Object.hasOwn(markup,"link")?"[img[][link]]":"[img[]]",w.source.slice(w.matchStart,w.nextMatch))).modes({block:!0});var source,setFn=Object.hasOwn(markup,"setter")?Wikifier.helpers.shadowHandler(Scripting.desugar(markup.setter)):null,el=(Config.debug?debugView:w).output;if(Object.hasOwn(markup,"link")){var link=Wikifier.helpers.evalPassageId(markup.link);(el=markup.forceInternal||!Wikifier.isExternalLink(link)?Wikifier.createInternalLink(el,link,null,setFn):Wikifier.createExternalLink(el,link)).classList.add("link-image")}if(el=jQuery(document.createElement("img")).appendTo(el).get(0),"data:"!==(source=Wikifier.helpers.evalPassageId(markup.source)).slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(el.setAttribute("data-passage",passage.name),source=passage.text.trim())}el.src=source,Object.hasOwn(markup,"text")&&(el.title=Wikifier.helpers.evalText(markup.text)),Object.hasOwn(markup,"align")&&(el.align=markup.align)}}}),Wikifier.Parser.add({name:"monospacedByBlock",profiles:["block"],match:"^\\{\\{\\{\\n",lookahead:/^\{\{\{\n((?:^[^\n]*\n)+?)(^\}\}\}$\n?)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);if(match&&match.index===w.matchStart){var pre=jQuery(document.createElement("pre"));jQuery(document.createElement("code")).text(match[1]).appendTo(pre),pre.appendTo(w.output),w.nextMatch=this.lookahead.lastIndex}}}),Wikifier.Parser.add({name:"formatByChar",profiles:["core"],match:"''|//|__|\\^\\^|~~|==|\\{\\{\\{",handler:function(w){switch(w.matchText){case"''":w.subWikify(jQuery(document.createElement("strong")).appendTo(w.output).get(0),"''");break;case"//":w.subWikify(jQuery(document.createElement("em")).appendTo(w.output).get(0),"//");break;case"__":w.subWikify(jQuery(document.createElement("u")).appendTo(w.output).get(0),"__");break;case"^^":w.subWikify(jQuery(document.createElement("sup")).appendTo(w.output).get(0),"\\^\\^");break;case"~~":w.subWikify(jQuery(document.createElement("sub")).appendTo(w.output).get(0),"~~");break;case"==":w.subWikify(jQuery(document.createElement("s")).appendTo(w.output).get(0),"==");break;case"{{{":var lookahead=/\{\{\{((?:.|\n)*?)\}\}\}/gm;lookahead.lastIndex=w.matchStart;var match=lookahead.exec(w.source);match&&match.index===w.matchStart&&(jQuery(document.createElement("code")).text(match[1]).appendTo(w.output),w.nextMatch=lookahead.lastIndex)}}}),Wikifier.Parser.add({name:"customStyle",profiles:["core"],match:"@@",terminator:"@@",blockRe:/\s*\n/gm,handler:function(w){var css=Wikifier.helpers.inlineCss(w);this.blockRe.lastIndex=w.nextMatch;var blockMatch=this.blockRe.exec(w.source),blockLevel=blockMatch&&blockMatch.index===w.nextMatch,$el=jQuery(document.createElement(blockLevel?"div":"span")).appendTo(w.output);0===css.classes.length&&""===css.id&&0===Object.keys(css.styles).length?$el.addClass("marked"):(css.classes.forEach((function(className){return $el.addClass(className)})),""!==css.id&&$el.attr("id",css.id),$el.css(css.styles)),blockLevel?(w.nextMatch+=blockMatch[0].length,w.subWikify($el[0],"\\n?".concat(this.terminator))):w.subWikify($el[0],this.terminator)}}),Wikifier.Parser.add({name:"verbatimText",profiles:["core"],match:'"{3}|<[Nn][Oo][Ww][Ii][Kk][Ii]>',lookahead:/(?:"{3}((?:.|\n)*?)"{3})|(?:<[Nn][Oo][Ww][Ii][Kk][Ii]>((?:.|\n)*?)<\/[Nn][Oo][Ww][Ii][Kk][Ii]>)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex,jQuery(document.createElement("span")).addClass("verbatim").text(match[1]||match[2]).appendTo(w.output))}}),Wikifier.Parser.add({name:"horizontalRule",profiles:["core"],match:"^----+\\s*$",handler:function(w){jQuery(document.createElement("hr")).appendTo(w.output)}}),Wikifier.Parser.add({name:"emdash",profiles:["core"],match:"--",handler:function(w){jQuery(document.createTextNode("—")).appendTo(w.output)}}),Wikifier.Parser.add({name:"doubleDollarSign",profiles:["core"],match:"\\${2}",handler:function(w){jQuery(document.createTextNode("$")).appendTo(w.output)}}),Wikifier.Parser.add({name:"nakedVariable",profiles:["core"],match:"".concat(Patterns.variable,"(?:(?:\\.").concat(Patterns.identifier,")|(?:\\[\\d+\\])|(?:\\[\"(?:\\\\.|[^\"\\\\])+\"\\])|(?:\\['(?:\\\\.|[^'\\\\])+'\\])|(?:\\[").concat(Patterns.variable,"\\]))*"),handler:function(w){var result=State.getVar(w.matchText);null==result?jQuery(document.createTextNode(w.matchText)).appendTo(w.output):new Wikifier((Config.debug?new DebugView(w.output,"variable",w.matchText,w.matchText):w).output,stringFrom(result))}}),Wikifier.Parser.add({name:"template",profiles:["core"],match:"\\?".concat(Patterns.templateName),handler:function(w){var name=w.matchText.slice(1),template=Template.get(name),result=null;switch(template instanceof Array&&(template=template.random()),_typeof(template)){case"function":try{result=stringFrom(template.call({name:name}))}catch(ex){return appendError(w.output,"cannot execute function template ?".concat(name,": ").concat(ex.message),w.source.slice(w.matchStart,w.nextMatch))}break;case"string":result=template}null===result?jQuery(document.createTextNode(w.matchText)).appendTo(w.output):new Wikifier((Config.debug?new DebugView(w.output,"template",w.matchText,w.matchText):w).output,result)}}),Wikifier.Parser.add({name:"heading",profiles:["block"],match:"^!{1,6}",terminator:"\\n",handler:function(w){Wikifier.helpers.hasBlockContext(w.output.childNodes)?w.subWikify(jQuery(document.createElement("h".concat(w.matchLength))).appendTo(w.output).get(0),this.terminator):jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"table",profiles:["block"],match:"^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",lookahead:/^\|([^\n]*)\|([fhck]?)$/gm,rowTerminator:"\\|(?:[cfhk]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[cfhk]?$\\n?)",cellTerminator:"(?:\\u0020*)\\|",rowTypes:{c:"caption",f:"tfoot",h:"thead","":"tbody"},handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){var matched,table=jQuery(document.createElement("table")).appendTo(w.output).get(0),prevColumns=[],curRowType=null,$rowContainer=null,rowCount=0;w.nextMatch=w.matchStart;do{this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);if(matched=match&&match.index===w.nextMatch){var nextRowType=match[2];"k"===nextRowType?(table.className=match[1],w.nextMatch+=match[0].length+1):(nextRowType!==curRowType&&(curRowType=nextRowType,$rowContainer=jQuery(document.createElement(this.rowTypes[nextRowType])).appendTo(table)),"c"===curRowType?($rowContainer.css("caption-side",0===rowCount?"top":"bottom"),w.nextMatch+=1,w.subWikify($rowContainer[0],this.rowTerminator)):this.rowHandler(w,jQuery(document.createElement("tr")).appendTo($rowContainer).get(0),prevColumns),++rowCount)}}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))},rowHandler:function(w,rowEl,prevColumns){var matched,_this10=this,cellRe=new RegExp(this.cellPattern,"gm"),col=0,curColCount=1,_loop5=function(){cellRe.lastIndex=w.nextMatch;var cellMatch=cellRe.exec(w.source);if(matched=cellMatch&&cellMatch.index===w.nextMatch){if("~"===cellMatch[1]){var last=prevColumns[col];last&&(++last.rowCount,last.$element.attr("rowspan",last.rowCount).css("vertical-align","middle")),w.nextMatch=cellMatch.index+cellMatch[0].length-1}else if(">"===cellMatch[1])++curColCount,w.nextMatch=cellMatch.index+cellMatch[0].length-1;else{if(cellMatch[2])return w.nextMatch=cellMatch.index+cellMatch[0].length,1;++w.nextMatch;for(var $cell,css=Wikifier.helpers.inlineCss(w),spaceLeft=!1,spaceRight=!1;" "===w.source.substr(w.nextMatch,1);)spaceLeft=!0,++w.nextMatch;"!"===w.source.substr(w.nextMatch,1)?($cell=jQuery(document.createElement("th")).appendTo(rowEl),++w.nextMatch):$cell=jQuery(document.createElement("td")).appendTo(rowEl),prevColumns[col]={rowCount:1,$element:$cell},curColCount>1&&($cell.attr("colspan",curColCount),curColCount=1),w.subWikify($cell[0],_this10.cellTerminator)," "===w.matchText.substr(w.matchText.length-2,1)&&(spaceRight=!0),css.classes.forEach((function(className){return $cell.addClass(className)})),""!==css.id&&$cell.attr("id",css.id),spaceLeft&&spaceRight?css.styles["text-align"]="center":spaceLeft?css.styles["text-align"]="right":spaceRight&&(css.styles["text-align"]="left"),$cell.css(css.styles),w.nextMatch=w.nextMatch-1}++col}};do{if(_loop5())break}while(matched)}}),Wikifier.Parser.add({name:"list",profiles:["block"],match:"^(?:(?:\\*+)|(?:#+))",lookahead:/^(?:(\*+)|(#+))/gm,terminator:"\\n",handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){w.nextMatch=w.matchStart;var matched,i,destStack=[w.output],curType=null,curLevel=0;do{this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);if(matched=match&&match.index===w.nextMatch){var newType=match[2]?"ol":"ul",newLevel=match[0].length;if(w.nextMatch+=match[0].length,newLevel>curLevel)for(i=curLevel;i<newLevel;++i)destStack.push(jQuery(document.createElement(newType)).appendTo(destStack[destStack.length-1]).get(0));else if(newLevel<curLevel)for(i=curLevel;i>newLevel;--i)destStack.pop();else newLevel===curLevel&&newType!==curType&&(destStack.pop(),destStack.push(jQuery(document.createElement(newType)).appendTo(destStack[destStack.length-1]).get(0)));curLevel=newLevel,curType=newType,w.subWikify(jQuery(document.createElement("li")).appendTo(destStack[destStack.length-1]).get(0),this.terminator)}}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"commentByBlock",profiles:["core"],match:"(?:/(?:%|\\*))|(?:\x3c!--)",lookahead:/(?:\/(%|\*)(?:(?:.|\n)*?)\1\/)|(?:<!--(?:(?:.|\n)*?)-->)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex)}}),Wikifier.Parser.add({name:"lineContinuation",profiles:["core"],match:"\\\\".concat(Patterns.spaceNoTerminator,"*\\n|\\n").concat(Patterns.spaceNoTerminator,"*\\\\|\\n?\\\\").concat(Patterns.spaceNoTerminator,"*$|^").concat(Patterns.spaceNoTerminator,"*\\\\\\n?"),handler:function(w){w.nextMatch=w.matchStart+w.matchLength}}),Wikifier.Parser.add({name:"lineBreak",profiles:["core"],match:"\\n",handler:function(w){w.options.nobr||jQuery(document.createElement("br")).appendTo(w.output)}}),Wikifier.Parser.add({name:"htmlCharacterReference",profiles:["core"],match:"(?:(?:&#?[0-9A-Za-z]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9A-Fa-f]|1D[C-Fc-f][0-9A-Fa-f]|20[D-Fd-f][0-9A-Fa-f]|FE2[0-9A-Fa-f])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[0-9A-Za-z]{2,8};)",handler:function(w){jQuery(document.createDocumentFragment()).append(w.matchText).appendTo(w.output)}}),Wikifier.Parser.add({name:"xmlProlog",profiles:["core"],match:"<\\?[Xx][Mm][Ll][^>]*\\?>",handler:function(w){w.nextMatch=w.matchStart+w.matchLength}}),Wikifier.Parser.add({name:"verbatimHtml",profiles:["core"],match:"<[Hh][Tt][Mm][Ll]>",lookahead:/<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/gm,handler:_verbatimTagHandler}),Wikifier.Parser.add({name:"verbatimScriptTag",profiles:["core"],match:"<[Ss][Cc][Rr][Ii][Pp][Tt][^>]*>",lookahead:/(<[Ss][Cc][Rr][Ii][Pp][Tt][^>]*>(?:.|\n)*?<\/[Ss][Cc][Rr][Ii][Pp][Tt]>)/gm,handler:_verbatimTagHandler}),Wikifier.Parser.add({name:"styleTag",profiles:["core"],match:"<[Ss][Tt][Yy][Ll][Ee][^>]*>",lookahead:/(<[Ss][Tt][Yy][Ll][Ee][^>]*>)((?:.|\n)*?)(<\/[Ss][Tt][Yy][Ll][Ee]>)/gm,imageMarkup:new RegExp(Patterns.cssImage,"g"),hasImageMarkup:new RegExp(Patterns.cssImage),handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);if(match&&match.index===w.matchStart){w.nextMatch=this.lookahead.lastIndex;var css=match[2];this.hasImageMarkup.test(css)&&(this.imageMarkup.lastIndex=0,css=css.replace(this.imageMarkup,(function(wikiImage){var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:wikiImage,matchStart:0});if(Object.hasOwn(markup,"error")||markup.pos<wikiImage.length)return wikiImage;var source=Wikifier.helpers.evalPassageId(markup.source);if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(source=passage.text)}return'url("'.concat(source.replace(/"/g,"%22"),'")')}))),jQuery(document.createDocumentFragment()).append(match[1]+css+match[3]).appendTo(w.output)}}}),Wikifier.Parser.add({name:"svgTag",profiles:["core"],match:"<[Ss][Vv][Gg][^>]*>",lookahead:/<(\/?)[Ss][Vv][Gg][^>]*>/gm,namespace:"http://www.w3.org/2000/svg",handler:function(w){var _this11=this;this.lookahead.lastIndex=w.nextMatch;for(var match,depth=1;depth>0&&null!==(match=this.lookahead.exec(w.source));)depth+="/"===match[1]?-1:1;if(0===depth){w.nextMatch=this.lookahead.lastIndex;var svgTag=w.source.slice(w.matchStart,this.lookahead.lastIndex),$frag=jQuery(document.createDocumentFragment()).append(svgTag);$frag.find("a[data-passage],image[data-passage]").each((function(_,el){var tagName=el.tagName.toLowerCase();try{_this11.processAttributeDirectives(el)}catch(ex){return appendError(w.output,"svg|<".concat(tagName,">: ").concat(ex.message),"".concat(w.matchText,"…"))}el.hasAttribute("data-passage")&&_this11.processDataAttributes(el,tagName)})),$frag.appendTo(w.output)}},processAttributeDirectives:function(el){Array.from(el.attributes).forEach((function(_ref11){var name=_ref11.name,value=_ref11.value,evalShorthand="@"===name[0];if(evalShorthand||name.startsWith("sc-eval:")){var result,newName=name.slice(evalShorthand?1:8);if("data-setter"===newName)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(name,'"'));try{result=Scripting.evalTwineScript(value)}catch(ex){throw new Error('bad evaluation from attribute directive "'.concat(name,'": ').concat(ex.message))}try{el.setAttribute(newName,result),el.removeAttribute(name)}catch(ex){throw new Error('cannot transform attribute directive "'.concat(name,'" into attribute "').concat(newName,'"'))}}}))},processDataAttributes:function(el,tagName){var passage=el.getAttribute("data-passage");if(null!=passage){var evaluated=Wikifier.helpers.evalPassageId(passage);if(evaluated!==passage&&(passage=evaluated,el.setAttribute("data-passage",evaluated)),""!==passage)if("image"===tagName)"data:"!==passage.slice(0,5)&&Story.has(passage)&&(passage=Story.get(passage)).tags.includes("Twine.image")&&el.setAttribute("href",passage.text.trim());else{var setFn,setter=el.getAttribute("data-setter");null!=setter&&""!==(setter=String(setter).trim())&&(setFn=Wikifier.helpers.shadowHandler(Scripting.desugar(setter))),Story.has(passage)?(el.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&el.classList.add("link-visited")):el.classList.add("link-broken"),jQuery(el).ariaClick({one:!0},(function(){"function"==typeof setFn&&setFn.call(this),Engine.play(passage)}))}}}}),Wikifier.Parser.add({name:"htmlTag",profiles:["core"],match:"<".concat(Patterns.htmlTagName,"(?:\\s+[^\\u0000-\\u001F\\u007F-\\u009F\\s\"'>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*?\"|'[^']*?'|[^\\s\"'=<>`]+))?)*\\s*\\/?>"),tagRe:new RegExp("^<(".concat(Patterns.htmlTagName,")")),mediaTags:["audio","img","source","track","video"],nobrTags:["audio","colgroup","datalist","dl","figure","meter","ol","optgroup","picture","progress","ruby","select","table","tbody","tfoot","thead","tr","ul","video"],voidTags:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],handler:function(w){var tagMatch=this.tagRe.exec(w.matchText),tag=tagMatch&&tagMatch[1],tagName=tag&&tag.toLowerCase();if(tagName){var terminator,terminatorMatch,isVoid=this.voidTags.includes(tagName)||w.matchText.endsWith("/>"),isNobr=this.nobrTags.includes(tagName);if(!isVoid){terminator="<\\/".concat(tagName,"\\s*>");var terminatorRe=new RegExp(terminator,"gim");terminatorRe.lastIndex=w.matchStart,terminatorMatch=terminatorRe.exec(w.source)}if(!isVoid&&!terminatorMatch)return appendError(w.output,"cannot find a closing tag for HTML <".concat(tag,">"),"".concat(w.matchText,"…"));var debugView,output=w.output,el=document.createElement(w.output.tagName);for(el.innerHTML=w.matchText;el.firstChild;)el=el.firstChild;try{this.processAttributeDirectives(el)}catch(ex){return appendError(w.output,"<".concat(tagName,">: ").concat(ex.message),"".concat(w.matchText,"…"))}if(el.hasAttribute("data-passage")){if(el.hasAttribute("href"))return appendError(w.output,"<".concat(tagName,'>: elements may not include both "data-passage" and "href" atttributes'),"".concat(w.matchText,"…"));this.processDataAttributes(el,tagName),Config.debug&&((debugView=new DebugView(w.output,"html-".concat(tagName),tagName,w.matchText)).modes({block:"img"===tagName,nonvoid:terminatorMatch}),output=debugView.output)}else el.hasAttribute("href")&&Wikifier.isExternalLink(el.getAttribute("href"))&&el.classList.add("link-external");if(terminatorMatch){try{Wikifier.Option.push({nobr:isNobr}),w.subWikify(el,terminator,{ignoreTerminatorCase:!0})}finally{Wikifier.Option.pop()}debugView&&jQuery(el).find(".debug.block").length>0&&debugView.modes({block:!0})}output.appendChild("track"===tagName?el.cloneNode(!0):el)}},processAttributeDirectives:function(el){Array.from(el.attributes).forEach((function(_ref12){var name=_ref12.name,value=_ref12.value,evalShorthand="@"===name[0];if(evalShorthand||name.startsWith("sc-eval:")){var result,newName=name.slice(evalShorthand?1:8);if("data-setter"===newName)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(name,'"'));try{result=Scripting.evalTwineScript(value)}catch(ex){throw new Error('bad evaluation from attribute directive "'.concat(name,'": ').concat(ex.message))}try{el.setAttribute(newName,result),el.removeAttribute(name)}catch(ex){throw new Error('cannot transform attribute directive "'.concat(name,'" into attribute "').concat(newName,'"'))}}}))},processDataAttributes:function(el,tagName){var passage=el.getAttribute("data-passage");if(null!=passage){var evaluated=Wikifier.helpers.evalPassageId(passage);if(evaluated!==passage&&(passage=evaluated,el.setAttribute("data-passage",evaluated)),""!==passage)if(this.mediaTags.includes(tagName)){if("data:"!==passage.slice(0,5)&&Story.has(passage)){var parentName,twineTag;switch(passage=Story.get(passage),tagName){case"audio":case"video":twineTag="Twine.".concat(tagName);break;case"img":twineTag="Twine.image";break;case"track":twineTag="Twine.vtt";break;case"source":var $parent=$(el).closest("audio,picture,video");$parent.length>0&&(parentName=$parent.get(0).tagName.toLowerCase(),twineTag="Twine.".concat("picture"===parentName?"image":parentName))}passage.tags.includes(twineTag)&&(el["picture"===parentName?"srcset":"src"]=passage.text.trim())}}else{var setFn,setter=el.getAttribute("data-setter");null!=setter&&""!==(setter=String(setter).trim())&&(setFn=Wikifier.helpers.shadowHandler(Scripting.desugar(setter))),Story.has(passage)?(el.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&el.classList.add("link-visited")):el.classList.add("link-broken"),jQuery(el).ariaClick({one:!0},(function(){"function"==typeof setFn&&setFn.call(this),Engine.play(passage)}))}}}})}();var Template=(_templates=new Map,_validNameRe=new RegExp("^(?:".concat(Patterns.templateName,")$")),_validType=function(template){var templateType=_typeof(template);return"function"===templateType||"string"===templateType},Object.preventExtensions(Object.create(null,{add:{value:function(name,template){if(!(_validType(template)||template instanceof Array&&template.length>0&&template.every(_validType)))throw new TypeError("invalid template type (".concat(name,"); templates must be: functions, strings, or an array of either"));(name instanceof Array?name:[name]).forEach((function(name){if(!_validNameRe.test(name))throw new Error('invalid template name "'.concat(name,'"'));if(_templates.has(name))throw new Error("cannot clobber existing template ?".concat(name));_templates.set(name,template)}))}},delete:{value:function(name){(name instanceof Array?name:[name]).forEach((function(name){return _templates.delete(name)}))}},get:{value:function(name){return _templates.has(name)?_templates.get(name):null}},has:{value:function(name){return _templates.has(name)}},size:{get:function(){return _templates.size}}}))),_templates,_validNameRe,_validType,Macro=function(){var _macros={},_tags={},_validNameRe=new RegExp("^(?:".concat(Patterns.macroName,")$"));function macrosHas(name){return Object.hasOwn(_macros,name)}function tagsRegister(parent,bodyTags){if(!parent)throw new Error("no parent specified");for(var endTags=["/".concat(parent),"end".concat(parent)],allTags=[].concat(endTags,Array.isArray(bodyTags)?bodyTags:[]),i=0;i<allTags.length;++i){var tag=allTags[i];if(macrosHas(tag))throw new Error("cannot register tag for an existing macro");tagsHas(tag)?_tags[tag].includes(parent)||(_tags[tag].push(parent),_tags[tag].sort()):_tags[tag]=[parent]}}function tagsUnregister(parent){if(!parent)throw new Error("no parent specified");Object.keys(_tags).forEach((function(tag){var i=_tags[tag].indexOf(parent);-1!==i&&(1===_tags[tag].length?delete _tags[tag]:_tags[tag].splice(i,1))}))}function tagsHas(name){return Object.hasOwn(_tags,name)}return Object.preventExtensions(Object.create(null,{add:{value:function macrosAdd(name,def){if(Array.isArray(name))name.forEach((function(name){return macrosAdd(name,def)}));else{if(!_validNameRe.test(name))throw new Error('invalid macro name "'.concat(name,'"'));if(macrosHas(name))throw new Error("cannot clobber existing macro <<".concat(name,">>"));if(tagsHas(name))throw new Error("cannot clobber child tag <<".concat(name,">> of parent macro").concat(1===_tags[name].length?"":"s"," <<").concat(_tags[name].join(">>, <<"),">>"));try{if("object"===_typeof(def))_macros[name]=Object.assign(Object.create(null),def,{_MACRO_API:!0});else{if(!macrosHas(def))throw new Error("cannot create alias of nonexistent macro <<".concat(def,">>"));_macros[name]=Object.create(_macros[def],{_ALIAS_OF:{enumerable:!0,value:def}})}Object.defineProperty(_macros,name,{writable:!1})}catch(ex){throw"TypeError"===ex.name?new Error("cannot clobber protected macro <<".concat(name,">>")):new Error("unknown error when attempting to add macro <<".concat(name,">>: [").concat(ex.name,"] ").concat(ex.message))}if(void 0!==_macros[name].tags)if(null==_macros[name].tags)tagsRegister(name);else{if(!Array.isArray(_macros[name].tags))throw new Error('bad value for "tags" property of macro <<'.concat(name,">>"));tagsRegister(name,_macros[name].tags)}}}},delete:{value:function macrosDelete(name){if(Array.isArray(name))name.forEach((function(name){return macrosDelete(name)}));else if(macrosHas(name)){void 0!==_macros[name].tags&&tagsUnregister(name);try{Object.defineProperty(_macros,name,{writable:!0}),delete _macros[name]}catch(ex){throw new Error("unknown error removing macro <<".concat(name,">>: ").concat(ex.message))}}else if(tagsHas(name))throw new Error("cannot remove child tag <<".concat(name,">> of parent macro <<").concat(_tags[name],">>"))}},isEmpty:{value:function(){return 0===Object.keys(_macros).length}},has:{value:macrosHas},get:{value:function(name){var macro=null;return macrosHas(name)&&"function"==typeof _macros[name].handler?macro=_macros[name]:Object.hasOwn(macros,name)&&"function"==typeof macros[name].handler&&(macro=macros[name]),macro}},init:{value:function(){var handler=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"init";Object.keys(_macros).forEach((function(name){"function"==typeof _macros[name][handler]&&_macros[name][handler](name)})),Object.keys(macros).forEach((function(name){"function"==typeof macros[name][handler]&&macros[name][handler](name)}))}},tags:{value:Object.preventExtensions(Object.create(null,{register:{value:tagsRegister},unregister:{value:tagsUnregister},has:{value:tagsHas},get:{value:function(name){return tagsHas(name)?_tags[name]:null}}}))},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),MacroContext=function(){var MacroContext=function(){return _createClass((function MacroContext(contextData){_classCallCheck(this,MacroContext);var context=Object.assign({parent:null,macro:null,name:"",displayName:"",args:null,payload:null,parser:null,source:""},contextData);if(null===context.macro||""===context.name||null===context.parser)throw new TypeError("context object missing required properties");Object.defineProperties(this,{self:{value:context.macro},name:{value:void 0===context.macro._ALIAS_OF?context.name:context.macro._ALIAS_OF},displayName:{value:context.name},args:{value:context.args},payload:{value:context.payload},source:{value:context.source},parent:{value:context.parent},parser:{value:context.parser},_output:{value:context.parser.output},_shadows:{writable:!0,value:null},_debugView:{writable:!0,value:null},_debugViewEnabled:{writable:!0,value:Config.debug}})}),[{key:"output",get:function(){return this._debugViewEnabled?this.debugView.output:this._output}},{key:"shadows",get:function(){return Array.from(this._shadows)}},{key:"shadowView",get:function(){for(var view=new Set,context=this;null!==context;context=context.parent)context._shadows&&context._shadows.forEach((function(name){return view.add(name)}));return Array.from(view)}},{key:"debugView",get:function(){return this._debugViewEnabled?null!==this._debugView?this._debugView:this.createDebugView():null}},{key:"contextFilter",value:function(predicate,thisArg){if("function"!=typeof predicate)throw new TypeError("<MacroContext>.contextFilter() predicate parameter must be a function");for(var result=[],context=this.parent;null!==context;context=context.parent)predicate.call(void 0===thisArg?this:thisArg,context)&&result.push(context);return result}},{key:"contextFind",value:function(predicate,thisArg){if("function"!=typeof predicate)throw new TypeError("<MacroContext>.contextFind() predicate parameter must be a function");for(var context=this.parent;null!==context;context=context.parent)if(predicate.call(void 0===thisArg?this:thisArg,context))return context}},{key:"contextSome",value:function(predicate,thisArg){if("function"!=typeof predicate)throw new TypeError("<MacroContext>.contextSome() predicate parameter must be a function");for(var context=this.parent;null!==context;context=context.parent)if(predicate.call(void 0===thisArg?this:thisArg,context))return!0;return!1}},{key:"addShadow",value:function(){var _this12=this;this._shadows||(this._shadows=new Set);for(var varRe=new RegExp("^".concat(Patterns.variable,"$")),_len14=arguments.length,names=new Array(_len14),_key14=0;_key14<_len14;_key14++)names[_key14]=arguments[_key14];names.flat(1/0).forEach((function(name){if("string"!=typeof name)throw new TypeError("variable name must be a string; type: ".concat(_typeof(name)));if(!varRe.test(name))throw new Error('invalid variable name "'.concat(name,'"'));_this12._shadows.add(name)}))}},{key:"shadowHandler",value:function(callback,doneCallback,startCallback){var shadowStore,shadowContext=this;return"function"==typeof callback&&(shadowStore=Object.create(null),this.shadowView.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey]}))),function(){for(var _len15=arguments.length,args=new Array(_len15),_key15=0;_key15<_len15;_key15++)args[_key15]=arguments[_key15];if("function"==typeof startCallback&&startCallback.apply(this,args),"function"==typeof callback){var contextCache,shadowNames=Object.keys(shadowStore),valueCache=shadowNames.length>0?{}:null,macroParser=Wikifier.Parser.get("macro");try{shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;Object.hasOwn(store,varKey)&&(valueCache[varKey]=store[varKey]),store[varKey]=shadowStore[varName]})),contextCache=macroParser.context,macroParser.context=shadowContext,callback.apply(this,args)}finally{contextCache!==undefined&&(macroParser.context=contextCache),shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey],Object.hasOwn(valueCache,varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}"function"==typeof doneCallback&&doneCallback.apply(this,args)}}},{key:"createDebugView",value:function(name,title){return this._debugView=new DebugView(this._output,"macro",name||this.displayName,title||this.source),null!==this.payload&&this.payload.length>0&&this._debugView.modes({nonvoid:!0}),this._debugViewEnabled=!0,this._debugView}},{key:"removeDebugView",value:function(){null!==this._debugView&&(this._debugView.remove(),this._debugView=null),this._debugViewEnabled=!1}},{key:"error",value:function(message,source){return appendError(this._output,"<<".concat(this.displayName,">>: ").concat(message),source||this.source)}}])}();return Object.defineProperties(MacroContext.prototype,{contextHas:{value:function(){console.warn("[DEPRECATED] <MacroContext>.contextHas() is deprecated.");for(var _len16=arguments.length,args=new Array(_len16),_key16=0;_key16<_len16;_key16++)args[_key16]=arguments[_key16];return MacroContext.prototype.contextSome.apply(this,args)}},contextSelect:{value:function(){console.warn("[DEPRECATED] <MacroContext>.contextSelect() is deprecated.");for(var _len17=arguments.length,args=new Array(_len17),_key17=0;_key17<_len17;_key17++)args[_key17]=arguments[_key17];return MacroContext.prototype.contextFind.apply(this,args)}},contextSelectAll:{value:function(){console.warn("[DEPRECATED] <MacroContext>.contextSelectAll() is deprecated.");for(var _len18=arguments.length,args=new Array(_len18),_key18=0;_key18<_len18;_key18++)args[_key18]=arguments[_key18];return MacroContext.prototype.contextFilter.apply(this,args)}},createShadowWrapper:{value:function(){console.warn("[DEPRECATED] <MacroContext>.createShadowWrapper() is deprecated.");for(var _len19=arguments.length,args=new Array(_len19),_key19=0;_key19<_len19;_key19++)args[_key19]=arguments[_key19];return MacroContext.prototype.shadowHandler.apply(this,args)}}}),MacroContext}();Macro.add(["addclass","toggleclass"],{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("selector"),this.args.length<2&&errors.push("class names"),this.error("no ".concat(errors.join(" or ")," specified"))}var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));switch(this.name){case"addclass":$targets.addClass(this.args[1].trim());break;case"toggleclass":$targets.toggleClass(this.args[1].trim())}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["append","prepend","replace"],{tags:null,t8nRe:/^(?:transition|t8n)$/,handler:function(){var _this13=this;if(0===this.args.length)return this.error("no selector specified");var $insert,$targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));if(""!==this.payload[0].contents)switch(this.args.length>1&&this.self.t8nRe.test(this.args[1])?(($insert=jQuery(document.createElement("span"))).addClass("macro-".concat(this.name,"-insert macro-").concat(this.name,"-in")),setTimeout((function(){return $insert.removeClass("macro-".concat(_this13.name,"-in"))}),Engine.DOM_DELAY)):$insert=jQuery(document.createDocumentFragment()),$insert.wiki(this.payload[0].contents),this.name){case"replace":$targets.empty();case"append":$targets.append($insert);break;case"prepend":$targets.prepend($insert)}else"replace"===this.name&&$targets.empty();Config.debug&&this.debugView.modes({hidden:!0})}}),function(){if(Has.audio){var errorOnePlaybackAction=function(cur,prev){return'only one playback action allowed per invocation, "'.concat(cur,'" cannot be combined with "').concat(prev,'"')};Macro.add("audio",{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("track and/or group IDs"),this.args.length<2&&errors.push("actions"),this.error("no ".concat(errors.join(" or ")," specified"))}var selected;try{selected=SimpleAudio.select(this.args[0])}catch(ex){return this.error(ex.message)}for(var action,fadeTo,loop,mute,passage,time,volume,args=this.args.slice(1),fadeOver=5;args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"pause":case"play":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"fadein":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=1;break;case"fadeout":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=0;break;case"fadeto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(0===args.length)return this.error("fadeto missing required level value");if(action="fade",raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeto: ".concat(raw));break;case"fadeoverto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(args.length<2){var _errors=[];return args.length<1&&_errors.push("seconds"),args.length<2&&_errors.push("level"),this.error("fadeoverto missing required ".concat(_errors.join(" and ")," value").concat(_errors.length>1?"s":""))}if(action="fade",raw=args.shift(),fadeOver=Number.parseFloat(raw),Number.isNaN(fadeOver)||!Number.isFinite(fadeOver))return this.error("cannot parse fadeoverto: ".concat(raw));if(raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeoverto: ".concat(raw));break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;case"mute":case"unmute":mute="mute"===arg;break;case"time":if(0===args.length)return this.error("time missing required seconds value");if(raw=args.shift(),time=Number.parseFloat(raw),Number.isNaN(time)||!Number.isFinite(time))return this.error("cannot parse time: ".concat(raw));break;case"loop":case"unloop":loop="loop"===arg;break;case"goto":if(0===args.length)return this.error("goto missing required passage title");if(raw=args.shift(),passage="object"===_typeof(raw)?raw.link:raw,!Story.has(passage))return this.error('passage "'.concat(passage,'" does not exist'));break;default:return this.error("unknown action: ".concat(arg))}}try{if(null!=volume&&selected.volume(volume),null!=time&&selected.time(time),null!=mute&&selected.mute(mute),null!=loop&&selected.loop(loop),null!=passage){var nsEnded="ended.macros.macro-".concat(this.name,"_goto");selected.off(nsEnded).one(nsEnded,(function(){selected.off(nsEnded),Engine.play(passage)}))}switch(action){case"fade":selected.fade(fadeOver,fadeTo);break;case"load":selected.load();break;case"pause":selected.pause();break;case"play":selected.playWhenAllowed();break;case"stop":selected.stop();break;case"unload":selected.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("cacheaudio",{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("track ID"),this.args.length<2&&errors.push("sources"),this.error("no ".concat(errors.join(" or ")," specified"))}var id=String(this.args[0]).trim();try{SimpleAudio.tracks.add(id,this.args.slice(1))}catch(ex){return this.error(ex.message)}if(Config.debug&&!SimpleAudio.tracks.get(id).hasSource())return this.error('track ID "'.concat(id,'": no supported audio sources found'));Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("createaudiogroup",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no group ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var groupId=String(this.args[0]).trim(),trackIds=[],i=1,len=this.payload.length;i<len;++i){if(this.payload[i].args.length<1)return this.error("no track ID specified");trackIds.push(String(this.payload[i].args[0]).trim()),Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.groups.add(groupId,trackIds)}catch(ex){return this.error(ex.message)}Config.debug&&this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0})}}),Macro.add("createplaylist",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no list ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var listId=String(this.args[0]).trim(),trackObjs=[],i=1,len=this.payload.length;i<len;++i){if(0===this.payload[i].args.length)return this.error("no track ID specified");for(var trackObj={id:String(this.payload[i].args[0]).trim()},args=this.payload[i].args.slice(1);args.length>0;){var arg=args.shift(),raw=void 0,parsed=void 0;switch(arg){case"own":trackObj.own=!0;break;case"rate":args.length>0&&args.shift();break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),parsed=Number.parseFloat(raw),Number.isNaN(parsed)||!Number.isFinite(parsed))return this.error("cannot parse volume: ".concat(raw));trackObj.volume=parsed;break;default:return this.error("unknown action: ".concat(arg))}}trackObjs.push(trackObj),Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.lists.add(listId,trackObjs)}catch(ex){return this.error(ex.message)}Config.debug&&this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0})}}),Macro.add("masteraudio",{handler:function(){if(0===this.args.length)return this.error("no actions specified");for(var action,mute,muteOnHide,volume,args=this.args.slice(0);args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"mute":case"unmute":mute="mute"===arg;break;case"muteonhide":case"nomuteonhide":muteOnHide="muteonhide"===arg;break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;default:return this.error("unknown action: ".concat(arg))}}try{switch(null!=mute&&SimpleAudio.mute(mute),null!=muteOnHide&&SimpleAudio.muteOnHidden(muteOnHide),null!=volume&&SimpleAudio.volume(volume),action){case"load":SimpleAudio.load();break;case"stop":SimpleAudio.stop();break;case"unload":SimpleAudio.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("playlist",{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("list ID"),this.args.length<2&&errors.push("actions"),this.error("no ".concat(errors.join(" or ")," specified"))}var id=String(this.args[0]).trim();if(!SimpleAudio.lists.has(id))return this.error('playlist "'.concat(id,'" does not exist'));for(var action,fadeTo,loop,mute,shuffle,volume,list=SimpleAudio.lists.get(id),args=this.args.slice(1),fadeOver=5;args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"pause":case"play":case"skip":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"fadein":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=1;break;case"fadeout":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=0;break;case"fadeto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(0===args.length)return this.error("fadeto missing required level value");if(action="fade",raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeto: ".concat(raw));break;case"fadeoverto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(args.length<2){var _errors2=[];return args.length<1&&_errors2.push("seconds"),args.length<2&&_errors2.push("level"),this.error("fadeoverto missing required ".concat(_errors2.join(" and ")," value").concat(_errors2.length>1?"s":""))}if(action="fade",raw=args.shift(),fadeOver=Number.parseFloat(raw),Number.isNaN(fadeOver)||!Number.isFinite(fadeOver))return this.error("cannot parse fadeoverto: ".concat(raw));if(raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeoverto: ".concat(raw));break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;case"mute":case"unmute":mute="mute"===arg;break;case"loop":case"unloop":loop="loop"===arg;break;case"shuffle":case"unshuffle":shuffle="shuffle"===arg;break;default:return this.error("unknown action: ".concat(arg))}}try{switch(null!=volume&&list.volume(volume),null!=mute&&list.mute(mute),null!=loop&&list.loop(loop),null!=shuffle&&list.shuffle(shuffle),action){case"fade":list.fade(fadeOver,fadeTo);break;case"load":list.load();break;case"pause":list.pause();break;case"play":list.playWhenAllowed();break;case"skip":list.skip();break;case"stop":list.stop();break;case"unload":list.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("removeaudiogroup",{handler:function(){if(0===this.args.length)return this.error("no group ID specified");var id=String(this.args[0]).trim();if(!SimpleAudio.groups.has(id))return this.error('group "'.concat(id,'" does not exist'));SimpleAudio.groups.delete(id),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeplaylist",{handler:function(){if(0===this.args.length)return this.error("no list ID specified");var id=String(this.args[0]).trim();if(!SimpleAudio.lists.has(id))return this.error('playlist "'.concat(id,'" does not exist'));SimpleAudio.lists.delete(id),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("waitforaudio",{skipArgs:!0,handler:function(){SimpleAudio.loadWithScreen()}})}else Macro.add(["audio","cacheaudio","createaudiogroup","createplaylist","masteraudio","playlist","removeaudiogroup","removeplaylist","waitforaudio"],{skipArgs:!0,handler:function(){Config.debug&&this.debugView.modes({hidden:!0})}})}(),Macro.add(["back","return"],{handler:function(){var passage,content,$link,momentIndex=-1;if(this.args.length>0)if("object"===_typeof(this.args[0]))if(this.args[0].isImage){content=document.createElement("img");var $image=jQuery(content).attr("src",this.args[0].source);Object.hasOwn(this.args[0],"passage")&&$image.attr("data-passage",this.args[0].passage),Object.hasOwn(this.args[0],"title")&&$image.attr("title",this.args[0].title),Object.hasOwn(this.args[0],"align")&&$image.attr("align",this.args[0].align),Object.hasOwn(this.args[0],"link")&&(passage=this.args[0].link)}else content=document.createTextNode(this.args[0].text),passage=this.args[0].link;else{content=document.createDocumentFragment();var forbidden=jQuery(content).wikiWithOptions({cleanup:!1,profile:"core"},this.args[0]).getForbiddenInteractiveContentTagNames();if(forbidden.length>0)throw new Error("text content contains restricted elements: <".concat(forbidden.join(">, <"),">"));passage=this.args.length>1?this.args[1]:undefined}if(null==passage){for(var i=State.length-2;i>=0;--i)if(State.history[i].title!==State.passage){momentIndex=i,passage=State.history[i].title;break}if(null==passage&&"return"===this.name)for(var _i6=State.expired.length-1;_i6>=0;--_i6)if(State.expired[_i6]!==State.passage){passage=State.expired[_i6];break}}else{if(!Story.has(passage))return this.error('passage "'.concat(passage,'" does not exist'));if("back"===this.name){for(var _i7=State.length-2;_i7>=0;--_i7)if(State.history[_i7].title===passage){momentIndex=_i7;break}if(-1===momentIndex)return this.error('cannot find passage "'.concat(passage,'" in the current story history'))}}if(null==passage)return this.error("cannot find passage");"back"!==this.name||-1!==momentIndex?($link=jQuery(document.createElement("a")).addClass("link-internal").ariaClick({one:!0},"return"===this.name?function(){return Engine.play(passage)}:function(){return Engine.goTo(momentIndex)}),content instanceof HTMLImageElement&&$link.addClass("link-image")):$link=jQuery(document.createElement("span")).addClass("link-disabled"),$link.addClass("macro-".concat(this.name)).append(content||document.createTextNode(L10n.get("macro".concat(this.name.toUpperFirst(),"Text")))).appendTo(this.output)}}),Macro.add(["button","link"],{isAsync:!0,tags:null,handler:function(){var _this14=this;if(0===this.args.length)return this.error("no ".concat("button"===this.name?"button":"link"," text specified"));var passage,$link=jQuery(document.createElement("button"===this.name?"button":"a"));if("object"===_typeof(this.args[0]))if(this.args[0].isImage){var $image=jQuery(document.createElement("img")).attr("src",this.args[0].source).appendTo($link);$link.addClass("link-image"),Object.hasOwn(this.args[0],"passage")&&$image.attr("data-passage",this.args[0].passage),Object.hasOwn(this.args[0],"title")&&$image.attr("title",this.args[0].title),Object.hasOwn(this.args[0],"align")&&$image.attr("align",this.args[0].align),passage=this.args[0].link}else $link.append(document.createTextNode(this.args[0].text)),passage=this.args[0].link;else{var $frag=jQuery(document.createDocumentFragment()).wikiWithOptions({cleanup:!1,profile:"core"},this.args[0]),forbidden=$frag.getForbiddenInteractiveContentTagNames();if(forbidden.length>0)throw new Error("text content contains restricted elements: <".concat(forbidden.join(">, <"),">"));$link.append($frag),passage=this.args.length>1?this.args[1]:undefined}null!=passage?($link.attr("data-passage",passage),Story.has(passage)?($link.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&$link.addClass("link-visited")):$link.addClass("link-broken")):$link.addClass("link-internal"),$link.addClass("macro-".concat(this.name)).ariaClick({namespace:".macros",role:null!=passage?"link":"button",one:null!=passage},this.shadowHandler(""!==this.payload[0].contents?function(){return Wikifier.wikifyEval(_this14.payload[0].contents.trim())}:null,null!=passage?function(){return Engine.play(passage)}:null)).appendTo(this.output)}}),Macro.add("capture",{skipArgs:!0,tags:null,tsVarRe:new RegExp("(".concat(Patterns.variable,")"),"g"),handler:function(){if(0===this.args.raw.length)return this.error("no story/temporary variable list specified");var valueCache={};try{for(var match,tsVarRe=this.self.tsVarRe;null!==(match=tsVarRe.exec(this.args.raw));){var varName=match[1],varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;Object.hasOwn(store,varKey)&&(valueCache[varKey]=store[varKey]),this.addShadow(varName)}new Wikifier(this.output,this.payload[0].contents)}finally{this.shadows.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;Object.hasOwn(valueCache,varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}}),Macro.add("checkbox",{isAsync:!0,handler:function(){if(this.args.length<3){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("unchecked value"),this.args.length<3&&errors.push("checked value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=createSlug(varName),uncheckValue=this.args[1],checkValue=this.args[2],el=document.createElement("input");switch(jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),type:"checkbox",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.shadowHandler((function(){State.setVar(varName,this.checked?checkValue:uncheckValue)}))).appendTo(this.output),this.args[3]){case"autocheck":State.getVar(varName)===checkValue?el.checked=!0:State.setVar(varName,uncheckValue);break;case"checked":el.checked=!0,State.setVar(varName,checkValue);break;default:State.setVar(varName,uncheckValue)}}}),Macro.add("copy",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));jQuery(this.output).append($targets.html()),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["cycle","listbox"],{isAsync:!0,skipArgs:["optionsfrom"],tags:["option","optionsfrom"],handler:function(){var _this15=this;if(0===this.args.length)return this.error("no variable name specified");if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=createSlug(varName),len=this.payload.length;if(1===len)return this.error("no options specified");for(var config={autoselect:!1,once:!1},i=1;i<this.args.length;++i){var arg=this.args[i];switch(arg){case"once":config.once=!0;break;case"autoselect":config.autoselect=!0;break;default:return this.error("unknown argument: ".concat(arg))}}for(var _ret,options=[],tagCount={option:0,optionsfrom:0},index=-1,_loop6=function(){var payload=_this15.payload[_i8];if("option"===payload.name){if(++tagCount.option,0===payload.args.length)return{v:_this15.error("no arguments specified for <<".concat(payload.name,">> (#").concat(tagCount.option,")"))};var option={label:String(payload.args[0])},isSelected=!1;switch(payload.args.length){case 1:option.value=payload.args[0];break;case 2:"selected"===payload.args[1]?(option.value=payload.args[0],isSelected=!0):option.value=payload.args[1];break;default:option.value=payload.args[1],"selected"===payload.args[2]&&(isSelected=!0)}if(options.push(option),isSelected){if(config.autoselect)return{v:_this15.error("cannot specify both the autoselect and selected keywords")};if(-1!==index)return{v:_this15.error("multiple selected keywords specified for <<".concat(payload.name,">> (#").concat(index+1," & #").concat(tagCount.option,")"))};index=options.length-1}}else{if(++tagCount.optionsfrom,0===payload.args.full.length)return{v:_this15.error("no expression specified for <<".concat(payload.name,">> (#").concat(tagCount.optionsfrom,")"))};var result;try{var exp=payload.args.full;result=Scripting.evalJavaScript("{"===exp[0]?"(".concat(exp,")"):exp)}catch(ex){return{v:_this15.error("bad evaluation: ".concat(getErrorMessage(ex)))}}if("object"!==_typeof(result)||null===result)return{v:_this15.error("expression must yield a supported collection or generic object (type: ".concat(null===result?"null":_typeof(result),")"))};if(result instanceof Array||result instanceof Set)result.forEach((function(val){return options.push({label:String(val),value:val})}));else if(result instanceof Map)result.forEach((function(val,key){return options.push({label:String(key),value:val})}));else{var oType=getToStringTag(result);if("Object"!==oType)return{v:_this15.error("expression must yield a supported collection or generic object (object type: ".concat(oType,")"))};Object.keys(result).forEach((function(key){return options.push({label:key,value:result[key]})}))}}},_i8=1;_i8<len;++_i8)if(_ret=_loop6())return _ret.v;if(-1===index)if(config.autoselect){var curValue=State.getVar(varName),curValueIndex=options.findIndex((function(opt){return sameValueZero(opt.value,curValue)}));index=-1===curValueIndex?0:curValueIndex}else index=0;if("cycle"===this.name){var lastIndex=options.length-1;if(config.once&&index===lastIndex)jQuery(this.output).wikiWithOptions({cleanup:!1,profile:"core"},options[index].label);else{var cycleIndex=index;jQuery(document.createElement("a")).wikiWithOptions({cleanup:!1,profile:"core"},options[index].label).attr("id","".concat(this.name,"-").concat(varId)).addClass("macro-".concat(this.name)).ariaClick({namespace:".macros",role:"button"},this.shadowHandler((function(){var $this=$(this);cycleIndex=(cycleIndex+1)%options.length,State.setVar(varName,options[cycleIndex].value),$this.empty().wikiWithOptions({cleanup:!1,profile:"core"},options[cycleIndex].label),config.once&&cycleIndex===lastIndex&&$this.off().contents().unwrap()}))).appendTo(this.output)}}else{var $select=jQuery(document.createElement("select"));options.forEach((function(opt,i){jQuery(document.createElement("option")).val(i).text(opt.label).appendTo($select)})),$select.attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),tabindex:0}).addClass("macro-".concat(this.name)).val(index).on("change.macros",this.shadowHandler((function(){State.setVar(varName,options[Number(this.value)].value)}))).appendTo(this.output)}State.setVar(varName,options[index].value)}}),jQuery(document).on(":redo",(function(ev){var evTags=ev.detail&&ev.detail.tags||[],selector=0===evTags.length?".".concat("redo-target"):evTags.map((function(tag){return".".concat("redo-target",'[data-do-tags~="').concat(tag,'"]')})).join(", ");triggerEvent(":redo-internal",jQuery(selector),{bubbles:!1,detail:ev.detail})})),Macro.add("do",{tags:null,handler:function(){for(var elTag="span",tags=[],options=this.args.slice();options.length>0;){var option=options.shift();switch(option){case"tag":if(0===options.length)return this.error("tag option missing required tag name(s)");var raw=String(options.shift()).trim();if(""===raw)throw new Error("tag option tag name(s) must be non-empty");tags=String(raw).trim().splitOrEmpty(/\s+/);break;case"element":if(0===options.length)return this.error("element option missing required element tag name");if(""===(elTag=String(options.shift()).trim()))throw new Error("element option tag name must be non-empty");break;default:return this.error("unknown option: ".concat(option))}}var contents=this.payload[0].contents;if(""!==contents.trim()){Config.debug&&this.debugView.modes({block:"span"!==elTag});var $target=jQuery(document.createElement(elTag)).addClass("macro-".concat(this.name," ").concat("redo-target")).attr("data-do-tags",tags.join(" ")).wiki(contents).on(":redo-internal",jQuery.throttle(Engine.DOM_DELAY,this.shadowHandler((function(){var frag=document.createDocumentFragment();new Wikifier(frag,contents),$target.empty().append(frag)})))).appendTo(this.output)}}}),Macro.add("redo",{handler:function(){var failRE=/^(?:do|for)$/,passRE=/^(?:button|link(?:append|prepend|replace)?)$/,closest=this.contextFind((function(ctx){return failRE.test(ctx.name)||passRE.test(ctx.name)}));if(closest&&failRE.test(closest.name))return this.error("must not be used directly within macro <<".concat(closest.name,">>"));var tags=this.args.length>0?String(this.args[0]).trim().splitOrEmpty(/\s+/):[];triggerEvent(":redo",document,{detail:{tags:tags}})}}),Macro.add("done",{skipArgs:!0,tags:null,handler:function(){var contents=this.payload[0].contents.trim();""!==contents&&setTimeout(this.shadowHandler((function(){return $.wiki(contents)})),Engine.DOM_DELAY)}}),Macro.add("for",{skipArgs:!0,tags:null,isRangeRe:new RegExp("^(?:\\S".concat(Patterns.anyChar,"*?\\s+)?range\\s+\\S").concat(Patterns.anyChar,"*?$")),rangeRe:new RegExp("^(?:(?:State\\.(variables|temporary)\\.(".concat(Patterns.identifier,")\\s*,\\s*)?State\\.(variables|temporary)\\.(").concat(Patterns.identifier,")\\s+)?range\\s+(\\S").concat(Patterns.anyChar,"*?)$")),threePartRe:/^([^;]*?)\s*;\s*([^;]*?)\s*;\s*([^;]*?)$/,forInRe:/^\S+\s+in\s+\S+/i,forOfRe:/^\S+\s+of\s+\S+/i,handler:function(){var argsStr=this.args.full.trim(),payload=this.payload[0].contents.replace(/\n$/,"");if(0===argsStr.length)this.self.handleFor.call(this,payload,null,!0,null);else if(this.self.isRangeRe.test(argsStr)){var parts=argsStr.match(this.self.rangeRe);if(null===parts)return this.error("invalid range form syntax, format: [[index ,] value] range collection");this.self.handleForRange.call(this,payload,{type:parts[1],name:parts[2]},{type:parts[3],name:parts[4]},parts[5])}else{var init,condition,post;if(-1===argsStr.indexOf(";")){if(this.self.forInRe.test(argsStr))return this.error("invalid syntax, for…in is not supported; see: for…range");if(this.self.forOfRe.test(argsStr))return this.error("invalid syntax, for…of is not supported; see: for…range");condition=argsStr}else{var _parts=argsStr.match(this.self.threePartRe);if(null===_parts)return this.error("invalid 3-part conditional form syntax, format: [init] ; [condition] ; [post]");init=_parts[1],condition=_parts[2].trim(),post=_parts[3],0===condition.length&&(condition=!0)}this.self.handleFor.call(this,payload,init,condition,post)}},handleFor:function(payload,init,condition,post){var evalJavaScript=Scripting.evalJavaScript,first=!0,safety=Config.macros.maxLoopIterations;Config.debug&&this.debugView.modes({block:!0});try{if(TempState.break=null,init)try{evalJavaScript(init)}catch(ex){return this.error("bad init expression: ".concat(getErrorMessage(ex)))}for(;evalJavaScript(condition);){if(--safety<0)return this.error("exceeded configured maximum loop iterations (".concat(Config.macros.maxLoopIterations,")"));if(new Wikifier(this.output,first?payload.replace(/^\n/,""):payload),first&&(first=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}if(post)try{evalJavaScript(post)}catch(ex){return this.error("bad post expression: ".concat(getErrorMessage(ex)))}}}catch(ex){return this.error("bad conditional expression: ".concat(getErrorMessage(ex)))}finally{TempState.break=null}},handleForRange:function(payload,keyVar,valueVar,rangeExp){var rangeable,first=!0;try{rangeable=this.self.toRangeable(rangeExp)}catch(ex){return this.error(ex.message)}Config.debug&&this.debugView.modes({block:!0});try{for(TempState.break=null;;){var entry=rangeable.next();if(entry.done)break;if(keyVar.name&&(State[keyVar.type][keyVar.name]=entry.key),valueVar.name&&(State[valueVar.type][valueVar.name]=entry.value),new Wikifier(this.output,first?payload.replace(/^\n/,""):payload),first&&(first=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}}}catch(ex){return this.error(getErrorMessage(ex))}finally{TempState.break=null}},toRangeable:function(rangeExp){var collection;try{collection=Scripting.evalJavaScript("{"===rangeExp[0]?"(".concat(rangeExp,")"):rangeExp)}catch(ex){if("object"!==_typeof(ex))throw new Error("bad range expression: ".concat(ex));throw ex.message="bad range expression: ".concat(ex.message),ex}switch(_typeof(collection)){case"number":if(Number.isNaN(collection)||!Number.isFinite(collection))throw new Error("unsupported range expression type: ".concat(stringFrom(collection)));if(!Number.isInteger(collection))throw new Error("unsupported range expression type: floating-point number");if(!Number.isSafeInteger(collection))throw new Error("unsupported range expression type: unsafe integer");return collection<=0?{next:function(){return{done:!0}}}:{end:collection,pos:0,next:function(){if(this.pos<this.end){var key=this.pos++;return{key:key,value:key,done:!1}}return{done:!0}}};case"string":return{list:collection,end:collection.length,pos:0,next:function(){if(this.pos<this.end){var O=charAndPosAt(this.list,this.pos),key=this.pos;return this.pos=O.end+1,{key:key,value:O.char,done:!1}}return{done:!0}}};case"object":if(collection instanceof Array)return{list:collection,end:collection.length,pos:0,next:function(){if(this.pos<this.end){var key=this.pos++;return{key:key,value:this.list[key],done:!1}}return{done:!0}}};if(collection instanceof Set)return{list:collection=Array.from(collection),end:collection.length,pos:0,next:function(){if(this.pos<this.end){var key=this.pos++;return{key:key,value:this.list[key],done:!1}}return{done:!0}}};if(collection instanceof Map){var keys=Array.from(collection.keys());return{keys:keys,list:collection,end:keys.length,pos:0,next:function(){if(this.pos<this.end){var key=this.keys[this.pos++];return{key:key,value:this.list.get(key),done:!1}}return{done:!0}}}}if("Object"===getToStringTag(collection)){var _keys=Object.keys(collection);return{keys:_keys,list:collection,end:_keys.length,pos:0,next:function(){if(this.pos<this.end){var key=this.keys[this.pos++];return{key:key,value:this.list[key],done:!1}}return{done:!0}}}}throw new Error("unsupported range expression type: ".concat(getToStringTag(collection)));default:throw new Error("unsupported range expression type: ".concat(_typeof(collection)))}}}),Macro.add(["break","continue"],{skipArgs:!0,handler:function(){if(!this.contextSome((function(ctx){return"for"===ctx.name})))return this.error("must only be used in conjunction with its parent macro <<for>>");TempState.break="continue"===this.name?1:2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("goto",{handler:function(){return 0===this.args.length?this.error("no passage specified"):(passage="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(passage)?void setTimeout((function(){return Engine.play(passage)}),Engine.DOM_DELAY):this.error('passage "'.concat(passage,'" does not exist')));var passage}}),Macro.add("if",{skipArgs:!0,tags:["elseif","else"],isElseifWsRE:/^\s*if\b/i,isAssignRE:/[^!%&*+\-/<=>?^|]=[^=>]/,isLiteralRE:new RegExp(["(?:\"\"|''|``)",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(?:`(?:\\\\.|[^`\\\\])+`)"].join("|"),"g"),handler:function(){var i;try{var len=this.payload.length,isElseifWsRE=this.self.isElseifWsRE,isAssignRE=this.self.isAssignRE,isLiteralRE=this.self.isLiteralRE;for(i=0;i<len;++i)if("else"===this.payload[i].name){if(this.payload[i].args.raw.length>0)return isElseifWsRE.test(this.payload[i].args.raw)?this.error('whitespace is not allowed between the "else" and "if" in <<elseif>> clause'.concat(i>0?" (#".concat(i,")"):"")):this.error("<<else>> does not accept a conditional expression (perhaps you meant to use <<elseif>>), invalid: ".concat(this.payload[i].args.raw));if(i+1!==len)return this.error("<<else>> must be the final clause")}else{if(0===this.payload[i].args.full.length)return this.error("no conditional expression specified for <<".concat(this.payload[i].name,">> clause").concat(i>0?" (#".concat(i,")"):""));if((Config.debug||Config.enableOptionalDebugging)&&isAssignRE.test(this.payload[i].args.full.replace(isLiteralRE,"")))return this.error("assignment operator found within <<".concat(this.payload[i].name,">> clause").concat(i>0?" (#".concat(i,")"):""," (perhaps you meant to use an equality operator: ==, ===, eq, is), invalid: ").concat(this.payload[i].args.raw))}var evalJavaScript=Scripting.evalJavaScript,success=!1;for(i=0;i<len;++i){if(Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1}),"else"===this.payload[i].name||evalJavaScript(this.payload[i].args.full)){success=!0,new Wikifier(this.output,this.payload[i].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++i;i<len;++i)this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0,invalid:!0});this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!success,invalid:!success})}}catch(ex){return this.error("bad conditional expression in <<".concat(0===i?"if":"elseif",">> clause").concat(i>0?" (#".concat(i,")"):"",": ").concat(getErrorMessage(ex)))}}}),Macro.add("include",{handler:function(){return"display"===this.name&&console.warn("[DEPRECATED] <<".concat(this.name,">> macro is deprecated.")),0===this.args.length?this.error("no passage specified"):(passage="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(passage)?(Config.debug&&this.debugView.modes({block:!0}),passage=Story.get(passage),void(this.args[1]?jQuery(document.createElement(this.args[1])).addClass("".concat(passage.id," macro-").concat(this.name)).attr("data-passage",passage.name).appendTo(this.output):jQuery(this.output)).wiki(passage.processText())):this.error('passage "'.concat(passage,'" does not exist')));var passage}}),Macro.add(["linkappend","linkprepend","linkreplace"],{isAsync:!0,tags:null,t8nRe:/^(?:transition|t8n)$/,handler:function(){var _this16=this;if(0===this.args.length)return this.error("no link text specified");var $link=jQuery(document.createElement("a")),$insert=jQuery(document.createElement("span")),transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]);$link.wikiWithOptions({cleanup:!1,profile:"core"},this.args[0]).addClass("link-internal macro-".concat(this.name)).ariaClick({namespace:".macros",one:!0},this.shadowHandler((function(){if("linkreplace"===_this16.name?$link.remove():$link.wrap('<span class="macro-'.concat(_this16.name,'"></span>')).replaceWith((function(){return $link.html()})),""!==_this16.payload[0].contents){var frag=document.createDocumentFragment();new Wikifier(frag,_this16.payload[0].contents,{cleanup:!1}),$insert.append(frag)}transition&&setTimeout((function(){return $insert.removeClass("macro-".concat(_this16.name,"-in"))}),Engine.DOM_DELAY)}))).appendTo(this.output),$insert.addClass("macro-".concat(this.name,"-insert")),transition&&$insert.addClass("macro-".concat(this.name,"-in")),"linkprepend"===this.name?$insert.insertBefore($link):$insert.insertAfter($link)}}),Macro.add("nobr",{skipArgs:!0,tags:null,handler:function(){new Wikifier(this.output,this.payload[0].contents.replace(/^\n+|\n+$/g,"").replace(/\n+/g," "))}}),Macro.add(["numberbox","textbox"],{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("default value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));Config.debug&&this.debugView.modes({block:!0});var asNumber="numberbox"===this.name,defaultValue=asNumber?Number(this.args[1]):this.args[1];if(asNumber&&Number.isNaN(defaultValue))return this.error('default value "'.concat(this.args[1],'" is neither a number nor can it be parsed into a number'));var passage,varId=createSlug(varName),el=document.createElement("input"),autofocus=!1;this.args.length>3?(passage=this.args[2],autofocus="autofocus"===this.args[3]):this.args.length>2&&("autofocus"===this.args[2]?autofocus=!0:passage=this.args[2]),"object"===_typeof(passage)&&(passage=passage.link),jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),type:asNumber?"number":"text",inputmode:asNumber?"decimal":"text",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.shadowHandler((function(){State.setVar(varName,asNumber?Number(this.value):this.value)}))).on("keypress.macros",this.shadowHandler((function(ev){13===ev.which&&(ev.preventDefault(),State.setVar(varName,asNumber?Number(this.value):this.value),null!=passage&&Engine.play(passage))}))).appendTo(this.output),asNumber&&(el.step="any"),State.setVar(varName,defaultValue),el.value=defaultValue,autofocus&&(el.setAttribute("autofocus","autofocus"),Engine.isPlaying()?jQuery(document).one(":passageend",(function(){setTimeout((function(){return el.focus()}),Engine.DOM_DELAY)})):setTimeout((function(){return el.focus()}),Engine.DOM_DELAY))}}),Macro.add(["print","=","-"],{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{var result=stringFrom(Scripting.evalJavaScript(this.args.full));null!==result&&new Wikifier(this.output,"-"===this.name?encodeEntities(result):result)}catch(ex){return this.error("bad evaluation: ".concat(getErrorMessage(ex)))}}}),Macro.add("radiobutton",{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("checked value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=createSlug(varName),checkValue=this.args[1],el=document.createElement("input");switch(Object.hasOwn(TempState,this.name)||(TempState[this.name]={}),Object.hasOwn(TempState[this.name],varId)||(TempState[this.name][varId]=0),jQuery(el).attr({id:"".concat(this.name,"-").concat(varId,"-").concat(TempState[this.name][varId]++),name:"".concat(this.name,"-").concat(varId),type:"radio",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.shadowHandler((function(){this.checked&&State.setVar(varName,checkValue)}))).appendTo(this.output),this.args[2]){case"autocheck":State.getVar(varName)===checkValue&&(el.checked=!0);break;case"checked":el.checked=!0,State.setVar(varName,checkValue)}}}),Macro.add("remove",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));$targets.remove(),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeclass",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));this.args.length>1?$targets.removeClass(this.args[1].trim()):$targets.removeClass(),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("repeat",{isAsync:!0,tags:null,timers:new Set,t8nRe:/^(?:transition|t8n)$/,handler:function(){var delay,_this17=this;if(0===this.args.length)return this.error("no time value specified");try{delay=Math.max(Engine.DOM_DELAY,cssTimeToMS(this.args[0]))}catch(ex){return this.error(ex.message)}Config.debug&&this.debugView.modes({block:!0});var transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]),$wrapper=jQuery(document.createElement("span")).addClass("macro-".concat(this.name)).appendTo(this.output);this.self.registerInterval(this.shadowHandler((function(){var frag=document.createDocumentFragment();new Wikifier(frag,_this17.payload[0].contents,{cleanup:!1});var $output=$wrapper;transition&&($output=jQuery(document.createElement("span")).addClass("macro-repeat-insert macro-repeat-in").appendTo($output)),$output.append(frag),transition&&setTimeout((function(){return $output.removeClass("macro-repeat-in")}),Engine.DOM_DELAY)})),delay)},registerInterval:function(callback,delay){var _this18=this;if("function"!=typeof callback)throw new TypeError("callback parameter must be a function");var passage=State.passage,turn=State.turns,timers=this.timers,timerId=null;timerId=setInterval((function(){if(State.passage!==passage||State.turns!==turn)return clearInterval(timerId),void timers.delete(timerId);var timerIdCache;try{TempState.break=null,Object.hasOwn(TempState,"repeatTimerId")&&(timerIdCache=TempState.repeatTimerId),TempState.repeatTimerId=timerId,callback.call(_this18)}finally{void 0!==timerIdCache?TempState.repeatTimerId=timerIdCache:delete TempState.repeatTimerId,TempState.break=null}}),delay),timers.add(timerId),1===timers.size&&jQuery(document).one(":passageinit",(function(){timers.forEach((function(timerId){return clearInterval(timerId)})),timers.clear()}))}}),Macro.add("stop",{skipArgs:!0,handler:function(){if(!Object.hasOwn(TempState,"repeatTimerId"))return this.error("must only be used in conjunction with its parent macro <<repeat>>");var timers=Macro.get("repeat").timers,timerId=TempState.repeatTimerId;clearInterval(timerId),timers.delete(timerId),TempState.break=2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("script",{tags:null,handler:function(){var evalScript;switch(this.args.length>0?String(this.args[0]).toLowerCase():"javascript"){case"javascript":evalScript=Scripting.evalJavaScript;break;case"twinescript":evalScript=Scripting.evalTwineScript;break;default:return this.error('unknown language "'.concat(this.args[0],'"'))}var output=document.createDocumentFragment();try{evalScript(this.payload[0].contents,output)}catch(ex){return this.error("bad evaluation: ".concat(getErrorMessage(ex)))}Config.debug&&this.createDebugView(),output.hasChildNodes()&&this.output.appendChild(output)}}),Macro.add("set",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat(getErrorMessage(ex)))}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("run","set"),Macro.add("silent",{skipArgs:!0,tags:null,handler:function(){"silently"===this.name&&console.warn("[DEPRECATED] <<".concat(this.name,">> macro is deprecated."));var frag=document.createDocumentFragment();if(new Wikifier(frag,this.payload[0].contents.trim()),Config.debug)this.debugView.modes({block:!0,hidden:!0}),this.output.appendChild(frag);else{var errList=Array.from(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent}));if(errList.length>0)return this.error("error".concat(1===errList.length?"":"s"," within contents (").concat(errList.join("; "),")"))}}}),Macro.add("switch",{skipArgs:["switch"],tags:["case","default"],handler:function(){if(0===this.args.full.length)return this.error("no expression specified");var i,result,len=this.payload.length;if(1===len)return this.error("no cases specified");for(i=1;i<len;++i)if("default"===this.payload[i].name){if(this.payload[i].args.length>0)return this.error("<<default>> does not accept values, invalid: ".concat(this.payload[i].args.raw));if(i+1!==len)return this.error("<<default>> must be the final case")}else if(0===this.payload[i].args.length)return this.error("no value(s) specified for <<".concat(this.payload[i].name,">> (#").concat(i,")"));try{result=Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat(getErrorMessage(ex)))}var debugView=this.debugView,success=!1;for(Config.debug&&debugView.modes({nonvoid:!1,hidden:!0}),i=1;i<len;++i){if(Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1}),"default"===this.payload[i].name||this.payload[i].args.some((function(val){return val===result}))){success=!0,new Wikifier(this.output,this.payload[i].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++i;i<len;++i)this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0,invalid:!0});debugView.modes({nonvoid:!1,hidden:!0,invalid:!success}),this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0,invalid:!success})}}}),Macro.add("textarea",{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("default value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));Config.debug&&this.debugView.modes({block:!0});var varId=createSlug(varName),defaultValue=this.args[1],autofocus="autofocus"===this.args[2],el=document.createElement("textarea");jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),rows:4,tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.shadowHandler((function(){State.setVar(varName,this.value)}))).appendTo(this.output),State.setVar(varName,defaultValue),el.textContent=defaultValue,autofocus&&(el.setAttribute("autofocus","autofocus"),Engine.isPlaying()?jQuery(document).one(":passageend",(function(){setTimeout((function(){return el.focus()}),Engine.DOM_DELAY)})):setTimeout((function(){return el.focus()}),Engine.DOM_DELAY))}}),Macro.add("timed",{isAsync:!0,tags:["next"],timers:new Set,t8nRe:/^(?:transition|t8n)$/,handler:function(){if(0===this.args.length)return this.error("no time value specified in <<timed>>");var i,items=[];try{items.push({name:this.name,source:this.source,delay:Math.max(Engine.DOM_DELAY,cssTimeToMS(this.args[0])),content:this.payload[0].contents})}catch(ex){return this.error("".concat(ex.message," in <<timed>>"))}if(this.payload.length>1)try{var len;for(i=1,len=this.payload.length;i<len;++i)items.push({name:this.payload[i].name,source:this.payload[i].source,delay:0===this.payload[i].args.length?items[items.length-1].delay:Math.max(Engine.DOM_DELAY,cssTimeToMS(this.payload[i].args[0])),content:this.payload[i].contents})}catch(ex){return this.error("".concat(ex.message," in <<next>> (#").concat(i,")"))}Config.debug&&this.debugView.modes({block:!0});var transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]),$wrapper=jQuery(document.createElement("span")).addClass("macro-".concat(this.name)).appendTo(this.output);this.self.registerTimeout(this.shadowHandler((function(item){var frag=document.createDocumentFragment();new Wikifier(frag,item.content,{cleanup:!1});var $output=$wrapper;Config.debug&&"next"===item.name&&($output=jQuery(new DebugView($output[0],"macro",item.name,item.source).output)),transition&&($output=jQuery(document.createElement("span")).addClass("macro-timed-insert macro-timed-in").appendTo($output)),$output.append(frag),transition&&setTimeout((function(){return $output.removeClass("macro-timed-in")}),Engine.DOM_DELAY)})),items)},registerTimeout:function(callback,items){if("function"!=typeof callback)throw new TypeError("callback parameter must be a function");var passage=State.passage,turn=State.turns,timers=this.timers,timerId=null,nextItem=items.shift();timerId=setTimeout((function worker(){if(timers.delete(timerId),State.passage===passage&&State.turns===turn){var curItem=nextItem;null!=(nextItem=items.shift())&&(timerId=setTimeout(worker,nextItem.delay),timers.add(timerId)),callback.call(this,curItem)}}),nextItem.delay),timers.add(timerId),1===timers.size&&jQuery(document).one(":passageinit",(function(){timers.forEach((function(timerId){return clearTimeout(timerId)})),timers.clear()}))}}),Macro.add("type",{isAsync:!0,tags:null,typeId:0,handler:function(){if(0===this.args.length)return this.error("no speed specified");var cursor,speed=cssTimeToMS(this.args[0]);if(speed<0)return this.error("speed time value must be non-negative (received: ".concat(this.args[0],")"));for(var elClass="",elId="",elTag="div",skipKey=Config.macros.typeSkipKey,start=400,options=this.args.slice(1);options.length>0;){var option=options.shift();switch(option){case"class":if(0===options.length)return this.error("class option missing required class name(s)");if(""===(elClass=options.shift()))throw new Error('class option class name(s) must be non-empty (received: "")');break;case"element":if(0===options.length)return this.error("element option missing required element tag name");if(""===(elTag=options.shift()))throw new Error('element option tag name must be non-empty (received: "")');break;case"id":if(0===options.length)return this.error("id option missing required ID");if(""===(elId=options.shift()))throw new Error('id option ID must be non-empty (received: "")');break;case"keep":cursor="keep";break;case"none":cursor="none";break;case"skipkey":if(0===options.length)return this.error("skipkey option missing required key value");if(""===(skipKey=options.shift()))throw new Error('skipkey option key value must be non-empty (received: "")');break;case"start":if(0===options.length)return this.error("start option missing required time value");var value=options.shift();if((start=cssTimeToMS(value))<0)throw new Error("start option time value must be non-negative (received: ".concat(value,")"));break;default:return this.error("unknown option: ".concat(option))}}var contents=this.payload[0].contents;if(""!==contents.trim()){Config.debug&&this.debugView.modes({block:!0});var className="macro-".concat(this.name),namespace=".".concat(className),$target=jQuery(document.createElement(elTag)).addClass("".concat(className," ").concat(className,"-target")).appendTo(this.output);TempState.macroTypeQueue||(TempState.macroTypeQueue=[],$(document).off(namespace).one(":passageinit".concat(namespace),(function(){return $(document).off(namespace)})));var startTyping=0===TempState.macroTypeQueue.length,selfId=++this.self.typeId,allowCleanup=this.self.allowCleanup;TempState.macroTypeQueue.push({id:selfId,handler:this.shadowHandler((function(){var $wrapper=jQuery(document.createElement(elTag)).addClass(className);elId&&$wrapper.attr("id",elId),elClass&&$wrapper.addClass(elClass),new Wikifier($wrapper,contents,allowCleanup(elTag)?undefined:{cleanup:!1});var passage=State.passage,turn=State.turns;if(0===speed||!Config.macros.typeVisitedPassages&&State.passages.slice(0,-1).some((function(title){return title===passage}))||$wrapper.find(".error").length>0)return $target.replaceWith($wrapper),TempState.macroTypeQueue.shift(),void(TempState.macroTypeQueue.length>0&&TempState.macroTypeQueue.first().handler());var typer=new NodeTyper({targetNode:$wrapper.get(0),classNames:"none"===cursor?null:"".concat(className,"-cursor")});$target.replaceWith($wrapper);var keydownAndNS="keydown".concat(namespace),typingStopAndNS="".concat(":typingstop").concat(namespace);$(document).off(keydownAndNS).on(keydownAndNS,(function(ev){scrubEventKey(ev.key)!==skipKey||ev.target!==document.body&&ev.target!==document.documentElement||(ev.preventDefault(),$(document).off(keydownAndNS),typer.finish())})).one(typingStopAndNS,(function(){TempState.macroTypeQueue&&(0===TempState.macroTypeQueue.length?triggerEvent(":typingcomplete"):TempState.macroTypeQueue.first().handler())}));var typeNode=function(){var typeNodeMember=function(typeIntervalId){State.passage===passage&&State.turns===turn&&typer.type()||(typeIntervalId&&clearInterval(typeIntervalId),TempState.macroTypeQueue&&TempState.macroTypeQueue.length>0&&TempState.macroTypeQueue.first().id===selfId&&TempState.macroTypeQueue.shift(),triggerEvent(":typingstop",$wrapper),$wrapper.addClass("".concat(className,"-done")),"keep"===cursor&&$wrapper.addClass("".concat(className,"-cursor")))};triggerEvent(":typingstart",$wrapper),typeNodeMember();var typeNodeMemberId=setInterval((function(){return typeNodeMember(typeNodeMemberId)}),speed)};start?setTimeout(typeNode,start):typeNode()}))}),startTyping&&(Engine.isPlaying()?$(document).one(":passageend".concat(namespace),(function(){return TempState.macroTypeQueue.first().handler()})):TempState.macroTypeQueue.first().handler())}},allowCleanup:function(tagName){switch(tagName.toUpperCase()){case"ARTICLE":case"DIV":case"FOOTER":case"FORM":case"HEADER":case"MAIN":case"SECTION":return!0}return!1}}),Macro.add("unset",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no story/temporary variable list specified");try{var unsetExp=this.args.full.replace(/[,;\s]*((?:State\.(?:variables|temporary)|setup)\.)/g,(function(_,p1){return"; delete ".concat(p1)})).replace(/^; /,"");Scripting.evalJavaScript(unsetExp)}catch(ex){return this.error("bad evaluation: ".concat(getErrorMessage(ex)))}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("widget",{tags:null,handler:function(){if(0===this.args.length)return this.error("no widget name specified");var widgetCode,widgetName=this.args[0],isNonVoid=this.args.length>1&&"container"===this.args[1];if(Macro.has(widgetName))return this.error("cannot clobber existing ".concat(Macro.get(widgetName).isWidget?"widget":"macro",' "').concat(widgetName,'"'));try{var widgetDef={isWidget:!0,handler:(widgetCode=this.payload[0].contents,function(){var shadowStore={};Object.hasOwn(State.temporary,"args")&&(shadowStore._args=State.temporary.args),State.temporary.args=Array.from(this.args),State.temporary.args.raw=this.args.raw,State.temporary.args.full=this.args.full,State.temporary.args.name=this.name,this.addShadow("_args"),isNonVoid&&(Object.hasOwn(State.temporary,"contents")&&(shadowStore._contents=State.temporary.contents),State.temporary.contents=this.payload[0].contents,this.addShadow("_contents")),Object.hasOwn(State.variables,"args")&&(shadowStore.$args=State.variables.args),State.variables.args=State.temporary.args,this.addShadow("$args");try{var resFrag=document.createDocumentFragment(),errList=[];if(new Wikifier(resFrag,widgetCode),Array.from(resFrag.querySelectorAll(".error")).forEach((function(errEl){errList.push(errEl.textContent)})),0!==errList.length)return this.error("error".concat(errList.length>1?"s":""," within widget code (").concat(errList.join("; "),")"));this.output.appendChild(resFrag)}catch(ex){return this.error("cannot execute widget: ".concat(ex.message))}finally{Object.hasOwn(shadowStore,"_args")?State.temporary.args=shadowStore._args:delete State.temporary.args,isNonVoid&&(Object.hasOwn(shadowStore,"_contents")?State.temporary.contents=shadowStore._contents:delete State.temporary.contents),Object.hasOwn(shadowStore,"$args")?State.variables.args=shadowStore.$args:delete State.variables.args}})};isNonVoid&&(widgetDef.tags=[]),Macro.add(widgetName,widgetDef),Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error('cannot create widget macro "'.concat(widgetName,'": ').concat(ex.message))}}}),Macro.add("silently","silent"),Macro.add("actions",{handler:function(){console.warn("[DEPRECATED] <<".concat(this.name,">> macro is deprecated."));for(var $list=jQuery(document.createElement("ul")).addClass(this.name).appendTo(this.output),i=0;i<this.args.length;++i){var passage=void 0,text=void 0,$image=void 0,setFn=void 0;if("object"===_typeof(this.args[i])?this.args[i].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[i].source),Object.hasOwn(this.args[i],"passage")&&$image.attr("data-passage",this.args[i].passage),Object.hasOwn(this.args[i],"title")&&$image.attr("title",this.args[i].title),Object.hasOwn(this.args[i],"align")&&$image.attr("align",this.args[i].align),passage=this.args[i].link,setFn=this.args[i].setFn):(text=this.args[i].text,passage=this.args[i].link,setFn=this.args[i].setFn):text=passage=this.args[i],!(Object.hasOwn(State.variables,"#actions")&&Object.hasOwn(State.variables["#actions"],passage)&&State.variables["#actions"][passage])){var $link=jQuery(Wikifier.createInternalLink(jQuery(document.createElement("li")).appendTo($list),passage,null,function(passage,fn){return function(){Object.hasOwn(State.variables,"#actions")||(State.variables["#actions"]={}),State.variables["#actions"][passage]=!0,"function"==typeof fn&&fn()}}(passage,setFn))).addClass("macro-".concat(this.name)).append($image||document.createTextNode(text));$image&&$link.addClass("link-image")}}}}),Macro.add("choice",{handler:function(){if(console.warn("[DEPRECATED] <<".concat(this.name,">> macro is deprecated.")),0===this.args.length)return this.error("no passage specified");var passage,text,$image,setFn,$link,choiceId=State.passage;if(1===this.args.length?"object"===_typeof(this.args[0])?this.args[0].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[0].source),Object.hasOwn(this.args[0],"passage")&&$image.attr("data-passage",this.args[0].passage),Object.hasOwn(this.args[0],"title")&&$image.attr("title",this.args[0].title),Object.hasOwn(this.args[0],"align")&&$image.attr("align",this.args[0].align),passage=this.args[0].link,setFn=this.args[0].setFn):(text=this.args[0].text,passage=this.args[0].link,setFn=this.args[0].setFn):text=passage=this.args[0]:(passage=this.args[0],text=this.args[1]),Object.hasOwn(State.variables,"#choice")&&Object.hasOwn(State.variables["#choice"],choiceId)&&State.variables["#choice"][choiceId])return $link=jQuery(document.createElement("span")).addClass("link-disabled macro-".concat(this.name)).attr("tabindex",-1).append($image||document.createTextNode(text)).appendTo(this.output),void($image&&$link.addClass("link-image"));$link=jQuery(Wikifier.createInternalLink(this.output,passage,null,(function(){Object.hasOwn(State.variables,"#choice")||(State.variables["#choice"]={}),State.variables["#choice"][choiceId]=!0,"function"==typeof setFn&&setFn()}))).addClass("macro-".concat(this.name)).append($image||document.createTextNode(text)),$image&&$link.addClass("link-image")}});var Dialog=function(){var DEFAULT_TOP=50,$overlay=null,$dialog=null,$title=null,$body=null,lastActive=null,observer=null,onCloseFn=null,scrollbarWidth=0;function calcInset(top){var $window=jQuery(window),inset={left:"",right:"",top:"",bottom:""};$dialog.css(inset);var horzSpace=$window.width()-$dialog.outerWidth(!0)-1,vertSpace=$window.height()-$dialog.outerHeight(!0)-1;if(horzSpace<=20+scrollbarWidth&&(vertSpace-=scrollbarWidth),vertSpace<=20+scrollbarWidth&&(horzSpace-=scrollbarWidth),inset.left=inset.right=horzSpace<=20?"10px":(horzSpace/2|0)+"px",vertSpace<=20)inset.top=inset.bottom="10px";else{var vertPos=vertSpace/2|0;inset.top=vertPos>top?top+"px":inset.bottom=vertPos+"px"}return inset}function onResize(top){"block"===$dialog.css("display")&&$dialog.css(calcInset(null!=top?top:DEFAULT_TOP))}function close(ev){if(triggerEvent(":dialogclosing",$body),jQuery(document).off(".dialog-close"),observer?(observer.disconnect(),observer=null):$body.off(".dialog-resize"),jQuery(window).off(".dialog-resize"),$dialog.removeClass("open").css({left:"",right:"",top:"",bottom:""}),jQuery("#ui-bar,#story").find("[tabindex=-2]").removeAttr("aria-hidden").attr("tabindex",0),jQuery("body>[tabindex=-3]").removeAttr("aria-hidden").removeAttr("tabindex"),$overlay.removeClass("open"),jQuery(document.documentElement).removeAttr("data-dialog"),$title.empty(),$body.empty().removeClass(),lastActive&&(lastActive.focus(),lastActive=null),onCloseFn)try{onCloseFn(ev)}finally{onCloseFn=null}return triggerEvent(":dialogclose",$body),triggerEvent(":dialogclosed",$body),Dialog}function create(title,classNames){return $title.empty().append((null!=title?String(title):"")||" "),$body.empty().removeClass(),null!=classNames&&$body.addClass(classNames),Dialog}function getBody(){return $body.get(0)}function isOpen(classNames){return $dialog.hasClass("open")&&(!classNames||classNames.splitOrEmpty(/\s+/).every((function(cn){return $body.hasClass(cn)})))}function wiki(){var _$body2;return(_$body2=$body).wiki.apply(_$body2,arguments),Dialog}return Object.preventExtensions(Object.create(null,{append:{value:function(){var _$body;return(_$body=$body).append.apply(_$body,arguments),Dialog}},body:{value:getBody},close:{value:close},create:{value:create},empty:{value:function(){return $body.empty(),Dialog}},init:{value:function(){if(!document.getElementById("ui-dialog")){scrollbarWidth=function(){var calcWidth;try{var inner=document.createElement("p");inner.style.width="100%",inner.style.height="200px";var outer=document.createElement("div");outer.style.position="absolute",outer.style.left="0",outer.style.top="0",outer.style.width="100px",outer.style.height="100px",outer.style.visibility="hidden",outer.style.overflow="hidden",outer.appendChild(inner),document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="auto";var w2=inner.offsetWidth;w1===w2&&(w2=outer.clientWidth),document.body.removeChild(outer),calcWidth=w1-w2}catch(ex){}return calcWidth||17}();var $elems=jQuery(document.createDocumentFragment()).append('<div id="ui-overlay" class="ui-close"></div><div id="ui-dialog" tabindex="0" role="dialog" aria-labelledby="ui-dialog-title" aria-modal="true"><div id="ui-dialog-titlebar"><h1 id="ui-dialog-title"></h1>'+'<button id="ui-dialog-close" class="ui-close" tabindex="0" aria-label="'.concat(L10n.get("textClose"),'"></button>')+'</div><div id="ui-dialog-body"></div></div>');$overlay=jQuery($elems.find("#ui-overlay").get(0)),$dialog=jQuery($elems.find("#ui-dialog").get(0)),$title=jQuery($elems.find("#ui-dialog-title").get(0)),$body=jQuery($elems.find("#ui-dialog-body").get(0)),$elems.insertBefore("body>script#script-sugarcube")}}},isOpen:{value:isOpen},open:{value:function(options,onClose){var top=Object.assign({top:DEFAULT_TOP},options).top;if(null!=onClose){var closeType=getTypeOf(onClose);if("function"!==closeType)throw new TypeError("Dialog.open onClose parameter must be a function (received: ".concat(closeType,")"));onCloseFn=onClose}else onCloseFn=null;triggerEvent(":dialogopening",$body),isOpen()||(lastActive=getActiveElement()),jQuery(document.documentElement).attr("data-dialog","open"),$overlay.addClass("open"),jQuery("body>:not(script,#store-area,tw-storydata,#ui-bar,#ui-overlay,#ui-dialog)").attr("tabindex",-3).attr("aria-hidden",!0),jQuery("#ui-bar,#story").find("[tabindex]:not([tabindex^=-])").attr("tabindex",-2).attr("aria-hidden",!0);var resizeHandler=jQuery.throttle(40,(function(){return onResize(top)}));return $body.imagesLoaded().always(resizeHandler),$dialog.css(calcInset(top)).addClass("open").focus(),jQuery(window).off(".dialog-resize").on("resize.dialog-resize",resizeHandler),Has.mutationObserver?(observer=new MutationObserver((function(mutations){for(var i=0;i<mutations.length;++i)if("childList"===mutations[i].type){$body.imagesLoaded().always(resizeHandler),resizeHandler();break}}))).observe(getBody(),{childList:!0,subtree:!0}):$body.off(".dialog-resize").on("DOMNodeInserted.dialog-resize DOMNodeRemoved.dialog-resize",(function(){$body.imagesLoaded().always(resizeHandler),resizeHandler()})),jQuery(document).off(".dialog-close").one("click.dialog-close",".ui-close",(function(ev){close(ev)})).one("keypress.dialog-close",".ui-close",(function(ev){13!==ev.which&&32!==ev.which||triggerEvent("click",this)})),triggerEvent(":dialogopen",$body),triggerEvent(":dialogopened",$body),Dialog}},resize:{value:function(options){return onResize("object"===_typeof(options)?options.top:undefined)}},wiki:{value:wiki},wikiPassage:{value:function(name){return wiki(Story.get(name).processText())}},setup:{value:function(title,classNames){return console.warn("[DEPRECATED] Dialog.setup() is deprecated."),create(title,classNames),getBody()}}}))}(),Engine=function(){var States=enumFrom({Init:"init",Idle:"idle",Playing:"playing",Rendering:"rendering"}),DOM_DELAY=40,_initDebugViews=[],_state=States.Init,_lastPlay=null;function engineGo(offset){var succeeded=State.go(offset);return succeeded&&engineShow(),succeeded}function engineShow(){return enginePlay(State.passage,!0)}function enginePlay(title,noHistory){if(_state===States.Init)return!1;var passageReadyOutput,passageDoneOutput,passageTitle=title;if(_state=States.Playing,TempState={},State.clearTemporary(),"function"==typeof Config.navigation.override)try{var overrideTitle=Config.navigation.override(passageTitle);overrideTitle&&(passageTitle=overrideTitle)}catch(ex){}var passage=Story.get(passageTitle);if(jQuery.event.trigger({passage:passage,type:":passageinit",detail:{passage:passage}}),Object.keys(prehistory).forEach((function(task){"function"==typeof prehistory[task]&&prehistory[task].call(passage,task)})),noHistory||State.create(passage.name),document.body.className&&(document.body.className=""),_lastPlay=now(),Object.keys(predisplay).forEach((function(task){"function"==typeof predisplay[task]&&predisplay[task].call(passage,task)})),Story.has("PassageReady"))try{passageReadyOutput=Wikifier.wikifyEval(Story.get("PassageReady").text)}catch(ex){console.error(ex),Alert.error("PassageReady",ex.message)}_state=States.Rendering;var dataTags=passage.tags.length>0?passage.tags.join(" "):null,passageEl=document.createElement("div");jQuery(passageEl).attr({id:passage.id,"data-passage":passage.name,"data-tags":dataTags}).addClass("passage passage-in ".concat(passage.className)),jQuery(document.body).attr("data-tags",dataTags).addClass(passage.className),jQuery(document.documentElement).attr("data-tags",dataTags),jQuery.event.trigger({content:passageEl,passage:passage,type:":passagestart",detail:{content:passageEl,passage:passage}}),Object.keys(prerender).forEach((function(task){"function"==typeof prerender[task]&&prerender[task].call(passage,passageEl,task)})),Story.has("PassageHeader")&&new Wikifier(passageEl,Story.get("PassageHeader").processText()),passageEl.appendChild(passage.render()),Story.has("PassageFooter")&&new Wikifier(passageEl,Story.get("PassageFooter").processText()),jQuery.event.trigger({content:passageEl,passage:passage,type:":passagerender",detail:{content:passageEl,passage:passage}}),Object.keys(postrender).forEach((function(task){"function"==typeof postrender[task]&&postrender[task].call(passage,passageEl,task)}));var debugView,containerEl=document.getElementById("passages");if(containerEl.hasChildNodes()&&("number"==typeof Config.passages.transitionOut||"string"==typeof Config.passages.transitionOut&&""!==Config.passages.transitionOut&&Has.transitionEndEvent?Array.from(containerEl.childNodes).forEach((function(outgoing){var $outgoing=jQuery(outgoing);if(outgoing.nodeType===Node.ELEMENT_NODE&&$outgoing.hasClass("passage")){if($outgoing.hasClass("passage-out"))return;$outgoing.attr({id:"out-".concat($outgoing.attr("id")),"aria-hidden":"true","aria-live":"off"}).addClass("passage-out"),"string"==typeof Config.passages.transitionOut?$outgoing.on(Has.transitionEndEvent,(function(ev){ev.originalEvent.propertyName===Config.passages.transitionOut&&$outgoing.remove()})):setTimeout((function(){return $outgoing.remove()}),Math.max(DOM_DELAY,Config.passages.transitionOut))}else $outgoing.remove()})):jQuery(containerEl).empty()),jQuery(passageEl).appendTo(containerEl),setTimeout((function(){return jQuery(passageEl).removeClass("passage-in")}),DOM_DELAY/2),window.scroll(0,0),_state=States.Playing,Story.has("PassageDone"))try{passageDoneOutput=Wikifier.wikifyEval(Story.get("PassageDone").text)}catch(ex){console.error(ex),Alert.error("PassageDone",ex.message)}(jQuery.event.trigger({content:passageEl,passage:passage,type:":passagedisplay",detail:{content:passageEl,passage:passage}}),Object.keys(postdisplay).forEach((function(task){"function"==typeof postdisplay[task]&&postdisplay[task].call(passage,task)})),UI.update(),Config.debug)&&(null!=passageReadyOutput&&((debugView=new DebugView(document.createDocumentFragment(),"special","PassageReady","PassageReady")).modes({hidden:!0}),debugView.append(passageReadyOutput),jQuery(passageEl).prepend(debugView.output)),null!=passageDoneOutput&&((debugView=new DebugView(document.createDocumentFragment(),"special","PassageDone","PassageDone")).modes({hidden:!0}),debugView.append(passageDoneOutput),jQuery(passageEl).append(debugView.output)),1===State.turns&&_initDebugViews.length>0&&jQuery(passageEl).prepend(_initDebugViews));return jQuery("#story").find("a,link,button,input,select,textarea").not("[tabindex]").attr("tabindex",0),State.turns>1&&Save.browser.auto.isEnabled()&&Save.browser.auto.save(),jQuery.event.trigger({content:passageEl,passage:passage,type:":passageend",detail:{content:passageEl,passage:passage}}),_state=States.Idle,_lastPlay=now(),passageEl}return Object.preventExtensions(Object.create(null,{States:{value:States},DOM_DELAY:{get:function(){return DOM_DELAY}},init:{value:function(){if(_state===States.Init){jQuery("#init-no-js,#init-lacking").remove();var $main=jQuery('<div id="story" role="main"></div>'),markup=Story.has("StoryInterface")&&Story.get("StoryInterface").text.trim();if(markup){if(Config.ui.updateStoryElements=!1,UIBar.destroy(),jQuery(document.head).find("#style-core-display").remove(),$main.append(markup),$main.find("#story").length>0)throw new Error('element with ID "story" found within "StoryInterface" special passage');var $passages=$main.find("#passages");if(0===$passages.length)throw new Error('no element with ID "passages" found within "StoryInterface" special passage');$passages.empty().not("[aria-live]").attr("aria-live","polite").end();var $dataInitPassages=$main.find("[data-init-passage]"),$dataPassages=$main.find("[data-passage]");$dataInitPassages.each((function(i,el){if("passages"===el.id)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' id="passages"> must not contain a "data-init-passage" content attribute'));var passage=el.getAttribute("data-init-passage").trim();if(el.hasAttribute("data-passage"))throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-init-passage="').concat(passage,'"> must not contain a "data-passage" content attribute'));if(null!==el.firstElementChild)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-init-passage="').concat(passage,'"> contains child elements'));Story.has(passage)&&jQuery(document).one(":uiupdate".concat(".engine"),(function(){var frag=document.createDocumentFragment();new Wikifier(frag,Story.get(passage).processText().trim()),jQuery(el).empty().append(frag)}))})),$dataPassages.each((function(i,el){if("passages"===el.id)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' id="passages"> must not contain a "data-passage" content attribute'));var passage=el.getAttribute("data-passage").trim();if(null!==el.firstElementChild)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-passage="').concat(passage,'"> contains child elements'));Story.has(passage)&&jQuery(document).on(":uiupdate".concat(".engine"),(function(){var frag=document.createDocumentFragment();new Wikifier(frag,Story.get(passage).processText().trim()),jQuery(el).empty().append(frag)}))}))}else $main.append('<div id="passages" aria-live="polite"></div>');$main.insertBefore("body>script#script-sugarcube")}}},runUserScripts:{value:function(){var storyStyle;_state===States.Init&&(storyStyle=document.createElement("style"),new StyleWrapper(storyStyle).add(Story.getStyles().map((function(style){return style.text.trim()})).join("\n")),jQuery(storyStyle).appendTo(document.head).attr({id:"style-story",type:"text/css"}),Story.getScripts().forEach((function(script){try{Scripting.evalJavaScript(script.text)}catch(ex){console.error(ex),Alert.error(script.name,getErrorMessage(ex))}})),Story.getWidgets().forEach((function(widget){try{Wikifier.wikifyEval(widget.processText())}catch(ex){console.error(ex),Alert.error(widget.name,getErrorMessage(ex))}})))}},runUserInit:{value:function(){if(_state===States.Init&&(Story.getInits().forEach((function(passage){try{var debugBuffer=Wikifier.wikifyEval(passage.text);if(Config.debug){var debugView=new DebugView(document.createDocumentFragment(),"special","".concat(passage.name," [init-tagged]"),"".concat(passage.name," [init-tagged]"));debugView.modes({hidden:!0}),debugView.append(debugBuffer),_initDebugViews.push(debugView.output)}}catch(ex){console.error(ex),Alert.error("".concat(passage.name," [init-tagged]"),getErrorMessage(ex))}})),Story.has("StoryInit")))try{var debugBuffer=Wikifier.wikifyEval(Story.get("StoryInit").text);if(Config.debug){var debugView=new DebugView(document.createDocumentFragment(),"special","StoryInit","StoryInit");debugView.modes({hidden:!0}),debugView.append(debugBuffer),_initDebugViews.push(debugView.output)}}catch(ex){console.error(ex),Alert.error("StoryInit",getErrorMessage(ex))}}},start:{value:function(){if(_state===States.Init){if(null==Config.passages.start)throw new Error("starting passage not selected");if(!Story.has(Config.passages.start))throw new Error('starting passage ("'.concat(Config.passages.start,'") not found'));if(_state=States.Idle,document.documentElement.focus(),State.restore())engineShow();else{var autoloadType=_typeof(Config.saves._internal_autoload_);"string"===autoloadType?"prompt"===Config.saves._internal_autoload_&&(UI.buildAutoload(),Dialog.open()):new Promise((function(resolve,reject){if(Save.browser.size>0&&("boolean"===autoloadType&&Config.saves._internal_autoload_||"function"===autoloadType&&Config.saves._internal_autoload_()))return resolve();reject()})).then((function(){Save.browser.continue(),engineShow()})).catch((function(){enginePlay(Config.passages.start)}))}}}},restart:{value:function(){LoadScreen.show(),window.scroll(0,0),State.reset(),triggerEvent(":enginerestart"),window.location.reload()}},state:{get:function(){return _state}},isIdle:{value:function(){return _state===States.Idle}},isPlaying:{value:function(){return _state!==States.Idle}},isRendering:{value:function(){return _state===States.Rendering}},lastPlay:{get:function(){return _lastPlay}},goTo:{value:function(index){var succeeded=State.goTo(index);return succeeded&&engineShow(),succeeded}},go:{value:engineGo},backward:{value:function(){return engineGo(-1)}},forward:{value:function(){return engineGo(1)}},show:{value:engineShow},play:{value:enginePlay},display:{value:function(title,link,option){console.warn("[DEPRECATED] Engine.display() is deprecated.");var noHistory=!1;switch(option){case undefined:break;case"replace":case"back":noHistory=!0;break;default:throw new Error('Engine.display option parameter called with obsolete value "'.concat(option,'"; please notify the developer'))}enginePlay(title,noHistory)}},minDomActionDelay:{get:function(){return DOM_DELAY}}}))}(),Passage=(tagsToSkip=/^(?:debug|nobr|passage|widget|twine\..*)$/i,encodedRE=/\r/g,hasEncodedRE=new RegExp(encodedRE.source),decodePassageText=function(str){if(null==str)return"";var val=String(str);return val&&hasEncodedRE.test(val)?val.replace(encodedRE,""):val},function(){return _createClass((function Passage(name,el){var _this19=this;_classCallCheck(this,Passage),Object.defineProperties(this,{name:{value:decodeEntities(name)},element:{value:el||null},tags:{value:Object.freeze(el&&el.hasAttribute("tags")?Array.from(new Set(el.getAttribute("tags").trim().splitOrEmpty(/\s+/))):[])}}),Object.defineProperties(this,{id:{value:"passage-".concat(createSlug(this.name))},classes:{value:Object.freeze(0===this.tags.length?[]:_this19.tags.filter((function(tag){return!tagsToSkip.test(tag)})).map((function(tag){return createSlug(tag)})))},domId:{get:function(){return this.id}},title:{get:function(){return this.name}}})}),[{key:"className",get:function(){return this.classes.join(" ")}},{key:"text",get:function(){if(null==this.element){var passage=encodeMarkup(this.name),mesg="".concat(L10n.get("errorViewTitle"),": ").concat(L10n.get("errorNonexistentPassage",{passage:passage}));return'<div class="error-view"><span class="error">'.concat(mesg,"</span></div>")}return decodePassageText(this.element.textContent)}},{key:"processText",value:function(){if(null==this.element)return this.text;if(this.tags.includes("Twine.image"))return"[img[".concat(this.text,"]]");var processed=this.text;return Config.passages.onProcess&&(processed=Config.passages.onProcess.call(null,{title:this.name,tags:this.tags,text:processed})),(Config.passages.nobr||this.tags.includes("nobr"))&&(processed=processed.replace(/^\n+|\n+$/g,"").replace(/\n+/g," ")),processed}},{key:"render",value:function(options){var frag=document.createDocumentFragment();return new Wikifier(frag,this.processText(),options),frag}},{key:"description",value:function(){return"".concat(L10n.get("textTurn")," ").concat(State.turns)}}])}()),encodedRE,hasEncodedRE,tagsToSkip,decodePassageText,Save=function(){var Type=enumFrom({Unknown:0,Auto:1,Slot:2,Disk:3,Base64:4,Autosave:1,Serialize:4}),MAX_INDEX=15,INDEX_DELIMITER=":",AUTO_SUBKEY="".concat("save.","auto."),AUTO_DATA_SUBKEY="".concat(AUTO_SUBKEY,"data").concat(INDEX_DELIMITER),AUTO_INFO_SUBKEY="".concat(AUTO_SUBKEY,"info").concat(INDEX_DELIMITER),SLOT_SUBKEY="".concat("save.","slot."),SLOT_DATA_SUBKEY="".concat(SLOT_SUBKEY,"data").concat(INDEX_DELIMITER),SLOT_INFO_SUBKEY="".concat(SLOT_SUBKEY,"info").concat(INDEX_DELIMITER),onLoadHandlers=new Set,onSaveHandlers=new Set;function createDetails(saveType,description,metadata){var metadataType=_typeof(metadata);if("object"!==metadataType&&"undefined"!==metadataType)throw new TypeError("metadata parameter must be an object or null/undefined");var cfgMetadata=Config.saves.metadata?Config.saves.metadata(saveType):undefined,cfgMetadataType=_typeof(cfgMetadata);if("object"!==cfgMetadataType&&"undefined"!==cfgMetadataType)throw new TypeError("Config.saves.metadata function must return an object or null/undefined");var desc,details={type:saveType};null!=description&&(desc=String(description).trim()),desc||"function"!=typeof Config.saves.descriptions||"string"==typeof(desc=Config.saves.descriptions(saveType))&&(desc=desc.trim()),details.desc=desc||"".concat(L10n.get("textTurn")," ").concat(State.turns);var fullMetadata=Object.assign({},cfgMetadata,metadata);return Object.keys(fullMetadata).length>0&&(details.metadata=fullMetadata),details}function findNewest(saveType){var keys;switch(saveType){case Type.Auto:keys=getKeys(isAutoInfoKey);break;case Type.Slot:keys=getKeys(isSlotInfoKey);break;default:keys=getKeys(isInfoKey)}switch(keys.length){case 0:return{index:-1};case 1:return{index:getIndexFromKey(keys[0]),type:getTypeFromKey(keys[0])}}return keys.map((function(key){return{value:{index:getIndexFromKey(key),type:getTypeFromKey(key)},date:storage.get(key).date}})).sort((function(a,b){return b.date-a.date})).first().value}function getIndexFromKey(key){var pos=key.lastIndexOf(INDEX_DELIMITER);if(-1===pos)throw new Error("unable to get index from save key (received: ".concat(key,")"));return Number(key.slice(pos+1))}function getAutoInfoKeyFromIndex(index){return"".concat(AUTO_INFO_SUBKEY).concat(index)}function getAutoDataKeyFromIndex(index){return"".concat(AUTO_DATA_SUBKEY).concat(index)}function getSlotInfoKeyFromIndex(index){return"".concat(SLOT_INFO_SUBKEY).concat(index)}function getSlotDataKeyFromIndex(index){return"".concat(SLOT_DATA_SUBKEY).concat(index)}function getKeys(predicate){return storage.keys().filter(predicate)}function getTypeFromKey(key){return isAutoKey(key)?Type.Auto:Type.Slot}function isInfoKey(key){return key.startsWith(AUTO_INFO_SUBKEY)||key.startsWith(SLOT_INFO_SUBKEY)}function isAutoKey(key){return key.startsWith(AUTO_SUBKEY)}function isAutoInfoKey(key){return key.startsWith(AUTO_INFO_SUBKEY)}function isSlotKey(key){return key.startsWith(SLOT_SUBKEY)}function isSlotInfoKey(key){return key.startsWith(SLOT_INFO_SUBKEY)}function saveBlobToDiskAs(data,filename,extension){if("string"!=typeof filename)throw new Error("filename parameter must be a string");var baseName=createFilename(filename);if(""===baseName)throw new Error("filename parameter must not consist solely of illegal characters");var datestamp=function(date){if(!(date instanceof Date))throw new TypeError("createDatestamp date parameter must be a Date object");var MM=date.getMonth()+1,DD=date.getDate(),hh=date.getHours(),mm=date.getMinutes(),ss=date.getSeconds();return MM<10&&(MM="0".concat(MM)),DD<10&&(DD="0".concat(DD)),hh<10&&(hh="0".concat(hh)),mm<10&&(mm="0".concat(mm)),ss<10&&(ss="0".concat(ss)),"".concat(date.getFullYear()).concat(MM).concat(DD,"-").concat(hh).concat(mm).concat(ss)}(new Date),fileExt=createFilename(extension)||"save";saveAs(new Blob([data],{type:"text/plain;charset=UTF-8"}),"".concat(baseName,"-").concat(datestamp,".").concat(fileExt))}function saveToBrowserStorage(saveData){var data=saveData.data,dataKey=saveData.dataKey,info=saveData.info,infoKey=saveData.infoKey;try{storage.set(dataKey,data)&&(storage.set(infoKey,info)||storage.delete(dataKey))}catch(ex){throw storage.delete(dataKey),storage.delete(infoKey),ex}}function browserClear(){return autoClear(),slotClear(),!0}function browserIsEnabled(){return autoIsEnabled()||slotIsEnabled()}function autoClear(){return getKeys(isAutoKey).forEach((function(key){return storage.delete(key)})),!0}function autoDelete(index){if(!Number.isInteger(index))throw new TypeError("auto save index must be an integer");if(index<0||index>MAX_INDEX)throw new RangeError("auto save index out of bounds (range: 0–".concat(MAX_INDEX,"; received: ").concat(index,")"));return storage.delete(getAutoInfoKeyFromIndex(index)),storage.delete(getAutoDataKeyFromIndex(index)),!0}function autoGet(index){if(!Number.isInteger(index))throw new TypeError("auto save index must be an integer");if(index<0||index>MAX_INDEX)throw new RangeError("auto save index out of bounds (range: 0–".concat(MAX_INDEX,"; received: ").concat(index,")"));return storage.get(getAutoInfoKeyFromIndex(index))}function autoHas(index){if(!Number.isInteger(index))throw new TypeError("auto save index must be an integer");if(index<0||index>MAX_INDEX)throw new RangeError("auto save index out of bounds (range: 0–".concat(MAX_INDEX,"; received: ").concat(index,")"));return storage.has(getAutoInfoKeyFromIndex(index))}function autoIsEnabled(){return"cookie"!==storage.name&&Config.saves.maxAutoSaves>0}function autoLoad(index){return new Promise((function(resolve){if(!Number.isInteger(index))throw new TypeError("auto save index must be an integer");if(index<0||index>MAX_INDEX)throw new RangeError("auto save index out of bounds (range: 0–".concat(MAX_INDEX,"; received: ").concat(index,")"));if(Engine.state===Engine.States.Init)throw new Error(L10n.get("saveErrorLoadTooEarly"));var info=storage.get(getAutoInfoKeyFromIndex(index)),data=storage.get(getAutoDataKeyFromIndex(index));if(!info||!data)throw new Error(L10n.get("saveErrorNonexistent"));unmarshal(Object.assign(info,data)),resolve(!0)}))}function autoSave(desc,metadata){if(!autoIsEnabled()||"function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed(Type.Auto))return!1;var index=(findNewest(Type.Auto).index+1)%Config.saves.maxAutoSaves,infoKey=getAutoInfoKeyFromIndex(index),dataKey=getAutoDataKeyFromIndex(index),_splitSave3=splitSave(marshal(createDetails(Type.Auto,desc,metadata))),info=_splitSave3.info;saveToBrowserStorage({data:_splitSave3.data,dataKey:dataKey,info:info,infoKey:infoKey})}function slotClear(){return getKeys(isSlotKey).forEach((function(key){return storage.delete(key)})),!0}function slotDelete(index){if(!Number.isInteger(index))throw new TypeError("slot save index must be an integer");if(index<0||index>MAX_INDEX)throw new RangeError("slot save index out of bounds (range: 0–".concat(MAX_INDEX,"; received: ").concat(index,")"));return storage.delete(getSlotInfoKeyFromIndex(index)),storage.delete(getSlotDataKeyFromIndex(index)),!0}function slotGet(index){if(!Number.isInteger(index))throw new TypeError("slot save index must be an integer");if(index<0||index>MAX_INDEX)throw new RangeError("slot save index out of bounds (range: 0–".concat(MAX_INDEX,"; received: ").concat(index,")"));return storage.get(getSlotInfoKeyFromIndex(index))}function slotHas(index){if(!Number.isInteger(index))throw new TypeError("slot save index must be an integer");if(index<0||index>MAX_INDEX)throw new RangeError("slot save index out of bounds (range: 0–".concat(MAX_INDEX,"; received: ").concat(index,")"));return storage.has(getSlotInfoKeyFromIndex(index))}function slotIsEnabled(){return"cookie"!==storage.name&&Config.saves.maxSlotSaves>0}function slotLoad(index){return new Promise((function(resolve){if(!Number.isInteger(index))throw new TypeError("slot save index must be an integer");if(index<0||index>MAX_INDEX)throw new RangeError("slot save index out of bounds (range: 0–".concat(MAX_INDEX,"; received: ").concat(index,")"));if(Engine.state===Engine.States.Init)throw new Error(L10n.get("saveErrorLoadTooEarly"));var info=storage.get(getSlotInfoKeyFromIndex(index)),data=storage.get(getSlotDataKeyFromIndex(index));if(!info||!data)throw new Error(L10n.get("saveErrorNonexistent"));unmarshal(Object.assign(info,data)),resolve(!0)}))}function slotSave(index,desc,metadata){if(!Number.isInteger(index))throw new TypeError("slot save index must be an integer");if(index<0||index>=Config.saves.maxSlotSaves)throw new RangeError("slot save index out of bounds (range: 0–".concat(Config.saves.maxSlotSaves-1,"; received: ").concat(index,")"));if(!slotIsEnabled()||"function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed(Type.Slot))throw new Error(L10n.get("saveErrorDisallowed"));var infoKey=getSlotInfoKeyFromIndex(index),dataKey=getSlotDataKeyFromIndex(index),_splitSave4=splitSave(marshal(createDetails(Type.Slot,desc,metadata))),info=_splitSave4.info;saveToBrowserStorage({data:_splitSave4.data,dataKey:dataKey,info:info,infoKey:infoKey})}function slotSize(){return getKeys(isSlotInfoKey).length}function diskLoad(event){return new Promise((function(resolve,reject){var reader=new FileReader;jQuery(reader).on("loadend",(function(){try{if(Engine.state===Engine.States.Init)throw new Error(L10n.get("saveErrorLoadTooEarly"));if(reader.error)throw new Error("".concat(L10n.get("saveErrorDiskLoadFail"),": ").concat(reader.error));var save;try{save=Serial.parse(LZString.decompressFromBase64(reader.result))}catch(ex){throw new Error(L10n.get("saveErrorDecodeFail"))}unmarshal(save),resolve(save.metadata)}catch(ex){reject(ex)}})),reader.readAsText(event.target.files[0])}))}function diskSave(filename,metadata){if(null==filename)throw new Error("Save.disk.save filename parameter is required");if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed(Type.Disk))throw new Error(L10n.get("saveErrorDisallowed"));var details=createDetails(Type.Disk,filename,metadata);saveBlobToDiskAs(LZString.compressToBase64(Serial.stringify(marshal(details))),filename,"save")}function base64Load(base64){return new Promise((function(resolve){if(Engine.state===Engine.States.Init)throw new Error(L10n.get("saveErrorLoadTooEarly"));var save;try{save=Serial.parse(LZString.decompressFromBase64(base64))}catch(ex){throw new Error(L10n.get("saveErrorDecodeFail"))}unmarshal(save),resolve(save.metadata)}))}function base64Save(metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed(Type.Base64))throw new Error(L10n.get("saveErrorDisallowed"));var details=createDetails(Type.Base64,null,metadata);return LZString.compressToBase64(Serial.stringify(marshal(details)))}function marshal(details){var save=Object.assign({},details,{date:Date.now(),id:Config.saves.id,state:State.marshalForSave()});return null!=Config.saves.version&&(save.version=Config.saves.version),onSaveHandlers.forEach((function(fn){return fn(save,function(save){switch(save.type){case Type.Auto:return{type:"autosave"};case Type.Slot:return{type:"slot"};case Type.Disk:return{type:"disk"};case Type.Base64:return{type:"serialize"}}throw new Error("save.type must be an integer (received: ".concat(_typeof(save.type),")"))}(save))})),save.state.delta=State.deltaEncode(save.state.history),delete save.state.history,save}function splitSave(save){var state=save.state;return{info:_objectWithoutProperties(save,_excluded3),data:{state:state}}}function unmarshal(save){if(null==save||"object"!==_typeof(save)||!Object.hasOwn(save,"id")||!Object.hasOwn(save,"state")||"object"!==_typeof(save.state)||!Object.hasOwn(save.state,"delta"))throw new Error(L10n.get("saveErrorInvalidData"));if(save.id!==Config.saves.id)throw new Error(L10n.get("saveErrorIdMismatch"));if(save.state.history=State.deltaDecode(save.state.delta),delete save.state.delta,"string"==typeof save.type){switch(save.type){case"auto":case"autosave":save.type=Type.Auto;break;case"slot":save.type=Type.Slot;break;case"disk":save.type=Type.Disk;break;case"base64":case"serialize":save.type=Type.Base64}if("number"!=typeof save.type)throw new Error("save.type is unknown")}onLoadHandlers.forEach((function(fn){return fn(save)})),State.unmarshalForSave(save.state)}return Object.preventExtensions(Object.create(null,{Type:{value:Type},MAX_INDEX:{get:function(){return MAX_INDEX}},init:{value:function(){return function(){var oldSaves=storage.get("saves");if(null===oldSaves)return;if(autoClear(),slotClear(),oldSaves.autosave){var _splitSave=splitSave(oldSaves.autosave),info=_splitSave.info,data=_splitSave.data;info.desc=info.title,delete info.title,info.type=Type.Auto;var infoKey=getAutoInfoKeyFromIndex(0),dataKey=getAutoDataKeyFromIndex(0);storage.set(dataKey,data)&&(storage.set(infoKey,info)||storage.delete(dataKey))}oldSaves.slots.forEach((function(save,index){if(save){var _splitSave2=splitSave(save),info=_splitSave2.info,data=_splitSave2.data;info.desc=info.title,delete info.title,info.type=Type.Slot;var infoKey=getSlotInfoKeyFromIndex(index),dataKey=getSlotDataKeyFromIndex(index);storage.set(dataKey,data)&&(storage.set(infoKey,info)||storage.delete(dataKey))}})),storage.delete("saves")}(),!0}},browser:{value:Object.preventExtensions(Object.create(null,{clear:{value:browserClear},continue:{value:function(){var newest=findNewest();return-1===newest.index?Promise.reject(new Error(L10n.get("saveErrorNonexistent"))):newest.type===Type.Auto?autoLoad(newest.index):slotLoad(newest.index)}},isEnabled:{value:browserIsEnabled},size:{get:function(){return getKeys(isInfoKey).length}},auto:{value:Object.preventExtensions(Object.create(null,{clear:{value:autoClear},delete:{value:autoDelete},entries:{value:function(){return getKeys(isAutoInfoKey).map((function(key){return{index:getIndexFromKey(key),info:storage.get(key)}})).sort((function(a,b){return b.info.date-a.info.date}))}},get:{value:autoGet},has:{value:autoHas},isEnabled:{value:autoIsEnabled},load:{value:autoLoad},save:{value:autoSave},size:{get:function(){return getKeys(isAutoInfoKey).length}}}))},slot:{value:Object.preventExtensions(Object.create(null,{clear:{value:slotClear},delete:{value:slotDelete},entries:{value:function(){return getKeys(isSlotInfoKey).map((function(key){return{index:getIndexFromKey(key),info:storage.get(key)}})).sort((function(a,b){return a.index-b.index}))}},get:{value:slotGet},has:{value:slotHas},isEnabled:{value:slotIsEnabled},load:{value:slotLoad},save:{value:slotSave},size:{get:slotSize}}))}}))},disk:{value:Object.preventExtensions(Object.create(null,{export:{value:function(filename){if(null==filename)throw new Error("Save.browser.export filename parameter is required");var auto=getKeys(isAutoInfoKey).map((function(infoKey){var index=getIndexFromKey(infoKey),info=storage.get(infoKey),data=storage.get(getAutoDataKeyFromIndex(index));if(!info||!data)throw new Error("during saves export auto save info or data nonexistent");return{index:index,info:info,data:data}})),slot=getKeys(isSlotInfoKey).map((function(infoKey){var index=getIndexFromKey(infoKey),info=storage.get(infoKey),data=storage.get(getSlotDataKeyFromIndex(index));if(!info||!data)throw new Error("during saves export slot save info or data nonexistent");return{index:index,info:info,data:data}}));saveBlobToDiskAs(LZString.compressToBase64(Serial.stringify({auto:auto,slot:slot})),filename,"savesbundle")}},import:{value:function(event){return new Promise((function(resolve,reject){var reader=new FileReader;jQuery(reader).on("loadend",(function(){try{if(reader.error)throw new Error("".concat(L10n.get("saveErrorDiskLoadFail"),": ").concat(reader.error));var bundle,badSave=function(O){return!Object.hasOwn(O,"index")||!Object.hasOwn(O,"info")||!Object.hasOwn(O,"data")};try{bundle=Serial.parse(LZString.decompressFromBase64(reader.result))}catch(ex){throw new Error(L10n.get("saveErrorDecodeFail"))}if(null==bundle||"object"!==_typeof(bundle)||!Object.hasOwn(bundle,"auto")||!(bundle.auto instanceof Array)||bundle.auto.some(badSave)||!Object.hasOwn(bundle,"slot")||!(bundle.slot instanceof Array)||bundle.slot.some(badSave))throw new Error(L10n.get("saveErrorInvalidData"));autoClear(),slotClear(),bundle.auto.forEach((function(save){return saveToBrowserStorage({data:save.data,dataKey:getAutoDataKeyFromIndex(save.index),info:save.info,infoKey:getAutoInfoKeyFromIndex(save.index)})})),bundle.slot.forEach((function(save){return saveToBrowserStorage({data:save.data,dataKey:getSlotDataKeyFromIndex(save.index),info:save.info,infoKey:getSlotInfoKeyFromIndex(save.index)})})),resolve(!0)}catch(ex){reject(ex)}})),reader.readAsText(event.target.files[0])}))}},load:{value:diskLoad},save:{value:diskSave}}))},base64:{value:Object.preventExtensions(Object.create(null,{export:{value:function(){var auto=getKeys(isAutoInfoKey).map((function(infoKey){var index=getIndexFromKey(infoKey),info=storage.get(infoKey),data=storage.get(getAutoDataKeyFromIndex(index));if(!info||!data)throw new Error("during saves export auto save info or data nonexistent");return{index:index,info:info,data:data}})),slot=getKeys(isSlotInfoKey).map((function(infoKey){var index=getIndexFromKey(infoKey),info=storage.get(infoKey),data=storage.get(getSlotDataKeyFromIndex(index));if(!info||!data)throw new Error("during saves export slot save info or data nonexistent");return{index:index,info:info,data:data}}));return LZString.compressToBase64(Serial.stringify({auto:auto,slot:slot}))}},import:{value:function(base64){return new Promise((function(resolve){var bundle,badSave=function(O){return!Object.hasOwn(O,"index")||!Object.hasOwn(O,"info")||!Object.hasOwn(O,"data")};try{bundle=Serial.parse(LZString.decompressFromBase64(base64))}catch(ex){throw new Error(L10n.get("saveErrorDecodeFail"))}if(null==bundle||"object"!==_typeof(bundle)||!Object.hasOwn(bundle,"auto")||!(bundle.auto instanceof Array)||bundle.auto.some(badSave)||!Object.hasOwn(bundle,"slot")||!(bundle.slot instanceof Array)||bundle.slot.some(badSave))throw new Error(L10n.get("saveErrorInvalidData"));autoClear(),slotClear(),bundle.auto.forEach((function(save){return saveToBrowserStorage({data:save.data,dataKey:getAutoDataKeyFromIndex(save.index),info:save.info,infoKey:getAutoInfoKeyFromIndex(save.index)})})),bundle.slot.forEach((function(save){return saveToBrowserStorage({data:save.data,dataKey:getSlotDataKeyFromIndex(save.index),info:save.info,infoKey:getSlotInfoKeyFromIndex(save.index)})})),resolve(!0)}))}},load:{value:base64Load},save:{value:base64Save}}))},onLoad:{value:Object.preventExtensions(Object.create(null,{add:{value:function(handler){var valueType=getTypeOf(handler);if("function"!==valueType)throw new TypeError("Save.onLoad.add handler parameter must be a function (received: ".concat(valueType,")"));onLoadHandlers.add(handler)}},clear:{value:function(){onLoadHandlers.clear()}},delete:{value:function(handler){return onLoadHandlers.delete(handler)}},size:{get:function(){return onLoadHandlers.size}}}))},onSave:{value:Object.preventExtensions(Object.create(null,{add:{value:function(handler){var valueType=getTypeOf(handler);if("function"!==valueType)throw new TypeError("Save.onSave.add handler parameter must be a function (received: ".concat(valueType,")"));onSaveHandlers.add(handler)}},clear:{value:function(){onSaveHandlers.clear()}},delete:{value:function(handler){return onSaveHandlers.delete(handler)}},size:{get:function(){return onSaveHandlers.size}}}))},get:{value:function(){throw new Error("[REMOVED] Save.get() has been removed.")}},clear:{value:function(){return console.warn("[DEPRECATED] Save.clear() is deprecated."),browserClear()}},ok:{value:function(){return console.warn("[DEPRECATED] Save.ok() is deprecated."),browserIsEnabled()}},autosave:{value:Object.preventExtensions(Object.create(null,{ok:{value:function(){return console.warn("[DEPRECATED] Save.autosave.ok() is deprecated."),autoIsEnabled()}},has:{value:function(){return console.warn("[DEPRECATED] Save.autosave.has() is deprecated."),autoHas(0)}},get:{value:function(){return console.warn("[DEPRECATED] Save.autosave.get() is deprecated."),autoGet(0)}},load:{value:function(){return console.warn("[DEPRECATED] Save.autosave.load() is deprecated."),autoLoad(0)}},save:{value:function(){return console.warn("[DEPRECATED] Save.autosave.save() is deprecated."),autoSave.apply(void 0,arguments)}},delete:{value:function(){return console.warn("[DEPRECATED] Save.autosave.delete() is deprecated."),autoDelete(0)}}}))},slots:{value:Object.preventExtensions(Object.create(null,{ok:{value:function(){return console.warn("[DEPRECATED] Save.slots.ok() is deprecated."),slotIsEnabled()}},length:{get:function(){return console.warn("[DEPRECATED] Save.slots.length is deprecated."),Config.saves.maxSlotSaves}},isEmpty:{value:function(){return console.warn("[DEPRECATED] Save.slots.isEmpty() is deprecated."),0===slotSize()}},count:{value:function(){return console.warn("[DEPRECATED] Save.slots.count() is deprecated."),slotSize()}},has:{value:function(){return console.warn("[DEPRECATED] Save.slots.has() is deprecated."),slotHas.apply(void 0,arguments)}},get:{value:function(){return console.warn("[DEPRECATED] Save.slots.get() is deprecated."),slotGet.apply(void 0,arguments)}},load:{value:function(){return console.warn("[DEPRECATED] Save.slots.load() is deprecated."),slotLoad.apply(void 0,arguments)}},save:{value:function(){return console.warn("[DEPRECATED] Save.slots.save() is deprecated."),slotSave.apply(void 0,arguments)}},delete:{value:function(){return console.warn("[DEPRECATED] Save.slots.delete() is deprecated."),slotDelete.apply(void 0,arguments)}}}))},export:{value:function(){return console.warn("[DEPRECATED] Save.export() is deprecated."),diskSave.apply(void 0,arguments)}},import:{value:function(){return console.warn("[DEPRECATED] Save.import() is deprecated."),diskLoad.apply(void 0,arguments)}},serialize:{value:function(){return console.warn("[DEPRECATED] Save.serialize() is deprecated."),base64Save.apply(void 0,arguments)}},deserialize:{value:function(){return console.warn("[DEPRECATED] Save.deserialize() is deprecated."),base64Load.apply(void 0,arguments)}}}))}(),Setting=function(){var Types=enumFrom({Header:0,Toggle:1,List:2,Range:3,Value:4}),_definitions=[];function updateSettingsObject(value){window.SugarCube.settings=settings=value}function createResultObject(def){var result={name:def.name,value:settings[def.name],default:def.default};return Object.hasOwn(def,"list")&&(result.list=def.list),Object.hasOwn(def,"min")&&(result.min=def.min),Object.hasOwn(def,"max")&&(result.max=def.max),Object.hasOwn(def,"step")&&(result.step=def.step),result}function clear(){return updateSettingsObject(create()),storage.delete("settings"),!0}function create(){return Object.create(null)}function load(){var defaultSettings=create(),loadedSettings=storage.get("settings")||create();_definitions.filter((function(def){return def.type!==Types.Header})).forEach((function(def){return defaultSettings[def.name]=def.default})),updateSettingsObject(Object.assign(defaultSettings,loadedSettings))}function save(){var savedSettings=create();return Object.keys(settings).length>0&&_definitions.filter((function(def){return def.type!==Types.Header&&settings[def.name]!==def.default})).forEach((function(def){return savedSettings[def.name]=settings[def.name]})),0===Object.keys(savedSettings).length?(storage.delete("settings"),!0):storage.set("settings",savedSettings)}function add(type,name,def){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("type"),arguments.length<2&&errors.push("name"),new Error("missing parameters, no ".concat(errors.join(" or ")," specified"))}if(null==def)def={};else if("object"!==_typeof(def))throw new TypeError("definition parameter must be an object");if(has(name))throw new Error('cannot clobber existing setting "'.concat(name,'"'));var str,pos,definition={type:type,name:name};if(type!==Types.Value&&(definition.label="string"==typeof def.label?def.label.trim():""),"string"==typeof def.desc){var desc=def.desc.trim();""!==desc&&(definition.desc=desc)}switch(type){case Types.Header:break;case Types.List:if(!Object.hasOwn(def,"list"))throw new Error("no list specified");if(!Array.isArray(def.list))throw new TypeError("list must be an array");if(0===def.list.length)throw new Error("list must not be empty");if(definition.list=Object.freeze(def.list),null==def.default)definition.default=def.list[0];else{var defaultIndex=def.list.indexOf(def.default);if(-1===defaultIndex)throw new Error("list does not contain default");definition.default=def.list[defaultIndex]}break;case Types.Range:if(!Object.hasOwn(def,"min"))throw new Error("no min specified");if("number"!=typeof def.min||Number.isNaN(def.min)||!Number.isFinite(def.min))throw new TypeError("min must be a finite number");if(!Object.hasOwn(def,"max"))throw new Error("no max specified");if("number"!=typeof def.max||Number.isNaN(def.max)||!Number.isFinite(def.max))throw new TypeError("max must be a finite number");if(!Object.hasOwn(def,"step"))throw new Error("no step specified");if("number"!=typeof def.step||Number.isNaN(def.step)||!Number.isFinite(def.step)||def.step<=0)throw new TypeError("step must be a finite number greater than zero");var fracDigits=(str=String(def.step),-1===(pos=str.lastIndexOf("."))?0:str.length-pos-1);if(function(value){if(fracDigits>0){var ma=Number("".concat(def.min,"e").concat(fracDigits)),sa=Number("".concat(def.step,"e").concat(fracDigits)),_va=Number("".concat(value,"e").concat(fracDigits))-ma;return Number("".concat(_va-_va%sa+ma,"e-").concat(fracDigits))}var va=value-def.min;return va-va%def.step+def.min}(def.max)!==def.max)throw new RangeError("max (".concat(def.max,") is not a multiple of the step (").concat(def.step,") plus the min (").concat(def.min,")"));if(definition.max=def.max,definition.min=def.min,definition.step=def.step,null==def.default)definition.default=def.max;else{if("number"!=typeof def.default||Number.isNaN(def.default)||!Number.isFinite(def.default))throw new TypeError("default must be a finite number");if(def.default<def.min)throw new RangeError("default (".concat(def.default,") is less than min (").concat(def.min,")"));if(def.default>def.max)throw new RangeError("default (".concat(def.default,") is greater than max (").concat(def.max,")"));definition.default=def.default}break;case Types.Toggle:definition.default=Boolean(def.default);break;case Types.Value:definition.default=def.default;break;default:throw new Error("unknown Setting type: ".concat(type))}"function"==typeof def.onInit&&(definition.onInit=Object.freeze(def.onInit)),"function"==typeof def.onChange&&(definition.onChange=Object.freeze(def.onChange)),_definitions.push(Object.freeze(definition))}function get(name){return _definitions.find((function(definition){return definition.name===name}))}function has(name){return _definitions.some((function(definition){return definition.name===name}))}return Object.preventExtensions(Object.create(null,{Types:{value:Types},init:{value:function(){load(),_definitions.forEach((function(def){if(Object.hasOwn(def,"onInit")){var data=createResultObject(def);def.onInit.call(data,data)}}))}},clear:{value:clear},create:{value:create},load:{value:load},reset:{value:function(name){if(0===arguments.length)clear(),load();else{if(null==name||!has(name))throw new Error('nonexistent setting "'.concat(name,'"'));var def=get(name);def.type!==Types.Header&&(settings[name]=def.default)}return save()}},save:{value:save},add:{value:add},addHeader:{value:function(name,desc){add(Types.Header,name,{desc:desc})}},addList:{value:function(){for(var _len20=arguments.length,args=new Array(_len20),_key20=0;_key20<_len20;_key20++)args[_key20]=arguments[_key20];add.apply(void 0,[Types.List].concat(args))}},addRange:{value:function(){for(var _len21=arguments.length,args=new Array(_len21),_key21=0;_key21<_len21;_key21++)args[_key21]=arguments[_key21];add.apply(void 0,[Types.Range].concat(args))}},addToggle:{value:function(){for(var _len22=arguments.length,args=new Array(_len22),_key22=0;_key22<_len22;_key22++)args[_key22]=arguments[_key22];add.apply(void 0,[Types.Toggle].concat(args))}},addValue:{value:function(){for(var _len23=arguments.length,args=new Array(_len23),_key23=0;_key23<_len23;_key23++)args[_key23]=arguments[_key23];add.apply(void 0,[Types.Value].concat(args))}},delete:{value:function(name){for(var i=0;i<_definitions.length;++i)if(_definitions[i].name===name){_definitions.splice(i,1);break}Object.hasOwn(settings,name)&&delete settings[name]}},forEach:{value:function(callback,thisArg){_definitions.forEach(callback,thisArg)}},get:{value:get},has:{value:has},isEmpty:{value:function(){return 0===_definitions.length}},getValue:{value:function(name){return settings[name]}},setValue:{value:function(name,value){if(!has(name))throw new Error("no such setting");settings[name]=value,save();var def=get(name);if(Object.hasOwn(def,"onChange")){var data=createResultObject(def);def.onChange.call(data,data)}return!0}}}))}(),Story=function(){var _ifId="",_id="",_name="",_passages=createPassageStore(),_inits=[],_scripts=[],_styles=[],_widgets=[],codePassageNames=["PassageDone","PassageFooter","PassageHeader","PassageReady","StoryAuthor","StoryBanner","StoryCaption","StoryDisplayTitle","StoryInit","StoryInterface","StoryMenu","StoryShare","StorySubtitle"],codeTagNames=["init","widget"];function createPassageStore(passages){var store=Object.create(null);return passages?Object.assign(store,passages):store}function generateName(rawName){if(null==rawName)throw new Error("story name must not be null or undefined");var name=decodeEntities(String(rawName)).trim();if(""===name)throw new Error("story name must not be empty or consist solely of whitespace");return name}function getId(){return _id}function getName(){return _name}function filter(predicate,thisArg){if("function"!=typeof predicate)throw new TypeError("Story.filter() predicate parameter must be a function");for(var results=[],i=0,keys=Object.keys(_passages);i<keys.length;++i){var passage=_passages[keys[i]];predicate.call(void 0===thisArg?this:thisArg,passage)&&results.push(passage)}return results}return Object.preventExtensions(Object.create(null,{init:{value:function(){function assertNoCodeTags(passage,desc){if(passage.tags.includesAny(codeTagNames))throw new Error("".concat(desc,' passage "').concat(passage.name,'" includes code tags; invalid: "').concat(passage.tags.filter((function(tag){return codeTagNames.includes(tag)})).sort().join('", "'),'"'))}function assertValidCodeTagUsage(passage){var found=passage.tags.filter((function(tag){return codeTagNames.includes(tag)})).sort();if(found.length>1)throw new Error('passage "'.concat(passage.name,'" includes multiple code tags; invalid: "').concat(found.join('", "'),'"'))}var $storydata=jQuery("tw-storydata"),startNode=$storydata.attr("startnode")||"";Config.passages.start=null,Config.debug=/\bdebug\b/.test($storydata.attr("options")),$storydata.children("style").each((function(i){_styles.push(new Passage("tw-user-style-".concat(i),this))})),$storydata.children("script").each((function(i){_scripts.push(new Passage("tw-user-script-".concat(i),this))})),$storydata.children('tw-passagedata:not([tags~="Twine.private"],[tags~="annotation"])').each((function(){var $this=jQuery(this),pid=$this.attr("pid")||"",passage=new Passage($this.attr("name"),this);pid===startNode&&""!==startNode?(Config.passages.start=passage.name,assertNoCodeTags(passage,"starting"),_passages[passage.name]=passage):codePassageNames.includes(passage.name)?(assertNoCodeTags(passage,"code"),_passages[passage.name]=passage):passage.tags.includes("init")?(assertValidCodeTagUsage(passage),_inits.push(passage)):passage.tags.includes("widget")?(assertValidCodeTagUsage(passage),_widgets.push(passage)):_passages[passage.name]=passage})),_ifId=$storydata.attr("ifid"),_name=generateName("The Unity"),_id=function(name){var id=createSlug(name);if(""===id)if(""!==_ifId)id=_ifId;else for(var i=0;i<name.length;++i){var _charAndPosAt2=charAndPosAt(name,i),char=_charAndPosAt2.char,start=_charAndPosAt2.start,end=_charAndPosAt2.end;id+=char.codePointAt(0).toString(16),i+=end-start}return id}(_name),Config.saves.id=_id,document.title=_name}},id:{get:getId},ifId:{get:function(){return _ifId}},name:{get:getName},add:{value:function(descriptor){if("Object"!==getTypeOf(descriptor))throw new TypeError("Story.add() descriptor parameter must be a generic object");if(Object.hasOwn(_passages,descriptor.name))return!1;var elem=document.createElement("div");elem.setAttribute("name",descriptor.name),elem.setAttribute("tags",descriptor.tags),elem.textContent=descriptor.text;var passage=new Passage(descriptor.name,elem);if(codePassageNames.includes(passage.name))throw new Error('Story.add() passage descriptor object "'.concat(passage.name,'" must not be a code passage'));if(passage.tags.includesAny(codeTagNames))throw new Error('Story.add() passage descriptor object "'.concat(passage.name,'" must not include code tags'));return _passages[passage.name]=passage,!0}},delete:{value:function(name){var type=_typeof(name);switch(type){case"number":case"string":var key=String(name);if(!Object.hasOwn(_passages,key))return!1;if(key===Config.passages.start||codePassageNames.includes(key))throw new Error('Story.delete() passage "'.concat(key,'" must not be a code passage'));if(_passages[key].tags.includesAny(codeTagNames))throw new Error('Story.delete() passage "'.concat(key,'" must not include code tags'));return delete _passages[key],!0;case"undefined":break;case"object":type=null===name?"null":"an object";break;default:type="a ".concat(type)}throw new TypeError("Story.delete() name parameter cannot be ".concat(type))}},filter:{value:filter},find:{value:function(predicate,thisArg){if("function"!=typeof predicate)throw new TypeError("Story.find() predicate parameter must be a function");for(var i=0,keys=Object.keys(_passages);i<keys.length;++i){var passage=_passages[keys[i]];if(predicate.call(void 0===thisArg?this:thisArg,passage))return passage}}},get:{value:function(name){var type=_typeof(name);switch(type){case"number":case"string":var key=String(name);return Object.hasOwn(_passages,key)?_passages[key]:new Passage(key||"(unknown)");case"undefined":break;case"object":type=null===name?"null":"an object";break;default:type="a ".concat(type)}throw new TypeError("Story.get() name parameter cannot be ".concat(type))}},getInits:{value:function(){return Object.freeze(Array.from(_inits))}},getNormals:{value:function(){return Object.freeze(createPassageStore(_passages))}},getScripts:{value:function(){return Object.freeze(Array.from(_scripts))}},getStyles:{value:function(){return Object.freeze(Array.from(_styles))}},getWidgets:{value:function(){return Object.freeze(Array.from(_widgets))}},has:{value:function(name){var type=_typeof(name);switch(type){case"number":case"string":return Object.hasOwn(_passages,String(name));case"undefined":break;case"object":type=null===name?"null":"an object";break;default:type="a ".concat(type)}throw new TypeError("Story.has name parameter cannot be ".concat(type))}},domId:{get:function(){return console.warn("[DEPRECATED] Story.domId is deprecated."),getId()}},title:{get:function(){return console.warn("[DEPRECATED] Story.title is deprecated."),getName()}},lookup:{value:function(key,value){var sortKey=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"name";return console.warn("[DEPRECATED] Story.lookup() is deprecated."),filter((function(passage){return"object"===_typeof(passage[key])&&null!==passage[key]?passage[key]instanceof Array&&passage[key].some((function(m){return sameValueZero(m,value)})):sameValueZero(passage[key],value)})).sort((function(a,b){return a[sortKey]==b[sortKey]?0:a[sortKey]<b[sortKey]?-1:1}))}},lookupWith:{value:function(predicate){var sortKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"name";if(console.warn("[DEPRECATED] Story.lookupWith() is deprecated."),"function"!=typeof predicate)throw new TypeError("Story.lookupWith() predicate parameter must be a function");return filter(predicate).sort((function(a,b){return a[sortKey]==b[sortKey]?0:a[sortKey]<b[sortKey]?-1:1}))}}}))}(),UI=function(){function assembleLinkList(passage,listEl){var list=listEl,debugState=Config.debug;Config.debug=!1;try{null==list&&(list=document.createElement("ul"));var frag=document.createDocumentFragment();new Wikifier(frag,Story.get(passage).processText().trim(),{cleanup:!1});var errors=Array.from(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent.replace(errorPrologRegExp,"")}));if(errors.length>0)throw new Error(errors.join("; "));for(;frag.hasChildNodes();){var node=frag.firstChild;if(node.nodeType===Node.ELEMENT_NODE&&"A"===node.nodeName.toUpperCase()){var li=document.createElement("li");list.appendChild(li),li.appendChild(node)}else frag.removeChild(node)}}finally{Config.debug=debugState}return list}function buildRestart(){return Dialog.create(L10n.get("restartTitle"),"restart").append("<p>".concat(L10n.get("restartMesgPrompt"),'</p><ul class="buttons">')+'<li><button id="restart-ok">'.concat(L10n.get(["restartTextOk","textOk"]),"</button></li>")+'<li><button id="restart-cancel" class="ui-close">'.concat(L10n.get(["restartTextCancel","textCancel"]),"</button></li>")+"</ul>"),jQuery(Dialog.body()).find("#restart-ok").ariaClick({one:!0},(function(){jQuery(document).one(":dialogclosed",(function(){return Engine.restart()})),Dialog.close()})),!0}function buildSaves(){function createFileInput(id,callback){var input=document.createElement("input");return jQuery(input).attr({id:id,type:"file",tabindex:-1,"aria-hidden":!0}).css({display:"block",visibility:"hidden",position:"fixed",left:"-16128px",top:"-16128px",width:"1px",height:"1px"}).on("change",callback),input}function createActionItem(id,classNames,text,label,callback){var $btn=jQuery(document.createElement("button")).attr("id","saves-".concat(id)).text(text);return classNames&&$btn.addClass(classNames),callback?$btn.ariaClick({label:label},callback):$btn.ariaDisabled(!0),jQuery(document.createElement("li")).append($btn)}var browserEnabled=Save.browser.isEnabled();if(!browserEnabled&&!Has.fileAPI)return openAlert(L10n.get("warningNoSaves")),!1;Dialog.create(L10n.get("savesTitle"),"saves");var $dialogBody=jQuery(Dialog.body());if(browserEnabled){jQuery(document.createElement("h2")).text(L10n.get("savesHeaderBrowser")).appendTo($dialogBody),$dialogBody.append(function(){function createButton(id,classNames,kind,index,callback){var text;switch(id){case"delete":text=L10n.get("textDelete");break;case"load":text=L10n.get("textLoad");break;case"save":text=L10n.get("textSave");break;default:throw new Error('buildSaves unknown ID "'.concat(id,'"'))}var $btn=jQuery(document.createElement("button")).attr("id","saves-".concat(id,"-").concat(index)).addClass(id);return classNames&&$btn.addClass(classNames),callback?$btn.ariaClick({label:"".concat(text," ").concat(kind," ").concat(index+1)},(function(){try{callback(index)}catch(ex){openAlert("".concat(ex.message,".</p><p>").concat(L10n.get("textAborting"),"."))}})):$btn.ariaDisabled(!0),$btn}var $tbody=jQuery(document.createElement("tbody"));Save.browser.auto.entries().forEach((function(_ref13){var index=_ref13.index,info=_ref13.info,$tdSlot=jQuery(document.createElement("td")),$tdLoad=jQuery(document.createElement("td")),$tdDesc=jQuery(document.createElement("td")),$tdDele=jQuery(document.createElement("td"));jQuery(document.createElement("div")).text(info.desc).appendTo($tdDesc),jQuery(document.createElement("div")).addClass("details").addClass("datestamp").text("".concat(L10n.get("savesTextBrowserAuto")," ").concat(index+1,"  •  ")).append(info.date?"".concat(new Date(info.date).toLocaleString()):"<em>".concat(L10n.get("savesTextNoDate"),"</em>")).appendTo($tdDesc),$tdLoad.append(createButton("load","ui-close",L10n.get("savesTextBrowserAuto"),index,(function(index){jQuery(document).one(":dialogclosed",(function(){Save.browser.auto.load(index).then(Engine.show,(function(ex){return openAlert("".concat(ex.message.toUpperFirst(),".</p><p>").concat(L10n.get("textAborting"),"."))}))}))}))),$tdDele.append(createButton("delete",null,L10n.get("savesTextBrowserAuto"),index,(function(index){Save.browser.auto.delete(index),buildSaves()}))),jQuery(document.createElement("tr")).append($tdSlot).append($tdLoad).append($tdDesc).append($tdDele).appendTo($tbody)}));var slotAllowed="function"!=typeof Config.saves.isAllowed||Config.saves.isAllowed(Save.Type.Slot);return Save.browser.slot.entries().reduce((function(slots,entry){return slots[entry.index]=entry,slots}),Array.from({length:Config.saves.maxSlotSaves},(function(_,i){return{index:i}}))).forEach((function(_ref14){var index=_ref14.index,info=_ref14.info,$tdSlot=jQuery(document.createElement("td")),$tdLoad=jQuery(document.createElement("td")),$tdDesc=jQuery(document.createElement("td")),$tdDele=jQuery(document.createElement("td"));info?(jQuery(document.createElement("div")).text(info.desc).appendTo($tdDesc),jQuery(document.createElement("div")).addClass("details").addClass("datestamp").text("".concat(L10n.get("savesTextBrowserSlot")," ").concat(index+1,"  •  ")).append(info.date?"".concat(new Date(info.date).toLocaleString()):"<em>".concat(L10n.get("savesTextNoDate"),"</em>")).appendTo($tdDesc),$tdLoad.append(createButton("load","ui-close",L10n.get("savesTextBrowserSlot"),index,(function(index){jQuery(document).one(":dialogclosed",(function(){Save.browser.slot.load(index).then(Engine.show,(function(ex){return openAlert("".concat(ex.message.toUpperFirst(),".</p><p>").concat(L10n.get("textAborting"),"."))}))}))}))),$tdDele.append(createButton("delete",null,L10n.get("savesTextBrowserSlot"),index,(function(index){Save.browser.slot.delete(index),buildSaves()})))):($tdDesc.addClass("empty"),jQuery(document.createElement("div")).text(" ").appendTo($tdDesc),jQuery(document.createElement("div")).addClass("details").addClass("datestamp").text("".concat(L10n.get("savesTextBrowserSlot")," ").concat(index+1)).appendTo($tdDesc),$tdLoad.append(createButton("save",null,L10n.get("savesTextBrowserSlot"),index,index<Config.saves.maxSlotSaves&&slotAllowed?function(index){Save.browser.slot.save(index),buildSaves()}:null)),$tdDele.append(createButton("delete",null,L10n.get("savesTextBrowserSlot"),index))),jQuery(document.createElement("tr")).append($tdSlot).append($tdLoad).append($tdDesc).append($tdDele).appendTo($tbody)})),jQuery(document.createElement("table")).attr("id","saves-list").append($tbody)}());var $slotButtons=jQuery(document.createElement("ul")).addClass("buttons slots").appendTo($dialogBody);if(Has.fileAPI){var slotImportInput=createFileInput("saves-import-handler",(function(ev){Save.disk.import(ev).then(buildSaves,(function(ex){return openAlert("".concat(ex.message.toUpperFirst(),".</p><p>").concat(L10n.get("textAborting"),"."))}))}));$slotButtons.append(createActionItem("export",null,"".concat(L10n.get("textExport"),"…"),L10n.get("savesLabelBrowserExport"),(function(){return Save.disk.export("saves-export-".concat(Story.name))}))).append(createActionItem("import",null,"".concat(L10n.get("textImport"),"…"),L10n.get("savesLabelBrowserImport"),(function(){return slotImportInput.click()}))),jQuery(slotImportInput).appendTo($dialogBody)}$slotButtons.append(createActionItem("clear",null,L10n.get("textClear"),L10n.get("savesLabelBrowserClear"),Save.browser.size>0?function(){Save.browser.clear(),buildSaves()}:null))}if(Has.fileAPI){jQuery(document.createElement("h2")).text(L10n.get("savesHeaderDisk")).appendTo($dialogBody);var $diskButtons=jQuery(document.createElement("ul")).addClass("buttons").appendTo($dialogBody),diskLoadInput=createFileInput("saves-disk-load-handler",(function(ev){jQuery(document).one(":dialogclosed",(function(){Save.disk.load(ev).then(Engine.show,(function(ex){return openAlert("".concat(ex.message.toUpperFirst(),".</p><p>").concat(L10n.get("textAborting"),"."))}))})),Dialog.close()}));$diskButtons.append(createActionItem("disk-save",null,"".concat(L10n.get("textSave"),"…"),L10n.get("savesLabelDiskSave"),"function"!=typeof Config.saves.isAllowed||Config.saves.isAllowed(Save.Type.Disk)?function(){return Save.disk.save(Story.name)}:null)).append(createActionItem("disk-load",null,"".concat(L10n.get("textLoad"),"…"),L10n.get("savesLabelDiskLoad"),(function(){return diskLoadInput.click()}))),jQuery(diskLoadInput).appendTo($dialogBody)}return!0}function buildSettings(){Dialog.create(L10n.get("settingsTitle"),"settings");var $dialogBody=jQuery(Dialog.body());return Setting.forEach((function(control){switch(control.type){case Setting.Types.Header:var _name2=control.name,_id2=createSlug(_name2),$header=jQuery(document.createElement("div")),$heading=jQuery(document.createElement("h2"));return $header.attr("id","header-body-".concat(_id2)).append($heading).appendTo($dialogBody),$heading.attr("id","header-heading-".concat(_id2)).wikiWithOptions({cleanup:!1},_name2),void(control.desc&&jQuery(document.createElement("p")).attr("id","header-desc-".concat(_id2)).wikiWithOptions({cleanup:!1},control.desc).appendTo($header));case Setting.Types.Value:return}var $control,name=control.name,id=createSlug(name),$setting=jQuery(document.createElement("div")),$label=jQuery(document.createElement("label")),$controlBox=jQuery(document.createElement("div"));switch(jQuery(document.createElement("div")).append($label).append($controlBox).appendTo($setting),control.desc&&jQuery(document.createElement("p")).attr("id","setting-desc-".concat(id)).wikiWithOptions({cleanup:!1},control.desc).appendTo($setting),$label.attr({id:"setting-label-".concat(id),for:"setting-control-".concat(id)}).wikiWithOptions({cleanup:!1},control.label),null==Setting.getValue(name)&&Setting.setValue(name,control.default),control.type){case Setting.Types.List:$control=jQuery(document.createElement("select"));for(var i=0,iend=control.list.length;i<iend;++i)jQuery(document.createElement("option")).val(i).text(control.list[i]).appendTo($control);$control.val(control.list.indexOf(Setting.getValue(name))).attr("tabindex",0).on("change",(function(){Setting.setValue(name,control.list[Number(this.value)])}));break;case Setting.Types.Range:($control=jQuery(document.createElement("input"))).attr({type:"range",min:control.min,max:control.max,step:control.step,value:Setting.getValue(name),tabindex:0}).on("change input",(function(){Setting.setValue(name,Number(this.value))})).on("keypress",(function(ev){13===ev.which&&(ev.preventDefault(),triggerEvent("change",$control))}));break;case Setting.Types.Toggle:$control=jQuery(document.createElement("button")),Setting.getValue(name)?$control.addClass("enabled").text(L10n.get("textOn")):$control.text(L10n.get("textOff")),$control.ariaClick((function(){var status=Setting.getValue(name);status?jQuery(this).removeClass("enabled").text(L10n.get("textOff")):jQuery(this).addClass("enabled").text(L10n.get("textOn")),Setting.setValue(name,!status)}))}$control.attr("id","setting-control-".concat(id)).appendTo($controlBox),$setting.attr("id","setting-body-".concat(id)).appendTo($dialogBody)})),$dialogBody.append('<ul class="buttons">'+'<li><button id="settings-ok" class="ui-close">'.concat(L10n.get(["settingsTextOk","textOk"]),"</button></li>")+'<li><button id="settings-reset">'.concat(L10n.get("settingsTextReset"),"</button></li>")+"</ul>").find("#settings-reset").ariaClick({one:!0},(function(){jQuery(document).one(":dialogclosed",(function(){Setting.reset(),window.location.reload()})),Dialog.close()})),!0}function openAlert(message){for(var _Dialog$create$append,_len24=arguments.length,args=new Array(_len24>1?_len24-1:0),_key24=1;_key24<_len24;_key24++)args[_key24-1]=arguments[_key24];(_Dialog$create$append=Dialog.create(L10n.get("alertTitle"),"alert").append("<p>".concat(message,'</p><ul class="buttons">')+'<li><button id="alert-ok" class="ui-close">'.concat(L10n.get(["alertTextOk","textOk"]),"</button></li>")+"</ul>")).open.apply(_Dialog$create$append,args)}function buildJumpto(){console.warn("[DEPRECATED] UI.buildJumpto() is deprecated.");var list=document.createElement("ul");Dialog.create(L10n.get("jumptoTitle"),"jumpto list").append(list);for(var expired=State.expired.length,i=State.size-1;i>=0;--i)if(i!==State.activeIndex){var passage=Story.get(State.history[i].title);passage&&passage.tags.includes("bookmark")&&jQuery(document.createElement("li")).append(jQuery(document.createElement("a")).ariaClick({one:!0},function(index){return function(){return jQuery(document).one(":dialogclosed",(function(){return Engine.goTo(index)}))}}(i)).addClass("ui-close").text("".concat(L10n.get("textTurn")," ").concat(expired+i+1))).appendTo(list)}list.hasChildNodes()||jQuery(list).append("<li><a><em>".concat(L10n.get("jumptoMesgUnavailable"),"</em></a></li>"))}function buildShare(){console.warn("[DEPRECATED] UI.buildShare() is deprecated.");try{Dialog.create(L10n.get("shareTitle"),"share list").append(assembleLinkList("StoryShare"))}catch(ex){return console.error(ex),Alert.error("StoryShare",ex.message),!1}return!0}return Object.preventExtensions(Object.create(null,{assembleLinkList:{value:assembleLinkList},buildRestart:{value:buildRestart},buildSaves:{value:buildSaves},buildSettings:{value:buildSettings},update:{value:function(){triggerEvent(":uiupdate")}},alert:{value:openAlert},restart:{value:function(){buildRestart(),Dialog.open.apply(Dialog,arguments)}},saves:{value:function(){buildSaves(),Dialog.open.apply(Dialog,arguments)}},settings:{value:function(){buildSettings(),Dialog.open.apply(Dialog,arguments)}},buildAutoload:{value:function(){return console.warn("[DEPRECATED] UI.buildAutoload() is deprecated."),Dialog.create(L10n.get("autoloadTitle"),"autoload").append("<p>".concat(L10n.get("autoloadMesgPrompt"),'</p><ul class="buttons">')+'<li><button id="autoload-ok" class="ui-close">'.concat(L10n.get(["autoloadTextOk","textOk"]),"</button></li>")+'<li><button id="autoload-cancel" class="ui-close">'.concat(L10n.get(["autoloadTextCancel","textCancel"]),"</button></li>")+"</ul>"),jQuery(document).one("click.autoload",".ui-close",(function(ev){var isAutoloadOk="autoload-ok"===ev.target.id;jQuery(document).one(":dialogclosed",(function(){new Promise((function(resolve,reject){isAutoloadOk&&resolve(),reject()})).then((function(){return Save.browser.continue()})).catch((function(){Engine.play(Config.passages.start)}))}))})),!0}},buildJumpto:{value:buildJumpto},buildShare:{value:buildShare},jumpto:{value:function(){buildJumpto(),Dialog.open.apply(Dialog,arguments)}},share:{value:function(){buildShare(),Dialog.open.apply(Dialog,arguments)}}}))}(),UIBar=function(){var _$uiBar=null;function stow(noAnimation){var $story;_$uiBar&&!_$uiBar.hasClass("stowed")&&(noAnimation&&(($story=jQuery("#story")).addClass("no-transition"),_$uiBar.addClass("no-transition")),_$uiBar.addClass("stowed"),noAnimation&&setTimeout((function(){$story.removeClass("no-transition"),_$uiBar.removeClass("no-transition")}),Engine.DOM_DELAY));return UIBar}function update(){if(console.warn("[DEPRECATED] UIBar.update() is deprecated."),_$uiBar)return UI.update(),UIBar}return Object.preventExtensions(Object.create(null,{init:{value:function(){if(!document.getElementById("ui-bar")){var toggleLabel,backwardLabel,jumptoLabel,forwardLabel,$backward,$forward,$elems=(toggleLabel=L10n.get("uiBarLabelToggle"),backwardLabel=L10n.get("uiBarLabelBackward"),jumptoLabel=L10n.get("uiBarLabelJumpto"),forwardLabel=L10n.get("uiBarLabelForward"),jQuery(document.createDocumentFragment()).append('<div id="ui-bar" aria-live="polite"><div id="ui-bar-tray">'+'<button id="ui-bar-toggle" tabindex="0" title="'.concat(toggleLabel,'" aria-label="').concat(toggleLabel,'"></button>')+'<div id="ui-bar-history">'+'<button id="history-backward" tabindex="0" title="'.concat(backwardLabel,'" aria-label="').concat(backwardLabel,'"></button>')+'<button id="history-jumpto" tabindex="0" title="'.concat(jumptoLabel,'" aria-label="').concat(jumptoLabel,'"></button>')+'<button id="history-forward" tabindex="0" title="'.concat(forwardLabel,'" aria-label="').concat(forwardLabel,'"></button>')+'</div></div><div id="ui-bar-body"><header id="title" role="banner"><div id="story-banner"></div><h1 id="story-title"></h1><div id="story-subtitle"></div><div id="story-title-separator"></div><p id="story-author"></p></header><div id="story-caption"></div><nav id="menu" role="navigation"><ul id="menu-story"></ul><ul id="menu-core">'+'<li id="menu-item-continue"><a tabindex="0">'.concat(L10n.get("continueTitle"),"</a></li>")+'<li id="menu-item-saves"><a tabindex="0">'.concat(L10n.get("savesTitle"),"</a></li>")+'<li id="menu-item-settings"><a tabindex="0">'.concat(L10n.get("settingsTitle"),"</a></li>")+'<li id="menu-item-restart"><a tabindex="0">'.concat(L10n.get("restartTitle"),"</a></li>")+'<li id="menu-item-share"><a tabindex="0">'.concat(L10n.get("shareTitle"),"</a></li>")+"</ul></nav></div></div>"));_$uiBar=jQuery($elems.find("#ui-bar").get(0)),$elems.insertBefore("body>script#script-sugarcube"),jQuery(document).on(":historyupdate".concat(".ui-bar"),($backward=jQuery("#history-backward"),$forward=jQuery("#history-forward"),function(){$backward.ariaDisabled(State.length<2),$forward.ariaDisabled(State.length===State.size)}))}}},destroy:{value:function(){_$uiBar&&(_$uiBar.hide(),jQuery(document).off(".ui-bar"),jQuery(document.head).find("#style-ui-bar").remove(),_$uiBar.remove(),_$uiBar=null)}},hide:{value:function(){return _$uiBar&&_$uiBar.hide(),UIBar}},isHidden:{value:function(){return _$uiBar&&"none"===_$uiBar.css("display")}},isStowed:{value:function(){return _$uiBar&&_$uiBar.hasClass("stowed")}},show:{value:function(){return _$uiBar&&_$uiBar.show(),UIBar}},start:{value:function(){if(_$uiBar){("boolean"==typeof Config.ui.stowBarInitially?Config.ui.stowBarInitially:jQuery(window).width()<=Config.ui.stowBarInitially)&&stow(!0),jQuery("#ui-bar-toggle").ariaClick({label:L10n.get("uiBarLabelToggle")},(function(){return _$uiBar.toggleClass("stowed")})),Config.history.controls?(jQuery("#history-backward").ariaDisabled(State.length<2).ariaClick({label:L10n.get("uiBarLabelBackward")},(function(){return Engine.backward()})),Story.filter((function(passage){return passage.tags.includes("bookmark")})).length>0?jQuery("#history-jumpto").ariaClick({label:L10n.get("uiBarLabelJumpto")},(function(){return UI.jumpto()})):jQuery("#history-jumpto").remove(),jQuery("#history-forward").ariaDisabled(State.length===State.size).ariaClick({label:L10n.get("uiBarLabelForward")},(function(){return Engine.forward()}))):jQuery("#ui-bar-history").remove();var storyTitleHandler,addUiUpdateHandler=function(handler){return jQuery(document)[Config.ui.updateStoryElements?"on":"one"](":uiupdate".concat(".ui-bar"),handler)},addUpdaterOrRemove=function(selector,passageName){var $el=jQuery(selector);Story.has(passageName)?addUiUpdateHandler((function(){var frag=document.createDocumentFragment();new Wikifier(frag,Story.get(passageName).processText().trim()),$el.empty().append(frag)})):$el.remove()};if(storyTitleHandler=Story.has("StoryDisplayTitle")?function(){return setDisplayTitle(Story.get("StoryDisplayTitle").processText())}:function(){return setDisplayTitle(Story.name,!0)},addUiUpdateHandler(storyTitleHandler),addUpdaterOrRemove("#story-banner","StoryBanner"),addUpdaterOrRemove("#story-subtitle","StorySubtitle"),addUpdaterOrRemove("#story-author","StoryAuthor"),addUpdaterOrRemove("#story-caption","StoryCaption"),Story.has("StoryMenu")){var $menuStory=jQuery("#menu-story");jQuery(document).on(":uiupdate".concat(".ui-bar"),(function(){try{var frag=UI.assembleLinkList("StoryMenu",document.createDocumentFragment());$menuStory.empty().append(frag)}catch(ex){console.error(ex),Alert.error("StoryMenu",ex.message)}}))}else jQuery("#menu-story").remove();Save.browser.size>0?(jQuery("#menu-item-continue a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),Save.browser.continue().then((function(){jQuery(document).off(".menu-item-continue"),jQuery("#menu-item-continue").remove(),Engine.show()}),(function(ex){return UI.alert("".concat(ex.message.toUpperFirst(),".</p><p>").concat(L10n.get("textAborting"),"."))}))})).text(L10n.get("continueTitle")),jQuery(document).on(":passagestart.menu-item-continue",(function(){State.turns>1&&(jQuery(document).off(".menu-item-continue"),jQuery("#menu-item-continue").remove())}))):jQuery("#menu-item-continue").remove(),jQuery("#menu-item-saves a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildSaves(),Dialog.open()})).text(L10n.get("savesTitle")),Setting.isEmpty()?jQuery("#menu-item-settings").remove():jQuery("#menu-item-settings a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildSettings(),Dialog.open()})).text(L10n.get("settingsTitle")),jQuery("#menu-item-restart a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildRestart(),Dialog.open()})).text(L10n.get("restartTitle")),Story.has("StoryShare")?jQuery("#menu-item-share a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildShare(),Dialog.open()})).text(L10n.get("shareTitle")):jQuery("#menu-item-share").remove()}}},stow:{value:stow},unstow:{value:function(noAnimation){var $story;return _$uiBar&&_$uiBar.hasClass("stowed")&&(noAnimation&&(($story=jQuery("#story")).addClass("no-transition"),_$uiBar.addClass("no-transition")),_$uiBar.removeClass("stowed"),noAnimation&&setTimeout((function(){$story.removeClass("no-transition"),_$uiBar.removeClass("no-transition")}),Engine.DOM_DELAY)),UIBar}},setStoryElements:{value:update},update:{value:update}}))}(),DebugBar=function(){var STORAGE_KEY="debug.state",WATCH_LIST_DELAY=200,VAR_LIST_DELAY=500,variableRE=new RegExp("^".concat(Patterns.variable,"$")),numericKeyRE=/^\d+$/,watchList=[],varList=[],watchTimerId=null,listTimerId=null,stowed=!0,$debugBar=null,$watchBody=null,$varDataList=null,$turnSelect=null,$passageDataList=null;function debugBarStow(){disableWatchUpdates(),disableVarListUpdates(),$debugBar.css("right","-".concat($debugBar.outerWidth(),"px")),stowed=!0,updateSession()}function debugBarUnstow(){debugBarWatchIsEnabled()&&enableWatchUpdates(),enableVarListUpdates(),$debugBar.css("right",0),stowed=!1,updateSession()}function debugBarToggle(){stowed?debugBarUnstow():debugBarStow()}function debugBarWatchAdd(varName){variableRE.test(varName)&&(watchList.pushUnique(varName),watchList.sort(),updateWatchBody(),updateVarList(),updateSession())}function debugBarWatchAddAll(){Object.keys(State.variables).map((function(name){return watchList.pushUnique("$".concat(name))})),Object.keys(State.temporary).map((function(name){return watchList.pushUnique("_".concat(name))})),watchList.sort(),updateWatchBody(),updateVarList(),updateSession()}function debugBarWatchClear(){watchList.length=0,$watchBody.empty().append("<div>— ".concat(L10n.get("debugBarMesgNoWatches")," —</div>")),updateWatchBody(),updateVarList(),updateSession()}function debugBarWatchDelete(varName){watchList.deleteFirst(varName),$watchBody.find('tr[data-name="'.concat(varName,'"]')).remove(),updateWatchBody(),updateVarList(),updateSession()}function debugBarWatchDisable(){disableWatchUpdates(),disableWatch(),updateSession()}function debugBarWatchEnable(){enableWatchUpdates(),enableWatch(),updateSession()}function debugBarWatchIsEnabled(){return!$watchBody.attr("hidden")}function debugBarWatchToggle(){$watchBody.attr("hidden")?debugBarWatchEnable():debugBarWatchDisable()}function disableWatch(){$watchBody.attr({"aria-hidden":!0,hidden:"hidden"})}function disableWatchUpdates(){null!==watchTimerId&&(clearInterval(watchTimerId),watchTimerId=null)}function enableWatch(){$watchBody.removeAttr("aria-hidden hidden")}function enableWatchUpdates(){null===watchTimerId&&(watchTimerId=setInterval((function(){return updateWatchBody()}),WATCH_LIST_DELAY))}function disableVarListUpdates(){null!==listTimerId&&(clearInterval(listTimerId),listTimerId=null)}function enableVarListUpdates(){null===listTimerId&&(listTimerId=setInterval((function(){return updateVarList()}),VAR_LIST_DELAY))}function clearSession(){session.delete(STORAGE_KEY)}function updateSession(){session.set(STORAGE_KEY,{stowed:stowed,watchList:watchList,watchEnabled:debugBarWatchIsEnabled(),viewsEnabled:DebugView.isEnabled()})}function updateWatchBody(){if(0!==watchList.length){var $tbody,$rowMap=new Map,$table=jQuery($watchBody.children("table"));$table.length>0?($tbody=jQuery($table.children("tbody"))).children("tr").each((function(_,el){return $rowMap.set(el.getAttribute("data-name"),jQuery(el))})):($table=jQuery(document.createElement("table")),$tbody=jQuery(document.createElement("tbody")),$table.append($tbody),$watchBody.empty().append($table));var delLabel=L10n.get("debugBarLabelWatchDelete"),cursor=$rowMap.size>0?$tbody.children("tr").get(0):null;watchList.forEach((function(varName){var varKey=varName.slice(1),value=toWatchString(("$"===varName[0]?State.variables:State.temporary)[varKey]),$row=$rowMap.get(varName);if($row){var $code=$row.children().children("code");value!==$code.text()&&$code.text(value)}else $row=function(varName,value){var $row=jQuery(document.createElement("tr")),$delBtn=jQuery(document.createElement("button")),$code=jQuery(document.createElement("code"));return $row.attr("data-name",varName),$delBtn.addClass("watch-delete").ariaClick({one:!0,label:delLabel},(function(){return debugBarWatchDelete(varName)})),$code.text(value),jQuery(document.createElement("td")).append($delBtn).appendTo($row),jQuery(document.createElement("td")).text(varName).appendTo($row),jQuery(document.createElement("td")).append($code).appendTo($row),$row}(varName,value),cursor?$row.insertAfter(cursor):$row.appendTo($tbody);cursor=$row.get(0)}))}}function updateVarList(){var names=[].concat(Object.keys(State.variables).map((function(name){return"$".concat(name)})),Object.keys(State.temporary).map((function(name){return"_".concat(name)})));if(0===names.length)return varList.length=0,void $varDataList.empty();if(names.sort().deleteAll(watchList),names.length!==varList.length||!names.every((function(m,i){return m===varList[i]}))){varList=names;var options=document.createDocumentFragment();varList.forEach((function(name){jQuery(document.createElement("option")).val(name).appendTo(options)})),$varDataList.empty().append(options)}}function updateTurnSelect(){for(var histLen=State.size,expLen=State.expired.length,options=document.createDocumentFragment(),i=0;i<histLen;++i)jQuery(document.createElement("option")).val(i).text("".concat(expLen+i+1,". ").concat(State.history[i].title)).appendTo(options);$turnSelect.empty().ariaDisabled(histLen<2).append(options).val(State.activeIndex)}function updatePassageList(){var passages=Object.keys(Story.getNormals()).sort(),options=document.createDocumentFragment();passages.forEach((function(name){jQuery(document.createElement("option")).val(name).appendTo(options)})),$passageDataList.empty().append(options)}function toWatchString(O){if(null===O)return"null";switch(_typeof(O)){case"bigint":case"boolean":case"number":case"symbol":case"undefined":return String(O);case"string":return JSON.stringify(O);case"function":return"Function"}var objType=getToStringTag(O);if("Date"===objType)return"Date {".concat(O.toLocaleString(),"}");if("RegExp"===objType)return"RegExp ".concat(O.toString());var result=[];if(O instanceof Array||O instanceof Set){for(var list=O instanceof Array?O:Array.from(O),i=0,len=list.length;i<len;++i)result.push(Object.hasOwn(list,i)?toWatchString(list[i]):"<empty>");return Object.keys(list).filter((function(key){return!numericKeyRE.test(key)})).forEach((function(key){return result.push("".concat(toWatchString(key),": ").concat(toWatchString(list[key])))})),"".concat(objType,"(").concat(list.length,") [").concat(result.join(", "),"]")}return O instanceof Map?(O.forEach((function(val,key){return result.push("".concat(toWatchString(key)," → ").concat(toWatchString(val)))})),"".concat(objType,"(").concat(O.size,") {").concat(result.join(", "),"}")):(Object.keys(O).forEach((function(key){return result.push("".concat(toWatchString(key),": ").concat(toWatchString(O[key])))})),"".concat(objType," {").concat(result.join(", "),"}"))}return Object.preventExtensions(Object.create(null,{init:{value:function(){if(Config.debug){var barToggleLabel=L10n.get("debugBarLabelToggle"),watchAddLabel=L10n.get("debugBarLabelWatchAdd"),watchAllLabel=L10n.get("debugBarLabelWatchAll"),watchClearLabel=L10n.get("debugBarLabelWatchClear"),watchToggleLabel=L10n.get("debugBarLabelWatchToggle"),viewsToggleLabel=L10n.get("debugBarLabelViewsToggle"),passagePlayLabel=L10n.get("debugBarLabelPassagePlay");jQuery(document.createDocumentFragment()).append('<div id="debug-bar"><div id="debug-bar-watch">'+"<div>— ".concat(L10n.get("debugBarMesgNoWatches")," —</div>")+"</div><div>"+'<label id="debug-bar-watch-label" for="debug-bar-watch-input">'.concat(L10n.get("debugBarTextWatch"),"</label>")+'<input id="debug-bar-watch-input" name="debug-bar-watch-input" type="text" placeholder="'.concat(L10n.get("debugBarLabelWatchPlaceholder"),'" list="debug-bar-var-list" tabindex="0">')+'<datalist id="debug-bar-var-list" aria-hidden="true" hidden="hidden"></datalist>'+'<button id="debug-bar-watch-add" tabindex="0" title="'.concat(watchAddLabel,'" aria-label="').concat(watchAddLabel,'"></button>')+'<button id="debug-bar-watch-all" tabindex="0" title="'.concat(watchAllLabel,'" aria-label="').concat(watchAllLabel,'"></button>')+'<button id="debug-bar-watch-clear" tabindex="0" title="'.concat(watchClearLabel,'" aria-label="').concat(watchClearLabel,'"></button>')+"</div><div>"+'<label id="debug-bar-turn-label" for="debug-bar-turn-select">'.concat(L10n.get("textTurn"),"</label>")+'<select id="debug-bar-turn-select" tabindex="0"></select></div><div>'+'<label id="debug-bar-passage-label" for="debug-bar-passage-input">'.concat(L10n.get("debugBarTextPassage"),"</label>")+'<input id="debug-bar-passage-input" name="debug-bar-passage-input" type="text" placeholder="'.concat(L10n.get("debugBarLabelPassagePlaceholder"),'" list="debug-bar-passage-list" tabindex="0">')+'<datalist id="debug-bar-passage-list" aria-hidden="true" hidden="hidden"></datalist>'+'<button id="debug-bar-passage-play" tabindex="0" title="'.concat(passagePlayLabel,'" aria-label="').concat(passagePlayLabel,'"></button>')+"</div><div>"+'<button id="debug-bar-views-toggle" tabindex="0" title="'.concat(viewsToggleLabel,'" aria-label="').concat(viewsToggleLabel,'">').concat(L10n.get("debugBarTextViews"),"</button>")+'<button id="debug-bar-watch-toggle" tabindex="0" title="'.concat(watchToggleLabel,'" aria-label="').concat(watchToggleLabel,'">').concat(L10n.get("debugBarTextWatch"),"</button>")+"</div>"+'<button id="debug-bar-toggle" tabindex="0" title="'.concat(barToggleLabel,'" aria-label="').concat(barToggleLabel,'"></button>')+'</div><div id="debug-bar-hint"></div>').appendTo("body"),$debugBar=jQuery("#debug-bar"),$watchBody=jQuery($debugBar.find("#debug-bar-watch").get(0)),$varDataList=jQuery($debugBar.find("#debug-bar-var-list").get(0)),$turnSelect=jQuery($debugBar.find("#debug-bar-turn-select").get(0)),$passageDataList=jQuery($debugBar.find("#debug-bar-passage-list").get(0));var $watchInput=jQuery($debugBar.find("#debug-bar-watch-input").get(0)),$watchAdd=jQuery($debugBar.find("#debug-bar-watch-add").get(0)),$watchAll=jQuery($debugBar.find("#debug-bar-watch-all").get(0)),$watchClear=jQuery($debugBar.find("#debug-bar-watch-clear").get(0)),$passageInput=jQuery($debugBar.find("#debug-bar-passage-input").get(0)),$passagePlay=jQuery($debugBar.find("#debug-bar-passage-play").get(0)),$viewsToggle=jQuery($debugBar.find("#debug-bar-views-toggle").get(0)),$watchToggle=jQuery($debugBar.find("#debug-bar-watch-toggle").get(0)),$barToggle=jQuery($debugBar.find("#debug-bar-toggle").get(0));$watchInput.on("sc:debug-watch-add",(function(){debugBarWatchAdd(this.value.trim()),this.value=""})).on("keypress",(function(ev){13===ev.which&&(ev.preventDefault(),triggerEvent("sc:debug-watch-add",$watchInput))})),$watchAdd.ariaClick((function(){return triggerEvent("sc:debug-watch-add",$watchInput)})),$watchAll.ariaClick(debugBarWatchAddAll),$watchClear.ariaClick(debugBarWatchClear),$turnSelect.on("change",(function(){Engine.goTo(Number(this.value))})),$passageInput.on("sc:debug-passage-play",(function(){Engine.play(this.value.trim()),this.value=""})).on("keypress",(function(ev){13===ev.which&&(ev.preventDefault(),triggerEvent("sc:debug-passage-play",$passageInput))})).on("focus",updatePassageList),$passagePlay.ariaClick((function(){return triggerEvent("sc:debug-passage-play",$passageInput)})),$viewsToggle.ariaClick((function(){DebugView.toggle(),updateSession()})),$watchToggle.ariaClick(debugBarWatchToggle),$barToggle.ariaClick(debugBarToggle),jQuery(document).on(":passageend.debug-bar",(function(){updateWatchBody(),updateVarList()})).on(":historyupdate.debug-bar",updateTurnSelect).on(":enginerestart.debug-bar",clearSession)}else jQuery(document.head).find('[id|="style-ui-debug"]').remove()}},isStowed:{value:function(){return stowed}},start:{value:function(){Config.debug&&(function(){if(!session.has(STORAGE_KEY))return!1;var debugState=session.get(STORAGE_KEY);watchList.push.apply(watchList,_toConsumableArray(debugState.watchList)),debugState.watchEnabled?(stowed?disableWatchUpdates():enableWatchUpdates(),enableWatch()):(disableWatchUpdates(),disableWatch());debugState.viewsEnabled?DebugView.enable():DebugView.disable();(stowed=debugState.stowed)?(disableVarListUpdates(),debugBarStow()):(enableVarListUpdates(),debugBarUnstow());return!0}()||(debugBarStow(),DebugView.enable(),enableWatchUpdates(),enableWatch()),updateVarList(),updateTurnSelect())}},stow:{value:debugBarStow},toggle:{value:debugBarToggle},unstow:{value:debugBarUnstow},watch:{value:Object.preventExtensions(Object.create(null,{add:{value:debugBarWatchAdd},all:{value:debugBarWatchAddAll},clear:{value:debugBarWatchClear},delete:{value:debugBarWatchDelete},disable:{value:debugBarWatchDisable},enable:{value:debugBarWatchEnable},isEnabled:{value:debugBarWatchIsEnabled},toggle:{value:debugBarWatchToggle}}))}}))}(),LoadScreen=function(){var _locks=new Set,_autoId=0;function loadScreenHide(){jQuery(document.documentElement).removeAttr("data-init")}function loadScreenShow(){jQuery(document.documentElement).attr("data-init","loading")}return Object.preventExtensions(Object.create(null,{init:{value:function(){jQuery(document).on("readystatechange.SugarCube",(function(){_locks.size>0||("complete"===document.readyState?"loading"===jQuery(document.documentElement).attr("data-init")&&(Config.loadDelay>0?setTimeout((function(){0===_locks.size&&loadScreenHide()}),Math.max(Engine.DOM_DELAY,Config.loadDelay)):loadScreenHide()):loadScreenShow())}))}},clear:{value:function(){jQuery(document).off("readystatechange.SugarCube"),_locks.clear(),loadScreenHide()}},hide:{value:loadScreenHide},show:{value:loadScreenShow},lock:{value:function(){return++_autoId,_locks.add(_autoId),loadScreenShow(),_autoId}},unlock:{value:function(id){if(null==id)throw new Error("LoadScreen.unlock called with a null or undefined ID");_locks.has(id)&&_locks.delete(id),0===_locks.size&&triggerEvent("readystatechange")}},size:{get:function(){return _locks.size}}}))}(),Util=Object.preventExtensions(Object.create(null,{charAndPosAt:{value:function(){return console.warn("[DEPRECATED] Util.charAndPosAt() is deprecated."),charAndPosAt.apply(void 0,arguments)}},escape:{value:function(){return console.warn("[DEPRECATED] Util.escape() is deprecated."),encodeEntities.apply(void 0,arguments)}},escapeMarkup:{value:function(){return console.warn("[DEPRECATED] Util.escapeMarkup() is deprecated."),encodeMarkup.apply(void 0,arguments)}},fromCssProperty:{value:function(){return console.warn("[DEPRECATED] Util.fromCssProperty() is deprecated."),cssPropToDOMProp.apply(void 0,arguments)}},fromCssTime:{value:function(){return console.warn("[DEPRECATED] Util.fromCssTime() is deprecated."),cssTimeToMS.apply(void 0,arguments)}},getType:{value:function(){return console.warn("[DEPRECATED] Util.getType() is deprecated."),getTypeOf.apply(void 0,arguments)}},hasMediaQuery:{value:function(){return console.warn("[DEPRECATED] Util.hasMediaQuery() is deprecated."),hasMediaQuery.apply(void 0,arguments)}},newExceptionFrom:{value:function(){return console.warn("[DEPRECATED] Util.newExceptionFrom() is deprecated."),exceptionFrom.apply(void 0,arguments)}},now:{value:function(){return console.warn("[DEPRECATED] Util.now() is deprecated."),now.apply(void 0,arguments)}},parseUrl:{value:function(){return console.warn("[DEPRECATED] Util.parseUrl() is deprecated."),parseURL.apply(void 0,arguments)}},sameValueZero:{value:function(){return console.warn("[DEPRECATED] Util.sameValueZero() is deprecated."),sameValueZero.apply(void 0,arguments)}},sanitizeFilename:{value:function(){return console.warn("[DEPRECATED] Util.sanitizeFilename() is deprecated."),createFilename.apply(void 0,arguments)}},scrubEventKey:{value:function(){return console.warn("[DEPRECATED] Util.scrubEventKey() is deprecated."),scrubEventKey.apply(void 0,arguments)}},slugify:{value:function(){return console.warn("[DEPRECATED] Util.slugify() is deprecated."),createSlug.apply(void 0,arguments)}},toCssTime:{value:function(){return console.warn("[DEPRECATED] Util.toCssTime() is deprecated."),msToCSSTime.apply(void 0,arguments)}},toEnum:{value:function(){return console.warn("[DEPRECATED] Util.toEnum() is deprecated."),enumFrom.apply(void 0,arguments)}},toStringTag:{value:function(){return console.warn("[DEPRECATED] Util.toStringTag() is deprecated."),getToStringTag.apply(void 0,arguments)}},unescape:{value:function(){return console.warn("[DEPRECATED] Util.unescape() is deprecated."),decodeEntities.apply(void 0,arguments)}}})),version=(semVerRE=/^[Vv]?(\d+)(?:\.(\d+)(?:\.(\d+)(?:-[0-9A-Za-z.-]+)?(?:\+[0-9A-Za-z.-]+)?)?)?$/,Object.preventExtensions(Object.create(null,{name:{value:"SugarCube"},major:{value:2},minor:{value:37},patch:{value:3},prerelease:{value:""},build:{value:10338},date:{value:new Date("2024-07-27T00:45:20.724Z")},isOk:{value:function(semver){if("string"!=typeof semver)throw new Error("version.isOk semver parameter must be a string (received: ".concat(_typeof(semver),")"));var trimmed=semver.trim();if(""===trimmed)throw new Error("version.isOk semver parameter must not be empty");var match=semVerRE.exec(trimmed);if(!match)throw new Error("version.isOk semver parameter is invalid (format: [v]MAJOR[.MINOR[.PATCH[-PRERELEASE][+BUILD]]]; received: ".concat(trimmed));var major=Number(match[1]),minor=Number(match[2])||0,patch=Number(match[3])||0;return major===this.major&&(minor<this.minor||minor===this.minor&&patch<=this.patch)}},long:{value:function(){return"".concat(this.name," v").concat(this.toString()," (").concat(this.date.toUTCString(),")")}},short:{value:function(){var prerelease=this.prerelease?"-".concat(this.prerelease):"";return"".concat(this.name," (v").concat(this.major,".").concat(this.minor,".").concat(this.patch).concat(prerelease,")")}},toString:{value:function(){var prerelease=this.prerelease?"-".concat(this.prerelease):"";return"".concat(this.major,".").concat(this.minor,".").concat(this.patch).concat(prerelease,"+").concat(this.build)}},title:{value:"SugarCube"}}))),semVerRE,TempState={},session=null,settings=Setting.create(),setup={},storage=null,macros={},postdisplay={},postrender={},predisplay={},prehistory={},prerender={};Object.defineProperty(window,"SugarCube",{value:Object.seal(Object.assign(Object.create(null),{Browser:Browser,Config:Config,Dialog:Dialog,Engine:Engine,Fullscreen:Fullscreen,Has:Has,L10n:L10n,Macro:Macro,Passage:Passage,Save:Save,Scripting:Scripting,Setting:Setting,SimpleAudio:SimpleAudio,State:State,Story:Story,UI:UI,UIBar:UIBar,DebugBar:DebugBar,Util:Util,Visibility:Visibility,Wikifier:Wikifier,session:session,settings:settings,setup:setup,storage:storage,version:version}))}),jQuery((function(){var lockId=LoadScreen.lock();LoadScreen.init(),document.normalize&&document.normalize(),new Promise((function(resolve){Story.init();try{SugarCube.storage=storage=SimpleStore.create(Story.id,!0),SugarCube.session=session=SimpleStore.create(Story.id,!1)}catch(ex){throw new Error(L10n.get("warningNoStorage"))}Dialog.init(),UIBar.init(),Engine.init(),Outliner.init(),Engine.runUserScripts(),L10n.init(),session.has("rcWarn")||"cookie"!==storage.name||(session.set("rcWarn",1),window.alert(L10n.get("warningNoWebStorage"))),Save.init(),Setting.init(),Macro.init(),DebugBar.init();var $window=jQuery(window),vpReadyId=setInterval((function(){$window.width()&&LoadScreen.size<=1&&(clearInterval(vpReadyId),resolve())}),Engine.DOM_DELAY)})).then((function(){Engine.runUserInit(),UIBar.start(),Engine.start(),DebugBar.start(),triggerEvent(":storyready"),setTimeout((function(){return LoadScreen.unlock(lockId)}),2*Engine.DOM_DELAY)})).catch((function(ex){return console.error(ex),LoadScreen.clear(),Alert.fatal(null,ex.message,ex)}))}))})(window,window.document,jQuery);}
	</script>
</body>
</html>
